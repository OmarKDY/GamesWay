/*
 Platform.js <https://mths.be/platform>
 Copyright 2014-2018 Benjamin Tan <https://bnjmnt4n.now.sh/>
 Copyright 2011-2013 John-David Dalton
 Available under MIT license <https://mths.be/mit>
*/
(function(){var a="undefined"!==typeof window&&"undefined"!==typeof window.document?window.document:{},g="undefined"!==typeof module&&module.exports,d=function(){for(var f,e=["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror".split(" "),"webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror".split(" "),"webkitRequestFullScreen webkitCancelFullScreen webkitCurrentFullScreenElement webkitCancelFullScreen webkitfullscreenchange webkitfullscreenerror".split(" "),
"mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror".split(" "),"msRequestFullscreen msExitFullscreen msFullscreenElement msFullscreenEnabled MSFullscreenChange MSFullscreenError".split(" ")],c=0,l=e.length,m={};c<l;c++)if((f=e[c])&&f[1]in a){for(c=0;c<f.length;c++)m[e[0][c]]=f[c];return m}return!1}(),b={change:d.fullscreenchange,error:d.fullscreenerror},k={request:function(f){return new Promise(function(e,c){var l=function(){this.off("change",
l);e()}.bind(this);this.on("change",l);f=f||a.documentElement;Promise.resolve(f[d.requestFullscreen]())["catch"](c)}.bind(this))},exit:function(){return new Promise(function(f,e){if(this.isFullscreen){var c=function(){this.off("change",c);f()}.bind(this);this.on("change",c);Promise.resolve(a[d.exitFullscreen]())["catch"](e)}else f()}.bind(this))},toggle:function(f){return this.isFullscreen?this.exit():this.request(f)},onchange:function(f){this.on("change",f)},onerror:function(f){this.on("error",f)},
on:function(f,e){var c=b[f];c&&a.addEventListener(c,e,!1)},off:function(f,e){var c=b[f];c&&a.removeEventListener(c,e,!1)},raw:d};d?(Object.defineProperties(k,{isFullscreen:{get:function(){return!!a[d.fullscreenElement]}},element:{enumerable:!0,get:function(){return a[d.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return!!a[d.fullscreenEnabled]}}}),g?module.exports=k:window.screenfull=k):g?module.exports={isEnabled:!1}:window.screenfull={isEnabled:!1}})();
(function(){function a(h){h=String(h);return h.charAt(0).toUpperCase()+h.slice(1)}function g(h,u){var C=-1,w=h?h.length:0;if("number"==typeof w&&-1<w&&w<=A)for(;++C<w;)u(h[C],C,h);else b(h,u)}function d(h){h=String(h).replace(/^ +| +$/g,"");return/^(?:webOS|i(?:OS|P))/.test(h)?h:a(h)}function b(h,u){for(var C in h)y.call(h,C)&&u(h[C],C,h)}function k(h){return null==h?a(h):B.call(h).slice(8,-1)}function f(h,u){var C=null!=h?typeof h[u]:"number";return!/^(?:boolean|number|string|undefined)$/.test(C)&&
("object"==C?!!h[u]:!0)}function e(h){return String(h).replace(/([ -])(?!$)/g,"$1?")}function c(h,u){var C=null;g(h,function(w,x){C=u(C,w,x,h)});return C}function l(h){function u(T){return c(T,function(O,M){var X=M.pattern||e(M);!O&&(O=RegExp("\\b"+X+" *\\d+[.\\w_]*","i").exec(h)||RegExp("\\b"+X+" *\\w+-[\\w]*","i").exec(h)||RegExp("\\b"+X+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(h))&&((O=String(M.label&&!RegExp(X,"i").test(M.label)?M.label:O).split("/"))[1]&&!/[\d.]+/.test(O[0])&&(O[0]+=
" "+O[1]),M=M.label||M,O=d(O[0].replace(RegExp(X,"i"),M).replace(RegExp("; *(?:"+M+"[_-])?","i")," ").replace(RegExp("("+M+")[-_.]?(\\w)","i"),"$1 $2")));return O})}function C(T){return c(T,function(O,M){return O||(RegExp(M+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(h)||0)[1]||null})}var w=v,x=h&&"object"==typeof h&&"String"!=k(h);x&&(w=h,h=null);var D=w.navigator||{},n=D.userAgent||"";h||(h=n);var H=x?!!D.likeChrome:/\bChrome\b/.test(h)&&!/internal|\n/i.test(B.toString()),
L=x?"Object":"ScriptBridgingProxyObject",R=x?"Object":"Environment",G=x&&w.java?"JavaPackage":k(w.java),J=x?"Object":"RuntimeObject";R=(G=/\bJava/.test(G)&&w.java)&&k(w.environment)==R;var N=G?"a":"\u03b1",P=G?"b":"\u03b2",U=w.document||{},Q=w.operamini||w.opera,V=p.test(V=x&&Q?Q["[[Class]]"]:k(Q))?V:Q=null,r,S=h;x=[];var W=null,Z=h==n;n=Z&&Q&&"function"==typeof Q.version&&Q.version();var K=function(T){return c(T,function(O,M){return O||RegExp("\\b"+(M.pattern||e(M))+"\\b","i").exec(h)&&(M.label||
M)})}([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),z=function(T){return c(T,function(O,M){return O||RegExp("\\b"+(M.pattern||e(M))+"\\b","i").exec(h)&&(M.label||M)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser",
"PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},
{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),I=u([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad",
"iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),Y=function(T){return c(T,function(O,M,X){return O||(M[I]||M[/^[a-z]+(?: +[a-z]+\b)*/i.exec(I)]||RegExp("\\b"+e(X)+"(?:\\b|\\w*\\d)","i").exec(h))&&X})}({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},
"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}}),F=function(T){return c(T,function(O,M){var X=M.pattern||e(M);if(!O&&(O=RegExp("\\b"+X+"(?:/[\\d.]+|[ \\w.]*)","i").exec(h))){var aa=O,ba=M.label||M,ca={"10.0":"10","6.4":"10 Technical Preview",
"6.3":"8.1","6.2":"8","6.1":"Server 2008 R2 / 7","6.0":"Server 2008 / Vista","5.2":"Server 2003 / XP 64-bit","5.1":"XP","5.01":"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};X&&ba&&/^Win/i.test(aa)&&!/^Windows Phone /i.test(aa)&&(ca=ca[/[\d.]+$/.exec(aa)])&&(aa="Windows "+ca);aa=String(aa);X&&ba&&(aa=aa.replace(RegExp(X,"i"),ba));O=aa=d(aa.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,
"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}return O})}(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X",
"Macintosh","Mac","Windows 98;","Windows "]);K&&(K=[K]);Y&&!I&&(I=u([Y]));if(r=/\bGoogle TV\b/.exec(I))I=r[0];/\bSimulator\b/i.test(h)&&(I=(I?I+" ":"")+"Simulator");"Opera Mini"==z&&/\bOPiOS\b/.test(h)&&x.push("running in Turbo/Uncompressed mode");"IE"==z&&/\blike iPhone OS\b/.test(h)?(r=l(h.replace(/like iPhone OS/,"")),Y=r.manufacturer,I=r.product):/^iP/.test(I)?(z||(z="Safari"),F="iOS"+((r=/ OS ([\d_]+)/i.exec(h))?" "+r[1].replace(/_/g,"."):"")):"Konqueror"!=z||/buntu/i.test(F)?Y&&"Google"!=Y&&
(/Chrome/.test(z)&&!/\bMobile Safari\b/i.test(h)||/\bVita\b/.test(I))||/\bAndroid\b/.test(F)&&/^Chrome/.test(z)&&/\bVersion\//i.test(h)?(z="Android Browser",F=/\bAndroid\b/.test(F)?F:"Android"):"Silk"==z?(/\bMobi/i.test(h)||(F="Android",x.unshift("desktop mode")),/Accelerated *= *true/i.test(h)&&x.unshift("accelerated")):"PaleMoon"==z&&(r=/\bFirefox\/([\d.]+)\b/.exec(h))?x.push("identifying as Firefox "+r[1]):"Firefox"==z&&(r=/\b(Mobile|Tablet|TV)\b/i.exec(h))?(F||(F="Firefox OS"),I||(I=r[1])):!z||
(r=!/\bMinefield\b/i.test(h)&&/\b(?:Firefox|Safari)\b/.exec(z))?(z&&!I&&/[\/,]|^[^(]+?\)/.test(h.slice(h.indexOf(r+"/")+8))&&(z=null),(r=I||Y||F)&&(I||Y||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(F))&&(z=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(F)?F:r)+" Browser")):"Electron"==z&&(r=(/\bChrome\/([\d.]+)\b/.exec(h)||0)[1])&&x.push("Chromium "+r):F="Kubuntu";n||(n=C(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",e(z),
"(?:Firefox|Minefield|NetFront)"]));if(r="iCab"==K&&3<parseFloat(n)&&"WebKit"||/\bOpera\b/.test(z)&&(/\bOPR\b/.test(h)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(h)&&!/^(?:Trident|EdgeHTML)$/.test(K)&&"WebKit"||!K&&/\bMSIE\b/i.test(h)&&("Mac OS"==F?"Tasman":"Trident")||"WebKit"==K&&/\bPlayStation\b(?! Vita\b)/i.test(z)&&"NetFront")K=[r];"IE"==z&&(r=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(h)||0)[1])?(z+=" Mobile",F="Windows Phone "+(/\+$/.test(r)?r:r+".x"),x.unshift("desktop mode")):/\bWPDesktop\b/i.test(h)?
(z="IE Mobile",F="Windows Phone 8.x",x.unshift("desktop mode"),n||(n=(/\brv:([\d.]+)/.exec(h)||0)[1])):"IE"!=z&&"Trident"==K&&(r=/\brv:([\d.]+)/.exec(h))&&(z&&x.push("identifying as "+z+(n?" "+n:"")),z="IE",n=r[1]);if(Z){if(f(w,"global"))if(G&&(r=G.lang.System,S=r.getProperty("os.arch"),F=F||r.getProperty("os.name")+" "+r.getProperty("os.version")),R){try{n=w.require("ringo/engine").version.join("."),z="RingoJS"}catch(T){(r=w.system)&&r.global.system==w.system&&(z="Narwhal",F||(F=r[0].os||null))}z||
(z="Rhino")}else"object"==typeof w.process&&!w.process.browser&&(r=w.process)&&("object"==typeof r.versions&&("string"==typeof r.versions.electron?(x.push("Node "+r.versions.node),z="Electron",n=r.versions.electron):"string"==typeof r.versions.nw&&(x.push("Chromium "+n,"Node "+r.versions.node),z="NW.js",n=r.versions.nw)),z||(z="Node.js",S=r.arch,F=r.platform,n=(n=/[\d.]+/.exec(r.version))?n[0]:null));else k(r=w.runtime)==L?(z="Adobe AIR",F=r.flash.system.Capabilities.os):k(r=w.phantom)==J?(z="PhantomJS",
n=(r=r.version||null)&&r.major+"."+r.minor+"."+r.patch):"number"==typeof U.documentMode&&(r=/\bTrident\/(\d+)/i.exec(h))?(n=[n,U.documentMode],(r=+r[1]+4)!=n[1]&&(x.push("IE "+n[1]+" mode"),K&&(K[1]=""),n[1]=r),n="IE"==z?String(n[1].toFixed(1)):n[0]):"number"==typeof U.documentMode&&/^(?:Chrome|Firefox)\b/.test(z)&&(x.push("masking as "+z+" "+n),z="IE",n="11.0",K=["Trident"],F="Windows");F=F&&d(F)}n&&(r=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(n)||/(?:alpha|beta)(?: ?\d)?/i.exec(h+";"+(Z&&D.appMinorVersion))||
/\bMinefield\b/i.test(h)&&"a")&&(W=/b/i.test(r)?"beta":"alpha",n=n.replace(RegExp(r+"\\+?$"),"")+("beta"==W?P:N)+(/\d+\+?/.exec(r)||""));if("Fennec"==z||"Firefox"==z&&/\b(?:Android|Firefox OS)\b/.test(F))z="Firefox Mobile";else if("Maxthon"==z&&n)n=n.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(I))"Xbox 360"==I&&(F=null),"Xbox 360"==I&&/\bIEMobile\b/.test(h)&&x.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(z)&&(!z||I||/Browser|Mobi/.test(z))||"Windows CE"!=F&&!/Mobi/i.test(h))if("IE"==
z&&Z)try{null===w.external&&x.unshift("platform preview")}catch(T){x.unshift("embedded")}else(/\bBlackBerry\b/.test(I)||/\bBB10\b/.test(h))&&(r=(RegExp(I.replace(/ +/g," *")+"/([.\\d]+)","i").exec(h)||0)[1]||n)?(r=[r,/BB10/.test(h)],F=(r[1]?(I=null,Y="BlackBerry"):"Device Software")+" "+r[0],n=null):this!=b&&"Wii"!=I&&(Z&&Q||/Opera/.test(z)&&/\b(?:MSIE|Firefox)\b/i.test(h)||"Firefox"==z&&/\bOS X (?:\d+\.){2,}/.test(F)||"IE"==z&&(F&&!/^Win/.test(F)&&5.5<n||/\bWindows XP\b/.test(F)&&8<n||8==n&&!/\bTrident\b/.test(h)))&&
!p.test(r=l.call(b,h.replace(p,"")+";"))&&r.name&&(r="ing as "+r.name+((r=r.version)?" "+r:""),p.test(z)?(/\bIE\b/.test(r)&&"Mac OS"==F&&(F=null),r="identify"+r):(r="mask"+r,z=V?d(V.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(r)&&(F=null),Z||(n=null)),K=["Presto"],x.push(r));else z+=" Mobile";if(r=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(h)||0)[1]){r=[parseFloat(r.replace(/\.(\d)$/,".0$1")),r];if("Safari"==z&&"+"==r[1].slice(-1))z="WebKit Nightly",W="alpha",n=r[1].slice(0,-1);else if(n==
r[1]||n==(r[2]=(/\bSafari\/([\d.]+\+?)/i.exec(h)||0)[1]))n=null;r[1]=(/\bChrome\/([\d.]+)/i.exec(h)||0)[1];537.36==r[0]&&537.36==r[2]&&28<=parseFloat(r[1])&&"WebKit"==K&&(K=["Blink"]);Z&&(H||r[1])?(K&&(K[1]="like Chrome"),r=r[1]||(r=r[0],530>r?1:532>r?2:532.05>r?3:533>r?4:534.03>r?5:534.07>r?6:534.1>r?7:534.13>r?8:534.16>r?9:534.24>r?10:534.3>r?11:535.01>r?12:535.02>r?"13+":535.07>r?15:535.11>r?16:535.19>r?17:536.05>r?18:536.1>r?19:537.01>r?20:537.11>r?"21+":537.13>r?23:537.18>r?24:537.24>r?25:537.36>
r?26:"Blink"!=K?"27":"28")):(K&&(K[1]="like Safari"),r=(r=r[0],400>r?1:500>r?2:526>r?3:533>r?4:534>r?"4+":535>r?5:537>r?6:538>r?7:601>r?8:"8"));K&&(K[1]+=" "+(r+="number"==typeof r?".x":/[.+]/.test(r)?"":"+"));"Safari"==z&&(!n||45<parseInt(n))&&(n=r)}"Opera"==z&&(r=/\bzbov|zvav$/.exec(F))?(z+=" ",x.unshift("desktop mode"),"zvav"==r?(z+="Mini",n=null):z+="Mobile",F=F.replace(RegExp(" *"+r+"$"),"")):"Safari"==z&&/\bChrome\b/.exec(K&&K[1])&&(x.unshift("desktop mode"),z="Chrome Mobile",n=null,/\bOS X\b/.test(F)?
(Y="Apple",F="iOS 4.3+"):F=null);n&&0==n.indexOf(r=/[\d.]+$/.exec(F))&&-1<h.indexOf("/"+r+"-")&&(F=String(F.replace(r,"")).replace(/^ +| +$/g,""));K&&!/\b(?:Avant|Nook)\b/.test(z)&&(/Browser|Lunascape|Maxthon/.test(z)||"Safari"!=z&&/^iOS/.test(F)&&/\bSafari\b/.test(K[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(z)&&K[1])&&(r=K[K.length-1])&&x.push(r);x.length&&(x=["("+x.join("; ")+")"]);Y&&I&&0>I.indexOf(Y)&&x.push("on "+Y);I&&x.push((/^on /.test(x[x.length-
1])?"":"on ")+I);if(F){var da=(r=/ ([\d.+]+)$/.exec(F))&&"/"==F.charAt(F.length-r[0].length-1);F={architecture:32,family:r&&!da?F.replace(r[0],""):F,version:r?r[1]:null,toString:function(){var T=this.version;return this.family+(T&&!da?" "+T:"")+(64==this.architecture?" 64-bit":"")}}}(r=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(S))&&!/\bi686\b/i.test(S)?(F&&(F.architecture=64,F.family=F.family.replace(RegExp(" *"+r),"")),z&&(/\bWOW64\b/i.test(h)||Z&&/\w(?:86|32)$/.test(D.cpuClass||D.platform)&&!/\bWin64; x64\b/i.test(h))&&
x.unshift("32-bit")):F&&/^OS X/.test(F.family)&&"Chrome"==z&&39<=parseFloat(n)&&(F.architecture=64);h||(h=null);w={};w.description=h;w.layout=K&&K[0];w.manufacturer=Y;w.name=z;w.prerelease=W;w.product=I;w.ua=h;w.version=z&&n;w.os=F||{architecture:null,family:null,version:null,toString:function(){return"null"}};w.parse=l;w.toString=function(){return this.description||""};w.version&&x.unshift(n);w.name&&x.unshift(z);F&&z&&(F!=String(F).split(" ")[0]||F!=z.split(" ")[0]&&!I)&&x.push(I?"("+F+")":"on "+
F);x.length&&(w.description=x.join(" "));return w}var m={"function":!0,object:!0},v=m[typeof window]&&window||this,q=m[typeof exports]&&exports;m=m[typeof module]&&module&&!module.nodeType&&module;var t=q&&m&&"object"==typeof global&&global;!t||t.global!==t&&t.window!==t&&t.self!==t||(v=t);var A=Math.pow(2,53)-1,p=/\bOpera/;t=Object.prototype;var y=t.hasOwnProperty,B=t.toString,E=l();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(v.platform=E,define(function(){return E})):q&&
m?b(E,function(h,u){q[u]=h}):v.platform=E}).call(this);
function buildIOSMeta(){for(var a=[{name:"viewport",content:"width=device-width, height=device-height, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"},{name:"apple-mobile-web-app-capable",content:"yes"},{name:"apple-mobile-web-app-status-bar-style",content:"black"}],g=0;g<a.length;g++){var d=document.createElement("meta");d.name=a[g].name;d.content=a[g].content;var b=window.document.head.querySelector('meta[name="'+d.name+'"]');b&&b.parentNode.removeChild(b);window.document.head.appendChild(d)}}
function hideIOSFullscreenPanel(){jQuery(".xxx-ios-fullscreen-message").css("display","none");jQuery(".xxx-ios-fullscreen-scroll").css("display","none");jQuery(".xxx-game-iframe-full").removeClass("xxx-game-iframe-iphone-se")}function buildIOSFullscreenPanel(){jQuery("body").append('<div class="xxx-ios-fullscreen-message"><div class="xxx-ios-fullscreen-swipe"></div></div><div class="xxx-ios-fullscreen-scroll"></div>')}
function showIOSFullscreenPanel(){jQuery(".xxx-ios-fullscreen-message").css("display","block");jQuery(".xxx-ios-fullscreen-scroll").css("display","block")}
function __iosResize(){window.scrollTo(0,0);console.log(window.devicePixelRatio);console.log(window.innerWidth);console.log(window.innerHeight);if("iPhone"===platform.product)switch(window.devicePixelRatio){case 2:switch(window.innerWidth){case 568:320!==window.innerHeight&&jQuery(".xxx-game-iframe-full").addClass("xxx-game-iframe-iphone-se");break;case 667:375===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();break;case 808:414===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();
break;default:hideIOSFullscreenPanel()}break;case 3:switch(window.innerWidth){case 736:414===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();break;case 724:375===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();break;case 808:414===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();break;default:hideIOSFullscreenPanel()}break;default:hideIOSFullscreenPanel()}}function iosResize(){__iosResize();setTimeout(function(){__iosResize()},500)}
function iosInIframe(){try{return window.self!==window.top}catch(a){return!0}}function isIOSLessThen13(){var a=platform.os,g=a.family.toLowerCase();a=parseFloat(a.version);return"ios"===g&&13>a?!0:!1}$(document).ready(function(){platform&&"iPhone"===platform.product&&"safari"===platform.name.toLowerCase()&&isIOSLessThen13()&&!iosInIframe()&&(buildIOSFullscreenPanel(),buildIOSMeta())});
jQuery(window).resize(function(){platform&&"iPhone"===platform.product&&"safari"===platform.name.toLowerCase()&&isIOSLessThen13()&&!iosInIframe()&&iosResize()});var s_iScaleFactor=1,s_bIsIphone=!1,s_iOffsetX,s_iOffsetY,s_bFocus=!0;
(function(a){(jQuery.browser=jQuery.browser||{}).mobile=/android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(ad|hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|tablet|treo|up\.(browser|link)|vodafone|wap|webos|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(a.substr(0,
4))})(navigator.userAgent||navigator.vendor||window.opera);$(window).resize(function(){sizeHandler()});function NotImplementedError(a){this.name="NotImplementedError";this.message=a||""}NotImplementedError.prototype=Error.prototype;function error(a){throw{name:"NotImplementedError",message:a};}function trace(a){console.log(a)}window.addEventListener("orientationchange",onOrientationChange);function onOrientationChange(){sizeHandler()}
function ifArrayContainsValue(a,g){for(var d=0;d<a.length;d++)if(a[d]===g)return!0;return!1}
function getSize(a){var g=a.toLowerCase(),d=window.document,b=d.documentElement;if(void 0===window["inner"+a])a=b["client"+a];else if(window["inner"+a]!=b["client"+a]){var k=d.createElement("body");k.id="vpw-test-b";k.style.cssText="overflow:scroll";var f=d.createElement("div");f.id="vpw-test-d";f.style.cssText="position:absolute;top:-1000px";f.innerHTML="<style>@media("+g+":"+b["client"+a]+"px){body#vpw-test-b div#vpw-test-d{"+g+":7px!important}}</style>";k.appendChild(f);b.insertBefore(k,d.head);
a=7==f["offset"+a]?b["client"+a]:window["inner"+a];b.removeChild(k)}else a=window["inner"+a];return a}
function sizeHandler(){window.scrollTo(0,1);if($("#canvas")){var a=null!==platform.name&&"safari"===platform.name.toLowerCase()?getIOSWindowHeight():getSize("Height");var g=getSize("Width");s_bFocus&&_checkOrientation(g,a);var d=Math.min(a/CANVAS_HEIGHT,g/CANVAS_WIDTH),b=Math.round(CANVAS_WIDTH*d);d=Math.round(CANVAS_HEIGHT*d);if(d<a){var k=a-d;d+=k;b+=CANVAS_WIDTH/CANVAS_HEIGHT*k}else b<g&&(k=g-b,b+=k,d+=CANVAS_HEIGHT/CANVAS_WIDTH*k);k=a/2-d/2;var f=g/2-b/2,e=CANVAS_WIDTH/b;if(f*e<-EDGEBOARD_X||
k*e<-EDGEBOARD_Y)d=Math.min(a/(CANVAS_HEIGHT-2*EDGEBOARD_Y),g/(CANVAS_WIDTH-2*EDGEBOARD_X)),b=Math.round(CANVAS_WIDTH*d),d=Math.round(CANVAS_HEIGHT*d),k=(a-d)/2,f=(g-b)/2,e=CANVAS_WIDTH/b;s_iOffsetX=-1*f*e;s_iOffsetY=-1*k*e;0<=k&&(s_iOffsetY=0);0<=f&&(s_iOffsetX=0);null!==s_oInterface&&s_oInterface.refreshButtonPos(s_iOffsetX,s_iOffsetY);null!==s_oLevelChoose&&s_oLevelChoose.refreshButtonPos(s_iOffsetX,s_iOffsetY);null!==s_oMenu&&s_oMenu.refreshButtonPos(s_iOffsetX,s_iOffsetY);s_bIsIphone?(canvas=
document.getElementById("canvas"),s_oStage.canvas.width=2*b,s_oStage.canvas.height=2*d,canvas.style.width=b+"px",canvas.style.height=d+"px",s_iScaleFactor=2*Math.min(b/CANVAS_WIDTH,d/CANVAS_HEIGHT),s_oStage.scaleX=s_oStage.scaleY=s_iScaleFactor):s_bMobile||isChrome()?($("#canvas").css("width",b+"px"),$("#canvas").css("height",d+"px")):s_oStage&&(s_oStage.canvas.width=b,s_oStage.canvas.height=d,s_iScaleFactor=Math.min(b/CANVAS_WIDTH,d/CANVAS_HEIGHT),s_oStage.scaleX=s_oStage.scaleY=s_iScaleFactor);
0>k||(k=(a-d)/2);$("#canvas").css("top",k+"px");$("#canvas").css("left",f+"px");if(DEBUG_BOX2D){if(s_bMobile||isChrome())$("#debug").css("width",b+"px"),$("#debug").css("height",d+"px");0>k?$("#debug").css("top",k+"px"):(k=(a-d)/2,$("#canvas").css("top",k+"px"));$("#debug").css("left",f+"px")}fullscreenHandler()}}
function _checkOrientation(a,g){s_bMobile&&ENABLE_CHECK_ORIENTATION&&(a>g?"landscape"===$(".orientation-msg-container").attr("data-orientation")?($(".orientation-msg-container").css("display","none"),s_oMain.startUpdate()):($(".orientation-msg-container").css("display","block"),s_oMain.stopUpdate()):"portrait"===$(".orientation-msg-container").attr("data-orientation")?($(".orientation-msg-container").css("display","none"),s_oMain.startUpdate()):($(".orientation-msg-container").css("display","block"),
s_oMain.stopUpdate()))}function isChrome(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}function isMobile(){return isIpad()?!0:jQuery.browser.mobile}function isIpad(){var a=-1!==navigator.userAgent.toLowerCase().indexOf("ipad");return!a&&navigator.userAgent.match(/Mac/)&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints?!0:a}
function isIOS(){for(var a="iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";");a.length;)if(navigator.platform===a.pop())return s_bIsIphone=!0;return s_bIsIphone=!1}function getIOSWindowHeight(){return document.documentElement.clientWidth/window.innerWidth*window.innerHeight}function getHeightOfIOSToolbars(){var a=(0===window.orientation?screen.height:screen.width)-getIOSWindowHeight();return 1<a?a:0}
function getMobileOperatingSystem(){var a=navigator.userAgent||navigator.vendor||window.opera;return a.match(/iPad/i)||a.match(/iPhone/i)||a.match(/iPod/i)?"ios":a.match(/Android/i)?"android":"unknown"}function inIframe(){try{return window.self!==window.top}catch(a){return!0}}function stopSound(a){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].stop()}function soundPlaying(a){if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)return s_aSounds[a].playing()}
function playSound(a,g,d){return!1===DISABLE_SOUND_MOBILE||!1===s_bMobile?(s_aSounds[a].play(),s_aSounds[a].volume(g),s_aSounds[a].loop(d),s_aSounds[a]):null}function setVolume(a,g){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].volume(g)}function setMute(a,g){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[g].mute(a)}
function createBitmap(a,g,d){var b=new createjs.Bitmap(a),k=new createjs.Shape;g&&d?k.graphics.beginFill("#fff").drawRect(0,0,g,d):k.graphics.beginFill("#ff0").drawRect(0,0,a.width,a.height);b.hitArea=k;return b}function createSprite(a,g,d,b,k,f){a=null!==g?new createjs.Sprite(a,g):new createjs.Sprite(a);g=new createjs.Shape;g.graphics.beginFill("#000000").drawRect(-d,-b,k,f);a.hitArea=g;return a}
function randomFloatBetween(a,g,d){"undefined"===typeof d&&(d=2);return parseFloat(Math.min(a+Math.random()*(g-a),g).toFixed(d))}function shuffle(a){for(var g=a.length,d,b;0!==g;)b=Math.floor(Math.random()*g),--g,d=a[g],a[g]=a[b],a[b]=d;return a}function easeLinear(a,g,d,b){return d*a/b+g}function easeInQuad(a,g,d,b){return d*(a/=b)*a+g}function easeInSine(a,g,d,b){return-d*Math.cos(a/b*(Math.PI/2))+d+g}function easeInCubic(a,g,d,b){return d*(a/=b)*a*a+g}
function getTrajectoryPoint(a,g){var d=new createjs.Point,b=(1-a)*(1-a),k=a*a;d.x=b*g.start.x+2*(1-a)*a*g.traj.x+k*g.end.x;d.y=b*g.start.y+2*(1-a)*a*g.traj.y+k*g.end.y;return d}function formatTime(a){a/=1E3;var g=Math.floor(a/60);a=parseFloat(a-60*g).toFixed(0);var d="";d=10>g?d+("0"+g+":"):d+(g+":");return 10>a?d+("0"+a):d+a}function degreesToRadians(a){return a*Math.PI/180}function checkRectCollision(a,g){var d=getBounds(a,.9);var b=getBounds(g,.98);return calculateIntersection(d,b)}
function calculateIntersection(a,g){var d,b,k,f;var e=a.x+(d=a.width/2);var c=a.y+(b=a.height/2);var l=g.x+(k=g.width/2);var m=g.y+(f=g.height/2);e=Math.abs(e-l)-(d+k);c=Math.abs(c-m)-(b+f);return 0>e&&0>c?(e=Math.min(Math.min(a.width,g.width),-e),c=Math.min(Math.min(a.height,g.height),-c),{x:Math.max(a.x,g.x),y:Math.max(a.y,g.y),width:e,height:c,rect1:a,rect2:g}):null}
function getBounds(a,g){var d={x:Infinity,y:Infinity,width:0,height:0};if(a instanceof createjs.Container){d.x2=-Infinity;d.y2=-Infinity;var b=a.children,k=b.length,f;for(f=0;f<k;f++){var e=getBounds(b[f],1);e.x<d.x&&(d.x=e.x);e.y<d.y&&(d.y=e.y);e.x+e.width>d.x2&&(d.x2=e.x+e.width);e.y+e.height>d.y2&&(d.y2=e.y+e.height)}Infinity==d.x&&(d.x=0);Infinity==d.y&&(d.y=0);Infinity==d.x2&&(d.x2=0);Infinity==d.y2&&(d.y2=0);d.width=d.x2-d.x;d.height=d.y2-d.y;delete d.x2;delete d.y2}else{if(a instanceof createjs.Bitmap){k=
a.sourceRect||a.image;f=k.width*g;var c=k.height*g}else if(a instanceof createjs.Sprite)if(a.spriteSheet._frames&&a.spriteSheet._frames[a.currentFrame]&&a.spriteSheet._frames[a.currentFrame].image){k=a.spriteSheet.getFrame(a.currentFrame);f=k.rect.width;c=k.rect.height;b=k.regX;var l=k.regY}else d.x=a.x||0,d.y=a.y||0;else d.x=a.x||0,d.y=a.y||0;b=b||0;f=f||0;l=l||0;c=c||0;d.regX=b;d.regY=l;k=a.localToGlobal(0-b,0-l);e=a.localToGlobal(f-b,c-l);f=a.localToGlobal(f-b,0-l);b=a.localToGlobal(0-b,c-l);d.x=
Math.min(Math.min(Math.min(k.x,e.x),f.x),b.x);d.y=Math.min(Math.min(Math.min(k.y,e.y),f.y),b.y);d.width=Math.max(Math.max(Math.max(k.x,e.x),f.x),b.x)-d.x;d.height=Math.max(Math.max(Math.max(k.y,e.y),f.y),b.y)-d.y}return d}function NoClickDelay(a){this.element=a;window.Touch&&this.element.addEventListener("touchstart",this,!1)}
NoClickDelay.prototype={handleEvent:function(a){switch(a.type){case "touchstart":this.onTouchStart(a);break;case "touchmove":this.onTouchMove(a);break;case "touchend":this.onTouchEnd(a)}},onTouchStart:function(a){a.preventDefault();this.moved=!1;this.element.addEventListener("touchmove",this,!1);this.element.addEventListener("touchend",this,!1)},onTouchMove:function(a){this.moved=!0},onTouchEnd:function(a){this.element.removeEventListener("touchmove",this,!1);this.element.removeEventListener("touchend",
this,!1);if(!this.moved){a=document.elementFromPoint(a.changedTouches[0].clientX,a.changedTouches[0].clientY);3==a.nodeType&&(a=a.parentNode);var g=document.createEvent("MouseEvents");g.initEvent("click",!0,!0);a.dispatchEvent(g)}}};
(function(){function a(d){var b={focus:"visible",focusin:"visible",pageshow:"visible",blur:"hidden",focusout:"hidden",pagehide:"hidden"};d=d||window.event;d.type in b?document.body.className=b[d.type]:(document.body.className=this[g]?"hidden":"visible","hidden"===document.body.className?(s_oMain.stopUpdate(),s_bFocus=!1):(s_oMain.startUpdate(),s_bFocus=!0))}var g="hidden";g in document?document.addEventListener("visibilitychange",a):(g="mozHidden")in document?document.addEventListener("mozvisibilitychange",
a):(g="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",a):(g="msHidden")in document?document.addEventListener("msvisibilitychange",a):"onfocusin"in document?document.onfocusin=document.onfocusout=a:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=a})();function ctlArcadeResume(){null!==s_oMain&&s_oMain.startUpdate()}function ctlArcadePause(){null!==s_oMain&&s_oMain.stopUpdate()}
function getParamValue(a){for(var g=window.location.search.substring(1).split("&"),d=0;d<g.length;d++){var b=g[d].split("=");if(b[0]==a)return b[1]}}function saveItem(a,g){s_bStorageAvailable&&localStorage.setItem(a,g)}function getItem(a){return s_bStorageAvailable?localStorage.getItem(a):null}function setItemJson(a,g){s_bStorageAvailable&&localStorage.setItem(a,JSON.stringify(g))}function getItemJson(a){return s_bStorageAvailable?JSON.parse(localStorage.getItem(a)):null}
function fullscreenHandler(){ENABLE_FULLSCREEN&&screenfull.isEnabled&&(s_bFullscreen=screenfull.isFullscreen,null!==s_oInterface&&s_oInterface.resetFullscreenBut(),null!==s_oMenu&&s_oMenu.resetFullscreenBut(),null!==s_oLevelChoose&&s_oLevelChoose.resetFullscreenBut())}if(screenfull.isEnabled)screenfull.on("change",function(){s_bFullscreen=screenfull.isFullscreen;null!==s_oInterface&&s_oInterface.resetFullscreenBut();null!==s_oMenu&&s_oMenu.resetFullscreenBut();null!==s_oLevelChoose&&s_oLevelChoose.resetFullscreenBut()});
function CSpriteLibrary(){var a={},g,d,b,k,f,e;this.init=function(c,l,m){g={};b=d=0;k=c;f=l;e=m};this.addSprite=function(c,l){if(!a.hasOwnProperty(c)){var m=new Image;a[c]=g[c]={szPath:l,oSprite:m,bLoaded:!1};d++}};this.getSprite=function(c){return a.hasOwnProperty(c)?a[c].oSprite:null};this._onSpritesLoaded=function(){d=0;f.call(e)};this._onSpriteLoaded=function(){k.call(e);++b===d&&this._onSpritesLoaded()};this.loadSprites=function(){for(var c in g)g[c].oSprite.oSpriteLibrary=this,g[c].oSprite.szKey=
c,g[c].oSprite.onload=function(){this.oSpriteLibrary.setLoaded(this.szKey);this.oSpriteLibrary._onSpriteLoaded(this.szKey)},g[c].oSprite.onerror=function(l){var m=l.currentTarget;setTimeout(function(){g[m.szKey].oSprite.src=g[m.szKey].szPath},500)},g[c].oSprite.src=g[c].szPath};this.setLoaded=function(c){a[c].bLoaded=!0};this.isLoaded=function(c){return a[c].bLoaded};this.getNumSprites=function(){return d}}
var CANVAS_WIDTH=1360,CANVAS_HEIGHT=640,CANVAS_WIDTH_HALF=.5*CANVAS_WIDTH,CANVAS_HEIGHT_HALF=.5*CANVAS_HEIGHT,EDGEBOARD_X=200,EDGEBOARD_Y=10,FPS=30,FPS_TIME=1E3/FPS,DISABLE_SOUND_MOBILE=!1,PRIMARY_FONT="bd_cartoon_shoutregular",PRIMARY_FONT_COLOR="#ffffff",SECONDARY_FONT_COLOR="#000000",SOUNDTRACK_VOLUME_IN_GAME=.5,FONT_SIZE_TITLES=42,FONT_SIZE_SUBTITLES=26,FONT_SIZE_HELP_TEXT=16,FONT_SIZE_LEVEL_BUTTON="38px ",FONT_SIZE_WIN_PANEL_TITLE=30,FONT_SIZE_LOSE_PANEL_TITLE=30,FONT_SIZE_MESSAGE_BOX=20,FONT_SIZE_CREDITS=
40,FONT_SIZE_CREDITS_LINK=28,FONT_SIZE_INTERFACE="24px ",FONT_SIZE_PAUSE=40,NUM_ROWS_PAGE_LEVEL=3,NUM_COLS_PAGE_LEVEL=4,LEVEL_POINTS,ALL_LEVELS_UNLOCKED,LOSE_ANIMATION_INDEX=3,PLAYER_RADIUS=90,COIN_RADIUS=22,BALL_RADIUS=22,STONE_RADIUS=47,WOOD_BLOCK_WIDTH=79,WOOD_BLOCK_HEIGHT=12,STONE_BLOCK_WIDTH=43,STONE_BLOCK_HEIGHT=21,STONE_UNBREAKABLE_BLOCK_WIDTH=43,STONE_UNBREAKABLE_BLOCK_HEIGHT=43,COIN_SPEED_TWEEN_MAX=2E3,COIN_SPEED_TWEEN_MIN=300,SLEEP_TIMER_MAX=1E4,CHECK_LEVEL_DELAY=1E3,GAMEOVER_DELAY=1E3,
COIN_DISTANCE_VAR=100,BALL_STOP_VELOCITY_LIMIT=.1,PROPS_WINDOW=0,PROPS_FRAME=1,PROPS_PLANT0=2,PROPS_PLANT1=3,PROPS_HOLE=5,UPDATE_LOOP_VAR=1,TIMESTEP=1/30,VELOCITY_ITERATIONS=4,POSITION_ITERATIONS=6,DEBUG_BOX2D=!1,DEBUG_BOX2D_ALPHA=.5,WORLD_SCALE=100,GRAVITY=9.81,DYNAMIC_BODY=0,STATIC_BODY=1,KINEMATIC_BODY=2,CONTACT_BEGIN=0,CONTACT_END=1,CONTACT_PRESOLVE=2,CONTACT_POSTSOLVE=3,ON_CONTROLLER_END=8,ON_CONTROLLER_REMOVE=9,ON_TWEEN_ENDED=10,FLOOR_DENSITY=1,FLOOR_FRICTION=.3,FLOOR_RESTITUTION=.5,COIN_DENSITY=
0,COIN_FRICTION=0,COIN_RESTITUTION=0,BALL_DENSITY=.2,BALL_FRICTION=.5,BALL_RESTITUTION=.5,BLOCK_DENSITY=1,BLOCK_FRICTION=.5,BLOCK_RESTITUTION=.1,WOOD_DENSITY=1,WOOD_FRICTION=.5,WOOD_RESTITUTION=.1,STONE_DENSITY=5,STONE_FRICTION=.9,STONE_RESTITUTION=.1,FLOOR_FIXTURE=0,COIN_FIXTURE=1,BALL_FIXTURE=2,BLOCK_FIXTURE=3,WOOD_FIXTURE=4,PLAYER_FIXTURE=5,STONE_FIXTURE=6,STATE_LOADING=0,STATE_MENU=1,STATE_LEVEL=2,STATE_GAME=3,STATE_HELP=4,ON_MOUSE_DOWN=0,ON_MOUSE_UP=1,ENABLE_FULLSCREEN,ENABLE_CHECK_ORIENTATION,
LEVELS_NUMBER=24,PROPS_INFOS=[[{type:PROPS_HOLE,x:350,y:"490"},{type:PROPS_WINDOW,x:450,y:"200"},{type:PROPS_FRAME,x:1E3,y:"200"},{type:PROPS_PLANT0,x:200,y:"440"},{type:PROPS_PLANT1,x:950,y:"455"}],[{type:PROPS_HOLE,x:350,y:"490"},{type:PROPS_WINDOW,x:950,y:"200"},{type:PROPS_FRAME,x:450,y:"200"},{type:PROPS_PLANT0,x:200,y:"440"},{type:PROPS_PLANT1,x:950,y:"455"}],[{type:PROPS_HOLE,x:350,y:"490"},{type:PROPS_WINDOW,x:550,y:"200"},{type:PROPS_PLANT0,x:200,y:"440"},{type:PROPS_PLANT1,x:1150,y:"455"}],
[],[{type:PROPS_HOLE,x:350,y:"490"},{type:PROPS_FRAME,x:950,y:"200"},{type:PROPS_PLANT0,x:200,y:"440"},{type:PROPS_PLANT1,x:1050,y:"455"}],[{type:PROPS_HOLE,x:350,y:"490"},{type:PROPS_FRAME,x:1100,y:"200"},{type:PROPS_PLANT1,x:1150,y:"455"}],[{type:PROPS_HOLE,x:350,y:"490"},{type:PROPS_PLANT0,x:100,y:"440"},{type:PROPS_FRAME,x:800,y:"200"}],[{type:PROPS_FRAME,x:450,y:"150"},{type:PROPS_PLANT0,x:150,y:"440"}],[{type:PROPS_HOLE,x:600,y:"490"},{type:PROPS_WINDOW,x:550,y:"150"},{type:PROPS_PLANT1,x:1150,
y:"455"}],[{type:PROPS_HOLE,x:900,y:"490"},{type:PROPS_PLANT0,x:100,y:"440"},{type:PROPS_FRAME,x:700,y:"150"}],[{type:PROPS_HOLE,x:350,y:"490"},{type:PROPS_FRAME,x:550,y:"350"},{type:PROPS_PLANT0,x:200,y:"440"},{type:PROPS_PLANT1,x:1150,y:"455"}],[{type:PROPS_HOLE,x:800,y:"490"},{type:PROPS_FRAME,x:1100,y:"150"},{type:PROPS_WINDOW,x:500,y:"150"},{type:PROPS_PLANT0,x:200,y:"440"},{type:PROPS_PLANT1,x:1050,y:"455"}],[{type:PROPS_HOLE,x:800,y:"490"},{type:PROPS_PLANT1,x:1050,y:"455"}],[{type:PROPS_HOLE,
x:680,y:"490"},{type:PROPS_WINDOW,x:350,y:"200"},{type:PROPS_PLANT0,x:200,y:"440"}],[{type:PROPS_HOLE,x:350,y:"490"},{type:PROPS_PLANT0,x:200,y:"440"}],[{type:PROPS_HOLE,x:350,y:"490"},{type:PROPS_FRAME,x:1050,y:"200"},{type:PROPS_PLANT0,x:200,y:"440"},{type:PROPS_PLANT1,x:1050,y:"455"}],[{type:PROPS_HOLE,x:350,y:"490"},{type:PROPS_WINDOW,x:350,y:"200"},{type:PROPS_FRAME,x:1050,y:"200"},{type:PROPS_PLANT0,x:200,y:"440"},{type:PROPS_PLANT1,x:1100,y:"455"}],[{type:PROPS_HOLE,x:350,y:"490"},{type:PROPS_PLANT0,
x:200,y:"440"},{type:PROPS_PLANT1,x:1050,y:"455"}],[{type:PROPS_HOLE,x:350,y:"490"},{type:PROPS_WINDOW,x:900,y:"200"},{type:PROPS_PLANT0,x:200,y:"440"},{type:PROPS_PLANT1,x:1100,y:"455"}],[{type:PROPS_HOLE,x:900,y:"490"},{type:PROPS_WINDOW,x:450,y:"200"},{type:PROPS_PLANT0,x:150,y:"440"},{type:PROPS_PLANT1,x:1100,y:"455"}],[{type:PROPS_HOLE,x:350,y:"490"},{type:PROPS_PLANT0,x:200,y:"440"}],[{type:PROPS_HOLE,x:350,y:"490"},{type:PROPS_WINDOW,x:450,y:"300"},{type:PROPS_PLANT0,x:200,y:"440"},{type:PROPS_PLANT1,
x:950,y:"455"}],[{type:PROPS_HOLE,x:350,y:"490"},{type:PROPS_PLANT0,x:200,y:"440"},{type:PROPS_PLANT1,x:1E3,y:"455"}],[{type:PROPS_HOLE,x:350,y:"490"},{type:PROPS_PLANT0,x:200,y:"440"}]],PLAYER_POSITION=[{x:454,y:610},{x:400,y:610},{x:527,y:610},{x:400,y:540},{x:400,y:610},{x:1E3,y:610},{x:300,y:610},{x:700,y:610},{x:560,y:610},{x:900,y:610},{x:300,y:610},{x:300,y:610},{x:650,y:610},{x:620,y:610},{x:350,y:610},{x:1050,y:580},{x:690,y:610},{x:350,y:610},{x:400,y:610},{x:900,y:610},{x:300,y:610},{x:550,
y:610},{x:484,y:610},{x:990,y:465}],BALL_POSITION=[{x:709,y:166},{x:650,y:120},{x:980,y:192},{x:200,y:100},{x:865,y:367},{x:850,y:250},{x:340,y:105},{x:700,y:120},{x:885,y:115},{x:1E3,y:115},{x:250,y:30},{x:782,y:166},{x:950,y:120},{x:690,y:140},{x:1020,y:225},{x:570,y:180},{x:690,y:100},{x:230,y:100},{x:500,y:180},{x:600,y:50},{x:1020,y:80},{x:330,y:100},{x:400,y:150},{x:940,y:75}],STONES_POSITION=[[],[],[],[{x:160,y:40}],[{x:680,y:190}],[{x:225,y:10},{x:225,y:150},{x:225,y:310}],[],[],[],[],[],
[],[],[],[],[],[],[],[],[{x:450,y:300},{x:550,y:300},{x:650,y:300},{x:750,y:300},{x:500,y:200},{x:600,y:200},{x:700,y:200},{x:550,y:100},{x:650,y:100}],[],[],[],[{x:1020,y:60},{x:1110,y:50}]],COINS_POSITION=[[{x:626,y:390},{x:588,y:444},{x:541,y:491}],[{x:650,y:270},{x:680,y:435},{x:520,y:540}],[{x:641,y:529},{x:720,y:391},{x:786,y:269}],[{x:720,y:215},{x:590,y:470},{x:890,y:460}],[{x:520,y:491},{x:588,y:444},{x:650,y:390}],[{x:930,y:220},{x:980,y:310},{x:980,y:400}],[{x:380,y:210},{x:830,y:355},
{x:610,y:560}],[{x:700,y:265},{x:570,y:265},{x:830,y:265},{x:430,y:300},{x:970,y:300}],[{x:475,y:250},{x:840,y:270},{x:760,y:520}],[{x:870,y:270},{x:600,y:270},{x:770,y:500}],[{x:700,y:100},{x:645,y:490},{x:445,y:520}],[{x:660,y:270},{x:535,y:384},{x:330,y:480}],[{x:650,y:340},{x:840,y:250},{x:430,y:440}],[{x:930,y:290},{x:865,y:250},{x:720,y:480}],[{x:870,y:440},{x:655,y:500},{x:470,y:540}],[{x:570,y:400},{x:650,y:520},{x:800,y:530}],[{x:640,y:360},{x:700,y:320},{x:730,y:390}],[{x:470,y:490},{x:580,
y:450},{x:700,y:420}],[{x:710,y:340},{x:550,y:570},{x:850,y:460}],[{x:450,y:470},{x:600,y:490},{x:750,y:510}],[{x:900,y:160},{x:600,y:300},{x:350,y:450}],[{x:730,y:360},{x:680,y:410},{x:630,y:460}],[{x:640,y:170},{x:780,y:410},{x:580,y:450}],[{x:280,y:220},{x:630,y:370},{x:820,y:420}]],BLOCKS_DATA=[[{wood:!1,x:709,y:225,angle:0,breakable:!0,type:STATIC_BODY},{wood:!0,x:670,y:437,angle:-44,breakable:!1,type:STATIC_BODY}],[{wood:!1,x:650,y:200,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:650,y:350,
angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:400,y:400,angle:0,breakable:!0,type:STATIC_BODY},{wood:!0,x:650,y:500,angle:-10,breakable:!0,type:STATIC_BODY}],[{wood:!1,x:840,y:360,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:967,y:360,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:765,y:505,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:892,y:505,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:913,y:239,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:1040,y:239,angle:0,breakable:!0,
type:STATIC_BODY},{wood:!0,x:830,y:470,angle:0,breakable:!0,type:DYNAMIC_BODY},{wood:!0,x:900,y:325,angle:0,breakable:!0,type:DYNAMIC_BODY},{wood:!0,x:973,y:204,angle:0,breakable:!0,type:DYNAMIC_BODY}],[{wood:!1,x:210,y:575,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:300,y:575,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:390,y:575,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:480,y:575,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:590,y:540,angle:0,breakable:!0,type:STATIC_BODY},
{wood:!1,x:690,y:535,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:790,y:530,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:890,y:525,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:990,y:530,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:1080,y:525,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:290,y:245,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:540,y:300,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:630,y:300,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:720,y:300,
angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:810,y:300,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:920,y:300,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:1020,y:300,angle:0,breakable:!0,type:STATIC_BODY},{wood:!0,x:160,y:190,angle:15,breakable:!1,type:STATIC_BODY},{wood:!0,x:415,y:245,angle:15,breakable:!1,type:STATIC_BODY}],[{wood:!1,x:680,y:280,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:790,y:440,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:590,y:560,angle:0,breakable:!1,
type:STATIC_BODY},{wood:!1,x:680,y:520,angle:0,breakable:!1,type:STATIC_BODY},{wood:!0,x:790,y:410,angle:0,breakable:!0,type:DYNAMIC_BODY}],[{wood:!1,x:630,y:520,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:720,y:550,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:630,y:365,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:720,y:395,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:630,y:204,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:720,y:234,angle:0,breakable:!0,type:STATIC_BODY},
{wood:!0,x:850,y:579,angle:0,breakable:!1,type:STATIC_BODY},{wood:!0,x:200,y:390,angle:15,breakable:!1,type:STATIC_BODY},{wood:!0,x:355,y:435,angle:15,breakable:!1,type:STATIC_BODY},{wood:!0,x:510,y:480,angle:15,breakable:!1,type:STATIC_BODY},{wood:!0,x:850,y:424,angle:0,breakable:!1,type:STATIC_BODY},{wood:!0,x:200,y:235,angle:15,breakable:!1,type:STATIC_BODY},{wood:!0,x:355,y:280,angle:15,breakable:!1,type:STATIC_BODY},{wood:!0,x:510,y:325,angle:15,breakable:!1,type:STATIC_BODY},{wood:!0,x:850,
y:263,angle:0,breakable:!1,type:STATIC_BODY},{wood:!0,x:200,y:74,angle:15,breakable:!1,type:STATIC_BODY},{wood:!0,x:355,y:119,angle:15,breakable:!1,type:STATIC_BODY},{wood:!0,x:510,y:164,angle:15,breakable:!1,type:STATIC_BODY}],[{wood:!1,x:250,y:150,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:410,y:150,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:830,y:420,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:230,y:330,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:320,y:330,angle:0,breakable:!1,
type:STATIC_BODY},{wood:!1,x:410,y:330,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:500,y:330,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:700,y:590,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:790,y:560,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:880,y:540,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:930,y:440,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:1020,y:440,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:1110,y:440,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,
x:1020,y:350,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:1110,y:350,angle:0,breakable:!1,type:STATIC_BODY},{wood:!0,x:345,y:110,angle:0,breakable:!0,type:DYNAMIC_BODY},{wood:!0,x:630,y:320,angle:10,breakable:!0,type:STATIC_BODY}],[{wood:!1,x:700,y:190,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:430,y:390,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:970,y:390,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:570,y:340,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:700,y:342,angle:0,
breakable:!0,type:STATIC_BODY},{wood:!1,x:830,y:345,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:310,y:460,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:400,y:500,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:490,y:540,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:580,y:580,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:820,y:580,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:910,y:540,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:1E3,y:500,angle:0,breakable:!1,type:STATIC_BODY},
{wood:!1,x:1090,y:460,angle:0,breakable:!1,type:STATIC_BODY},{wood:!0,x:700,y:145,angle:0,breakable:!0,type:DYNAMIC_BODY},{wood:!0,x:440,y:350,angle:0,breakable:!0,type:DYNAMIC_BODY},{wood:!0,x:970,y:350,angle:0,breakable:!0,type:DYNAMIC_BODY},{wood:!0,x:585,y:295,angle:0,breakable:!0,type:DYNAMIC_BODY},{wood:!0,x:820,y:300,angle:0,breakable:!0,type:DYNAMIC_BODY}],[{wood:!1,x:885,y:170,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:657,y:340,angle:0,breakable:!0,type:STATIC_BODY},{wood:!0,x:355,
y:275,angle:20,breakable:!1,type:STATIC_BODY},{wood:!0,x:512,y:320,angle:10,breakable:!1,type:STATIC_BODY},{wood:!0,x:791,y:322,angle:-5,breakable:!1,type:STATIC_BODY},{wood:!0,x:950,y:292,angle:-15,breakable:!0,type:STATIC_BODY},{wood:!0,x:240,y:510,angle:20,breakable:!0,type:STATIC_BODY},{wood:!0,x:399,y:553,angle:10,breakable:!0,type:STATIC_BODY},{wood:!0,x:740,y:577,angle:-10,breakable:!0,type:STATIC_BODY},{wood:!0,x:900,y:540,angle:-15,breakable:!0,type:STATIC_BODY}],[{wood:!1,x:1E3,y:170,angle:0,
breakable:!0,type:STATIC_BODY},{wood:!1,x:240,y:330,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:330,y:330,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:420,y:330,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:510,y:330,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:600,y:330,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:690,y:330,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:780,y:330,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:870,y:350,angle:0,breakable:!1,type:STATIC_BODY},
{wood:!1,x:960,y:350,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:1050,y:350,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:1140,y:350,angle:0,breakable:!1,type:STATIC_BODY},{wood:!0,x:480,y:250,angle:30,breakable:!0,type:STATIC_BODY},{wood:!0,x:980,y:250,angle:-30,breakable:!0,type:STATIC_BODY}],[{wood:!1,x:200,y:120,angle:5,breakable:!0,type:STATIC_BODY},{wood:!1,x:300,y:130,angle:5,breakable:!0,type:STATIC_BODY},{wood:!1,x:400,y:140,angle:5,breakable:!0,type:STATIC_BODY},{wood:!1,x:500,
y:150,angle:5,breakable:!0,type:STATIC_BODY},{wood:!1,x:600,y:160,angle:5,breakable:!0,type:STATIC_BODY},{wood:!1,x:700,y:170,angle:5,breakable:!0,type:STATIC_BODY},{wood:!1,x:645,y:550,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:745,y:550,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:850,y:500,angle:-30,breakable:!0,type:STATIC_BODY},{wood:!1,x:930,y:450,angle:-30,breakable:!0,type:STATIC_BODY},{wood:!1,x:1010,y:400,angle:-30,breakable:!0,type:STATIC_BODY},{wood:!0,x:840,y:190,angle:10,
breakable:!1,type:STATIC_BODY},{wood:!0,x:1010,y:220,angle:10,breakable:!1,type:STATIC_BODY}],[{wood:!1,x:722,y:223,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:842,y:223,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:595,y:363,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:715,y:363,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:408,y:493,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:528,y:493,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:815,y:380,angle:0,breakable:!1,type:STATIC_BODY},
{wood:!1,x:630,y:462,angle:0,breakable:!1,type:STATIC_BODY},{wood:!0,x:790,y:179,angle:0,breakable:!1,type:DYNAMIC_BODY},{wood:!0,x:660,y:319,angle:0,breakable:!1,type:DYNAMIC_BODY},{wood:!0,x:470,y:449,angle:0,breakable:!1,type:DYNAMIC_BODY}],[{wood:!1,x:560,y:220,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:650,y:220,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:740,y:220,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:650,y:400,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:410,y:360,
angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:950,y:140,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:250,y:460,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:340,y:490,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:430,y:520,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:520,y:550,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:830,y:330,angle:-5,breakable:!1,type:STATIC_BODY},{wood:!1,x:920,y:290,angle:-5,breakable:!1,type:STATIC_BODY},{wood:!1,x:1010,y:250,angle:-5,breakable:!1,
type:STATIC_BODY},{wood:!0,x:650,y:150,angle:0,breakable:!0,type:DYNAMIC_BODY},{wood:!0,x:410,y:290,angle:0,breakable:!0,type:DYNAMIC_BODY}],[{wood:!1,x:800,y:550,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:900,y:450,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:600,y:280,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:900,y:360,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:990,y:400,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:690,y:280,angle:0,breakable:!1,type:STATIC_BODY},
{wood:!1,x:780,y:280,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:310,y:400,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:400,y:450,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:500,y:550,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:600,y:190,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:780,y:190,angle:0,breakable:!0,type:STATIC_BODY},{wood:!0,x:690,y:150,angle:0,breakable:!0,type:DYNAMIC_BODY},{wood:!0,x:900,y:320,angle:0,breakable:!0,type:DYNAMIC_BODY}],[{wood:!1,x:850,y:555,
angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:940,y:555,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:1030,y:545,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:1120,y:535,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:930,y:400,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:990,y:292,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:725,y:482,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:546,y:534,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:764,y:283,angle:0,breakable:!0,
type:STATIC_BODY},{wood:!1,x:595,y:327,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:371,y:388,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:663,y:193,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:296,y:245,angle:0,breakable:!0,type:STATIC_BODY},{wood:!0,x:650,y:580,angle:-10,breakable:!1,type:STATIC_BODY},{wood:!0,x:930,y:350,angle:0,breakable:!1,type:DYNAMIC_BODY},{wood:!0,x:1E3,y:242,angle:0,breakable:!1,type:DYNAMIC_BODY},{wood:!0,x:725,y:432,angle:0,breakable:!1,type:DYNAMIC_BODY},
{wood:!0,x:546,y:484,angle:0,breakable:!1,type:DYNAMIC_BODY},{wood:!0,x:764,y:233,angle:0,breakable:!1,type:DYNAMIC_BODY},{wood:!0,x:595,y:277,angle:0,breakable:!1,type:DYNAMIC_BODY},{wood:!0,x:371,y:338,angle:0,breakable:!1,type:DYNAMIC_BODY},{wood:!0,x:663,y:143,angle:0,breakable:!1,type:DYNAMIC_BODY},{wood:!0,x:296,y:195,angle:0,breakable:!1,type:DYNAMIC_BODY}],[{wood:!1,x:780,y:200,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:400,y:350,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:570,
y:240,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:810,y:450,angle:0,breakable:!0,type:STATIC_BODY},{wood:!0,x:490,y:570,angle:5,breakable:!1,type:STATIC_BODY},{wood:!0,x:650,y:580,angle:0,breakable:!0,type:STATIC_BODY},{wood:!0,x:810,y:400,angle:0,breakable:!0,type:DYNAMIC_BODY},{wood:!0,x:970,y:585,angle:0,breakable:!1,type:STATIC_BODY},{wood:!0,x:1130,y:585,angle:0,breakable:!1,type:STATIC_BODY}],[{wood:!1,x:550,y:600,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:550,y:500,angle:0,breakable:!1,
type:STATIC_BODY},{wood:!1,x:550,y:400,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:820,y:600,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:820,y:500,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:820,y:400,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:570,y:320,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:800,y:320,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:590,y:260,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:780,y:260,angle:0,breakable:!0,type:STATIC_BODY},{wood:!0,
x:690,y:200,angle:0,breakable:!0,type:DYNAMIC_BODY},{wood:!0,x:620,y:220,angle:0,breakable:!0,type:DYNAMIC_BODY},{wood:!0,x:760,y:220,angle:0,breakable:!0,type:DYNAMIC_BODY},{wood:!0,x:690,y:150,angle:0,breakable:!0,type:DYNAMIC_BODY},{wood:!0,x:690,y:130,angle:0,breakable:!0,type:DYNAMIC_BODY}],[{wood:!0,x:180,y:150,angle:10,breakable:!1,type:STATIC_BODY},{wood:!1,x:300,y:200,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:400,y:220,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:500,y:240,angle:0,
breakable:!0,type:STATIC_BODY},{wood:!1,x:600,y:260,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:700,y:280,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:800,y:300,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:900,y:320,angle:0,breakable:!0,type:STATIC_BODY},{wood:!0,x:530,y:530,angle:-15,breakable:!1,type:STATIC_BODY},{wood:!0,x:690,y:480,angle:-20,breakable:!1,type:STATIC_BODY}],[{wood:!1,x:500,y:230,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:710,y:400,angle:0,breakable:!0,type:STATIC_BODY},
{wood:!1,x:810,y:400,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:910,y:400,angle:0,breakable:!0,type:STATIC_BODY},{wood:!0,x:440,y:280,angle:10,breakable:!1,type:STATIC_BODY},{wood:!0,x:600,y:340,angle:30,breakable:!0,type:STATIC_BODY},{wood:!0,x:700,y:560,angle:-5,breakable:!0,type:STATIC_BODY},{wood:!0,x:870,y:510,angle:-30,breakable:!0,type:STATIC_BODY}],[{wood:!1,x:360,y:400,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:480,y:400,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:600,
y:400,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:720,y:400,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:840,y:400,angle:0,breakable:!0,type:STATIC_BODY},{wood:!0,x:400,y:530,angle:10,breakable:!0,type:STATIC_BODY},{wood:!0,x:570,y:550,angle:5,breakable:!0,type:STATIC_BODY},{wood:!0,x:740,y:565,angle:5,breakable:!0,type:STATIC_BODY}],[{wood:!1,x:500,y:550,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:500,y:500,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:500,y:450,angle:0,breakable:!0,
type:STATIC_BODY},{wood:!1,x:500,y:400,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:500,y:350,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:500,y:300,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:500,y:250,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:500,y:200,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:500,y:150,angle:0,breakable:!0,type:STATIC_BODY},{wood:!0,x:650,y:200,angle:-20,breakable:!1,type:STATIC_BODY},{wood:!0,x:650,y:350,angle:-20,breakable:!1,type:STATIC_BODY},
{wood:!0,x:650,y:500,angle:-20,breakable:!1,type:STATIC_BODY},{wood:!1,x:780,y:550,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:780,y:500,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:780,y:450,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:780,y:400,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:780,y:350,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:780,y:300,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:780,y:250,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:780,y:200,
angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:780,y:150,angle:0,breakable:!0,type:STATIC_BODY},{wood:!0,x:930,y:200,angle:-20,breakable:!1,type:STATIC_BODY},{wood:!0,x:930,y:350,angle:-20,breakable:!1,type:STATIC_BODY},{wood:!0,x:930,y:500,angle:-20,breakable:!1,type:STATIC_BODY},{wood:!1,x:1080,y:550,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:1080,y:500,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:1080,y:450,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:1080,y:400,angle:0,breakable:!0,
type:STATIC_BODY},{wood:!1,x:1080,y:350,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:1080,y:300,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:1080,y:250,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:1080,y:200,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:1080,y:150,angle:0,breakable:!0,type:STATIC_BODY}],[{wood:!0,x:280,y:140,angle:5,breakable:!0,type:STATIC_BODY},{wood:!0,x:440,y:150,angle:0,breakable:!0,type:STATIC_BODY},{wood:!0,x:600,y:150,angle:0,breakable:!0,type:STATIC_BODY},
{wood:!0,x:760,y:150,angle:0,breakable:!0,type:STATIC_BODY},{wood:!0,x:920,y:150,angle:0,breakable:!0,type:STATIC_BODY},{wood:!0,x:1080,y:150,angle:0,breakable:!0,type:STATIC_BODY},{wood:!0,x:800,y:400,angle:-44,breakable:!1,type:STATIC_BODY}],[{wood:!0,x:330,y:190,angle:10,breakable:!1,type:STATIC_BODY},{wood:!0,x:500,y:220,angle:5,breakable:!1,type:STATIC_BODY},{wood:!1,x:640,y:240,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:740,y:240,angle:0,breakable:!0,type:STATIC_BODY},{wood:!0,x:880,
y:260,angle:10,breakable:!1,type:STATIC_BODY},{wood:!0,x:1050,y:290,angle:5,breakable:!1,type:STATIC_BODY},{wood:!0,x:830,y:450,angle:-20,breakable:!1,type:STATIC_BODY},{wood:!0,x:650,y:500,angle:-5,breakable:!1,type:STATIC_BODY}],[{wood:!1,x:740,y:150,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:360,y:190,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:460,y:190,angle:0,breakable:!0,type:STATIC_BODY},{wood:!1,x:220,y:270,angle:20,breakable:!0,type:STATIC_BODY},{wood:!1,x:460,y:460,angle:0,
breakable:!1,type:STATIC_BODY},{wood:!1,x:720,y:560,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:820,y:500,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:910,y:500,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:1E3,y:500,angle:0,breakable:!1,type:STATIC_BODY},{wood:!1,x:1090,y:500,angle:0,breakable:!1,type:STATIC_BODY},{wood:!0,x:600,y:165,angle:-10,breakable:!1,type:STATIC_BODY},{wood:!0,x:885,y:125,angle:-10,breakable:!1,type:STATIC_BODY},{wood:!0,x:1050,y:100,angle:-10,breakable:!1,
type:STATIC_BODY},{wood:!0,x:340,y:305,angle:20,breakable:!1,type:STATIC_BODY},{wood:!0,x:600,y:410,angle:20,breakable:!1,type:STATIC_BODY}]];
function CPreloader(){var a,g,d,b,k,f,e,c,l,m;this._init=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this);s_oSpriteLibrary.addSprite("progress_bar","./sprites/progress_bar.png");s_oSpriteLibrary.addSprite("200x200","./sprites/200x200.jpg");s_oSpriteLibrary.addSprite("but_start","./sprites/but_start.png");s_oSpriteLibrary.loadSprites();m=new createjs.Container;s_oStage.addChild(m)};this.unload=function(){l.unload();l=null;m.removeAllChildren()};this._onImagesLoaded=
function(){};this._onAllImagesLoaded=function(){this.attachSprites();s_oMain.preloaderReady()};this.attachSprites=function(){var v=new createjs.Shape;v.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);m.addChild(v);v=s_oSpriteLibrary.getSprite("200x200");e=createBitmap(v);e.regX=.5*v.width;e.regY=.5*v.height;e.x=CANVAS_WIDTH_HALF;e.y=CANVAS_HEIGHT_HALF-80;m.addChild(e);c=new createjs.Shape;c.graphics.beginFill("rgba(0,0,0,0.01)").drawRoundRect(e.x-100,e.y-100,200,200,10);m.addChild(c);
e.mask=c;v=s_oSpriteLibrary.getSprite("progress_bar");b=createBitmap(v);b.x=CANVAS_WIDTH_HALF-v.width/2;b.y=CANVAS_HEIGHT_HALF+150;m.addChild(b);a=v.width;g=v.height;k=new createjs.Shape;k.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(b.x,b.y,1,g);m.addChild(k);b.mask=k;d=new createjs.Text("","30px "+PRIMARY_FONT,PRIMARY_FONT_COLOR);d.x=CANVAS_WIDTH_HALF;d.y=CANVAS_HEIGHT_HALF+200;d.textBaseline="alphabetic";d.textAlign="center";m.addChild(d);v=s_oSpriteLibrary.getSprite("but_start");l=new CTextButton(CANVAS_WIDTH_HALF,
CANVAS_HEIGHT_HALF+100,v,TEXT_PRELOADER_CONTINUE,"Arial","#000","bold 50",m);l.addEventListener(ON_MOUSE_UP,this._onButStartRelease,this);l.setVisible(!1);f=new createjs.Shape;f.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);m.addChild(f);createjs.Tween.get(f).to({alpha:0},500).call(function(){createjs.Tween.removeTweens(f);m.removeChild(f)})};this._onButStartRelease=function(){s_oMain._onRemovePreloader()};this.refreshLoader=function(v){d.text=v+"%";100===v&&(s_oMain._onRemovePreloader(),
d.visible=!1,b.visible=!1);k.graphics.clear();v=Math.floor(v*a/100);k.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(b.x,b.y,v,g)};this._init()}
function CMain(a){var g,d=0,b=0,k=STATE_LOADING,f,e;this.initContainer=function(){s_oCanvas=document.getElementById("canvas");s_oStage=new createjs.Stage(s_oCanvas);s_oStage.preventSelection=!1;createjs.Touch.enable(s_oStage,!0);canvas.opacity=.5;s_bMobile=isMobile();!1===s_bMobile&&(s_oStage.enableMouseOver(20),$("body").on("contextmenu","#canvas",function(c){return!1}));s_iPrevTime=(new Date).getTime();createjs.Ticker.addEventListener("tick",this._update);createjs.Ticker.framerate=FPS;navigator.userAgent.match(/Windows Phone/i)&&
(DISABLE_SOUND_MOBILE=!0);s_oSpriteLibrary=new CSpriteLibrary;f=new CPreloader;g=!0};this.soundLoaded=function(){d++;f.refreshLoader(Math.floor(d/b*100))};this._initSounds=function(){Howler.mute(!s_bAudioActive);s_aSoundsInfo=[];s_aSoundsInfo.push({path:"./sounds/",filename:"soundtrack",loop:!0,volume:1,ingamename:"soundtrack"});s_aSoundsInfo.push({path:"./sounds/",filename:"click",loop:!1,volume:1,ingamename:"click"});s_aSoundsInfo.push({path:"./sounds/",filename:"game_win",loop:!1,volume:1,ingamename:"game_win"});
s_aSoundsInfo.push({path:"./sounds/",filename:"game_over",loop:!1,volume:1,ingamename:"game_over"});s_aSoundsInfo.push({path:"./sounds/",filename:"barrel",loop:!1,volume:1,ingamename:"barrel"});s_aSoundsInfo.push({path:"./sounds/",filename:"block_explosion",loop:!1,volume:1,ingamename:"block_explosion"});s_aSoundsInfo.push({path:"./sounds/",filename:"wood_explosion",loop:!1,volume:1,ingamename:"wood_explosion"});s_aSoundsInfo.push({path:"./sounds/",filename:"bouncing_cheese",loop:!1,volume:1,ingamename:"bouncing_cheese"});
s_aSoundsInfo.push({path:"./sounds/",filename:"player_angry",loop:!1,volume:1,ingamename:"player_angry"});s_aSoundsInfo.push({path:"./sounds/",filename:"player_eating",loop:!1,volume:1,ingamename:"player_eating"});s_aSoundsInfo.push({path:"./sounds/",filename:"player_sleeping",loop:!1,volume:1,ingamename:"player_sleeping"});s_aSoundsInfo.push({path:"./sounds/",filename:"player_wakeup",loop:!1,volume:1,ingamename:"player_wakeup"});s_aSoundsInfo.push({path:"./sounds/",filename:"strawberry",loop:!1,
volume:1,ingamename:"strawberry"});b+=s_aSoundsInfo.length;s_aSounds=[];for(var c=0;c<s_aSoundsInfo.length;c++)this.tryToLoadSound(s_aSoundsInfo[c],!1)};this.tryToLoadSound=function(c,l){setTimeout(function(){s_aSounds[c.ingamename]=new Howl({src:[c.path+c.filename+".mp3"],autoplay:!1,preload:!0,loop:c.loop,volume:c.volume,onload:s_oMain.soundLoaded,onloaderror:function(m,v){for(var q=0;q<s_aSoundsInfo.length;q++)if(m===s_aSounds[s_aSoundsInfo[q].ingamename]._sounds[0]._id){s_oMain.tryToLoadSound(s_aSoundsInfo[q],
!0);break}},onplayerror:function(m){for(var v=0;v<s_aSoundsInfo.length;v++)if(m===s_aSounds[s_aSoundsInfo[v].ingamename]._sounds[0]._id){s_aSounds[s_aSoundsInfo[v].ingamename].once("unlock",function(){s_aSounds[s_aSoundsInfo[v].ingamename].play();"soundtrack"===s_aSoundsInfo[v].ingamename&&null!==s_oGame&&setVolume("soundtrack",SOUNDTRACK_VOLUME_IN_GAME)});break}}})},l?200:0)};this._loadImages=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this);for(var c=0;247>c;c++)s_oSpriteLibrary.addSprite("player_"+
c,"./sprites/player_anim/player_anim_"+c+".png");s_oSpriteLibrary.addSprite("bg","./sprites/bg.jpg");s_oSpriteLibrary.addSprite("but_play","./sprites/but_play.png");s_oSpriteLibrary.addSprite("but_exit","./sprites/but_exit.png");s_oSpriteLibrary.addSprite("but_settings","./sprites/but_settings.png");s_oSpriteLibrary.addSprite("but_help","./sprites/but_help.png");s_oSpriteLibrary.addSprite("but_info","./sprites/but_info.png");s_oSpriteLibrary.addSprite("but_continue","./sprites/but_continue.png");
s_oSpriteLibrary.addSprite("but_fullscreen","./sprites/but_fullscreen.png");s_oSpriteLibrary.addSprite("but_yes","./sprites/but_yes.png");s_oSpriteLibrary.addSprite("but_no","./sprites/but_no.png");s_oSpriteLibrary.addSprite("bg_menu","./sprites/bg_menu.jpg");s_oSpriteLibrary.addSprite("bg_game","./sprites/bg_game.jpg");s_oSpriteLibrary.addSprite("msg_box_big","./sprites/msg_box_big.png");s_oSpriteLibrary.addSprite("msg_box","./sprites/msg_box.png");s_oSpriteLibrary.addSprite("bg_help","./sprites/bg_help.png");
s_oSpriteLibrary.addSprite("audio_icon","./sprites/audio_icon.png");s_oSpriteLibrary.addSprite("but_home","./sprites/but_home.png");s_oSpriteLibrary.addSprite("but_restart","./sprites/but_restart.png");s_oSpriteLibrary.addSprite("logo_ctl","./sprites/logo_ctl.png");s_oSpriteLibrary.addSprite("level_sprite","./sprites/level_sprite.png");s_oSpriteLibrary.addSprite("star","./sprites/star.png");s_oSpriteLibrary.addSprite("starbox","./sprites/starbox.png");s_oSpriteLibrary.addSprite("arrow_select_level_right",
"./sprites/arrow_select_level_right.png");s_oSpriteLibrary.addSprite("arrow_select_level_left","./sprites/arrow_select_level_left.png");s_oSpriteLibrary.addSprite("stone_ball","./sprites/stone_ball.png");s_oSpriteLibrary.addSprite("wood_1","./sprites/wood_1.png");s_oSpriteLibrary.addSprite("wood_2","./sprites/wood_2.png");s_oSpriteLibrary.addSprite("wood_2_broken","./sprites/wood_2_broken.png");s_oSpriteLibrary.addSprite("ball","./sprites/ball.png");s_oSpriteLibrary.addSprite("block_1","./sprites/block_1.png");
s_oSpriteLibrary.addSprite("block_2","./sprites/block_2.png");s_oSpriteLibrary.addSprite("coin_score","./sprites/coin_score.png");s_oSpriteLibrary.addSprite("coin","./sprites/coin.png");s_oSpriteLibrary.addSprite("help_hand","./sprites/help_hand.png");s_oSpriteLibrary.addSprite("logo_menu","./sprites/logo_menu.png");s_oSpriteLibrary.addSprite("hole","./sprites/hole.png");s_oSpriteLibrary.addSprite("progress_bar","./sprites/progress_bar.png");s_oSpriteLibrary.addSprite("but_restart_small","./sprites/but_restart_small.png");
for(c=0;4>c;c++)s_oSpriteLibrary.addSprite("prop_"+c,"./sprites/prop_"+c+".png");b+=s_oSpriteLibrary.getNumSprites();s_oSpriteLibrary.loadSprites()};this._onImagesLoaded=function(){d++;f.refreshLoader(Math.floor(d/b*100))};this._onAllImagesLoaded=function(){};this.onAllPreloaderImagesLoaded=function(){this._loadImages()};this.preloaderReady=function(){this._loadImages();!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||this._initSounds();g=!0};this._onRemovePreloader=function(){try{saveItem("ls_available",
"ok")}catch(c){s_bStorageAvailable=!1}f.unload();s_oSoundTrack=playSound("soundtrack",1,!0);this.gotoMenu()};this.gotoMenu=function(){new CMenu;k=STATE_MENU};this.gotoLevelChoose=function(){new CLevelChoose;k=STATE_LEVEL};this.gotoGame=function(c){e=new CGame(c);k=STATE_GAME;$("#canvas").trigger("game_start")};this.gotoHelp=function(){new CHelpPanel;k=STATE_HELP};this.stopUpdate=function(){g=!1;createjs.Ticker.paused=!0;$("#block_game").css("display","block");s_bAudioActive&&Howler.mute(!0)};this.startUpdate=
function(){s_iPrevTime=(new Date).getTime();g=!0;createjs.Ticker.paused=!1;$("#block_game").css("display","none");s_bAudioActive&&Howler.mute(!1)};this._update=function(c){if(!1!==g){var l=(new Date).getTime();s_iTimeElaps=l-s_iPrevTime;s_iCntTime+=s_iTimeElaps;s_iCntFps++;s_iPrevTime=l;1E3<=s_iCntTime&&(s_iCurFps=s_iCntFps,s_iCntTime-=1E3,s_iCntFps=0);k===STATE_GAME&&e.update();s_oStage.update(c)}};s_oMain=this;LEVEL_POINTS=a.level_points;ALL_LEVELS_UNLOCKED=a.all_levels_unlocked;ENABLE_FULLSCREEN=
a.fullscreen;ENABLE_CHECK_ORIENTATION=a.check_orientation;s_bAudioActive=a.audio_enable_on_startup;this.initContainer()}var s_bMobile,s_bAudioActive=!1,s_iCntTime=0,s_bFullscreen=!1,s_iTimeElaps=0,s_iPrevTime=0,s_iCntFps=0,s_iCurFps=0,s_oPhysicsController,s_oAdsLevel=1,s_oCanvas,s_oStage,s_oMain,s_oSpriteLibrary,s_oSoundTrack,s_bStorageAvailable=!0,s_iLevel,s_aScores,s_aStars,s_iLastLevel,s_bFirstTime,s_iTotalScore,s_iAnimationIndex=0,s_aSounds,s_aSoundsInfo;
function CPhysicsController(){var a=Box2D.Common.Math.b2Vec2,g=Box2D.Dynamics.b2World,d=Box2D.Dynamics.b2DebugDraw,b,k=this;this.init=function(){var f=new a(0,GRAVITY);b=new g(f,!0);DEBUG_BOX2D&&this._initDebugCanvas();this.createAContactListener()};this._initDebugCanvas=function(){var f=document.createElement("canvas");f.id="debug";f.width=s_oCanvas.width;f.height=s_oCanvas.height;f.style.position="fixed";document.body.appendChild(f);$("#debug").css("pointer-events","none");f=document.getElementById("debug").getContext("2d");
var e=new d;e.SetSprite(f);e.SetDrawScale(WORLD_SCALE);e.SetFillAlpha(DEBUG_BOX2D_ALPHA);e.SetLineThickness(1);e.SetFlags(d.e_shapeBit);b.SetDebugDraw(e);sizeHandler()};this.updateDebugPosition=function(f){var e=document.getElementById("debug").getContext("2d");e.save();e.clearRect(0,0,s_oCanvas.width,s_oCanvas.height);e.translate(f.x,f.y);b.DrawDebugData();e.restore()};this.removeDebugCanvas=function(){var f=document.getElementById("debug");f.parentNode.removeChild(f)};this.processContactEvent=function(f,
e,c){e&&e.contacttype===f&&e.callback(e.params,c)};this.startComputing=function(f){f.GetBody().SetActive(!0)};this.applyImpulse=function(f){f.GetBody().ApplyImpulse({x:.8,y:1},f.GetBody().GetWorldCenter())};this.decreaseSpeedRotation=function(f){var e=.99*f.GetBody().GetAngularVelocity();f.GetBody().SetAngularVelocity(e)};this.getSpeedRotation=function(f){return f.GetBody().GetAngularVelocity()};this.destroyBody=function(f){b.DestroyBody(f.GetBody())};this.destroyBodyVector=function(f){b.DestroyBody(f)};
this.destroyAllBodies=function(){for(var f=b.GetBodyList();f;){var e=f;f=f.GetNext();b.DestroyBody(e)}b.deleteUnusedObjects};this.destroyAllJoints=function(){for(var f=b.GetJointList();f;){var e=f;f=f.GetNext();b.DestroyJoint(e)}};this.destroyAllContacts=function(){for(var f=b.GetContactList();f;){var e=f;f=f.GetNext();b.DestroyJoint(e)}};this.destroyWorld=function(){this.destroyAllJoints();this.destroyAllBodies();this.destroyAllContacts();DEBUG_BOX2D&&this.removeDebugCanvas();b=null};this.getWorld=
function(){return b};this.setElementPosition=function(f,e){var c={x:e.x/WORLD_SCALE,y:e.y/WORLD_SCALE};f.GetBody().SetPosition(c)};this.setElementBodyPosition=function(f,e){f.SetPosition({x:e.x/WORLD_SCALE,y:e.y/WORLD_SCALE})};this.setElementAngle=function(f,e){f.GetBody().SetAngle(degreesToRadians(e))};this.getElementPosition=function(f){var e=f.GetBody().GetPosition();return{x:e.x*WORLD_SCALE,y:e.y*WORLD_SCALE,angle:180*f.GetBody().GetAngle()/Math.PI}};this.getBodyPosition=function(f){var e=f.GetPosition();
return{x:e.x*WORLD_SCALE,y:e.y*WORLD_SCALE,angle:180*f.GetAngle()/Math.PI}};this.createAContactListener=function(){var f=new Box2D.Dynamics.b2ContactListener;f.BeginContact=function(e){var c=e.GetFixtureA().GetUserData(),l=e.GetFixtureB().GetUserData();if(c.fixture===BALL_FIXTURE||l.fixture===BALL_FIXTURE)s_oGame.onBallBounce();if(c.fixture===STONE_FIXTURE||l.fixture===STONE_FIXTURE)s_oGame.onBarrellRoll();c.fixture===COIN_FIXTURE&&l.fixture===BALL_FIXTURE&&s_oGame.findCoinTaken(c.id);l.fixture===
COIN_FIXTURE&&c.fixture===BALL_FIXTURE&&s_oGame.findCoinTaken(l.id);(c.fixture===PLAYER_FIXTURE&&l.fixture===BALL_FIXTURE||l.fixture===PLAYER_FIXTURE&&c.fixture===BALL_FIXTURE)&&s_oGame.getBallToPlayer();k.processContactEvent(CONTACT_BEGIN,c,e);k.processContactEvent(CONTACT_BEGIN,l,e)};f.EndContact=function(e){var c=e.GetFixtureA().GetUserData(),l=e.GetFixtureB().GetUserData();k.processContactEvent(CONTACT_END,c,e);k.processContactEvent(CONTACT_END,l,e)};f.PreSolve=function(e,c){};b.SetContactListener(f)};
this.processContactEvent=function(f,e,c){e&&e.contacttype===f&&e.callback(e.params,c)};this.update=function(){b.Step(TIMESTEP,VELOCITY_ITERATIONS,POSITION_ITERATIONS);DEBUG_BOX2D&&b.DrawDebugData();b.ClearForces()};this.init()}
function CPhysicObjectsCreator(a){var g=Box2D.Dynamics.b2BodyDef,d=Box2D.Dynamics.b2Body,b=Box2D.Dynamics.b2FixtureDef,k=Box2D.Collision.Shapes.b2PolygonShape,f=Box2D.Collision.Shapes.b2CircleShape,e;this.init=function(){e=a};this.addFloor=function(){return this.addRectangle(STATIC_BODY,CANVAS_WIDTH_HALF,CANVAS_HEIGHT-20,CANVAS_WIDTH,22,0,FLOOR_DENSITY,FLOOR_FRICTION,FLOOR_RESTITUTION,FLOOR_FIXTURE)};this.addPlayer=function(c,l){this.addCircle(STATIC_BODY,PLAYER_RADIUS,PLAYER_POSITION[c].x,PLAYER_POSITION[c].y,
1,1,1,PLAYER_FIXTURE,99,!0);return new CPlayer(c,l)};this.addCoin=function(c,l,m){c=this.addCircle(STATIC_BODY,COIN_RADIUS,c.x,c.y,COIN_DENSITY,COIN_FRICTION,COIN_RESTITUTION,COIN_FIXTURE,l,!0);return new CCoin(c,l,m)};this.addStone=function(c,l){var m=this.addCircle(DYNAMIC_BODY,STONE_RADIUS,c.x,c.y,STONE_DENSITY,STONE_FRICTION,STONE_RESTITUTION,STONE_FIXTURE,0,!1);return new CStone(m,l)};this.addBall=function(c,l){var m=this.addCircle(DYNAMIC_BODY,BALL_RADIUS,c.x,c.y,BALL_DENSITY,BALL_FRICTION,
BALL_RESTITUTION,BALL_FIXTURE,0,!1);return new CBall(m,l)};this.addBlock=function(c,l){if(!0===c.wood)var m=this.addRectangle(c.type,c.x,c.y,WOOD_BLOCK_WIDTH,WOOD_BLOCK_HEIGHT,c.angle,WOOD_DENSITY,WOOD_FRICTION,WOOD_RESTITUTION,WOOD_FIXTURE);else{if(c.breakable){m=STONE_BLOCK_WIDTH;var v=STONE_BLOCK_HEIGHT}else m=STONE_UNBREAKABLE_BLOCK_WIDTH,v=STONE_UNBREAKABLE_BLOCK_HEIGHT;m=this.addRectangle(c.type,c.x,c.y,m,v,c.angle,BLOCK_DENSITY,BLOCK_FRICTION,BLOCK_RESTITUTION,BLOCK_FIXTURE)}return new CBlock(m,
c,l)};this.addRectangle=function(c,l,m,v,q,t,A,p,y,B){var E=new g;E.type=d.b2_dynamicBody;c===STATIC_BODY&&(E.type=d.b2_staticBody);c=new b;c.density=A;c.friction=p;c.restitution=y;c.shape=new k;c.shape.SetAsBox(v/WORLD_SCALE,q/WORLD_SCALE);c.userData={id:B};E.position.Set(l/WORLD_SCALE,m/WORLD_SCALE);E.angle=t*Math.PI/180;l=e.CreateBody(E);l.CreateFixture(c);return l};this.addCircle=function(c,l,m,v,q,t,A,p,y,B){var E=new g;E.type=d.b2_dynamicBody;c===STATIC_BODY&&(E.type=d.b2_staticBody);E.bullet=
!0;c=new b;c.density=q;c.friction=t;c.restitution=A;c.isSensor=B;c.shape=new f(l/WORLD_SCALE);c.userData={fixture:p,id:y};E.position.Set(m/WORLD_SCALE,v/WORLD_SCALE);l=e.CreateBody(E);l.CreateFixture(c);return l};this.init()}
function CPhysicWorld(a,g){var d,b,k;this._init=function(){var e=s_oSpriteLibrary.getSprite("bg");d=createBitmap(e);d.x=0;d.y=0;d.alpha=1E-4;f.addChild(d);b=e.width;k=e.height};this.centerToScreen=function(e){for(var c=b,l=d.x-b/2,m=d.y-k/2,v=0;v<e.length;v++)e[v].x=e[v].x*c+l,e[v].y=k-e[v].y*c+m};this.unload=function(){f.removeChild(d);d=null};var f=g;this._init()}
function CCoin(a,g,d){var b,k;this._init=function(){k=!0;var l=s_oSpriteLibrary.getSprite("coin");b=createBitmap(l);b.regX=.5*l.width;b.regY=.5*l.height;e.addChild(b)};this.calculateTweenSpeed=function(l){var m=b.x-l.x;l=b.y-l.y;m=COIN_SPEED_TWEEN_MAX*Math.sqrt(m*m+l*l)/CANVAS_WIDTH;m<COIN_SPEED_TWEEN_MIN&&(m=COIN_SPEED_TWEEN_MIN);return m};this.onCoinTaken=function(l){if(!1!==k){k=!1;var m=this,v=this.calculateTweenSpeed(l);createjs.Tween.get(b).to({x:l.x,y:l.y,scaleX:.7,scaleY:.7},v,createjs.Ease.backIn).call(function(){m.unload();
s_oGame.onCoinTweenFinished()})}};this.unload=function(){k=!1;s_oPhysicsController.destroyBodyVector(f);createjs.Tween.removeTweens(b);e.removeChild(b)};this._moveSpritePosOnPhysicPos=function(){var l=s_oPhysicsController.getBodyPosition(f);b.x=l.x;b.y=l.y};this.getPhysic=function(){return f};this.getID=function(){return c};this.isActive=function(){return k};this.update=function(){k&&this._moveSpritePosOnPhysicPos()};var f=a;var e=d;var c=g;this._init()}
function CBall(a,g){var d,b;this._init=function(){b=!0;var e=s_oSpriteLibrary.getSprite("ball");d=createBitmap(e);d.regX=.5*e.width;d.regY=.5*e.height;f.addChild(d)};this.unload=function(){b=!1;s_oPhysicsController.destroyBodyVector(k);createjs.Tween.removeTweens(d);f.removeChild(d)};this.setActive=function(e){b=e};this.getPhysic=function(){return k};this.getSprite=function(){return d};this._moveSpritePosOnPhysicPos=function(){var e=s_oPhysicsController.getBodyPosition(k);d.x=e.x;d.y=e.y;d.rotation=
e.angle;if(e.x>CANVAS_WIDTH-100||100>e.x)s_oGame.onBallOutOfScreen()};this.update=function(){if(b){if(k.GetLinearVelocity().Length()<BALL_STOP_VELOCITY_LIMIT||!1===k.IsAwake())s_oGame.onBallStopped();this._moveSpritePosOnPhysicPos()}};var k=a;var f=g;this._init()}
function CStone(a,g){var d,b;this._init=function(){b=!0;var e=s_oSpriteLibrary.getSprite("stone_ball");d=createBitmap(e);d.regX=.5*e.width;d.regY=.5*e.height;f.addChild(d)};this.unload=function(){b=!1;s_oPhysicsController.destroyBodyVector(k);f.removeChild(d)};this._moveSpritePosOnPhysicPos=function(){var e=s_oPhysicsController.getBodyPosition(k);d.x=e.x;d.y=e.y;d.rotation=e.angle};this.getPhysic=function(){return k};this.update=function(){b&&this._moveSpritePosOnPhysicPos()};var k=a;var f=g;this._init()}
function CBlock(a,g,d){var b,k,f;this._init=function(){f=!1;if(c.wood){var m=WOOD_BLOCK_WIDTH;var v=WOOD_BLOCK_HEIGHT;if(c.breakable){var q=160;var t=30;var A={images:[s_oSpriteLibrary.getSprite("wood_2"),s_oSpriteLibrary.getSprite("wood_2_broken")],frames:{width:q,height:t,regX:0,regY:0},animations:{idle:[0,0,!1],explode:[1,1,!1]},framerate:0};A=new createjs.SpriteSheet(A);b=createSprite(A,"idle",0,0,q,t);b.regX=.5*q;b.regY=.5*t}else A=s_oSpriteLibrary.getSprite("wood_1"),q=A.width,t=A.height,b=
createBitmap(A),b.regX=.5*A.width,b.regY=.5*A.height}else c.breakable?(m=STONE_BLOCK_WIDTH,v=STONE_BLOCK_HEIGHT,q=244,t=182,A={images:[s_oSpriteLibrary.getSprite("block_1")],frames:{width:q,height:t,regX:-22,regY:10},animations:{idle:[0,0,!1],explode:[1,6,!1]},framerate:30},A=new createjs.SpriteSheet(A),b=createSprite(A,"idle",-22,10,q,t),b.regX=.5*q,b.regY=.5*t):(m=STONE_UNBREAKABLE_BLOCK_WIDTH,v=STONE_UNBREAKABLE_BLOCK_HEIGHT,A=s_oSpriteLibrary.getSprite("block_2"),q=A.width,t=A.height,b=createBitmap(A),
b.regX=46,b.regY=90);l.addChild(b);k=new createjs.Shape;k.graphics.beginFill("red").drawRect(0,0,2*m,2*v);k.regX=m;k.regY=v;k.x=b.x;k.y=b.y;k.alpha=.01;var p=this;k.on("click",function(){p.onClickedBlock(p)});l.addChild(k);c.breakable&&!s_bMobile&&(k.cursor="pointer");f=!0};this.onClickedBlock=function(m){s_oGame.onClick();null!==c&&c.breakable&&(s_oGame.onBlockClicked(),c.wood?(playSound("wood_explosion",1,!1),b.gotoAndPlay("explode"),m.unloadPhysic(),createjs.Tween.get(b).to({alpha:0},500,createjs.Ease.cercIn).call(function(){createjs.Tween.removeTweens(b);
l.removeChild(b)})):(playSound("block_explosion",1,!1),b.gotoAndPlay("explode"),m.unloadPhysic()))};this.getPhysic=function(){return e};this.unloadPhysic=function(){f=!1;s_oPhysicsController.destroyBodyVector(e);c=null};this.unload=function(){f=!1;s_oPhysicsController.destroyBodyVector(e);createjs.Tween.removeTweens(b);c=null;l.removeChild(b)};this._moveSpritePosOnPhysicPos=function(){var m=s_oPhysicsController.getBodyPosition(e);k.x=b.x=m.x;k.y=b.y=m.y;k.rotation=b.rotation=m.angle};this.isBreakable=
function(){return c?c.breakable:!1};this.update=function(){f&&this._moveSpritePosOnPhysicPos()};var e=a;var c=g;var l=d;this._init()}
function CToggle(a,g,d,b,k){var f,e,c,l=[],m,v=1;this._init=function(t,A,p,y){e=[];c=[];var B=new createjs.SpriteSheet({images:[p],frames:{width:p.width/2,height:p.height,regX:p.width/2/2,regY:p.height/2},animations:{state_true:[0],state_false:[1]}});f=y;m=createSprite(B,"state_"+f,p.width/2/2,p.height/2,p.width/2,p.height);m.x=t;m.y=A;m.stop();s_bMobile||(m.cursor="pointer");q.addChild(m);this._initListener()};this.setRotation=function(t){m.rotation=t};this.unload=function(){m.off("mousedown",this.buttonDown);
m.off("pressup",this.buttonRelease);q.removeChild(m)};this._initListener=function(){m.on("mousedown",this.buttonDown);m.on("pressup",this.buttonRelease)};this.addEventListener=function(t,A,p){e[t]=A;c[t]=p};this.addEventListenerWithParams=function(t,A,p,y){e[t]=A;c[t]=p;l=y};this.setActive=function(t){f=t;m.gotoAndStop("state_"+f)};this.setScale=function(t){v=t;m.scaleX=v;m.scaleY=v};this.buttonRelease=function(){m.scaleX=v;m.scaleY=v;playSound("click",1,!1);f=!f;m.gotoAndStop("state_"+f);e[ON_MOUSE_UP]&&
e[ON_MOUSE_UP].call(c[ON_MOUSE_UP],l)};this.buttonDown=function(){m.scaleX=v-.1;m.scaleY=v-.1;e[ON_MOUSE_DOWN]&&e[ON_MOUSE_DOWN].call(c[ON_MOUSE_DOWN],l)};this.getButtonImage=function(){return m};this.setPosition=function(t,A){m.x=t;m.y=A};this.setVisible=function(t){m.visible=t};var q=k;this._init(a,g,d,b)}
function CGfxButton(a,g,d,b){var k,f,e,c,l,m,v,q,t;this._init=function(p,y,B){k=!1;f=[];e=[];l=[];c=createBitmap(B);c.x=p;c.y=y;v=m=1;c.regX=B.width/2;c.regY=B.height/2;s_bMobile||(c.cursor="pointer");A.addChild(c);this._initListener()};this.getSprite=function(){return c};this.unload=function(){c.off("mousedown",q);c.off("pressup",t);createjs.Tween.removeTweens(c);A.removeChild(c)};this.setVisible=function(p){c.visible=p};this.setCursorType=function(p){c.cursor=p};this._initListener=function(){q=
c.on("mousedown",this.buttonDown);t=c.on("pressup",this.buttonRelease)};this.addEventListener=function(p,y,B){f[p]=y;e[p]=B};this.addEventListenerWithParams=function(p,y,B,E){f[p]=y;e[p]=B;l[p]=E};this.enable=function(){k=!1};this.disable=function(){k=!0};this.buttonRelease=function(){k||(c.scaleX=0<m?m:-1*m,c.scaleY=v,playSound("click",1,!1),f[ON_MOUSE_UP]&&f[ON_MOUSE_UP].call(e[ON_MOUSE_UP],l[ON_MOUSE_UP]))};this.buttonDown=function(){k||(c.scaleX=0<m?.9*m:-.9*m,c.scaleY=.9*v,f[ON_MOUSE_DOWN]&&
f[ON_MOUSE_DOWN].call(e[ON_MOUSE_DOWN],l[ON_MOUSE_DOWN]))};this.rotation=function(p){c.rotation=p};this.getButton=function(){return c};this.setPosition=function(p,y){c.x=p;c.y=y};this.setX=function(p){c.x=p};this.setY=function(p){c.y=p};this.getButtonImage=function(){return c};this.setScaleX=function(p){m=c.scaleX=p};this.setScaleY=function(p){v=c.scaleY=p};this.getX=function(){return c.x};this.getY=function(){return c.y};this.pulseAnimation=function(){createjs.Tween.get(c,{loop:-1}).to({scaleX:.9*
m,scaleY:.9*v},850,createjs.Ease.quadOut).to({scaleX:m,scaleY:v},650,createjs.Ease.quadIn)};this.removeAllTweens=function(){createjs.Tween.removeTweens(c)};var A=void 0!==b?b:s_oStage;this._init(a,g,d);return this}
function CTextButton(a,g,d,b,k,f,e,c){var l,m,v,q,t,A,p;this._init=function(B,E,h,u,C,w,x){l=[];m=[];v=[];var D=createBitmap(h);t=new createjs.Text(u,x+"px "+C,w);t.textAlign="center";t.textBaseline="middle";t.getBounds();t.x=h.width/2;t.y=Math.floor(h.height/2);q=new createjs.Container;q.x=B;q.y=E;q.regX=h.width/2;q.regY=h.height/2;q.addChild(D,t);y.addChild(q);s_bMobile||(q.cursor="pointer");this._initListener()};this.unload=function(){q.off("mousedown",A);q.off("pressup",p);y.removeChild(q)};this.setVisible=
function(B){q.visible=B};this._initListener=function(){A=q.on("mousedown",this.buttonDown);p=q.on("pressup",this.buttonRelease)};this.addEventListener=function(B,E,h){m[B]=E;v[B]=h};this.buttonRelease=function(){q.scaleX=1;q.scaleY=1;playSound("click",1,!1);m[ON_MOUSE_UP]&&m[ON_MOUSE_UP].call(v[ON_MOUSE_UP],l[ON_MOUSE_UP])};this.buttonDown=function(){q.scaleX=.9;q.scaleY=.9;m[ON_MOUSE_DOWN]&&m[ON_MOUSE_DOWN].call(v[ON_MOUSE_DOWN],l[ON_MOUSE_DOWN])};this.addEventListenerWithParams=function(B,E,h,u){m[B]=
E;v[B]=h;l[B]=u};this.setTextPosition=function(B){t.y=B};this.setPosition=function(B,E){q.x=B;q.y=E};this.setX=function(B){q.x=B};this.setY=function(B){q.y=B};this.getButtonImage=function(){return q};this.getX=function(){return q.x};this.getY=function(){return q.y};var y=c;this._init(a,g,d,b,k,f,e);return this}
function CMenu(){var a,g,d,b,k,f,e,c,l,m,v,q,t,A,p,y,B=null,E=null;this._init=function(){y=new createjs.Container;s_oStage.addChild(y);l=createBitmap(s_oSpriteLibrary.getSprite("bg_menu"));l.cache(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);y.addChild(l);var h=s_oSpriteLibrary.getSprite("logo_menu");q=createBitmap(h);q.regX=h.width/2;q.regY=h.height/2;q.x=CANVAS_WIDTH_HALF;q.y=-150;createjs.Tween.get(q,{loop:!1}).to({y:CANVAS_HEIGHT_HALF-100},1E3,createjs.Ease.cubicOut).call(this.addLogoPulse);y.addChild(q);
h=s_oSpriteLibrary.getSprite("but_play");k=CANVAS_WIDTH-150;f=CANVAS_HEIGHT-120;m=new CGfxButton(k,f,h,y);m.addEventListener(ON_MOUSE_UP,this._onButPlayRelease,this);m.pulseAnimation();if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)h=s_oSpriteLibrary.getSprite("audio_icon"),e=CANVAS_WIDTH-h.height/2-20,c=h.height/2+20,A=new CToggle(e,c,h,s_bAudioActive,y),A.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this);var u=s_oSpriteLibrary.getSprite("but_info");d=h.height/2+20;b=h.height/2+20;v=new CGfxButton(d,
b,u,y);v.addEventListener(ON_MOUSE_UP,this._onButInfoRelease,this);h=window.document;u=h.documentElement;B=u.requestFullscreen||u.mozRequestFullScreen||u.webkitRequestFullScreen||u.msRequestFullscreen;E=h.exitFullscreen||h.mozCancelFullScreen||h.webkitExitFullscreen||h.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(B=!1);B&&screenfull.isEnabled&&(h=s_oSpriteLibrary.getSprite("but_fullscreen"),a=d+h.width/2+10,g=b,p=new CToggle(a,g,h,s_bFullscreen,y),p.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,
this));t=new createjs.Shape;t.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);y.addChild(t);createjs.Tween.get(t).to({alpha:0},1E3).call(function(){t.visible=!1});s_bFirstTime=!0;s_iLastLevel=1;s_iTotalScore=0;if(s_bStorageAvailable){h=getItemJson("rolling_cheese_scores");if(null!==h&&void 0!==h)s_aScores=h;else for(s_aScores=[],h=0;h<LEVELS_NUMBER;h++)s_aScores[h]=0;if(void 0===s_aStars||null===s_aStars)for(s_aStars=[],h=0;h<LEVELS_NUMBER;h++)s_aStars.push(0);h=getItemJson("rolling_cheese_stars");
null!==h&&void 0!==s_aStars&&(s_aStars=h);h=getItem("rolling_cheese_lastlevel");null!==h&&(s_iLastLevel=Number(h),s_bFirstTime=!1);h=getItem("rolling_cheese_totalscore");null!==h&&(s_iTotalScore=Number(h))}else new CMsgBox(TEXT_ERR_LS,y);this.refreshButtonPos(s_iOffsetX,s_iOffsetY)};this.refreshButtonPos=function(h,u){m.setPosition(k-h,f-u);v.setPosition(d+h,b);!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||A.setPosition(e-h,c);B&&screenfull.isEnabled&&p.setPosition(a+h,g)};this.addLogoPulse=function(){createjs.Tween.get(q,
{loop:!1}).to({scaleX:1.1,scaleY:1.1},500,createjs.Ease.cubicOut).to({scaleX:1,scaleY:1},500,createjs.Ease.cubicIn).to({scaleX:1.1,scaleY:1.1},500,createjs.Ease.cubicOut).to({scaleX:1,scaleY:1},500,createjs.Ease.cubicIn).wait(1E3).call(function(){s_oMenu.addLogoPulse()})};this.unload=function(){m.unload();m=null;if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)A.unload(),A=null;B&&screenfull.isEnabled&&(p.unload(),p=null);createjs.Tween.removeAllTweens();s_oStage.removeAllChildren();s_oMenu=null};this._onAudioToggle=
function(){Howler.mute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this._onButInfoRelease=function(){new CCreditsPanel};this._onButPlayRelease=function(){this.unload();s_oMain.gotoLevelChoose()};this._onFullscreenRelease=function(){s_bFullscreen?E.call(window.document):B.call(window.document.documentElement);sizeHandler()};this.resetFullscreenBut=function(){B&&screenfull.isEnabled&&p.setActive(s_bFullscreen)};s_oMenu=this;this._init()}var s_oMenu=null;
function CLevelBut(a,g,d,b,k,f){var e,c,l,m=[],v=[],q,t,A,p,y,B;this._init=function(h,u,C,w,x){c=[];l=[];p=new createjs.Container;E.addChild(p);var D=new createjs.SpriteSheet({images:[w],frames:{width:w.width/2,height:w.height,regX:w.width/2/2,regY:w.height/2},animations:{state_true:[0],state_false:[1]}});e=x;A=createSprite(D,"state_"+e,w.width/2/2,w.height/2,w.width/2,w.height);A.mouseEnabled=x;A.x=h;A.y=u;A.stop();!s_bMobile&&e&&(p.cursor="pointer");p.addChild(A);m.push(A);t=new createjs.Container;
t.x=A.x;t.y=A.y;p.addChild(t);w=new createjs.Text(C+1,FONT_SIZE_LEVEL_BUTTON+PRIMARY_FONT,SECONDARY_FONT_COLOR);w.textAlign="center";w.x=2;w.y=-25;w.outline=5;t.addChild(w);x=new createjs.Text(C+1,FONT_SIZE_LEVEL_BUTTON+PRIMARY_FONT,PRIMARY_FONT_COLOR);x.textAlign=w.textAlign;x.x=w.x;x.y=w.y;t.addChild(x);e||(x.color="#999");q=[];for(x=0;3>x;x++)w=s_aStars[C]&&s_aStars[C]>x?s_oSpriteLibrary.getSprite("star"):s_oSpriteLibrary.getSprite("starbox"),q.push(createBitmap(w,w.width,w.height)),q[x].regX=
.5*w.width,q[x].regY=.5*w.height,q[x].scaleX=.7,q[x].scaleY=q[x].scaleX,p.addChild(q[x]);q[0].x=h-40;q[0].y=u-40;q[1].x=h;q[1].y=u-55;q[2].x=h+40;q[2].y=u-40;this._initListener()};this.unload=function(){p.off("mousedown",y);p.off("pressup",B);p.removeChild(A)};this._initListener=function(){y=p.on("mousedown",this.buttonDown);B=p.on("pressup",this.buttonRelease)};this.viewBut=function(h){p.addChild(h)};this.addEventListener=function(h,u,C){c[h]=u;l[h]=C};this.addEventListenerWithParams=function(h,
u,C,w){c[h]=u;l[h]=C;v=w};this.ifClickable=function(){return!0===p.mouseEnabled?1:0};this.setActive=function(h,u){e=u;m[h].gotoAndStop("state_"+e);m[h].mouseEnabled=!0};this.buttonRelease=function(){e&&(playSound("click",1,0),c[ON_MOUSE_UP]&&c[ON_MOUSE_UP].call(l[ON_MOUSE_UP],v))};this.buttonDown=function(){if(e){A.scaleX=A.scaleY=.9;t.scaleX=t.scaleY=.9;for(var h=0;h<q.length;h++)q[h].scaleX=q[h].scaleY=.7}c[ON_MOUSE_DOWN]&&c[ON_MOUSE_DOWN].call(l[ON_MOUSE_DOWN],v)};this.setPosition=function(h,u){p.x=
h;p.y=u};this.setVisible=function(h){p.visible=h};var E=f;this._init(a,g,d,b,k,f)}
function CLevelChoose(){var a,g,d,b,k,f,e,c,l,m,v,q,t,A,p,y,B,E=null,h=null,u,C,w,x,D,n,H,L=null,R=null;this._init=function(){var G=new createjs.Shape;G.graphics.beginFill("#000000").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);G.alpha=.7;v=0;n=new createjs.Container;s_oStage.addChild(n);var J=createBitmap(s_oSpriteLibrary.getSprite("bg_menu"));n.addChild(J);n.addChild(G);G=s_oSpriteLibrary.getSprite("msg_box_big");J=createBitmap(G);J.regX=.5*G.width;J.regY=.5*G.height;J.scaleX=J.scaleY=.9;J.x=CANVAS_WIDTH_HALF;
J.y=CANVAS_HEIGHT_HALF+20;n.addChild(J);l=CANVAS_WIDTH_HALF;m=50;G=550;J=FONT_SIZE_TITLES;var N=l,P=m;C=new CTLText(n,N-G/2,P-J/2,G,J,FONT_SIZE_TITLES,"center",SECONDARY_FONT_COLOR,PRIMARY_FONT,1,2,2,TEXT_SELECT_LEVEL,!0,!0,!0,!1);C.setOutline(5);w=new CTLText(n,N-G/2,P-J/2,G,J,FONT_SIZE_TITLES,"center",PRIMARY_FONT_COLOR,PRIMARY_FONT,1,2,2,TEXT_SELECT_LEVEL,!0,!0,!0,!1);e=CANVAS_WIDTH_HALF;c=CANVAS_HEIGHT-45;x=new createjs.Text(TEXT_TOTAL_SCORE+s_iTotalScore,FONT_SIZE_SUBTITLES+"px "+PRIMARY_FONT,
SECONDARY_FONT_COLOR);x.x=e;x.outline=5;x.textAlign="center";n.addChild(x);D=new createjs.Text(TEXT_TOTAL_SCORE+s_iTotalScore,FONT_SIZE_SUBTITLES+"px "+PRIMARY_FONT,PRIMARY_FONT_COLOR);D.x=e;D.textAlign="center";n.addChild(D);G=s_oSpriteLibrary.getSprite("but_exit");k=CANVAS_WIDTH-G.width/2-10;f=G.height/2+10;y=new CGfxButton(k,f,G,n);y.addEventListener(ON_MOUSE_UP,this._onExit,this);q=G.height;if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)d=y.getX()-G.width-10,b=G.height/2+10,B=new CToggle(d,b,s_oSpriteLibrary.getSprite("audio_icon"),
s_bAudioActive,n),B.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this);G=window.document;J=G.documentElement;L=J.requestFullscreen||J.mozRequestFullScreen||J.webkitRequestFullScreen||J.msRequestFullscreen;R=G.exitFullscreen||G.mozCancelFullScreen||G.webkitExitFullscreen||G.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(L=!1);L&&screenfull.isEnabled&&(G=s_oSpriteLibrary.getSprite("but_fullscreen"),a=G.width/4+10,g=G.height/2+10,H=new CToggle(a,g,G,s_bFullscreen,n),H.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,
this));this._checkBoundLimits();A=[];G=CANVAS_WIDTH-2*EDGEBOARD_X-80;G=Math.floor(G/NUM_COLS_PAGE_LEVEL)/2-42;for(N=J=0;N<NUM_COLS_PAGE_LEVEL;N++)A.push(J),J+=2*G;p=[];this._createNewLevelPage(0,LEVELS_NUMBER);if(1<p.length){for(G=1;G<p.length;G++)p[G].visible=!1;E=new CGfxButton(CANVAS_WIDTH_HALF+360,CANVAS_HEIGHT_HALF+20,s_oSpriteLibrary.getSprite("arrow_select_level_right"),n);E.addEventListener(ON_MOUSE_UP,this._onRight,this);h=new CGfxButton(CANVAS_WIDTH_HALF-360,CANVAS_HEIGHT_HALF+20,s_oSpriteLibrary.getSprite("arrow_select_level_left"),
n);h.addEventListener(ON_MOUSE_UP,this._onLeft,this)}this.setArrowsVisible();this.refreshButtonPos();u=new createjs.Shape;u.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);n.addChild(u);createjs.Tween.get(u).to({alpha:0},1E3).call(function(){createjs.Tween.removeTweens(u);u.visible=!1})};this.setArrowsVisible=function(){0===v?(E.setVisible(!0),h.setVisible(!1)):v===p.length-1&&(E.setVisible(!1),h.setVisible(!0))};this.unload=function(){for(var G=0;G<t.length;G++)t[G].unload();
!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||B.unload();L&&screenfull.isEnabled&&H.unload();y.unload();null!==h&&(h.unload(),E.unload());s_oStage.removeAllChildren();s_oLevelChoose=null};this.refreshButtonPos=function(){C.setY(m+s_iOffsetY);w.setY(m+s_iOffsetY);x.y=D.y=c-s_iOffsetY;y.setPosition(k-s_iOffsetX,f+s_iOffsetY);!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||B.setPosition(d-s_iOffsetX,s_iOffsetY+b);L&&screenfull.isEnabled&&H.setPosition(a+s_iOffsetX,g+s_iOffsetY)};this._checkBoundLimits=function(){for(var G=
s_oSpriteLibrary.getSprite("level_sprite"),J=0,N=CANVAS_HEIGHT-2*EDGEBOARD_Y-2*q,P=0;J<N;)J+=G.height+20,P++;NUM_ROWS_PAGE_LEVEL>P&&(NUM_ROWS_PAGE_LEVEL=P);N=J=0;P=CANVAS_WIDTH-2*EDGEBOARD_X;for(G=s_oSpriteLibrary.getSprite("level_sprite");N<P;)N+=G.width/2+5,J++;NUM_COLS_PAGE_LEVEL>J&&(NUM_COLS_PAGE_LEVEL=J)};this._createNewLevelPage=function(G,J){var N=new createjs.Container;n.addChild(N);p.push(N);t=[];for(var P=0,U=20,Q=1,V=!1,r=s_oSpriteLibrary.getSprite("level_sprite"),S=G;S<J;S++){var W=new CLevelBut(A[P]+
r.width/4,U+r.height/2+30,S,r,!0===ALL_LEVELS_UNLOCKED?!0:S+1>s_iLastLevel?!1:!0,N);W.addEventListenerWithParams(ON_MOUSE_UP,this._onButLevelRelease,this,S);t.push(W);P++;if(P===A.length&&S<J-1&&(P=0,U+=r.height+50,Q++,Q>NUM_ROWS_PAGE_LEVEL)){V=!0;break}}N.x=CANVAS_WIDTH_HALF;N.y=CANVAS_HEIGHT_HALF;N.regX=N.getBounds().width/2;N.regY=N.getBounds().height/2;V&&this._createNewLevelPage(S+1,J)};this._onRight=function(){p[v].visible=!1;v++;v>=p.length&&(v=0);p[v].visible=!0;this.setArrowsVisible()};this._onLeft=
function(){p[v].visible=!1;v--;0>v&&(v=p.length-1);p[v].visible=!0;this.setArrowsVisible()};this._onButLevelRelease=function(G){this.unload();s_oMain.gotoGame(G)};this._onAudioToggle=function(){Howler.mute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this._onFullscreenRelease=function(){s_bFullscreen?R.call(window.document):L.call(window.document.documentElement);sizeHandler()};this.resetFullscreenBut=function(){L&&screenfull.isEnabled&&H.setActive(s_bFullscreen)};this._onExit=function(){this.unload();
s_oMain.gotoMenu()};s_oLevelChoose=this;this._init()}var s_oLevelChoose=null;
function CGame(a){var g,d,b,k,f,e,c,l,m,v,q,t,A,p,y,B,E,h,u,C,w,x,D;this._init=function(){s_oRollingTextManager=new CRollingTextManager;this.resetVariables();$("#canvas").trigger("start_level",b+1);t=new createjs.Container;s_oStage.addChild(t);var n=s_oSpriteLibrary.getSprite("bg_game");C=createBitmap(n);C.cache(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);t.addChild(C);this._addProps();this._addHitArea();this._initPhysicObjects();E=new CInterface(b+1,t);A=new createjs.Container;t.addChild(A);0===b?(CHelpPanel(),
this.addHelpingHand()):this._onExitHelp();setVolume("soundtrack",SOUNDTRACK_VOLUME_IN_GAME);var H=new createjs.Shape;H.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);t.addChild(H);createjs.Tween.get(H).to({alpha:0},1E3).call(function(){createjs.Tween.removeTweens(H);t.removeChild(H)})};this._addHitArea=function(){var n=new createjs.Shape;n.graphics.beginFill("white").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);n.alpha=.01;n.on("mousedown",this.onClick);t.addChild(n)};this._addProps=
function(){for(var n=0;n<PROPS_INFOS[b].length;n++){var H=PROPS_INFOS[b][n].type===PROPS_HOLE?s_oSpriteLibrary.getSprite("hole"):s_oSpriteLibrary.getSprite("prop_"+PROPS_INFOS[b][n].type);var L=createBitmap(H);L.regX=.5*H.width;L.regY=.5*H.height;L.x=PROPS_INFOS[b][n].x;L.y=PROPS_INFOS[b][n].y;t.addChild(L)}};this.addCoinTaken=function(){d++;3<d&&(d=3);E.pulseScoreIcon();E.updateCoinsTaken(d)};this.onBarrellRoll=function(){m&&!1===soundPlaying("barrel")&&playSound("barrel",1,0)};this.onBallBounce=
function(){m&&!1===soundPlaying("bouncing_cheese")&&playSound("bouncing_cheese",1,0)};this.addHelpingHand=function(){var n=s_oSpriteLibrary.getSprite("help_hand");w=createBitmap(n);w.regX=.5*n.width;w.regY=.5*n.height;w.x=CANVAS_WIDTH_HALF+50;w.y=CANVAS_HEIGHT_HALF-5;w.alpha=.5;t.addChild(w);createjs.Tween.get(w,{loop:!0}).to({scaleX:.8,scaleY:.8},1E3,createjs.Ease.cubicIn).to({scaleX:1,scaleY:1},1E3,createjs.Ease.cubicOut)};this.onCoinTweenFinished=function(){B.animationEatCoin()};this.findCoinTaken=
function(n){for(var H=0;H<e.length;H++)e[H].getID()===n&&e[H].isActive()&&(e[H].onCoinTaken(PLAYER_POSITION[b]),this.addCoinTaken(),!1===soundPlaying("strawberry")&&playSound("strawberry",1,0))};this._initLevelObjects=function(){for(var n=0;n<BLOCKS_DATA[b].length;n++){var H=q.addBlock(BLOCKS_DATA[b][n],t);l.push(H)}for(n=0;n<STONES_POSITION[b].length;n++)H=q.addStone(STONES_POSITION[b][n],t),c.push(H);B=q.addPlayer(b,t);y=q.addBall(BALL_POSITION[b],t);for(n=0;n<COINS_POSITION[b].length;n++)H=q.addCoin(COINS_POSITION[b][n],
n,t),e.push(H);this.updatePhysics()};this._initPhysicObjects=function(){s_oPhysicsController=new CPhysicsController;q=new CPhysicObjectsCreator(s_oPhysicsController.getWorld());new CPhysicWorld(q,t);p=q.addFloor();this._initLevelObjects()};this.resetVariables=function(){b=a;g=s_iTotalScore;f=d=k=0;e=[];l=[];c=[];D=x=u=h=null;v=m=!1};this.unload=function(){m=!1;null!==h&&h.unload();null!==u&&u.unload();E.unload();createjs.Tween.removeAllTweens();this.destroyPhysicsEngine();t.removeAllChildren();s_oStage.removeChild(t);
!1===s_bMobile&&(document.onkeydown=null,document.onkeyup=null)};this.destroyPhysicsEngine=function(){for(var n=0;n<e.length;n++)s_oPhysicsController.destroyBodyVector(e[n].getPhysic()),e[n].unload(),e[n]=null;for(n=0;n<c.length;n++)s_oPhysicsController.destroyBodyVector(c[n].getPhysic()),c[n].unload(),c[n]=null;for(n=0;n<l.length;n++)s_oPhysicsController.destroyBodyVector(l[n].getPhysic()),l[n].unload(),l[n]=null;s_oPhysicsController.destroyBodyVector(p);s_oPhysicsController.destroyWorld();B.unload();
s_oPhysicsController=q=B=null};this.onExit=function(){this.unload();$("#canvas").trigger("show_interlevel_ad");$("#canvas").trigger("end_session");setVolume("soundtrack",1);s_oMain.gotoMenu()};this._onExitHelp=function(){v||(m=!0)};this.pause=function(n){m=!n;v=n};this.getBallToPlayer=function(){y.setActive(!1);createjs.Tween.get(y.getSprite()).to({x:PLAYER_POSITION[b].x,y:PLAYER_POSITION[b].y-20,scaleX:.7,scaleY:.7},500,createjs.Ease.sineOut).call(s_oGame.onBallArrivedToPlayer)};this.addScoreText=
function(){x=new createjs.Text("+"+LEVEL_POINTS,FONT_SIZE_MESSAGE_BOX+"px "+PRIMARY_FONT,SECONDARY_FONT_COLOR);D=new createjs.Text("+"+LEVEL_POINTS,FONT_SIZE_MESSAGE_BOX+"px "+PRIMARY_FONT,PRIMARY_FONT_COLOR);x.x=D.x=PLAYER_POSITION[b].x;x.y=D.y=PLAYER_POSITION[b].y-50;x.textAlign=D.textAlign="center";x.textBaseline=D.textBaseline="middle";x.outline=3;t.addChild(x,D);createjs.Tween.get(x).to({y:0,alpha:0},1E3,createjs.Ease.cubicIn).call(function(){createjs.Tween.removeTweens(x);t.removeChild(x)});
createjs.Tween.get(D).to({y:0,alpha:0},1E3,createjs.Ease.cubicIn).call(function(){createjs.Tween.removeTweens(D);t.removeChild(D)})};this.onBallArrivedToPlayer=function(){null===D&&s_oGame.addScoreText();createjs.Tween.removeTweens(y.getSprite());s_oPhysicsController.destroyBodyVector(y.getPhysic());y.unload();y=null;s_oGame.gameWin()};this.gameWin=function(){m=!1;stopSound("soundtrack");$("#canvas").trigger("end_level",b);playSound("game_win",1,!1);s_iAnimationIndex=0;s_iLastLevel<b+2&&(s_iLastLevel=
b+2,saveItem("rolling_cheese_lastlevel",s_iLastLevel));k=LEVEL_POINTS+d*LEVEL_POINTS;E.refreshScore(g,k);s_iTotalScore=g+=k;saveItem("rolling_cheese_totalscore",s_iTotalScore);s_aStars[b]<d&&(s_aStars[b]=d,setItemJson("rolling_cheese_stars",s_aStars));s_aScores[b]<k&&(s_aScores[b]=k,setItemJson("rolling_cheese_scores",s_aScores));null===h&&(B.animationWin(),h=CWinPanel(d,k,A),h.show(),setTimeout(function(){playSound("soundtrack",SOUNDTRACK_VOLUME_IN_GAME,!0)},1E3))};this.gameOver=function(){setTimeout(function(){m=
!1},1E3);stopSound("soundtrack");$("#canvas").trigger("end_level",b);null===u&&(setTimeout(function(){playSound("soundtrack",SOUNDTRACK_VOLUME_IN_GAME,!0)},3E3),playSound("game_over",1,!1),s_iAnimationIndex++,B.animationLose(),u=CLosePanel(A),u.show())};this.checkForActiveBlocks=function(){for(var n=!1,H=0;H<l.length;H++)l[H].isBreakable()&&(n=!0);return n};this._checkForPossibleSolution=function(){return 0===b?!0:!0===this.checkForActiveBlocks()?!0:!1};this.onBallStopped=function(){!1===this._checkForPossibleSolution()&&
this.gameOver()};this.onBallOutOfScreen=function(){this.gameOver()};this.restartGame=function(){$("#canvas").trigger("restart_level",b);this.unload();this.resetVariables();s_oMain.gotoGame(b)};this.onNextLevel=function(){this.unload();$("#canvas").trigger("end_level",b);b+1===LEVELS_NUMBER?s_oMain.gotoLevelChoose():(s_oMain.gotoGame(b+1),$("#canvas").trigger("show_interlevel_ad"))};this.getLevel=function(){return b};this.isStartGame=function(){return m};this.onBlockClicked=function(){w&&(createjs.Tween.removeTweens(w),
createjs.Tween.get(w).to({alpha:0},200).call(function(){createjs.Tween.removeTweens(w);t.removeChild(w)}))};this.onClick=function(){f=0;if(B.isSleeping())B.onWakeUp()};this.updatePhysics=function(){for(var n=0;n<e.length;n++)e[n]&&e[n].update();for(n=0;n<l.length;n++)l[n]&&l[n].update();for(n=0;n<c.length;n++)c[n]&&c[n].update();y&&y.update();s_oPhysicsController.update()};this.update=function(){s_oRollingTextManager.update();if(m){f+=s_iTimeElaps;f>=SLEEP_TIMER_MAX&&(f=0,B.onSleep());for(var n=0;n<
UPDATE_LOOP_VAR;n++)this.updatePhysics()}};s_oGame=this;this._init()}var s_oGame,s_oRollingTextManager;
function CInterface(a,g){var d,b,k,f,e,c,l,m,v,q,t,A,p,y,B,E,h,u,C,w=null,x,D,n,H,L,R,G,J,N,P,U,Q,V,r,S,W=null,Z=null;this._init=function(){u=new createjs.Container;K.addChild(u);E=CANVAS_WIDTH_HALF;h=CANVAS_HEIGHT-20;B=CANVAS_WIDTH_HALF;p=20;y=60;N=new createjs.Text(TEXT_SCORE+" "+s_iTotalScore,FONT_SIZE_INTERFACE+PRIMARY_FONT,SECONDARY_FONT_COLOR);N.x=E;N.y=h;N.textAlign="center";N.textBaseline="alphabetic";N.outline=4;u.addChild(N);J=new createjs.Text(TEXT_SCORE+" "+s_iTotalScore,FONT_SIZE_INTERFACE+
PRIMARY_FONT,PRIMARY_FONT_COLOR);J.x=E;J.y=h;J.textAlign="center";J.textBaseline="alphabetic";u.addChild(J);U=new createjs.Text(TEXT_LEVEL+" "+a,FONT_SIZE_INTERFACE+PRIMARY_FONT,SECONDARY_FONT_COLOR);U.x=p;U.y=y;U.textAlign="left";U.textBaseline="alphabetic";U.outline=4;u.addChild(U);P=new createjs.Text(TEXT_LEVEL+" "+a,FONT_SIZE_INTERFACE+PRIMARY_FONT,PRIMARY_FONT_COLOR);P.x=p;P.y=y;P.textAlign="left";P.textBaseline="alphabetic";u.addChild(P);var z=s_oSpriteLibrary.getSprite("coin_score");G=createBitmap(z);
G.regX=.5*z.width;G.regY=.5*z.height;G.x=B-30;G.y=50;G.scaleX=G.scaleY=.7;u.addChild(G);Q=new createjs.Text("X0",FONT_SIZE_INTERFACE+PRIMARY_FONT,SECONDARY_FONT_COLOR);Q.x=B;Q.y=60;Q.textAlign="left";Q.textBaseline="alphabetic";Q.outline=4;u.addChild(Q);V=new createjs.Text("X0",FONT_SIZE_INTERFACE+PRIMARY_FONT,PRIMARY_FONT_COLOR);V.x=B;V.y=60;V.textAlign="left";V.textBaseline="alphabetic";u.addChild(V);C=new createjs.Container;u.addChild(C);z=s_oSpriteLibrary.getSprite("but_settings");d=CANVAS_WIDTH-
z.width/2-10;b=z.height/2+10;z=s_oSpriteLibrary.getSprite("but_exit");v=d;q=b+z.height+10;H=new CGfxButton(v,q,z,u);H.addEventListener(ON_MOUSE_UP,this._onExit,this);H.setVisible(!1);z=s_oSpriteLibrary.getSprite("but_help");k=d;f=q+z.height+10;R=new CGfxButton(k,f,z,u);R.addEventListener(ON_MOUSE_UP,function(){new CHelpPanel},this);R.setVisible(!1);l=k;m=f+z.height+10;if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)z=s_oSpriteLibrary.getSprite("audio_icon"),D=new CToggle(l,m,z,s_bAudioActive,u),D.addEventListener(ON_MOUSE_UP,
this._onAudioToggle,this),D.setVisible(!1);z=window.document;var I=z.documentElement;W=I.requestFullscreen||I.mozRequestFullScreen||I.webkitRequestFullScreen||I.msRequestFullscreen;Z=z.exitFullscreen||z.mozCancelFullScreen||z.webkitExitFullscreen||z.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(W=!1);W&&screenfull.isEnabled&&(z=s_oSpriteLibrary.getSprite("but_fullscreen"),D?(e=l,c=m+z.height+10):(e=l,c=m),L=new CToggle(e,c,z,s_bFullscreen,u),L.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this),
L.setVisible(!1));z=s_oSpriteLibrary.getSprite("but_settings");n=new CGfxButton(d,b,z,u);n.addEventListener(ON_MOUSE_UP,this.onSettings);S=!1;t=d-z.width-10;A=b;r=new CGfxButton(t,A,s_oSpriteLibrary.getSprite("but_restart_small"),u);r.addEventListener(ON_MOUSE_UP,this._onRestart,this);this.refreshButtonPos(s_iOffsetX,s_iOffsetY)};this.pulseScoreIcon=function(){createjs.Tween.hasActiveTweens(G)||createjs.Tween.get(G).to({scaleX:.9,scaleY:.9},200,createjs.Ease.cubicOut).to({scaleX:.7,scaleY:.7},200,
createjs.Ease.cubicIn).call(function(){createjs.Tween.removeTweens(G)})};this.onSettings=function(){S?s_oInterface.closePanel():(x=new CPause(C),S=!0,H.setX(n.getX()),H.setY(n.getY()),H.setVisible(!0),R.setX(n.getX()),R.setY(n.getY()),R.setVisible(!0),D&&(D.setPosition(n.getX(),n.getY()),D.setVisible(!0),(new createjs.Tween.get(D.getButtonImage())).to({x:l-s_iOffsetX,y:m},300,createjs.Ease.cubicOut)),L&&(L.setPosition(n.getX(),n.getY()),L.setVisible(!0),(new createjs.Tween.get(L.getButtonImage())).to({x:e-
s_iOffsetX,y:c},300,createjs.Ease.cubicOut)),(new createjs.Tween.get(H.getButtonImage())).to({x:v-s_iOffsetX,y:q},300,createjs.Ease.cubicOut),(new createjs.Tween.get(R.getButtonImage())).to({x:k-s_iOffsetX,y:f},300,createjs.Ease.cubicOut))};this.updateCoinsTaken=function(z){Q.text=V.text="X"+z};this.refreshScore=function(z,I){s_oRollingTextManager.add(z,J,N,I,1E3,EASE_CUBIC_IN,null,null,TEXT_SCORE,null)};this.closePanel=function(){x.onExit();S=!1;(new createjs.Tween.get(H.getButtonImage())).to({x:n.getX(),
y:n.getY()},300,createjs.Ease.cubicIn).call(function(){H.setVisible(!1);R.setVisible(!1);D&&D.setVisible(!1);L&&L.setVisible(!1)});(new createjs.Tween.get(R.getButtonImage())).to({x:n.getX(),y:n.getY()},300,createjs.Ease.cubicIn);D&&(new createjs.Tween.get(D.getButtonImage())).to({x:n.getX(),y:n.getY()},300,createjs.Ease.cubicIn);L&&(new createjs.Tween.get(L.getButtonImage())).to({x:n.getX(),y:n.getY()},300,createjs.Ease.cubicIn)};this.unload=function(){if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)D.unload(),
D=null;H.unload();H=null;n.unload();n=null;R.unload();R=null;r.unload();W&&screenfull.isEnabled&&(L.unload(),L=null);K.removeChild(u);s_oInterface=null};this.refreshButtonPos=function(z,I){n.setPosition(d-z,I+b);H.setPosition(v-z,I+q);R.setPosition(k-z,I+f);r.setPosition(t-z,I+A);U.x=P.x=p+z;U.y=P.y=y+I;!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||D.setPosition(l-z,m);W&&screenfull.isEnabled&&L.setPosition(e-z,c)};this._onButHelpRelease=function(){w=new CHelpPanel};this._onButRestartRelease=function(){s_oGame.restartGame();
$("#canvas").trigger("restart_level",1)};this.onExitFromHelp=function(){w.unload()};this._onExit=function(){new CAreYouSurePanel(s_oGame.onExit)};this.gameOver=function(z){new CEndPanel(z)};this.showWin=function(){new CWinPanel};this.isAreYouSurePanel=function(){return null===_oAreYouSurePanel?!1:!0};this._onAudioToggle=function(){Howler.mute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this._onRestart=function(){s_oGame.restartGame()};this._onFullscreenRelease=function(){s_bFullscreen?Z.call(window.document):
W.call(window.document.documentElement);sizeHandler()};this.resetFullscreenBut=function(){W&&screenfull.isEnabled&&L.setActive(s_bFullscreen)};s_oInterface=this;var K=g;this._init();return this}var s_oInterface=null;
function CHelpPanel(){var a,g,d,b,k,f,e,c,l,m,v;this._init=function(){d=0;var q=s_oSpriteLibrary.getSprite("bg_help");e=createBitmap(q);e.x=CANVAS_WIDTH_HALF;e.y=CANVAS_HEIGHT_HALF;e.regX=q.width/2;e.regY=q.height/2;f=new createjs.Shape;f.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);f.alpha=.7;f.on("mousedown",function(){});c=new createjs.Container;c.addChild(f,e);s_oStage.addChild(c);b=new createjs.Container;k=new createjs.Container;c.addChild(b,k);this.addObjectsContainerPage1();
this.addObjectsContainerPage2();m=new CGfxButton(CANVAS_WIDTH_HALF+320,CANVAS_HEIGHT_HALF,s_oSpriteLibrary.getSprite("arrow_select_level_right"),c);m.addEventListener(ON_MOUSE_UP,this._onRight,this);v=new CGfxButton(CANVAS_WIDTH_HALF-340,CANVAS_HEIGHT_HALF,s_oSpriteLibrary.getSprite("arrow_select_level_left"),c);v.addEventListener(ON_MOUSE_UP,this._onLeft,this);this.setPageVisible();this.setArrowsVisible();q=s_oSpriteLibrary.getSprite("but_continue");a=CANVAS_WIDTH-270;g=CANVAS_HEIGHT-70;l=new CGfxButton(a,
g,q,s_oStage);l.addEventListener(ON_MOUSE_UP,this._onExitHelp,this);f=new createjs.Shape;f.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);s_oStage.addChild(f);createjs.Tween.get(f).to({alpha:0},1E3).call(function(){f.visible=!1;createjs.Tween.removeTweens(f);s_oStage.removeChild(f)})};this.addObjectsContainerPage1=function(){var q=CANVAS_HEIGHT_HALF-150,t=q+40,A=t+30,p=500,y=3*FONT_SIZE_HELP_TEXT,B=CANVAS_WIDTH_HALF-10;(new CTLText(b,B-p/2,q-y/2,p,y,FONT_SIZE_HELP_TEXT,"center",
SECONDARY_FONT_COLOR,PRIMARY_FONT,1.4,2,2,TEXT_HELP1,!0,!0,!0,!1)).setOutline(3);new CTLText(b,B-p/2,q-y/2,p,y,FONT_SIZE_HELP_TEXT,"center",PRIMARY_FONT_COLOR,PRIMARY_FONT,1.4,2,2,TEXT_HELP1,!0,!0,!0,!1);p=500;y=2*FONT_SIZE_HELP_TEXT;B=CANVAS_WIDTH_HALF-10;q=t;(new CTLText(b,B-p/2,q-y/2,p,y,FONT_SIZE_HELP_TEXT,"center",SECONDARY_FONT_COLOR,PRIMARY_FONT,1.4,2,2,TEXT_HELP2,!0,!0,!0,!1)).setOutline(3);new CTLText(b,B-p/2,q-y/2,p,y,FONT_SIZE_HELP_TEXT,"center",PRIMARY_FONT_COLOR,PRIMARY_FONT,1.4,2,2,
TEXT_HELP2,!0,!0,!0,!1);p=500;y=2*FONT_SIZE_HELP_TEXT;B=CANVAS_WIDTH_HALF-10;q=A;(new CTLText(b,B-p/2,q-y/2,p,y,FONT_SIZE_HELP_TEXT,"center",SECONDARY_FONT_COLOR,PRIMARY_FONT,1.4,2,2,TEXT_HELP3,!0,!0,!0,!1)).setOutline(3);new CTLText(b,B-p/2,q-y/2,p,y,FONT_SIZE_HELP_TEXT,"center",PRIMARY_FONT_COLOR,PRIMARY_FONT,1.4,2,2,TEXT_HELP3,!0,!0,!0,!1);B=CANVAS_WIDTH_HALF-120;t=CANVAS_WIDTH_HALF+80;A=CANVAS_HEIGHT_HALF+80;p=244;y=182;q={images:[s_oSpriteLibrary.getSprite("block_1")],frames:{width:p,height:y,
regX:-22,regY:10},animations:{idle:[0,0,!1]},framerate:0};q=new createjs.SpriteSheet(q);q=createSprite(q,"idle",-22,10,p,y);q.regX=.5*p;q.regY=.5*y;q.x=B-10;q.y=A-50;p=s_oSpriteLibrary.getSprite("wood_2");y=createBitmap(p);y.regX=.5*p.width;y.regY=.5*p.height;y.x=B;y.y=A+20;p=s_oSpriteLibrary.getSprite("block_2");var E=createBitmap(p);E.regX=46;E.regY=90;E.x=t-10;E.y=A-50;p=s_oSpriteLibrary.getSprite("wood_1");var h=createBitmap(p);h.regX=.5*p.width;h.regY=.5*p.height;h.x=t;h.y=A+20;b.addChild(q,
y,E,h);p=150;y=2*FONT_SIZE_HELP_TEXT;q=A+50;E=new CTLText(b,B-p/2,q-y/2,p,y,FONT_SIZE_HELP_TEXT,"center",SECONDARY_FONT_COLOR,PRIMARY_FONT,1.4,2,2,TEXT_HELP_BREAKABLE,!0,!0,!0,!1);E.setOutline(3);new CTLText(b,B-p/2,q-y/2,p,y,FONT_SIZE_HELP_TEXT,"center",PRIMARY_FONT_COLOR,PRIMARY_FONT,1.4,2,2,TEXT_HELP_BREAKABLE,!0,!0,!0,!1);p=150;y=2*FONT_SIZE_HELP_TEXT;B=t;q=A+50;E=new CTLText(b,B-p/2,q-y/2,p,y,FONT_SIZE_HELP_TEXT,"center",SECONDARY_FONT_COLOR,PRIMARY_FONT,1.4,2,2,TEXT_HELP_UNBREAKABLE,!0,!0,!0,
!1);E.setOutline(3);new CTLText(b,B-p/2,q-y/2,p,y,FONT_SIZE_HELP_TEXT,"center",PRIMARY_FONT_COLOR,PRIMARY_FONT,1.4,2,2,TEXT_HELP_UNBREAKABLE,!0,!0,!0,!1)};this.addObjectsContainerPage2=function(){var q=CANVAS_HEIGHT_HALF-150,t=q+50,A=t+50,p=500,y=3*FONT_SIZE_HELP_TEXT,B=CANVAS_WIDTH_HALF-10;(new CTLText(k,B-p/2,q-y/2,p,y,FONT_SIZE_HELP_TEXT,"center",SECONDARY_FONT_COLOR,PRIMARY_FONT,1.4,2,2,TEXT_HELP4,!0,!0,!0,!1)).setOutline(3);new CTLText(k,B-p/2,q-y/2,p,y,FONT_SIZE_HELP_TEXT,"center",PRIMARY_FONT_COLOR,
PRIMARY_FONT,1.4,2,2,TEXT_HELP4,!0,!0,!0,!1);p=500;y=3*FONT_SIZE_HELP_TEXT;B=CANVAS_WIDTH_HALF-10;q=t;(new CTLText(k,B-p/2,q-y/2,p,y,FONT_SIZE_HELP_TEXT,"center",SECONDARY_FONT_COLOR,PRIMARY_FONT,1.4,2,2,TEXT_HELP5,!0,!0,!0,!1)).setOutline(3);new CTLText(k,B-p/2,q-y/2,p,y,FONT_SIZE_HELP_TEXT,"center",PRIMARY_FONT_COLOR,PRIMARY_FONT,1.4,2,2,TEXT_HELP5,!0,!0,!0,!1);p=500;y=3*FONT_SIZE_HELP_TEXT;B=CANVAS_WIDTH_HALF-10;q=A;(new CTLText(k,B-p/2,q-y/2,p,y,FONT_SIZE_HELP_TEXT,"center",SECONDARY_FONT_COLOR,
PRIMARY_FONT,1.4,2,2,TEXT_HELP6,!0,!0,!0,!1)).setOutline(3);new CTLText(k,B-p/2,q-y/2,p,y,FONT_SIZE_HELP_TEXT,"center",PRIMARY_FONT_COLOR,PRIMARY_FONT,1.4,2,2,TEXT_HELP6,!0,!0,!0,!1);t=s_oSpriteLibrary.getSprite("coin_score");A=createBitmap(t);A.regX=.5*t.width;A.regY=.5*t.height;A.x=CANVAS_WIDTH_HALF-30;A.y=CANVAS_HEIGHT_HALF+30;k.addChild(A);A=createBitmap(t);A.regX=.5*t.width;A.regY=.5*t.height;A.x=CANVAS_WIDTH_HALF+30;A.y=CANVAS_HEIGHT_HALF+30;k.addChild(A);A=createBitmap(t);A.regX=.5*t.width;
A.regY=.5*t.height;A.x=CANVAS_WIDTH_HALF;A.y=CANVAS_HEIGHT_HALF+30;k.addChild(A);p=380;y=3*FONT_SIZE_HELP_TEXT;B=CANVAS_WIDTH_HALF-10;q=CANVAS_HEIGHT_HALF+100;(new CTLText(k,B-p/2,q-y/2,p,y,FONT_SIZE_HELP_TEXT,"center",SECONDARY_FONT_COLOR,PRIMARY_FONT,1.5,2,2,TEXT_HELP7,!0,!0,!0,!1)).setOutline(3);new CTLText(k,B-p/2,q-y/2,p,y,FONT_SIZE_HELP_TEXT,"center",PRIMARY_FONT_COLOR,PRIMARY_FONT,1.5,2,2,TEXT_HELP7,!0,!0,!0,!1)};this.setPageVisible=function(){0===d?(b.visible=!0,k.visible=!1):(b.visible=!1,
k.visible=!0)};this.setArrowsVisible=function(){0===d?(m.setVisible(!0),v.setVisible(!1)):(m.setVisible(!1),v.setVisible(!0))};this._onRight=function(){d++;this.setPageVisible();this.setArrowsVisible()};this._onLeft=function(){d--;this.setPageVisible();this.setArrowsVisible()};this.unload=function(){s_oStage.removeChild(c);l.unload();l=null};this._onExitHelp=function(){this.unload();setTimeout(s_oGame._onExitHelp,200)};this._init()}
function CLosePanel(a){var g,d,b,k,f,e;this._init=function(){var c=s_oSpriteLibrary.getSprite("msg_box");$("#canvas").trigger("save_score",s_iTotalScore);e=new createjs.Shape;e.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);e.alpha=.01;b=new createjs.Container;b.alpha=1;b.visible=!1;g=new createjs.Container;g.y=CANVAS_HEIGHT;b.addChild(g);d=createBitmap(c);d.x=CANVAS_WIDTH_HALF;d.y=CANVAS_HEIGHT_HALF;d.regX=.5*c.width;d.regY=.5*c.height;g.addChild(d);c=500;var l=3*FONT_SIZE_LOSE_PANEL_TITLE,
m=CANVAS_WIDTH_HALF-10,v=CANVAS_HEIGHT_HALF-120;(new CTLText(g,m-c/2,v-l/2,c,l,FONT_SIZE_LOSE_PANEL_TITLE,"center",SECONDARY_FONT_COLOR,PRIMARY_FONT,1.4,2,2,TEXT_LOSE,!0,!0,!0,!1)).setOutline(5);new CTLText(g,m-c/2,v-l/2,c,l,FONT_SIZE_LOSE_PANEL_TITLE,"center",PRIMARY_FONT_COLOR,PRIMARY_FONT,1.4,2,2,TEXT_LOSE,!0,!0,!0,!1);c=500;l=2*FONT_SIZE_MESSAGE_BOX;m=CANVAS_WIDTH_HALF-10;v=CANVAS_HEIGHT_HALF-30;(new CTLText(g,m-c/2,v-l/2,c,l,FONT_SIZE_MESSAGE_BOX,"center",SECONDARY_FONT_COLOR,PRIMARY_FONT,1.4,
2,2,TEXT_TOTAL_SCORE+s_iTotalScore,!0,!0,!0,!1)).setOutline(5);new CTLText(g,m-c/2,v-l/2,c,l,FONT_SIZE_MESSAGE_BOX,"center",PRIMARY_FONT_COLOR,PRIMARY_FONT,1.4,2,2,TEXT_TOTAL_SCORE+s_iTotalScore,!0,!0,!0,!1);a.addChild(e,b,g);c=CANVAS_HEIGHT_HALF+80;l=s_oSpriteLibrary.getSprite("but_home");k=new CGfxButton(CANVAS_WIDTH_HALF-10-100,c,l,g);k.addEventListener(ON_MOUSE_UP,this._onExit,this);l=s_oSpriteLibrary.getSprite("but_restart");f=new CGfxButton(CANVAS_WIDTH_HALF-10+100,c,l,g);f.addEventListener(ON_MOUSE_UP,
this._onRestart,this);f.pulseAnimation()};this.unload=function(){createjs.Tween.get(g).to({alpha:0},500,createjs.Ease.cubicOut).call(function(){createjs.Tween.removeTweens(e);createjs.Tween.removeTweens(g);a.removeChild(e);a.removeChild(g)});createjs.Tween.get(b).to({alpha:0},500,createjs.Ease.cubicOut).call(function(){e.removeAllEventListeners();k.unload();k=null;f.unload();f=null;createjs.Tween.removeTweens(b);a.removeChild(b)})};this.show=function(){b.visible=!0;createjs.Tween.get(g).wait(GAMEOVER_DELAY).to({y:0},
1E3,createjs.Ease.elasticOut);createjs.Tween.get(e).wait(GAMEOVER_DELAY).to({alpha:.7},500,createjs.Ease.cubicOut).call(function(){$("#canvas").trigger("show_interlevel_ad")});e.on("click",function(){})};this._onRestart=function(){this.unload();createjs.Tween.get(e).to({alpha:0},400,createjs.Ease.cubicOut).call(function(){a.removeChild(e)});s_oGame.restartGame()};this._onExit=function(){this.unload();s_oGame.onExit()};this._init();return this}
function CWinPanel(a,g,d){var b,k,f,e,c,l,m,v,q,t,A,p,y,B,E,h;this._init=function(){var u=s_oSpriteLibrary.getSprite("msg_box");$("#canvas").trigger("share_event",s_iTotalScore);$("#canvas").trigger("save_score",s_iTotalScore);b=s_oGame.getLevel();f=a;k=g;h=new createjs.Shape;h.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);h.alpha=.01;t=new createjs.Container;t.alpha=1;t.visible=!1;c=new createjs.Container;c.y=CANVAS_HEIGHT;t.addChild(c);l=new createjs.Container;m=createBitmap(u);
m.x=CANVAS_WIDTH_HALF;m.y=CANVAS_HEIGHT_HALF;m.regX=.5*u.width;m.regY=.5*u.height;c.addChild(m);u=2*FONT_SIZE_WIN_PANEL_TITLE;var C=CANVAS_WIDTH_HALF-10;(new CTLText(c,C-250,190-u/2,500,u,FONT_SIZE_WIN_PANEL_TITLE,"center",SECONDARY_FONT_COLOR,PRIMARY_FONT,1,2,2,TEXT_WIN,!0,!0,!0,!1)).setOutline(5);new CTLText(c,C-250,190-u/2,500,u,FONT_SIZE_WIN_PANEL_TITLE,"center",PRIMARY_FONT_COLOR,PRIMARY_FONT,1,2,2,TEXT_WIN,!0,!0,!0,!1);this._addScoreSummary();d.addChild(h,t,c);c.addChild(l);u=s_oSpriteLibrary.getSprite("but_continue");
E=new CGfxButton(CANVAS_WIDTH_HALF,CANVAS_HEIGHT_HALF+100,u,c);E.addEventListener(ON_MOUSE_UP,this._onNextPage,this);E.setScaleX(.7);E.setScaleY(.7);E.pulseAnimation()};this._addScoreSummary=function(){var u=CANVAS_WIDTH_HALF-240,C=CANVAS_WIDTH_HALF+220,w=250,x=FONT_SIZE_MESSAGE_BOX+10,D=u,n=255;(new CTLText(l,D,n-x/2,w,x,FONT_SIZE_MESSAGE_BOX,"left",SECONDARY_FONT_COLOR,PRIMARY_FONT,1,2,2,TEXT_END_LEVEL,!0,!0,!0,!1)).setOutline(5);new CTLText(l,D,n-x/2,w,x,FONT_SIZE_MESSAGE_BOX,"left",PRIMARY_FONT_COLOR,
PRIMARY_FONT,1,2,2,TEXT_END_LEVEL,!0,!0,!0,!1);w=200;x=FONT_SIZE_MESSAGE_BOX+10;D=C;(new CTLText(l,D-w,n-x/2,w,x,FONT_SIZE_MESSAGE_BOX,"right",SECONDARY_FONT_COLOR,PRIMARY_FONT,1,2,2,LEVEL_POINTS+" "+TEXT_PTS+" +",!0,!0,!0,!1)).setOutline(5);new CTLText(l,D-w,n-x/2,w,x,FONT_SIZE_MESSAGE_BOX,"right",PRIMARY_FONT_COLOR,PRIMARY_FONT,1,2,2,LEVEL_POINTS+" "+TEXT_PTS+" +",!0,!0,!0,!1);w=250;x=FONT_SIZE_MESSAGE_BOX+10;D=u;n+=30;(new CTLText(l,D,n-x/2,w,x,FONT_SIZE_MESSAGE_BOX,"left",SECONDARY_FONT_COLOR,
PRIMARY_FONT,1,2,2,TEXT_BONUS_SCORE,!0,!0,!0,!1)).setOutline(5);new CTLText(l,D,n-x/2,w,x,FONT_SIZE_MESSAGE_BOX,"left",PRIMARY_FONT_COLOR,PRIMARY_FONT,1,2,2,TEXT_BONUS_SCORE,!0,!0,!0,!1);w=200;x=FONT_SIZE_MESSAGE_BOX+10;D=C;(new CTLText(l,D-w,n-x/2,w,x,FONT_SIZE_MESSAGE_BOX,"right",SECONDARY_FONT_COLOR,PRIMARY_FONT,1,2,2,LEVEL_POINTS+" "+TEXT_PTS+" x"+f,!0,!0,!0,!1)).setOutline(5);new CTLText(l,D-w,n-x/2,w,x,FONT_SIZE_MESSAGE_BOX,"right",PRIMARY_FONT_COLOR,PRIMARY_FONT,1,2,2,LEVEL_POINTS+" "+TEXT_PTS+
" x"+f,!0,!0,!0,!1);w=s_oSpriteLibrary.getSprite("coin_score");x=createBitmap(w);x.regX=.5*w.width;x.regY=.5*w.height;x.x=C+17;x.y=n-2;x.scaleX=x.scaleY=.5;l.addChild(x);w=s_oSpriteLibrary.getSprite("progress_bar");A=createBitmap(w);A.regX=.5*w.width;A.regY=.5*w.height;A.x=CANVAS_WIDTH_HALF-10;A.y=n+25;c.addChild(A);w=250;x=FONT_SIZE_MESSAGE_BOX+10;D=u;n=A.y+25;(new CTLText(l,D,n-x/2,w,x,FONT_SIZE_MESSAGE_BOX,"left",SECONDARY_FONT_COLOR,PRIMARY_FONT,1,2,2,TEXT_LEVEL_SCORE,!0,!0,!0,!1)).setOutline(5);
new CTLText(l,D,n-x/2,w,x,FONT_SIZE_MESSAGE_BOX,"left",PRIMARY_FONT_COLOR,PRIMARY_FONT,1,2,2,TEXT_LEVEL_SCORE,!0,!0,!0,!1);w=200;x=FONT_SIZE_MESSAGE_BOX+10;D=C;v=new CTLText(l,D-w,n-x/2,w,x,FONT_SIZE_MESSAGE_BOX,"right",SECONDARY_FONT_COLOR,PRIMARY_FONT,1,2,2,"0 "+TEXT_PTS,!0,!0,!0,!1);v.setOutline(5);q=new CTLText(l,D-w,n-x/2,w,x,FONT_SIZE_MESSAGE_BOX,"right",PRIMARY_FONT_COLOR,PRIMARY_FONT,1,2,2,"0 "+TEXT_PTS,!0,!0,!0,!1)};this._onNextPage=function(){E.setVisible(!1);l.visible=!1;this._initStars();
this._showStars();var u=2*FONT_SIZE_MESSAGE_BOX,C=CANVAS_WIDTH_HALF-10;(new CTLText(d,C-250,340-u/2,500,u,FONT_SIZE_MESSAGE_BOX,"center",SECONDARY_FONT_COLOR,PRIMARY_FONT,1,2,2,TEXT_TOTAL_SCORE+s_iTotalScore,!0,!0,!0,!1)).setOutline(5);new CTLText(d,C-250,340-u/2,500,u,FONT_SIZE_MESSAGE_BOX,"center",PRIMARY_FONT_COLOR,PRIMARY_FONT,1,2,2,TEXT_TOTAL_SCORE+s_iTotalScore,!0,!0,!0,!1);this._initSecondPageButtons()};this._initSecondPageButtons=function(){var u=CANVAS_HEIGHT_HALF+100,C=s_oSpriteLibrary.getSprite("but_home");
p=new CGfxButton(CANVAS_WIDTH_HALF-120,u,C,c);p.setScaleX(.7);p.setScaleY(.7);p.addEventListener(ON_MOUSE_UP,this._onExit,this);C=s_oSpriteLibrary.getSprite("but_restart");B=new CGfxButton(CANVAS_WIDTH_HALF,u,C,c);B.setScaleX(.7);B.setScaleY(.7);B.addEventListener(ON_MOUSE_UP,this._onRetry,this);C=s_oSpriteLibrary.getSprite("but_continue");y=new CGfxButton(CANVAS_WIDTH_HALF+120,u,C,c);y.setScaleX(.7);y.setScaleY(.7);y.addEventListener(ON_MOUSE_UP,this._onContinue,this);y.pulseAnimation()};this._initStars=
function(){e=[];var u=s_oSpriteLibrary.getSprite("starbox"),C=createBitmap(u),w=createBitmap(u),x=createBitmap(u);C.regX=w.regX=x.regX=.5*u.width;C.regY=w.regY=x.regY=.5*u.height;u=s_oSpriteLibrary.getSprite("star");var D=createBitmap(u);e.push(D);var n=createBitmap(u);e.push(n);var H=createBitmap(u);e.push(H);D.regX=n.regX=H.regX=.5*u.width;D.regY=n.regY=H.regY=.5*u.height;D.scaleX=D.scaleY=n.scaleX=n.scaleY=H.scaleX=H.scaleY=0;C.x=D.x=CANVAS_WIDTH_HALF-10-70;w.x=n.x=CANVAS_WIDTH_HALF-10;x.x=H.x=
CANVAS_WIDTH_HALF-10+70;C.y=w.y=x.y=D.y=n.y=H.y=270;c.addChild(C,w,x);c.addChild(D,n,H)};this._showStars=function(){for(var u=0;u<f;u++)createjs.Tween.get(e[u]).wait(300*u).call(function(){playSound("strawberry",1,!1)}).to({scaleX:1,scaleY:1},1500,createjs.Ease.elasticOut)};this.unload=function(){createjs.Tween.get(c).to({alpha:0},500,createjs.Ease.cubicOut).call(function(){for(var u=0;u<e.length;u++)createjs.Tween.removeTweens(e[u]);createjs.Tween.removeTweens(c);createjs.Tween.removeTweens(h);d.removeChild(c);
d.removeChild(h)});createjs.Tween.get(t).to({alpha:0},500,createjs.Ease.cubicOut).call(function(){h.removeAllEventListeners();p.unload();p=null;B.unload();B=null;y.unload();y=null;E.unload();E=null;createjs.Tween.removeTweens(t);d.removeChild(t)})};this.show=function(){t.visible=!0;createjs.Tween.get(c).wait(CHECK_LEVEL_DELAY).to({y:0},1E3,createjs.Ease.elasticOut).call(function(){s_oRollingTextManager.add(0,q.getText(),v.getText(),k,1E3,EASE_CUBIC_IN,null,null,null,TEXT_PTS)});createjs.Tween.get(h).wait(CHECK_LEVEL_DELAY).to({alpha:.7},
500,createjs.Ease.cubicOut).call(function(){$("#canvas").trigger("show_interlevel_ad")});h.on("click",function(){})};this._onContinue=function(){this.unload();createjs.Tween.get(h).to({alpha:0},400,createjs.Ease.cubicOut).call(function(){d.removeChild(h)});if(b<LEVELS_NUMBER)s_oGame.onNextLevel();else s_oGame.unload(),s_oMain.gotoLevelChoose()};this._onRetry=function(){this.unload();s_oMain.gotoGame(b)};this._onExit=function(){this.unload();s_oGame.onExit()};this._init();return this}
function CMsgBox(a,g){var d,b;this._init=function(e){b=new createjs.Container;f.addChild(b);e=new createjs.Shape;e.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);e.alpha=.5;e.on("click",function(){});b.addChild(e);e=s_oSpriteLibrary.getSprite("msg_box");var c=createBitmap(e);c.x=CANVAS_WIDTH_HALF;c.y=CANVAS_HEIGHT_HALF;c.regX=.5*e.width;c.regY=.5*e.height;b.addChild(c);e=CANVAS_WIDTH_HALF-10;c=CANVAS_HEIGHT_HALF-80;(new CTLText(b,e-250,c-90,500,180,FONT_SIZE_CREDITS,"center",
SECONDARY_FONT_COLOR,PRIMARY_FONT,1.4,2,2,TEXT_ERR_LS,!0,!0,!0,!1)).setOutline(5);new CTLText(b,e-250,c-90,500,180,FONT_SIZE_CREDITS,"center",PRIMARY_FONT_COLOR,PRIMARY_FONT,1.4,2,2,TEXT_ERR_LS,!0,!0,!0,!1);d=new CGfxButton(CANVAS_WIDTH_HALF,CANVAS_HEIGHT_HALF+100,s_oSpriteLibrary.getSprite("but_yes"),b);d.addEventListener(ON_MOUSE_UP,this._onButOk,this)};this._onButOk=function(){k.unload()};this.unload=function(){d.unload();f.removeChild(b)};var k=this;var f=g;this._init(a)}
function CCreditsPanel(){var a,g,d,b,k,f,e,c;this._init=function(){b=new createjs.Shape;b.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);b.alpha=.7;b.on("mousedown",function(){});s_oStage.addChild(b);var l=s_oSpriteLibrary.getSprite("msg_box");c=new createjs.Container;c.y=CANVAS_HEIGHT+l.height/2;s_oStage.addChild(c);d=createBitmap(l);d.regX=l.width/2;d.regY=l.height/2;d.x=CANVAS_WIDTH_HALF;d.y=CANVAS_HEIGHT_HALF;c.addChild(d);l=500;var m=FONT_SIZE_TITLES,v=CANVAS_WIDTH_HALF,
q=CANVAS_HEIGHT_HALF-65;(new CTLText(c,v-l/2,q-m/2,l,m,FONT_SIZE_CREDITS,"center",SECONDARY_FONT_COLOR,PRIMARY_FONT,1,2,2,TEXT_CREDITS_DEVELOPED,!0,!0,!0,!1)).setOutline(5);new CTLText(c,v-l/2,q-m/2,l,m,FONT_SIZE_CREDITS,"center",PRIMARY_FONT_COLOR,PRIMARY_FONT,1,2,2,TEXT_CREDITS_DEVELOPED,!0,!0,!0,!1);l=s_oSpriteLibrary.getSprite("logo_ctl");k=createBitmap(l);k.regX=l.width/2;k.regY=l.height/2;k.x=CANVAS_WIDTH_HALF;k.y=CANVAS_HEIGHT_HALF;c.addChild(k);l=400;m=FONT_SIZE_TITLES;v=CANVAS_WIDTH_HALF;
q=CANVAS_HEIGHT_HALF+75;(new CTLText(c,v-l/2,q-m/2,l,m,FONT_SIZE_CREDITS_LINK,"center",SECONDARY_FONT_COLOR,PRIMARY_FONT,1,2,2,TEXT_LINK,!0,!0,!0,!1)).setOutline(5);new CTLText(c,v-l/2,q-m/2,l,m,FONT_SIZE_CREDITS_LINK,"center",PRIMARY_FONT_COLOR,PRIMARY_FONT,1,2,2,TEXT_LINK,!0,!0,!0,!1);e=new createjs.Shape;e.graphics.beginFill("#0f0f0f").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);e.alpha=.01;e.on("click",this._onLogoButRelease);c.addChild(e);s_bMobile||(e.cursor="pointer");l=s_oSpriteLibrary.getSprite("but_exit");
a=CANVAS_WIDTH_HALF+200;g=CANVAS_HEIGHT_HALF-130;f=new CGfxButton(a,g,l,c);f.addEventListener(ON_MOUSE_UP,this.unload,this);(new createjs.Tween.get(c)).to({y:0},1E3,createjs.Ease.backOut)};this.unload=function(){e.off("click",this._onLogoButRelease);f.unload();f=null;s_oStage.removeChild(c,b)};this._onLogoButRelease=function(){window.open("http://www.codethislab.com","_blank")};this._init()}
function CPause(a){var g,d,b,k,f;this.init=function(e){s_oGame.pause(!0);k=new createjs.Container;f=e;f.addChild(k);g=new createjs.Shape;g.graphics.beginFill("#black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);g.alpha=.7;g.on("mousedown",this.exitPause);d=new createjs.Text(TEXT_PAUSE,FONT_SIZE_PAUSE+"px "+PRIMARY_FONT,SECONDARY_FONT_COLOR);d.textBaseline="alphabetic";d.textAlign="center";d.x=CANVAS_WIDTH_HALF;d.y=CANVAS_HEIGHT_HALF;d.outline=5;b=new createjs.Text(TEXT_PAUSE,FONT_SIZE_PAUSE+"px "+PRIMARY_FONT,
PRIMARY_FONT_COLOR);b.textBaseline=d.textBaseline;b.textAlign=d.textAlign;b.x=d.x;b.y=d.y;k.addChild(g,d,b);d.alpha=1;b.alpha=1};this.exitPause=function(){s_oInterface.closePanel()};this.onExit=function(){g.alpha=0;d.alpha=0;b.alpha=0;s_oStage.removeChild(k);s_oGame.pause(!1)};this.init(a)}
function CPlayer(a,g){var d,b,k,f,e;this._init=function(){f=k=!1;d=0;b=Math.floor(10*Math.random()+5);for(var m=[],v=0;247>v;v++)m.push(s_oSpriteLibrary.getSprite("player_"+v));m=new createjs.SpriteSheet({images:m,frames:{width:142,height:118,regX:71,regY:118},animations:{idle:[0,39,!1],idle2:[40,79,"idle"],lose:[80,119,"lose"],angry:[120,141,!1],chew:[160,180,!1],sleep:[181,220,"sleep"],wakeup:[221,238,"idle"],eat:[239,246,"chew"],eatcoin:[239,246,"idle"]},framerate:30});e=createSprite(m,"idle",
0,0,142,118);e.x=PLAYER_POSITION[c].x+10;e.y=PLAYER_POSITION[c].y;e.addEventListener("animationend",this.changeAnimation);e.visible=!0;l.addChild(e)};this.changeAnimation=function(){if(f)e.gotoAndPlay("chew");else switch(e.currentAnimation){case "idle":d++;d>b?(e.gotoAndPlay("idle2"),d=0):e.gotoAndPlay("idle");break;case "eatcoin":case "idle2":case "wakeup":e.gotoAndPlay("idle");break;case "lose":e.gotoAndPlay("lose");break;case "eat":e.gotoAndPlay("eat");break;case "sleep":e.gotoAndPlay("sleep");
break;case "chew":e.gotoAndPlay("chew")}};this.animationEatCoin=function(){stopSound("player_sleeping");!1===soundPlaying("player_eating")&&playSound("player_eating",1,0);e.gotoAndPlay("eatcoin")};this.onWakeUp=function(){stopSound("player_sleeping");!1===soundPlaying("player_wakeup")&&playSound("player_wakeup",1,0);k=!1;e.gotoAndPlay("wakeup")};this.animationWin=function(){f=!0;stopSound("player_sleeping");e.gotoAndPlay("eat")};this.animationLose=function(){stopSound("player_sleeping");s_iAnimationIndex>
LOSE_ANIMATION_INDEX?(!1===soundPlaying("player_angry")&&playSound("player_angry",1,0),s_iAnimationIndex=0,e.gotoAndPlay("angry")):e.gotoAndPlay("lose")};this.onSleep=function(){!1===soundPlaying("player_sleeping")&&playSound("player_sleeping",1,!0);k=!0;e.gotoAndPlay("sleep")};this.isSleeping=function(){return k};this.unload=function(){stopSound("player_sleeping");l.removeChild(e)};var c=a;var l=g;this._init()}
function CAreYouSurePanel(){var a,g,d,b,k;this._init=function(){b=new createjs.Shape;b.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);b.alpha=.5;b.on("mousedown",function(){});s_oStage.addChild(b);(new createjs.Tween.get(b)).to({alpha:.7},500);k=new createjs.Container;s_oStage.addChild(k);var e=s_oSpriteLibrary.getSprite("msg_box"),c=createBitmap(e);c.regX=e.width/2;c.regY=e.height/2;c.x=CANVAS_WIDTH_HALF;c.y=CANVAS_HEIGHT_HALF;k.addChild(c);k.y=CANVAS_HEIGHT+e.height/2;a=k.y;
(new createjs.Tween.get(k)).to({y:0},1E3,createjs.Ease.backOut);e=FONT_SIZE_TITLES;c=CANVAS_WIDTH_HALF-10;var l=CANVAS_HEIGHT_HALF-50;(new CTLText(k,c-250,l-e/2,500,e,FONT_SIZE_TITLES,"center",SECONDARY_FONT_COLOR,PRIMARY_FONT,1,2,2,TEXT_ARE_SURE,!0,!0,!0,!1)).setOutline(5);new CTLText(k,c-250,l-e/2,500,e,FONT_SIZE_TITLES,"center",PRIMARY_FONT_COLOR,PRIMARY_FONT,1,2,2,TEXT_ARE_SURE,!0,!0,!0,!1);e=CANVAS_HEIGHT_HALF+90;g=new CGfxButton(CANVAS_WIDTH_HALF-10+120,e,s_oSpriteLibrary.getSprite("but_yes"),
k);g.addEventListener(ON_MOUSE_UP,this._onButYes,this);d=new CGfxButton(CANVAS_WIDTH_HALF-10-120,e,s_oSpriteLibrary.getSprite("but_no"),k);d.addEventListener(ON_MOUSE_UP,this._onButNo,this);s_oGame.pause(!0)};this._onButYes=function(){(new createjs.Tween.get(b)).to({alpha:0},500);(new createjs.Tween.get(k)).to({y:a},400,createjs.Ease.backIn).call(function(){f.unload();s_oGame.onExit()})};this._onButNo=function(){s_oInterface.closePanel();(new createjs.Tween.get(b)).to({alpha:0},500);(new createjs.Tween.get(k)).to({y:a},
400,createjs.Ease.backIn).call(function(){f.unload()});s_oGame.pause(!1)};this.unload=function(){d.unload();g.unload();s_oStage.removeChild(b);s_oStage.removeChild(k);b.off("mousedown",function(){})};var f=this;this._init()}
function CRollingTextController(a,g,d,b,k,f,e,c){var l,m,v,q,t,A,p,y,B,E,h;this._init=function(u,C,w,x,D,n,H,L){y=[];B=[];t=D;this.setUpdateInfo(u,x);p=n;E=C;h=w};this.setUpdateInfo=function(u,C){v=parseFloat(u);q=v+C;l=0;m=Math.round(t/FPS);A=0};this.addEventListener=function(u,C,w){y[u]=C;B[u]=w};this.increaseValue=function(u){A=u};this.getTarget=function(){return E};this.update=function(){l++;if(l>m){l=0;var u;null!==e&&null!==c?u=e+" "+q.toFixed(0)+" "+c:null!==e&&null===c?u=e+" "+q.toFixed(0):
null===e&&null!==c?u=q.toFixed(0)+" "+c:null===e&&null===c&&(u=q.toFixed(0));E.text=u;null!==h&&(h.text=u);null!==y[ON_CONTROLLER_END]&&y[ON_CONTROLLER_END].call(B[ON_CONTROLLER_END],this);0<A?this.setUpdateInfo(A):y[ON_CONTROLLER_REMOVE].call(B[ON_CONTROLLER_REMOVE],this)}else{switch(p){case EASE_BACKIN:var C=s_oTweenController.easeInBack(l,0,1,m);break;case EASE_BACKOUT:C=s_oTweenController.easeOutBack(l,0,1,m);break;case EASE_CUBIC_IN:C=s_oTweenController.easeInCubic(l,0,1,m);break;case EASE_CUBIC_OUT:C=
s_oTweenController.easeOutCubic(l,0,1,m);break;case EASE_ELASTIC_OUT:C=s_oTweenController.easeOutElastic(l,0,1,m);break;case EASE_LINEAR:C=s_oTweenController.easeLinear(l,0,1,m);break;case EASE_QUART_BACKIN:C=s_oTweenController.easeBackInQuart(l,0,1,m);break;default:C=s_oTweenController.easeLinear(l,0,1,m)}C=s_oTweenController.tweenValue(v,q,C);null!==e&&null!==c?u=e+" "+C.toFixed(0)+" "+c:null!==e&&null===c?u=e+" "+C.toFixed(0):null===e&&null!==c?u=C.toFixed(0)+" "+c:null===e&&null===c&&(u=C.toFixed(0));
E.text=u;null!==h&&(h.text=u)}};this._init(a,g,d,b,k,f,e,c)}
function CRollingTextManager(){var a=[],g=[];s_oTweenController=new CTweenController;this.add=function(d,b,k,f,e,c,l,m,v,q){var t=this._checkIfControllerExist(b);-1===t?(d=new CRollingTextController(d,b,k,f,e,c,v,q),d.addEventListener(ON_CONTROLLER_END,l,m),d.addEventListener(ON_CONTROLLER_REMOVE,this._onRemoveController,this),a.push(d)):a[t].increaseValue(f)};this._checkIfControllerExist=function(d){for(var b=0;b<a.length;b++)if(a[b].getTarget()===d)return b;return-1};this._onRemoveController=function(d){g.push(d)};
this.update=function(){for(var d=0;d<a.length;d++)a[d].update();for(d=0;d<g.length;d++)for(var b=0;b<a.length;b++)if(g[d]===a[b]){a.splice(b,1);break}g=[]}}var s_oTweenController,EASE_LINEAR=0,EASE_CUBIC_IN=1,EASE_QUART_BACKIN=2,EASE_BACKIN=3,EASE_CUBIC_OUT=4,EASE_ELASTIC_OUT=5,EASE_BACKOUT=6;
function CTweenController(){this.tweenValue=function(a,g,d){return a+d*(g-a)};this.easeLinear=function(a,g,d,b){return d*a/b+g};this.easeInCubic=function(a,g,d,b){b=(a/=b)*a*a;return g+d*b};this.easeBackInQuart=function(a,g,d,b){b=(a/=b)*a;return g+d*(2*b*b+2*b*a+-3*b)};this.easeInBack=function(a,g,d,b){return d*(a/=b)*a*(2.70158*a-1.70158)+g};this.easeOutCubic=function(a,g,d,b){return d*((a=a/b-1)*a*a+1)+g};this.easeOutElastic=function(a,g,d,b){if(0===a)return g;if(1===(a/=b))return g+d;var k=.3*
b;return d*Math.pow(2,-10*a)*Math.sin(2*(a*b-k/4)*Math.PI/k)+d+g};this.easeOutBack=function(a,g,d,b){return d*((a=a/b-1)*a*(2.70158*a+1.70158)+1)+g}}
CTLText.prototype={constructor:CTLText,__autofit:function(){if(this._bFitText){for(var a=this._iFontSize;(this._oText.getBounds().height>this._iHeight-2*this._iPaddingV||this._oText.getBounds().width>this._iWidth-2*this._iPaddingH)&&!(a--,this._oText.font=a+"px "+this._szFont,this._oText.lineHeight=Math.round(a*this._fLineHeightFactor),this.__updateY(),this.__verticalAlign(),8>a););this._iFontSize=a}},__verticalAlign:function(){if(this._bVerticalAlign){var a=this._oText.getBounds().height;this._oText.y-=
(a-this._iHeight)/2+this._iPaddingV}},__updateY:function(){this._oText.y=this._y+this._iPaddingV;switch(this._oText.textBaseline){case "middle":this._oText.y+=this._oText.lineHeight/2+(this._iFontSize*this._fLineHeightFactor-this._iFontSize)}},__createText:function(a){this._bDebug&&(this._oDebugShape=new createjs.Shape,this._oDebugShape.graphics.beginFill("rgba(255,0,0,0.5)").drawRect(this._x,this._y,this._iWidth,this._iHeight),this._oContainer.addChild(this._oDebugShape));this._oText=new createjs.Text(a,
this._iFontSize+"px "+this._szFont,this._szColor);this._oText.textBaseline="middle";this._oText.lineHeight=Math.round(this._iFontSize*this._fLineHeightFactor);this._oText.textAlign=this._szAlign;this._oText.lineWidth=this._bMultiline?this._iWidth-2*this._iPaddingH:null;switch(this._szAlign){case "center":this._oText.x=this._x+this._iWidth/2;break;case "left":this._oText.x=this._x+this._iPaddingH;break;case "right":this._oText.x=this._x+this._iWidth-this._iPaddingH}this._oContainer.addChild(this._oText);
this.refreshText(a)},setVerticalAlign:function(a){this._bVerticalAlign=a},setOutline:function(a){null!==this._oText&&(this._oText.outline=a)},setShadow:function(a,g,d,b){null!==this._oText&&(this._oText.shadow=new createjs.Shadow(a,g,d,b))},setColor:function(a){this._oText.color=a},setAlpha:function(a){this._oText.alpha=a},setY:function(a){this._y=this._oText.y=a},removeTweens:function(){createjs.Tween.removeTweens(this._oText)},getText:function(){return this._oText},getY:function(){return this._y},
getFontSize:function(){return this._iFontSize},refreshText:function(a){""===a&&(a=" ");null===this._oText&&this.__createText(a);this._oText.text=a;this._oText.font=this._iFontSize+"px "+this._szFont;this._oText.lineHeight=Math.round(this._iFontSize*this._fLineHeightFactor);this.__autofit();this.__updateY();this.__verticalAlign()}};
function CTLText(a,g,d,b,k,f,e,c,l,m,v,q,t,A,p,y,B){this._oContainer=a;this._x=g;this._y=d;this._iWidth=b;this._iHeight=k;this._bMultiline=y;this._iFontSize=f;this._szAlign=e;this._szColor=c;this._szFont=l;this._iPaddingH=v;this._iPaddingV=q;this._bVerticalAlign=p;this._bFitText=A;this._bDebug=B;this._oDebugShape=null;this._fLineHeightFactor=m;this._oText=null;t&&this.__createText(t)};