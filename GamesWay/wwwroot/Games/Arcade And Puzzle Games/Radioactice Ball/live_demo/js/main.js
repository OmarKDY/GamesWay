/*
 TweenJS
 Visit http://createjs.com/ for documentation, updates and examples.

 Copyright (c) 2010 gskinner.com, inc.

 Permission is hereby granted, free of charge, to any person
 obtaining a copy of this software and associated documentation
 files (the "Software"), to deal in the Software without
 restriction, including without limitation the rights to use,
 copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the
 Software is furnished to do so, subject to the following
 conditions:

 The above copyright notice and this permission notice shall be
 included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.
 Platform.js <https://mths.be/platform>
 Copyright 2014-2018 Benjamin Tan <https://bnjmnt4n.now.sh/>
 Copyright 2011-2013 John-David Dalton
 Available under MIT license <https://mths.be/mit>
*/
this.createjs=this.createjs||{};createjs.extend=function(a,e){function b(){this.constructor=a}b.prototype=e.prototype;return a.prototype=new b};this.createjs=this.createjs||{};createjs.promote=function(a,e){var b=a.prototype,d=Object.getPrototypeOf&&Object.getPrototypeOf(b)||b.__proto__;if(d){b[(e+="_")+"constructor"]=d.constructor;for(var c in d)b.hasOwnProperty(c)&&"function"==typeof d[c]&&(b[e+c]=d[c])}return a};this.createjs=this.createjs||{};
createjs.deprecate=function(a,e){return function(){var b="Deprecated property or method '"+e+"'. See docs for info.";console&&(console.warn?console.warn(b):console.log(b));return a&&a.apply(this,arguments)}};this.createjs=this.createjs||{};
(function(){function a(b,d,c){this.type=b;this.currentTarget=this.target=null;this.eventPhase=0;this.bubbles=!!d;this.cancelable=!!c;this.timeStamp=(new Date).getTime();this.removed=this.immediatePropagationStopped=this.propagationStopped=this.defaultPrevented=!1}var e=a.prototype;e.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0};e.stopPropagation=function(){this.propagationStopped=!0};e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=
!0};e.remove=function(){this.removed=!0};e.clone=function(){return new a(this.type,this.bubbles,this.cancelable)};e.set=function(b){for(var d in b)this[d]=b[d];return this};e.toString=function(){return"[Event (type="+this.type+")]"};createjs.Event=a})();this.createjs=this.createjs||{};
(function(){function a(){this._captureListeners=this._listeners=null}var e=a.prototype;a.initialize=function(b){b.addEventListener=e.addEventListener;b.on=e.on;b.removeEventListener=b.off=e.removeEventListener;b.removeAllEventListeners=e.removeAllEventListeners;b.hasEventListener=e.hasEventListener;b.dispatchEvent=e.dispatchEvent;b._dispatchEvent=e._dispatchEvent;b.willTrigger=e.willTrigger};e.addEventListener=function(b,d,c){var f=c?this._captureListeners=this._captureListeners||{}:this._listeners=
this._listeners||{};var h=f[b];h&&this.removeEventListener(b,d,c);(h=f[b])?h.push(d):f[b]=[d];return d};e.on=function(b,d,c,f,h,g){d.handleEvent&&(c=c||d,d=d.handleEvent);c=c||this;return this.addEventListener(b,function(k){d.call(c,k,h);f&&k.remove()},g)};e.removeEventListener=function(b,d,c){if(c=c?this._captureListeners:this._listeners){var f=c[b];if(f)for(var h=0,g=f.length;h<g;h++)if(f[h]==d){1==g?delete c[b]:f.splice(h,1);break}}};e.off=e.removeEventListener;e.removeAllEventListeners=function(b){b?
(this._listeners&&delete this._listeners[b],this._captureListeners&&delete this._captureListeners[b]):this._listeners=this._captureListeners=null};e.dispatchEvent=function(b,d,c){if("string"==typeof b){var f=this._listeners;if(!(d||f&&f[b]))return!0;b=new createjs.Event(b,d,c)}else b.target&&b.clone&&(b=b.clone());try{b.target=this}catch(h){}if(b.bubbles&&this.parent){c=this;for(d=[c];c.parent;)d.push(c=c.parent);f=d.length;for(c=f-1;0<=c&&!b.propagationStopped;c--)d[c]._dispatchEvent(b,1+(0==c));
for(c=1;c<f&&!b.propagationStopped;c++)d[c]._dispatchEvent(b,3)}else this._dispatchEvent(b,2);return!b.defaultPrevented};e.hasEventListener=function(b){var d=this._listeners,c=this._captureListeners;return!!(d&&d[b]||c&&c[b])};e.willTrigger=function(b){for(var d=this;d;){if(d.hasEventListener(b))return!0;d=d.parent}return!1};e.toString=function(){return"[EventDispatcher]"};e._dispatchEvent=function(b,d){var c,f,h=2>=d?this._captureListeners:this._listeners;if(b&&h&&(f=h[b.type])&&(c=f.length)){try{b.currentTarget=
this}catch(k){}try{b.eventPhase=d|0}catch(k){}b.removed=!1;f=f.slice();for(h=0;h<c&&!b.immediatePropagationStopped;h++){var g=f[h];g.handleEvent?g.handleEvent(b):g(b);b.removed&&(this.off(b.type,g,1==d),b.removed=!1)}}2===d&&this._dispatchEvent(b,2.1)};createjs.EventDispatcher=a})();this.createjs=this.createjs||{};
(function(){function a(){throw"Ticker cannot be instantiated.";}a.RAF_SYNCHED="synched";a.RAF="raf";a.TIMEOUT="timeout";a.timingMode=null;a.maxDelta=0;a.paused=!1;a.removeEventListener=null;a.removeAllEventListeners=null;a.dispatchEvent=null;a.hasEventListener=null;a._listeners=null;createjs.EventDispatcher.initialize(a);a._addEventListener=a.addEventListener;a.addEventListener=function(){!a._inited&&a.init();return a._addEventListener.apply(a,arguments)};a._inited=!1;a._startTime=0;a._pausedTime=
0;a._ticks=0;a._pausedTicks=0;a._interval=50;a._lastTime=0;a._times=null;a._tickTimes=null;a._timerId=null;a._raf=!0;a._setInterval=function(d){a._interval=d;a._inited&&a._setupTick()};a.setInterval=createjs.deprecate(a._setInterval,"Ticker.setInterval");a._getInterval=function(){return a._interval};a.getInterval=createjs.deprecate(a._getInterval,"Ticker.getInterval");a._setFPS=function(d){a._setInterval(1E3/d)};a.setFPS=createjs.deprecate(a._setFPS,"Ticker.setFPS");a._getFPS=function(){return 1E3/
a._interval};a.getFPS=createjs.deprecate(a._getFPS,"Ticker.getFPS");try{Object.defineProperties(a,{interval:{get:a._getInterval,set:a._setInterval},framerate:{get:a._getFPS,set:a._setFPS}})}catch(d){console.log(d)}a.init=function(){a._inited||(a._inited=!0,a._times=[],a._tickTimes=[],a._startTime=a._getTime(),a._times.push(a._lastTime=0),a.interval=a._interval)};a.reset=function(){if(a._raf){var d=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||
window.msCancelAnimationFrame;d&&d(a._timerId)}else clearTimeout(a._timerId);a.removeAllEventListeners("tick");a._timerId=a._times=a._tickTimes=null;a._startTime=a._lastTime=a._ticks=a._pausedTime=0;a._inited=!1};a.getMeasuredTickTime=function(d){var c=0,f=a._tickTimes;if(!f||1>f.length)return-1;d=Math.min(f.length,d||a._getFPS()|0);for(var h=0;h<d;h++)c+=f[h];return c/d};a.getMeasuredFPS=function(d){var c=a._times;if(!c||2>c.length)return-1;d=Math.min(c.length-1,d||a._getFPS()|0);return 1E3/((c[0]-
c[d])/d)};a.getTime=function(d){return a._startTime?a._getTime()-(d?a._pausedTime:0):-1};a.getEventTime=function(d){return a._startTime?(a._lastTime||a._startTime)-(d?a._pausedTime:0):-1};a.getTicks=function(d){return a._ticks-(d?a._pausedTicks:0)};a._handleSynch=function(){a._timerId=null;a._setupTick();a._getTime()-a._lastTime>=.97*(a._interval-1)&&a._tick()};a._handleRAF=function(){a._timerId=null;a._setupTick();a._tick()};a._handleTimeout=function(){a._timerId=null;a._setupTick();a._tick()};a._setupTick=
function(){if(null==a._timerId){var d=a.timingMode;if(d==a.RAF_SYNCHED||d==a.RAF){var c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(c){a._timerId=c(d==a.RAF?a._handleRAF:a._handleSynch);a._raf=!0;return}}a._raf=!1;a._timerId=setTimeout(a._handleTimeout,a._interval)}};a._tick=function(){var d=a.paused,c=a._getTime(),f=c-a._lastTime;a._lastTime=c;a._ticks++;d&&(a._pausedTicks++,a._pausedTime+=
f);if(a.hasEventListener("tick")){var h=new createjs.Event("tick"),g=a.maxDelta;h.delta=g&&f>g?g:f;h.paused=d;h.time=c;h.runTime=c-a._pausedTime;a.dispatchEvent(h)}for(a._tickTimes.unshift(a._getTime()-c);100<a._tickTimes.length;)a._tickTimes.pop();for(a._times.unshift(c);100<a._times.length;)a._times.pop()};var e=window,b=e.performance.now||e.performance.mozNow||e.performance.msNow||e.performance.oNow||e.performance.webkitNow;a._getTime=function(){return(b&&b.call(e.performance)||(new Date).getTime())-
a._startTime};createjs.Ticker=a})();this.createjs=this.createjs||{};
(function(){function a(b){this.EventDispatcher_constructor();this.ignoreGlobalPause=!1;this.loop=0;this.bounce=this.reversed=this.useTicks=!1;this.timeScale=1;this.position=this.duration=0;this.rawPosition=-1;this._paused=!0;this._labelList=this._labels=this._parent=this._prev=this._next=null;b&&(this.useTicks=!!b.useTicks,this.ignoreGlobalPause=!!b.ignoreGlobalPause,this.loop=!0===b.loop?-1:b.loop||0,this.reversed=!!b.reversed,this.bounce=!!b.bounce,this.timeScale=b.timeScale||1,b.onChange&&this.addEventListener("change",
b.onChange),b.onComplete&&this.addEventListener("complete",b.onComplete))}var e=createjs.extend(a,createjs.EventDispatcher);e._setPaused=function(b){createjs.Tween._register(this,b);return this};e.setPaused=createjs.deprecate(e._setPaused,"AbstractTween.setPaused");e._getPaused=function(){return this._paused};e.getPaused=createjs.deprecate(e._getPaused,"AbstactTween.getPaused");e._getCurrentLabel=function(b){var d=this.getLabels();null==b&&(b=this.position);for(var c=0,f=d.length;c<f&&!(b<d[c].position);c++);
return 0===c?null:d[c-1].label};e.getCurrentLabel=createjs.deprecate(e._getCurrentLabel,"AbstractTween.getCurrentLabel");try{Object.defineProperties(e,{paused:{set:e._setPaused,get:e._getPaused},currentLabel:{get:e._getCurrentLabel}})}catch(b){}e.advance=function(b,d){this.setPosition(this.rawPosition+b*this.timeScale,d)};e.setPosition=function(b,d,c,f){var h=this.duration,g=this.loop,k=this.rawPosition,m=0;0>b&&(b=0);if(0===h){var q=!0;if(-1!==k)return q}else{var u=b/h|0;m=b-u*h;(q=-1!==g&&b>=g*
h+h)&&(b=(m=h)*(u=g)+h);if(b===k)return q;!this.reversed!==!(this.bounce&&u%2)&&(m=h-m)}this.position=m;this.rawPosition=b;this._updatePosition(c,q);q&&(this.paused=!0);f&&f(this);d||this._runActions(k,b,c,!c&&-1===k);this.dispatchEvent("change");q&&this.dispatchEvent("complete")};e.calculatePosition=function(b){var d=this.duration,c=this.loop,f=0;if(0===d)return 0;-1!==c&&b>=c*d+d?(b=d,f=c):0>b?b=0:(f=b/d|0,b-=f*d);return!this.reversed!==!(this.bounce&&f%2)?d-b:b};e.getLabels=function(){var b=this._labelList;
if(!b){b=this._labelList=[];var d=this._labels,c;for(c in d)b.push({label:c,position:d[c]});b.sort(function(f,h){return f.position-h.position})}return b};e.setLabels=function(b){this._labels=b;this._labelList=null};e.addLabel=function(b,d){this._labels||(this._labels={});this._labels[b]=d;var c=this._labelList;if(c){for(var f=0,h=c.length;f<h&&!(d<c[f].position);f++);c.splice(f,0,{label:b,position:d})}};e.gotoAndPlay=function(b){this.paused=!1;this._goto(b)};e.gotoAndStop=function(b){this.paused=
!0;this._goto(b)};e.resolve=function(b){var d=Number(b);isNaN(d)&&(d=this._labels&&this._labels[b]);return d};e.toString=function(){return"[AbstractTween]"};e.clone=function(){throw"AbstractTween can not be cloned.";};e._init=function(b){b&&b.paused||(this.paused=!1);b&&null!=b.position&&this.setPosition(b.position)};e._updatePosition=function(b,d){};e._goto=function(b){b=this.resolve(b);null!=b&&this.setPosition(b,!1,!0)};e._runActions=function(b,d,c,f){if(this._actionHead||this.tweens){var h=this.duration,
g=this.reversed,k=this.bounce,m=this.loop,q,u,r;if(0===h){var w=q=u=r=0;g=k=!1}else w=b/h|0,q=d/h|0,u=b-w*h,r=d-q*h;-1!==m&&(q>m&&(r=h,q=m),w>m&&(u=h,w=m));if(c)return this._runActionsRange(r,r,c,f);if(w!==q||u!==r||c||f){-1===w&&(w=u=0);b=b<=d;d=w;do{m=d===w?u:b?0:h;var C=d===q?r:b?h:0;!g!==!(k&&d%2)&&(m=h-m,C=h-C);if((!k||d===w||m!==C)&&this._runActionsRange(m,C,c,f||d!==w&&!k))return!0;f=!1}while(b&&++d<=q||!b&&--d>=q)}}};e._runActionsRange=function(b,d,c,f){};createjs.AbstractTween=createjs.promote(a,
"EventDispatcher")})();this.createjs=this.createjs||{};
(function(){function a(c,f){this.AbstractTween_constructor(f);this.pluginData=null;this.target=c;this.passive=!1;this._stepTail=this._stepHead=new e(null,0,0,{},null,!0);this._stepPosition=0;this._injected=this._pluginIds=this._plugins=this._actionTail=this._actionHead=null;f&&(this.pluginData=f.pluginData,f.override&&a.removeTweens(c));this.pluginData||(this.pluginData={});this._init(f)}function e(c,f,h,g,k,m){this.next=null;this.prev=c;this.t=f;this.d=h;this.props=g;this.ease=k;this.passive=m;this.index=
c?c.index+1:0}function b(c,f,h,g,k){this.next=null;this.prev=c;this.t=f;this.d=0;this.scope=h;this.funct=g;this.params=k}var d=createjs.extend(a,createjs.AbstractTween);a.IGNORE={};a._tweens=[];a._plugins=null;a._tweenHead=null;a._tweenTail=null;a.get=function(c,f){return new a(c,f)};a.tick=function(c,f){for(var h=a._tweenHead;h;){var g=h._next;f&&!h.ignoreGlobalPause||h._paused||h.advance(h.useTicks?1:c);h=g}};a.handleEvent=function(c){"tick"===c.type&&this.tick(c.delta,c.paused)};a.removeTweens=
function(c){if(c.tweenjs_count){for(var f=a._tweenHead;f;){var h=f._next;f.target===c&&a._register(f,!0);f=h}c.tweenjs_count=0}};a.removeAllTweens=function(){for(var c=a._tweenHead;c;){var f=c._next;c._paused=!0;c.target&&(c.target.tweenjs_count=0);c._next=c._prev=null;c=f}a._tweenHead=a._tweenTail=null};a.hasActiveTweens=function(c){return c?!!c.tweenjs_count:!!a._tweenHead};a._installPlugin=function(c){for(var f=c.priority=c.priority||0,h=a._plugins=a._plugins||[],g=0,k=h.length;g<k&&!(f<h[g].priority);g++);
h.splice(g,0,c)};a._register=function(c,f){var h=c.target;if(!f&&c._paused)h&&(h.tweenjs_count=h.tweenjs_count?h.tweenjs_count+1:1),(h=a._tweenTail)?(a._tweenTail=h._next=c,c._prev=h):a._tweenHead=a._tweenTail=c,!a._inited&&createjs.Ticker&&(createjs.Ticker.addEventListener("tick",a),a._inited=!0);else if(f&&!c._paused){h&&h.tweenjs_count--;h=c._next;var g=c._prev;h?h._prev=g:a._tweenTail=g;g?g._next=h:a._tweenHead=h;c._next=c._prev=null}c._paused=f};d.wait=function(c,f){0<c&&this._addStep(+c,this._stepTail.props,
null,f);return this};d.to=function(c,f,h){if(null==f||0>f)f=0;f=this._addStep(+f,null,h);this._appendProps(c,f);return this};d.label=function(c){this.addLabel(c,this.duration);return this};d.call=function(c,f,h){return this._addAction(h||this.target,c,f||[this])};d.set=function(c,f){return this._addAction(f||this.target,this._set,[c])};d.play=function(c){return this._addAction(c||this,this._set,[{paused:!1}])};d.pause=function(c){return this._addAction(c||this,this._set,[{paused:!0}])};d.w=d.wait;
d.t=d.to;d.c=d.call;d.s=d.set;d.toString=function(){return"[Tween]"};d.clone=function(){throw"Tween can not be cloned.";};d._addPlugin=function(c){var f=this._pluginIds||(this._pluginIds={}),h=c.ID;if(h&&!f[h]){f[h]=!0;f=this._plugins||(this._plugins=[]);h=c.priority||0;for(var g=0,k=f.length;g<k;g++)if(h<f[g].priority){f.splice(g,0,c);return}f.push(c)}};d._updatePosition=function(c,f){var h=this._stepHead.next,g=this.position,k=this.duration;if(this.target&&h){for(var m=h.next;m&&m.t<=g;)h=h.next,
m=h.next;this._updateTargetProps(h,f?0===k?1:g/k:(g-h.t)/h.d,f)}this._stepPosition=h?g-h.t:0};d._updateTargetProps=function(c,f,h){if(!(this.passive=!!c.passive)){var g,k=c.prev.props,m=c.props;if(g=c.ease)f=g(f,0,1,1);g=this._plugins;var q;a:for(q in k){var u=k[q];var r=m[q];u=u!==r&&"number"===typeof u?u+(r-u)*f:1<=f?r:u;if(g){r=0;for(var w=g.length;r<w;r++){var C=g[r].change(this,c,q,u,f,h);if(C===a.IGNORE)continue a;void 0!==C&&(u=C)}}this.target[q]=u}}};d._runActionsRange=function(c,f,h,g){var k=
(h=c>f)?this._actionTail:this._actionHead,m=f,q=c;h&&(m=c,q=f);for(var u=this.position;k;){var r=k.t;if(r===f||r>q&&r<m||g&&r===c)if(k.funct.apply(k.scope,k.params),u!==this.position)return!0;k=h?k.prev:k.next}};d._appendProps=function(c,f,h){var g=this._stepHead.props,k=this.target,m=a._plugins,q,u,r=f.prev,w=r.props,C=f.props||(f.props=this._cloneProps(w)),D={};for(q in c)if(c.hasOwnProperty(q)&&(D[q]=C[q]=c[q],void 0===g[q])){var A=void 0;if(m)for(u=m.length-1;0<=u;u--){var P=m[u].init(this,q,
A);void 0!==P&&(A=P);if(A===a.IGNORE){delete C[q];delete D[q];break}}A!==a.IGNORE&&(void 0===A&&(A=k[q]),w[q]=void 0===A?null:A)}for(q in D){var p;for(c=r;(p=c)&&(c=p.prev);)if(c.props!==p.props){if(void 0!==c.props[q])break;c.props[q]=w[q]}}if(!1!==h&&(m=this._plugins))for(u=m.length-1;0<=u;u--)m[u].step(this,f,D);if(h=this._injected)this._injected=null,this._appendProps(h,f,!1)};d._injectProp=function(c,f){(this._injected||(this._injected={}))[c]=f};d._addStep=function(c,f,h,g){f=new e(this._stepTail,
this.duration,c,f,h,g||!1);this.duration+=c;return this._stepTail=this._stepTail.next=f};d._addAction=function(c,f,h){c=new b(this._actionTail,this.duration,c,f,h);this._actionTail?this._actionTail.next=c:this._actionHead=c;this._actionTail=c;return this};d._set=function(c){for(var f in c)this[f]=c[f]};d._cloneProps=function(c){var f={},h;for(h in c)f[h]=c[h];return f};createjs.Tween=createjs.promote(a,"AbstractTween")})();this.createjs=this.createjs||{};
(function(){function a(b){if(b instanceof Array||null==b&&1<arguments.length){var d=b;var c=arguments[1];b=arguments[2]}else b&&(d=b.tweens,c=b.labels);this.AbstractTween_constructor(b);this.tweens=[];d&&this.addTween.apply(this,d);this.setLabels(c);this._init(b)}var e=createjs.extend(a,createjs.AbstractTween);e.addTween=function(b){b._parent&&b._parent.removeTween(b);var d=arguments.length;if(1<d){for(var c=0;c<d;c++)this.addTween(arguments[c]);return arguments[d-1]}if(0===d)return null;this.tweens.push(b);
b._parent=this;b.paused=!0;d=b.duration;0<b.loop&&(d*=b.loop+1);d>this.duration&&(this.duration=d);0<=this.rawPosition&&b.setPosition(this.rawPosition);return b};e.removeTween=function(b){var d=arguments.length;if(1<d){for(var c=!0,f=0;f<d;f++)c=c&&this.removeTween(arguments[f]);return c}if(0===d)return!0;d=this.tweens;for(f=d.length;f--;)if(d[f]===b)return d.splice(f,1),b._parent=null,b.duration>=this.duration&&this.updateDuration(),!0;return!1};e.updateDuration=function(){for(var b=this.duration=
0,d=this.tweens.length;b<d;b++){var c=this.tweens[b],f=c.duration;0<c.loop&&(f*=c.loop+1);f>this.duration&&(this.duration=f)}};e.toString=function(){return"[Timeline]"};e.clone=function(){throw"Timeline can not be cloned.";};e._updatePosition=function(b,d){for(var c=this.position,f=0,h=this.tweens.length;f<h;f++)this.tweens[f].setPosition(c,!0,b)};e._runActionsRange=function(b,d,c,f){for(var h=this.position,g=0,k=this.tweens.length;g<k;g++)if(this.tweens[g]._runActions(b,d,c,f),h!==this.position)return!0};
createjs.Timeline=createjs.promote(a,"AbstractTween")})();this.createjs=this.createjs||{};
(function(){function a(){throw"Ease cannot be instantiated.";}a.linear=function(e){return e};a.none=a.linear;a.get=function(e){-1>e?e=-1:1<e&&(e=1);return function(b){return 0==e?b:0>e?b*(b*-e+1+e):b*((2-b)*e+(1-e))}};a.getPowIn=function(e){return function(b){return Math.pow(b,e)}};a.getPowOut=function(e){return function(b){return 1-Math.pow(1-b,e)}};a.getPowInOut=function(e){return function(b){return 1>(b*=2)?.5*Math.pow(b,e):1-.5*Math.abs(Math.pow(2-b,e))}};a.quadIn=a.getPowIn(2);a.quadOut=a.getPowOut(2);
a.quadInOut=a.getPowInOut(2);a.cubicIn=a.getPowIn(3);a.cubicOut=a.getPowOut(3);a.cubicInOut=a.getPowInOut(3);a.quartIn=a.getPowIn(4);a.quartOut=a.getPowOut(4);a.quartInOut=a.getPowInOut(4);a.quintIn=a.getPowIn(5);a.quintOut=a.getPowOut(5);a.quintInOut=a.getPowInOut(5);a.sineIn=function(e){return 1-Math.cos(e*Math.PI/2)};a.sineOut=function(e){return Math.sin(e*Math.PI/2)};a.sineInOut=function(e){return-.5*(Math.cos(Math.PI*e)-1)};a.getBackIn=function(e){return function(b){return b*b*((e+1)*b-e)}};
a.backIn=a.getBackIn(1.7);a.getBackOut=function(e){return function(b){return--b*b*((e+1)*b+e)+1}};a.backOut=a.getBackOut(1.7);a.getBackInOut=function(e){e*=1.525;return function(b){return 1>(b*=2)?.5*b*b*((e+1)*b-e):.5*((b-=2)*b*((e+1)*b+e)+2)}};a.backInOut=a.getBackInOut(1.7);a.circIn=function(e){return-(Math.sqrt(1-e*e)-1)};a.circOut=function(e){return Math.sqrt(1- --e*e)};a.circInOut=function(e){return 1>(e*=2)?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)};a.bounceIn=function(e){return 1-
a.bounceOut(1-e)};a.bounceOut=function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375};a.bounceInOut=function(e){return.5>e?.5*a.bounceIn(2*e):.5*a.bounceOut(2*e-1)+.5};a.getElasticIn=function(e,b){var d=2*Math.PI;return function(c){if(0==c||1==c)return c;var f=b/d*Math.asin(1/e);return-(e*Math.pow(2,10*--c)*Math.sin((c-f)*d/b))}};a.elasticIn=a.getElasticIn(1,.3);a.getElasticOut=function(e,b){var d=2*Math.PI;
return function(c){return 0==c||1==c?c:e*Math.pow(2,-10*c)*Math.sin((c-b/d*Math.asin(1/e))*d/b)+1}};a.elasticOut=a.getElasticOut(1,.3);a.getElasticInOut=function(e,b){var d=2*Math.PI;return function(c){var f=b/d*Math.asin(1/e);return 1>(c*=2)?-.5*e*Math.pow(2,10*--c)*Math.sin((c-f)*d/b):e*Math.pow(2,-10*--c)*Math.sin((c-f)*d/b)*.5+1}};a.elasticInOut=a.getElasticInOut(1,.3*1.5);createjs.Ease=a})();this.createjs=this.createjs||{};
(function(){function a(){throw"MotionGuidePlugin cannot be instantiated.";}a.priority=0;a.ID="MotionGuide";a.install=function(){createjs.Tween._installPlugin(a);return createjs.Tween.IGNORE};a.init=function(e,b,d){"guide"==b&&e._addPlugin(a)};a.step=function(e,b,d){for(var c in d)if("guide"===c){var f=b.props.guide,h=a._solveGuideData(d.guide,f);f.valid=!h;var g=f.endData;e._injectProp("x",g.x);e._injectProp("y",g.y);if(h||!f.orient)break;f.startOffsetRot=(void 0===b.prev.props.rotation?e.target.rotation||
0:b.prev.props.rotation)-f.startData.rotation;if("fixed"==f.orient)f.endAbsRot=g.rotation+f.startOffsetRot,f.deltaRotation=0;else{h=void 0===d.rotation?e.target.rotation||0:d.rotation;g=h-f.endData.rotation-f.startOffsetRot;var k=g%360;f.endAbsRot=h;switch(f.orient){case "auto":f.deltaRotation=g;break;case "cw":f.deltaRotation=(k+360)%360+360*Math.abs(g/360|0);break;case "ccw":f.deltaRotation=(k-360)%360+-360*Math.abs(g/360|0)}}e._injectProp("rotation",f.endAbsRot)}};a.change=function(e,b,d,c,f,h){if((c=
b.props.guide)&&b.props!==b.prev.props&&c!==b.prev.props.guide){if("guide"===d&&!c.valid||"x"==d||"y"==d||"rotation"===d&&c.orient)return createjs.Tween.IGNORE;a._ratioToPositionData(f,c,e.target)}};a.debug=function(e,b,d){e=e.guide||e;var c=a._findPathProblems(e);c&&console.error("MotionGuidePlugin Error found: \n"+c);if(!b)return c;var f,h=e.path,g=h.length;b.save();b.lineCap="round";b.lineJoin="miter";b.beginPath();b.moveTo(h[0],h[1]);for(f=2;f<g;f+=4)b.quadraticCurveTo(h[f],h[f+1],h[f+2],h[f+
3]);b.strokeStyle="black";b.lineWidth=4.5;b.stroke();b.strokeStyle="white";b.lineWidth=3;b.stroke();b.closePath();h=d.length;if(d&&h){g={};var k={};a._solveGuideData(e,g);for(f=0;f<h;f++)g.orient="fixed",a._ratioToPositionData(d[f],g,k),b.beginPath(),b.moveTo(k.x,k.y),b.lineTo(k.x+9*Math.cos(.0174533*k.rotation),k.y+9*Math.sin(.0174533*k.rotation)),b.strokeStyle="black",b.lineWidth=4.5,b.stroke(),b.strokeStyle="red",b.lineWidth=3,b.stroke(),b.closePath()}b.restore();return c};a._solveGuideData=function(e,
b){var d;if(d=a.debug(e))return d;var c=b.path=e.path;b.orient=e.orient;b.subLines=[];b.totalLength=0;b.startOffsetRot=0;b.deltaRotation=0;b.startData={ratio:0};b.endData={ratio:1};b.animSpan=1;var f=c.length,h,g={};var k=c[0];var m=c[1];for(d=2;d<f;d+=4){var q=c[d];var u=c[d+1];var r=c[d+2];var w=c[d+3];var C={weightings:[],estLength:0,portion:0},D=k;var A=m;for(h=1;10>=h;h++)a._getParamsForCurve(k,m,q,u,r,w,h/10,!1,g),D=g.x-D,A=g.y-A,A=Math.sqrt(D*D+A*A),C.weightings.push(A),C.estLength+=A,D=g.x,
A=g.y;b.totalLength+=C.estLength;for(h=0;10>h;h++)A=C.estLength,C.weightings[h]/=A;b.subLines.push(C);k=r;m=w}A=b.totalLength;c=b.subLines.length;for(d=0;d<c;d++)b.subLines[d].portion=b.subLines[d].estLength/A;d=isNaN(e.start)?0:e.start;c=isNaN(e.end)?1:e.end;a._ratioToPositionData(d,b,b.startData);a._ratioToPositionData(c,b,b.endData);b.startData.ratio=d;b.endData.ratio=c;b.animSpan=b.endData.ratio-b.startData.ratio};a._ratioToPositionData=function(e,b,d){var c=b.subLines,f,h=0,g=e*b.animSpan+b.startData.ratio;
var k=c.length;for(f=0;f<k;f++){var m=c[f].portion;if(h+m>=g){var q=f;break}h+=m}void 0===q&&(q=k-1,h-=m);c=c[q].weightings;var u=m;k=c.length;for(f=0;f<k;f++){m=c[f]*u;if(h+m>=g)break;h+=m}q=4*q+2;k=b.path;a._getParamsForCurve(k[q-2],k[q-1],k[q],k[q+1],k[q+2],k[q+3],f/10+(g-h)/m*.1,b.orient,d);b.orient&&(d.rotation=.99999<=e&&1.00001>=e&&void 0!==b.endAbsRot?b.endAbsRot:d.rotation+(b.startOffsetRot+e*b.deltaRotation));return d};a._getParamsForCurve=function(e,b,d,c,f,h,g,k,m){var q=1-g;m.x=q*q*e+
2*q*g*d+g*g*f;m.y=q*q*b+2*q*g*c+g*g*h;k&&(m.rotation=57.2957795*Math.atan2((c-b)*q+(h-c)*g,(d-e)*q+(f-d)*g))};a._findPathProblems=function(e){var b=e.path,d=b&&b.length||0;if(6>d||(d-2)%4)return"\tCannot parse 'path' array due to invalid number of entries in path. There should be an odd number of points, at least 3 points, and 2 entries per point (x & y). See 'CanvasRenderingContext2D.quadraticCurveTo' for details as 'path' models a quadratic bezier.\n\nOnly [ "+(d+" ] values found. Expected: "+Math.max(4*
Math.ceil((d-2)/4)+2,6));for(var c=0;c<d;c++)if(isNaN(b[c]))return"All data in path array must be numeric";b=e.start;if(isNaN(b)&&void 0!==b)return"'start' out of bounds. Expected 0 to 1, got: "+b;b=e.end;if(isNaN(b)&&void 0!==b)return"'end' out of bounds. Expected 0 to 1, got: "+b;if((e=e.orient)&&"fixed"!=e&&"auto"!=e&&"cw"!=e&&"ccw"!=e)return'Invalid orientation value. Expected ["fixed", "auto", "cw", "ccw", undefined], got: '+e};createjs.MotionGuidePlugin=a})();this.createjs=this.createjs||{};
(function(){var a=createjs.TweenJS=createjs.TweenJS||{};a.version="1.0.0";a.buildDate="Thu, 14 Sep 2017 19:47:47 GMT"})();
(function(){function a(p){p=String(p);return p.charAt(0).toUpperCase()+p.slice(1)}function e(p,I){var H=-1,G=p?p.length:0;if("number"==typeof G&&-1<G&&G<=w)for(;++H<G;)I(p[H],H,p);else d(p,I)}function b(p){p=String(p).replace(/^ +| +$/g,"");return/^(?:webOS|i(?:OS|P))/.test(p)?p:a(p)}function d(p,I){for(var H in p)D.call(p,H)&&I(p[H],H,p)}function c(p){return null==p?a(p):A.call(p).slice(8,-1)}function f(p,I){var H=null!=p?typeof p[I]:"number";return!/^(?:boolean|number|string|undefined)$/.test(H)&&
("object"==H?!!p[I]:!0)}function h(p){return String(p).replace(/([ -])(?!$)/g,"$1?")}function g(p,I){var H=null;e(p,function(G,F){H=I(H,G,F,p)});return H}function k(p){function I(K){return g(K,function(l,t){var E=t.pattern||h(t);!l&&(l=RegExp("\\b"+E+" *\\d+[.\\w_]*","i").exec(p)||RegExp("\\b"+E+" *\\w+-[\\w]*","i").exec(p)||RegExp("\\b"+E+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(p))&&((l=String(t.label&&!RegExp(E,"i").test(t.label)?t.label:l).split("/"))[1]&&!/[\d.]+/.test(l[0])&&(l[0]+=
" "+l[1]),t=t.label||t,l=b(l[0].replace(RegExp(E,"i"),t).replace(RegExp("; *(?:"+t+"[_-])?","i")," ").replace(RegExp("("+t+")[-_.]?(\\w)","i"),"$1 $2")));return l})}function H(K){return g(K,function(l,t){return l||(RegExp(t+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(p)||0)[1]||null})}var G=q,F=p&&"object"==typeof p&&"String"!=c(p);F&&(G=p,p=null);var L=G.navigator||{},y=L.userAgent||"";p||(p=y);var ca=F?!!L.likeChrome:/\bChrome\b/.test(p)&&!/internal|\n/i.test(A.toString()),
ja=F?"Object":"ScriptBridgingProxyObject",da=F?"Object":"Environment",aa=F&&G.java?"JavaPackage":c(G.java),ka=F?"Object":"RuntimeObject";da=(aa=/\bJava/.test(aa)&&G.java)&&c(G.environment)==da;var ea=aa?"a":"\u03b1",ha=aa?"b":"\u03b2",ia=G.document||{},Y=G.operamini||G.opera,V=C.test(V=F&&Y?Y["[[Class]]"]:c(Y))?V:Y=null,n,W=p;F=[];var S=null,U=p==y;y=U&&Y&&"function"==typeof Y.version&&Y.version();var J=function(K){return g(K,function(l,t){return l||RegExp("\\b"+(t.pattern||h(t))+"\\b","i").exec(p)&&
(t.label||t)})}([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),x=function(K){return g(K,function(l,t){return l||RegExp("\\b"+(t.pattern||h(t))+"\\b","i").exec(p)&&(t.label||t)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori",
"Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",
pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),N=I([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV",
"Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),T=function(K){return g(K,function(l,t,E){return l||(t[N]||t[/^[a-z]+(?: +[a-z]+\b)*/i.exec(N)]||RegExp("\\b"+h(E)+"(?:\\b|\\w*\\d)","i").exec(p))&&E})}({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},
Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}}),v=function(K){return g(K,function(l,t){var E=t.pattern||h(t);if(!l&&(l=RegExp("\\b"+E+"(?:/[\\d.]+|[ \\w.]*)","i").exec(p))){var O=l,Q=t.label||t,R={"10.0":"10","6.4":"10 Technical Preview",
"6.3":"8.1","6.2":"8","6.1":"Server 2008 R2 / 7","6.0":"Server 2008 / Vista","5.2":"Server 2003 / XP 64-bit","5.1":"XP","5.01":"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};E&&Q&&/^Win/i.test(O)&&!/^Windows Phone /i.test(O)&&(R=R[/[\d.]+$/.exec(O)])&&(O="Windows "+R);O=String(O);E&&Q&&(O=O.replace(RegExp(E,"i"),Q));l=O=b(O.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/,
" $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}return l})}(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac",
"Windows 98;","Windows "]);J&&(J=[J]);T&&!N&&(N=I([T]));if(n=/\bGoogle TV\b/.exec(N))N=n[0];/\bSimulator\b/i.test(p)&&(N=(N?N+" ":"")+"Simulator");"Opera Mini"==x&&/\bOPiOS\b/.test(p)&&F.push("running in Turbo/Uncompressed mode");"IE"==x&&/\blike iPhone OS\b/.test(p)?(n=k(p.replace(/like iPhone OS/,"")),T=n.manufacturer,N=n.product):/^iP/.test(N)?(x||(x="Safari"),v="iOS"+((n=/ OS ([\d_]+)/i.exec(p))?" "+n[1].replace(/_/g,"."):"")):"Konqueror"!=x||/buntu/i.test(v)?T&&"Google"!=T&&(/Chrome/.test(x)&&
!/\bMobile Safari\b/i.test(p)||/\bVita\b/.test(N))||/\bAndroid\b/.test(v)&&/^Chrome/.test(x)&&/\bVersion\//i.test(p)?(x="Android Browser",v=/\bAndroid\b/.test(v)?v:"Android"):"Silk"==x?(/\bMobi/i.test(p)||(v="Android",F.unshift("desktop mode")),/Accelerated *= *true/i.test(p)&&F.unshift("accelerated")):"PaleMoon"==x&&(n=/\bFirefox\/([\d.]+)\b/.exec(p))?F.push("identifying as Firefox "+n[1]):"Firefox"==x&&(n=/\b(Mobile|Tablet|TV)\b/i.exec(p))?(v||(v="Firefox OS"),N||(N=n[1])):!x||(n=!/\bMinefield\b/i.test(p)&&
/\b(?:Firefox|Safari)\b/.exec(x))?(x&&!N&&/[\/,]|^[^(]+?\)/.test(p.slice(p.indexOf(n+"/")+8))&&(x=null),(n=N||T||v)&&(N||T||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(v))&&(x=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(v)?v:n)+" Browser")):"Electron"==x&&(n=(/\bChrome\/([\d.]+)\b/.exec(p)||0)[1])&&F.push("Chromium "+n):v="Kubuntu";y||(y=H(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",h(x),"(?:Firefox|Minefield|NetFront)"]));
if(n="iCab"==J&&3<parseFloat(y)&&"WebKit"||/\bOpera\b/.test(x)&&(/\bOPR\b/.test(p)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(p)&&!/^(?:Trident|EdgeHTML)$/.test(J)&&"WebKit"||!J&&/\bMSIE\b/i.test(p)&&("Mac OS"==v?"Tasman":"Trident")||"WebKit"==J&&/\bPlayStation\b(?! Vita\b)/i.test(x)&&"NetFront")J=[n];"IE"==x&&(n=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(p)||0)[1])?(x+=" Mobile",v="Windows Phone "+(/\+$/.test(n)?n:n+".x"),F.unshift("desktop mode")):/\bWPDesktop\b/i.test(p)?(x="IE Mobile",v="Windows Phone 8.x",
F.unshift("desktop mode"),y||(y=(/\brv:([\d.]+)/.exec(p)||0)[1])):"IE"!=x&&"Trident"==J&&(n=/\brv:([\d.]+)/.exec(p))&&(x&&F.push("identifying as "+x+(y?" "+y:"")),x="IE",y=n[1]);if(U){if(f(G,"global"))if(aa&&(n=aa.lang.System,W=n.getProperty("os.arch"),v=v||n.getProperty("os.name")+" "+n.getProperty("os.version")),da){try{y=G.require("ringo/engine").version.join("."),x="RingoJS"}catch(K){(n=G.system)&&n.global.system==G.system&&(x="Narwhal",v||(v=n[0].os||null))}x||(x="Rhino")}else"object"==typeof G.process&&
!G.process.browser&&(n=G.process)&&("object"==typeof n.versions&&("string"==typeof n.versions.electron?(F.push("Node "+n.versions.node),x="Electron",y=n.versions.electron):"string"==typeof n.versions.nw&&(F.push("Chromium "+y,"Node "+n.versions.node),x="NW.js",y=n.versions.nw)),x||(x="Node.js",W=n.arch,v=n.platform,y=(y=/[\d.]+/.exec(n.version))?y[0]:null));else c(n=G.runtime)==ja?(x="Adobe AIR",v=n.flash.system.Capabilities.os):c(n=G.phantom)==ka?(x="PhantomJS",y=(n=n.version||null)&&n.major+"."+
n.minor+"."+n.patch):"number"==typeof ia.documentMode&&(n=/\bTrident\/(\d+)/i.exec(p))?(y=[y,ia.documentMode],(n=+n[1]+4)!=y[1]&&(F.push("IE "+y[1]+" mode"),J&&(J[1]=""),y[1]=n),y="IE"==x?String(y[1].toFixed(1)):y[0]):"number"==typeof ia.documentMode&&/^(?:Chrome|Firefox)\b/.test(x)&&(F.push("masking as "+x+" "+y),x="IE",y="11.0",J=["Trident"],v="Windows");v=v&&b(v)}y&&(n=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(y)||/(?:alpha|beta)(?: ?\d)?/i.exec(p+";"+(U&&L.appMinorVersion))||/\bMinefield\b/i.test(p)&&
"a")&&(S=/b/i.test(n)?"beta":"alpha",y=y.replace(RegExp(n+"\\+?$"),"")+("beta"==S?ha:ea)+(/\d+\+?/.exec(n)||""));if("Fennec"==x||"Firefox"==x&&/\b(?:Android|Firefox OS)\b/.test(v))x="Firefox Mobile";else if("Maxthon"==x&&y)y=y.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(N))"Xbox 360"==N&&(v=null),"Xbox 360"==N&&/\bIEMobile\b/.test(p)&&F.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(x)&&(!x||N||/Browser|Mobi/.test(x))||"Windows CE"!=v&&!/Mobi/i.test(p))if("IE"==x&&U)try{null===
G.external&&F.unshift("platform preview")}catch(K){F.unshift("embedded")}else(/\bBlackBerry\b/.test(N)||/\bBB10\b/.test(p))&&(n=(RegExp(N.replace(/ +/g," *")+"/([.\\d]+)","i").exec(p)||0)[1]||y)?(n=[n,/BB10/.test(p)],v=(n[1]?(N=null,T="BlackBerry"):"Device Software")+" "+n[0],y=null):this!=d&&"Wii"!=N&&(U&&Y||/Opera/.test(x)&&/\b(?:MSIE|Firefox)\b/i.test(p)||"Firefox"==x&&/\bOS X (?:\d+\.){2,}/.test(v)||"IE"==x&&(v&&!/^Win/.test(v)&&5.5<y||/\bWindows XP\b/.test(v)&&8<y||8==y&&!/\bTrident\b/.test(p)))&&
!C.test(n=k.call(d,p.replace(C,"")+";"))&&n.name&&(n="ing as "+n.name+((n=n.version)?" "+n:""),C.test(x)?(/\bIE\b/.test(n)&&"Mac OS"==v&&(v=null),n="identify"+n):(n="mask"+n,x=V?b(V.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(n)&&(v=null),U||(y=null)),J=["Presto"],F.push(n));else x+=" Mobile";if(n=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(p)||0)[1]){n=[parseFloat(n.replace(/\.(\d)$/,".0$1")),n];if("Safari"==x&&"+"==n[1].slice(-1))x="WebKit Nightly",S="alpha",y=n[1].slice(0,-1);else if(y==
n[1]||y==(n[2]=(/\bSafari\/([\d.]+\+?)/i.exec(p)||0)[1]))y=null;n[1]=(/\bChrome\/([\d.]+)/i.exec(p)||0)[1];537.36==n[0]&&537.36==n[2]&&28<=parseFloat(n[1])&&"WebKit"==J&&(J=["Blink"]);U&&(ca||n[1])?(J&&(J[1]="like Chrome"),n=n[1]||(n=n[0],530>n?1:532>n?2:532.05>n?3:533>n?4:534.03>n?5:534.07>n?6:534.1>n?7:534.13>n?8:534.16>n?9:534.24>n?10:534.3>n?11:535.01>n?12:535.02>n?"13+":535.07>n?15:535.11>n?16:535.19>n?17:536.05>n?18:536.1>n?19:537.01>n?20:537.11>n?"21+":537.13>n?23:537.18>n?24:537.24>n?25:537.36>
n?26:"Blink"!=J?"27":"28")):(J&&(J[1]="like Safari"),n=(n=n[0],400>n?1:500>n?2:526>n?3:533>n?4:534>n?"4+":535>n?5:537>n?6:538>n?7:601>n?8:"8"));J&&(J[1]+=" "+(n+="number"==typeof n?".x":/[.+]/.test(n)?"":"+"));"Safari"==x&&(!y||45<parseInt(y))&&(y=n)}"Opera"==x&&(n=/\bzbov|zvav$/.exec(v))?(x+=" ",F.unshift("desktop mode"),"zvav"==n?(x+="Mini",y=null):x+="Mobile",v=v.replace(RegExp(" *"+n+"$"),"")):"Safari"==x&&/\bChrome\b/.exec(J&&J[1])&&(F.unshift("desktop mode"),x="Chrome Mobile",y=null,/\bOS X\b/.test(v)?
(T="Apple",v="iOS 4.3+"):v=null);y&&0==y.indexOf(n=/[\d.]+$/.exec(v))&&-1<p.indexOf("/"+n+"-")&&(v=String(v.replace(n,"")).replace(/^ +| +$/g,""));J&&!/\b(?:Avant|Nook)\b/.test(x)&&(/Browser|Lunascape|Maxthon/.test(x)||"Safari"!=x&&/^iOS/.test(v)&&/\bSafari\b/.test(J[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(x)&&J[1])&&(n=J[J.length-1])&&F.push(n);F.length&&(F=["("+F.join("; ")+")"]);T&&N&&0>N.indexOf(T)&&F.push("on "+T);N&&F.push((/^on /.test(F[F.length-
1])?"":"on ")+N);if(v){var fa=(n=/ ([\d.+]+)$/.exec(v))&&"/"==v.charAt(v.length-n[0].length-1);v={architecture:32,family:n&&!fa?v.replace(n[0],""):v,version:n?n[1]:null,toString:function(){var K=this.version;return this.family+(K&&!fa?" "+K:"")+(64==this.architecture?" 64-bit":"")}}}(n=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(W))&&!/\bi686\b/i.test(W)?(v&&(v.architecture=64,v.family=v.family.replace(RegExp(" *"+n),"")),x&&(/\bWOW64\b/i.test(p)||U&&/\w(?:86|32)$/.test(L.cpuClass||L.platform)&&!/\bWin64; x64\b/i.test(p))&&
F.unshift("32-bit")):v&&/^OS X/.test(v.family)&&"Chrome"==x&&39<=parseFloat(y)&&(v.architecture=64);p||(p=null);G={};G.description=p;G.layout=J&&J[0];G.manufacturer=T;G.name=x;G.prerelease=S;G.product=N;G.ua=p;G.version=x&&y;G.os=v||{architecture:null,family:null,version:null,toString:function(){return"null"}};G.parse=k;G.toString=function(){return this.description||""};G.version&&F.unshift(y);G.name&&F.unshift(x);v&&x&&(v!=String(v).split(" ")[0]||v!=x.split(" ")[0]&&!N)&&F.push(N?"("+v+")":"on "+
v);F.length&&(G.description=F.join(" "));return G}var m={"function":!0,object:!0},q=m[typeof window]&&window||this,u=m[typeof exports]&&exports;m=m[typeof module]&&module&&!module.nodeType&&module;var r=u&&m&&"object"==typeof global&&global;!r||r.global!==r&&r.window!==r&&r.self!==r||(q=r);var w=Math.pow(2,53)-1,C=/\bOpera/;r=Object.prototype;var D=r.hasOwnProperty,A=r.toString,P=k();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(q.platform=P,define(function(){return P})):u&&
m?d(P,function(p,I){u[I]=p}):q.platform=P}).call(this);
function buildIOSMeta(){for(var a=[{name:"viewport",content:"width=device-width, height=device-height, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"},{name:"apple-mobile-web-app-capable",content:"yes"},{name:"apple-mobile-web-app-status-bar-style",content:"black"}],e=0;e<a.length;e++){var b=document.createElement("meta");b.name=a[e].name;b.content=a[e].content;var d=window.document.head.querySelector('meta[name="'+b.name+'"]');d&&d.parentNode.removeChild(d);window.document.head.appendChild(b)}}
function hideIOSFullscreenPanel(){jQuery(".xxx-ios-fullscreen-message").css("display","none");jQuery(".xxx-ios-fullscreen-scroll").css("display","none");jQuery(".xxx-game-iframe-full").removeClass("xxx-game-iframe-iphone-se")}function buildIOSFullscreenPanel(){jQuery("body").append('<div class="xxx-ios-fullscreen-message"><div class="xxx-ios-fullscreen-swipe"></div></div><div class="xxx-ios-fullscreen-scroll"></div>')}
function showIOSFullscreenPanel(){jQuery(".xxx-ios-fullscreen-message").css("display","block");jQuery(".xxx-ios-fullscreen-scroll").css("display","block")}
function __iosResize(){window.scrollTo(0,0);console.log(window.devicePixelRatio);console.log(window.innerWidth);console.log(window.innerHeight);if("iPhone"===platform.product)switch(window.devicePixelRatio){case 2:switch(window.innerWidth){case 568:320!==window.innerHeight&&jQuery(".xxx-game-iframe-full").addClass("xxx-game-iframe-iphone-se");break;case 667:375===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();break;case 808:414===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();
break;default:hideIOSFullscreenPanel()}break;case 3:switch(window.innerWidth){case 736:414===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();break;case 724:375===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();break;case 808:414===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();break;default:hideIOSFullscreenPanel()}break;default:hideIOSFullscreenPanel()}}function iosResize(){__iosResize();setTimeout(function(){__iosResize()},500)}
function iosInIframe(){try{return window.self!==window.top}catch(a){return!0}}function isIOSLessThen13(){var a=platform.os,e=a.family.toLowerCase();a=parseFloat(a.version);return"ios"===e&&13>a?!0:!1}$(document).ready(function(){platform&&"iPhone"===platform.product&&"safari"===platform.name.toLowerCase()&&isIOSLessThen13()&&!iosInIframe()&&(buildIOSFullscreenPanel(),buildIOSMeta())});
jQuery(window).resize(function(){platform&&"iPhone"===platform.product&&"safari"===platform.name.toLowerCase()&&isIOSLessThen13()&&!iosInIframe()&&iosResize()});var s_iOffsetX=0,s_iOffsetY=0,s_fInverseScaling=0,s_bIsIphone=!1,s_bFocus=!0;
(function(a){(jQuery.browser=jQuery.browser||{}).mobile=/android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(ad|hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|tablet|treo|up\.(browser|link)|vodafone|wap|webos|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(a.substr(0,
4))})(navigator.userAgent||navigator.vendor||window.opera);$(window).resize(function(){sizeHandler()});function trace(a){console.log(a)}function isChrome(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}function isIOS(){var a="iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";");if(-1!==navigator.userAgent.toLowerCase().indexOf("iphone"))return s_bIsIphone=!0;for(;a.length;)if(navigator.platform===a.pop())return!0;return s_bIsIphone=!1}
function isIpad(){var a=-1!==navigator.userAgent.toLowerCase().indexOf("ipad");return!a&&navigator.userAgent.match(/Mac/)&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints?!0:a}function isMobile(){return isIpad()?!0:jQuery.browser.mobile}
function getSize(a){var e=a.toLowerCase(),b=window.document,d=b.documentElement;if(void 0===window["inner"+a])a=d["client"+a];else if(window["inner"+a]!=d["client"+a]){var c=b.createElement("body");c.id="vpw-test-b";c.style.cssText="overflow:scroll";var f=b.createElement("div");f.id="vpw-test-d";f.style.cssText="position:absolute;top:-1000px";f.innerHTML="<style>@media("+e+":"+d["client"+a]+"px){body#vpw-test-b div#vpw-test-d{"+e+":7px!important}}</style>";c.appendChild(f);d.insertBefore(c,b.head);
a=7==f["offset"+a]?d["client"+a]:window["inner"+a];d.removeChild(c)}else a=window["inner"+a];return a}window.addEventListener("orientationchange",onOrientationChange);function onOrientationChange(){window.matchMedia("(orientation: portrait)").matches&&sizeHandler();window.matchMedia("(orientation: landscape)").matches&&sizeHandler()}function getIOSWindowHeight(){return document.documentElement.clientWidth/window.innerWidth*window.innerHeight}
function getHeightOfIOSToolbars(){var a=(0===window.orientation?screen.height:screen.width)-getIOSWindowHeight();return 1<a?a:0}
function sizeHandler(){window.scrollTo(0,1);if($("#canvas")){var a=null!==platform.name&&"safari"===platform.name.toLowerCase()?getIOSWindowHeight():getSize("Height");var e=getSize("Width");s_bFocus&&_checkOrientation(e,a);var b=Math.min(a/CANVAS_HEIGHT,e/CANVAS_WIDTH),d=Math.round(CANVAS_WIDTH*b);b=Math.round(CANVAS_HEIGHT*b);if(b<a){var c=a-b;b+=c;d+=CANVAS_WIDTH/CANVAS_HEIGHT*c}else d<e&&(c=e-d,d+=c,b+=CANVAS_HEIGHT/CANVAS_WIDTH*c);c=a/2-b/2;var f=e/2-d/2,h=CANVAS_WIDTH/d;if(f*h<-EDGEBOARD_X||
c*h<-EDGEBOARD_Y)b=Math.min(a/(CANVAS_HEIGHT-2*EDGEBOARD_Y),e/(CANVAS_WIDTH-2*EDGEBOARD_X)),d=Math.round(CANVAS_WIDTH*b),b=Math.round(CANVAS_HEIGHT*b),c=(a-b)/2,f=(e-d)/2,h=CANVAS_WIDTH/d;s_iOffsetX=-1*f*h;s_iOffsetY=-1*c*h;0<=c&&(s_iOffsetY=0);0<=f&&(s_iOffsetX=0);null!==s_oInterface&&s_oInterface.refreshButtonPos(s_iOffsetX,s_iOffsetY);null!==s_oMenu&&s_oMenu.refreshButtonPos(s_iOffsetX,s_iOffsetY);s_bIsIphone?(canvas=document.getElementById("canvas"),s_oStage.canvas.width=2*d,s_oStage.canvas.height=
2*b,canvas.style.width=d+"px",canvas.style.height=b+"px",s_oStage.scaleX=s_oStage.scaleY=2*Math.min(d/CANVAS_WIDTH,b/CANVAS_HEIGHT)):s_bMobile||isChrome()?($("#canvas").css("width",d+"px"),$("#canvas").css("height",b+"px")):(s_oStage.canvas.width=d,s_oStage.canvas.height=b,s_iScaleFactor=Math.min(d/CANVAS_WIDTH,b/CANVAS_HEIGHT),s_oStage.scaleX=s_oStage.scaleY=s_iScaleFactor);0>c||(c=(a-b)/2);$("#canvas").css("top",c+"px");$("#canvas").css("left",f+"px");fullscreenHandler()}}
function _checkOrientation(a,e){s_bMobile&&ENABLE_CHECK_ORIENTATION&&(a>e?"landscape"===$(".orientation-msg-container").attr("data-orientation")?($(".orientation-msg-container").css("display","none"),s_oMain.startUpdate()):($(".orientation-msg-container").css("display","block"),s_oMain.stopUpdate()):"portrait"===$(".orientation-msg-container").attr("data-orientation")?($(".orientation-msg-container").css("display","none"),s_oMain.startUpdate()):($(".orientation-msg-container").css("display","block"),
s_oMain.stopUpdate()))}function playSound(a,e,b){return!1===DISABLE_SOUND_MOBILE||!1===s_bMobile?(s_aSounds[a].play(),s_aSounds[a].volume(e),s_aSounds[a].loop(b),s_aSounds[a]):null}function stopSound(a){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].stop()}function setVolume(a,e){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].volume(e)}function setMute(a,e){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].mute(e)}
function createBitmap(a,e,b){var d=new createjs.Bitmap(a),c=new createjs.Shape;e&&b?c.graphics.beginFill("#fff").drawRect(0,0,e,b):c.graphics.beginFill("#ff0").drawRect(0,0,a.width,a.height);d.hitArea=c;return d}function createSprite(a,e,b,d,c,f){a=null!==e?new createjs.Sprite(a,e):new createjs.Sprite(a);e=new createjs.Shape;e.graphics.beginFill("#000000").drawRect(-b,-d,c,f);a.hitArea=e;return a}
function randomFloatBetween(a,e,b){"undefined"===typeof b&&(b=2);return parseFloat(Math.min(a+Math.random()*(e-a),e).toFixed(b))}function formatTime(a){a/=1E3;var e=Math.floor(a/60);a=Math.floor(a-60*e);var b="";b=10>e?b+("0"+e+":"):b+(e+":");return 10>a?b+("0"+a):b+a}function NoClickDelay(a){this.element=a;window.Touch&&this.element.addEventListener("touchstart",this,!1)}function shuffle(a){for(var e=a.length,b,d;0<e;)d=Math.floor(Math.random()*e),e--,b=a[e],a[e]=a[d],a[d]=b;return a}
NoClickDelay.prototype={handleEvent:function(a){switch(a.type){case "touchstart":this.onTouchStart(a);break;case "touchmove":this.onTouchMove(a);break;case "touchend":this.onTouchEnd(a)}},onTouchStart:function(a){a.preventDefault();this.moved=!1;this.element.addEventListener("touchmove",this,!1);this.element.addEventListener("touchend",this,!1)},onTouchMove:function(a){this.moved=!0},onTouchEnd:function(a){this.element.removeEventListener("touchmove",this,!1);this.element.removeEventListener("touchend",
this,!1);if(!this.moved){a=document.elementFromPoint(a.changedTouches[0].clientX,a.changedTouches[0].clientY);3==a.nodeType&&(a=a.parentNode);var e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0);a.dispatchEvent(e)}}};function getParamValue(a){for(var e=window.location.search.substring(1).split("&"),b=0;b<e.length;b++){var d=e[b].split("=");if(d[0]==a)return d[1]}}function ctlArcadeResume(){null!==s_oMain&&s_oMain.startUpdate()}
function ctlArcadePause(){null!==s_oMain&&s_oMain.stopUpdate()}
(function(){function a(b){var d={focus:"visible",focusin:"visible",pageshow:"visible",blur:"hidden",focusout:"hidden",pagehide:"hidden"};b=b||window.event;b.type in d?document.body.className=d[b.type]:(document.body.className=this[e]?"hidden":"visible","hidden"===document.body.className?(s_oMain.stopUpdate(),s_bFocus=!1):(s_oMain.startUpdate(),s_bFocus=!0))}var e="hidden";e in document?document.addEventListener("visibilitychange",a):(e="mozHidden")in document?document.addEventListener("mozvisibilitychange",
a):(e="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",a):(e="msHidden")in document?document.addEventListener("msvisibilitychange",a):"onfocusin"in document?document.onfocusin=document.onfocusout=a:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=a})();
function fullscreenHandler(){ENABLE_FULLSCREEN&&screenfull.isEnabled&&(s_bFullscreen=screenfull.isFullscreen,null!==s_oInterface&&s_oInterface.resetFullscreenBut(),null!==s_oMenu&&s_oMenu.resetFullscreenBut())}if(screenfull.isEnabled)screenfull.on("change",function(){s_bFullscreen=screenfull.isFullscreen;null!==s_oInterface&&s_oInterface.resetFullscreenBut();null!==s_oMenu&&s_oMenu.resetFullscreenBut()});
function CSpriteLibrary(){var a={},e,b,d,c,f,h;this.init=function(g,k,m){e={};d=b=0;c=g;f=k;h=m};this.addSprite=function(g,k){if(!a.hasOwnProperty(g)){var m=new Image;a[g]=e[g]={szPath:k,oSprite:m,bLoaded:!1};b++}};this.getSprite=function(g){return a.hasOwnProperty(g)?a[g].oSprite:null};this._onSpritesLoaded=function(){b=0;f.call(h)};this._onSpriteLoaded=function(){c.call(h);++d===b&&this._onSpritesLoaded()};this.loadSprites=function(){for(var g in e)e[g].oSprite.oSpriteLibrary=this,e[g].oSprite.szKey=
g,e[g].oSprite.onload=function(){this.oSpriteLibrary.setLoaded(this.szKey);this.oSpriteLibrary._onSpriteLoaded(this.szKey)},e[g].oSprite.onerror=function(k){var m=k.currentTarget;setTimeout(function(){e[m.szKey].oSprite.src=e[m.szKey].szPath},500)},e[g].oSprite.src=e[g].szPath};this.setLoaded=function(g){a[g].bLoaded=!0};this.isLoaded=function(g){return a[g].bLoaded};this.getNumSprites=function(){return b}}
for(var CANVAS_WIDTH=960,CANVAS_HEIGHT=540,EDGEBOARD_X=80,EDGEBOARD_Y=55,FPS_TIME=1E3/30,DISABLE_SOUND_MOBILE=!1,PRIMARY_FONT="aldo_the_apacheregular",STATE_LOADING=0,STATE_MENU=1,STATE_HELP=1,STATE_GAME=3,ON_MOUSE_DOWN=0,ON_MOUSE_UP=1,ON_MOUSE_OVER=2,ON_MOUSE_OUT=3,ON_DRAG_START=4,ON_DRAG_END=5,TYPES_OF_BALL=4,TYPES_OF_EXPLOSION=4,COLORS_OF_BALLS=3,TOT_LEVELS=10,TIME_RESTART=4,MAX_FORCE_UP_RATE=700,MAX_ROPE=2,MAX_BALL_INSTANCE=20,FORCE_RATE_BALL=[],BALLS_LEVEL=[],BRICKS_LEVEL=[],i=0;i<TOT_LEVELS;i++)BALLS_LEVEL[i]=
[],BRICKS_LEVEL[i]=[];BALLS_LEVEL[0][0]={x:CANVAS_WIDTH/2-200,y:CANVAS_HEIGHT/2-100,type:3,XDir:1,color:0};BALLS_LEVEL[1][0]={x:CANVAS_WIDTH/2-200,y:CANVAS_HEIGHT/2-100,type:3,XDir:1,color:0};BALLS_LEVEL[1][0]={x:CANVAS_WIDTH/2+200,y:CANVAS_HEIGHT/2-130,type:3,XDir:1,color:0};BRICKS_LEVEL[1][0]={x:CANVAS_WIDTH/2-200,y:CANVAS_HEIGHT/2};BALLS_LEVEL[2][0]={x:CANVAS_WIDTH/2-300,y:CANVAS_HEIGHT/2-100,type:1,XDir:1,color:0};BALLS_LEVEL[2][1]={x:CANVAS_WIDTH/2+100,y:CANVAS_HEIGHT/2-130,type:3,XDir:-1,color:1};
BALLS_LEVEL[2][2]={x:CANVAS_WIDTH/2+300,y:CANVAS_HEIGHT/2-150,type:2,XDir:1,color:0};BALLS_LEVEL[3][0]={x:CANVAS_WIDTH/2-300,y:CANVAS_HEIGHT/2-60,type:1,XDir:1,color:1};BALLS_LEVEL[3][1]={x:CANVAS_WIDTH/2+100,y:CANVAS_HEIGHT/2-130,type:3,XDir:-1,color:1};BRICKS_LEVEL[3][0]={x:CANVAS_WIDTH/2,y:CANVAS_HEIGHT/2-50};BALLS_LEVEL[4][0]={x:CANVAS_WIDTH/2-300,y:CANVAS_HEIGHT/2-130,type:3,XDir:1,color:2};BALLS_LEVEL[4][1]={x:CANVAS_WIDTH/2+300,y:CANVAS_HEIGHT/2-130,type:3,XDir:-1,color:0};
BRICKS_LEVEL[4][0]={x:CANVAS_WIDTH/2+200,y:CANVAS_HEIGHT/2+50};BRICKS_LEVEL[4][1]={x:CANVAS_WIDTH/2-200,y:CANVAS_HEIGHT/2+50};BALLS_LEVEL[5][0]={x:CANVAS_WIDTH/2-300,y:CANVAS_HEIGHT/2+20,type:2,XDir:-1,color:1};BALLS_LEVEL[5][1]={x:CANVAS_WIDTH/2+300,y:CANVAS_HEIGHT/2-130,type:3,XDir:1,color:0};BALLS_LEVEL[5][2]={x:CANVAS_WIDTH/2+100,y:CANVAS_HEIGHT/2-20,type:2,XDir:1,color:1};BRICKS_LEVEL[5][0]={x:CANVAS_WIDTH/2+200,y:CANVAS_HEIGHT/2+70};
BALLS_LEVEL[6][0]={x:CANVAS_WIDTH/2-300,y:CANVAS_HEIGHT/2+130,type:1,XDir:-1,color:1};BALLS_LEVEL[6][1]={x:CANVAS_WIDTH/2+300,y:CANVAS_HEIGHT/2-130,type:2,XDir:-1,color:1};BALLS_LEVEL[6][2]={x:CANVAS_WIDTH/2-250,y:CANVAS_HEIGHT/2-130,type:2,XDir:-1,color:2};BALLS_LEVEL[6][3]={x:CANVAS_WIDTH/2+250,y:CANVAS_HEIGHT/2+130,type:1,XDir:-1,color:2};BRICKS_LEVEL[6][0]={x:CANVAS_WIDTH/2+250,y:CANVAS_HEIGHT/2+90};BRICKS_LEVEL[6][1]={x:CANVAS_WIDTH/2-250,y:CANVAS_HEIGHT/2+90};
BALLS_LEVEL[7][0]={x:CANVAS_WIDTH/2-300,y:CANVAS_HEIGHT/2+130,type:3,XDir:1,color:2};BALLS_LEVEL[7][1]={x:CANVAS_WIDTH/2+300,y:CANVAS_HEIGHT/2-130,type:3,XDir:-1,color:2};BALLS_LEVEL[7][2]={x:CANVAS_WIDTH/2,y:CANVAS_HEIGHT/2-130,type:3,XDir:1,color:2};BRICKS_LEVEL[7][0]={x:CANVAS_WIDTH/2,y:CANVAS_HEIGHT/2-50};BRICKS_LEVEL[7][1]={x:CANVAS_WIDTH/2,y:CANVAS_HEIGHT/2+77};BALLS_LEVEL[8][0]={x:CANVAS_WIDTH/2+250,y:CANVAS_HEIGHT/2-45,type:3,XDir:-1,color:0};
BALLS_LEVEL[8][1]={x:CANVAS_WIDTH/2,y:CANVAS_HEIGHT/2-100,type:2,XDir:-1,color:1};BALLS_LEVEL[8][2]={x:CANVAS_WIDTH/2-250,y:CANVAS_HEIGHT/2-45,type:3,XDir:1,color:2};BRICKS_LEVEL[8][0]={x:CANVAS_WIDTH/2+200,y:CANVAS_HEIGHT/2+10};BRICKS_LEVEL[8][1]={x:CANVAS_WIDTH/2,y:CANVAS_HEIGHT/2-40};BRICKS_LEVEL[8][2]={x:CANVAS_WIDTH/2-200,y:CANVAS_HEIGHT/2+10};BALLS_LEVEL[9][0]={x:CANVAS_WIDTH/2+240,y:CANVAS_HEIGHT/2-120,type:1,XDir:-1,color:0};
BALLS_LEVEL[9][1]={x:CANVAS_WIDTH/2+140,y:CANVAS_HEIGHT/2-110,type:1,XDir:-1,color:0};BALLS_LEVEL[9][2]={x:CANVAS_WIDTH/2,y:CANVAS_HEIGHT/2-110,type:1,XDir:-1,color:1};BALLS_LEVEL[9][3]={x:CANVAS_WIDTH/2-140,y:CANVAS_HEIGHT/2-110,type:1,XDir:-1,color:2};BALLS_LEVEL[9][4]={x:CANVAS_WIDTH/2-240,y:CANVAS_HEIGHT/2-120,type:1,XDir:1,color:2};BALLS_LEVEL[9][5]={x:CANVAS_WIDTH/2-250,y:CANVAS_HEIGHT/2+10,type:3,XDir:-1,color:0};BALLS_LEVEL[9][0]={x:CANVAS_WIDTH/2+250,y:CANVAS_HEIGHT/2,type:3,XDir:1,color:0};
BRICKS_LEVEL[9][0]={x:CANVAS_WIDTH/2+222,y:CANVAS_HEIGHT/2-80};BRICKS_LEVEL[9][1]={x:CANVAS_WIDTH/2,y:CANVAS_HEIGHT/2-80};BRICKS_LEVEL[9][2]={x:CANVAS_WIDTH/2-222,y:CANVAS_HEIGHT/2-80};BRICKS_LEVEL[9][3]={x:CANVAS_WIDTH/2+390,y:CANVAS_HEIGHT/2+110};BRICKS_LEVEL[9][4]={x:CANVAS_WIDTH/2-390,y:CANVAS_HEIGHT/2+100};FORCE_RATE_BALL=[.7,.8,.9,1];var ENABLE_FULLSCREEN,ENABLE_CHECK_ORIENTATION,SOUNDTRACK_VOLUME_IN_GAME=.2;TEXT_SCORE="SCORE";TEXT_GAMEOVER="GAME OVER";TEXT_LEVEL="Level";TEXT_COMPLETE="Complete";
TEXT_CONGRATULATIONS="all levels completed... Congratulations!";TEXT_TOTAL_SCORE="Total score";TEXT_TIME_IS_UP="Time Is Up";TEXT_HELP_PAGE_1="Hit all the balls, but be careful! From each sphere two smaller will come out!";TEXT_HELP_PAGE_2_MOBILE="The left side of the screen is your joystick, touch it to move the hero. Tap the right one to shoot.";TEXT_HELP_PAGE_2_PC="USE ARROW KEY TO MOVE THE CHARACTER, SHOOT PRESSING SPACEBAR";TEXT_HELP_PAGE_3_PART1="FOR EVERY";TEXT_HELP_PAGE_3_PART2="POINTS SCORED, YOU'LL GET AN EXTRA LIFE";
TEXT_EXTRA_LIFE="EXTRA LIFE";TEXT_ADDED="ADDED";TEXT_DEVELOPED_BY="DEVELOPED BY";TEXT_SHARE_IMAGE="200x200.jpg";TEXT_SHARE_TITLE="Congratulations!";TEXT_SHARE_MSG1="You collected <strong>";TEXT_SHARE_MSG2=" points</strong>!<br><br>Share your score with your friends!";TEXT_SHARE_SHARE1="My score is ";TEXT_SHARE_SHARE2=" points! Can you do better";
function CPreloader(){var a,e,b,d,c,f,h,g,k;this._init=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this);s_oSpriteLibrary.addSprite("progress_bar","./sprites/progress_bar.png");s_oSpriteLibrary.addSprite("200x200","./sprites/200x200.jpg");s_oSpriteLibrary.loadSprites();k=new createjs.Container;s_oStage.addChild(k)};this.unload=function(){k.removeAllChildren()};this._onImagesLoaded=function(){};this._onAllImagesLoaded=function(){this.attachSprites();s_oMain.preloaderReady()};
this.attachSprites=function(){var m=new createjs.Shape;m.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);k.addChild(m);m=s_oSpriteLibrary.getSprite("200x200");h=createBitmap(m);h.regX=.5*m.width;h.regY=.5*m.height;h.x=CANVAS_WIDTH/2;h.y=CANVAS_HEIGHT/2-80;k.addChild(h);g=new createjs.Shape;g.graphics.beginFill("rgba(0,0,0,0.01)").drawRoundRect(h.x-100,h.y-100,200,200,10);k.addChild(g);h.mask=g;m=s_oSpriteLibrary.getSprite("progress_bar");d=createBitmap(m);d.x=CANVAS_WIDTH/2-m.width/
2;d.y=CANVAS_HEIGHT/2+70;k.addChild(d);a=m.width;e=m.height;c=new createjs.Shape;c.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(d.x,d.y,1,e);k.addChild(c);d.mask=c;b=new createjs.Text("","30px "+PRIMARY_FONT,"#fff");b.x=CANVAS_WIDTH/2;b.y=CANVAS_HEIGHT/2+120;b.textBaseline="alphabetic";b.textAlign="center";k.addChild(b);f=new createjs.Shape;f.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);k.addChild(f);createjs.Tween.get(f).to({alpha:0},500).call(function(){createjs.Tween.removeTweens(f);
k.removeChild(f)})};this.refreshLoader=function(m){b.text=m+"%";100===m&&(s_oMain._allResourcesLoaded(),b.visible=!1,d.visible=!1);c.graphics.clear();m=Math.floor(m*a/100);c.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(d.x,d.y,m,e)};this._init()}
function CMain(a){var e,b=0,d=0,c=STATE_LOADING,f,h;this.initContainer=function(){s_oCanvas=document.getElementById("canvas");s_oStage=new createjs.Stage(s_oCanvas);s_oStage.preventSelection=!1;createjs.Touch.enable(s_oStage);s_bMobile=isMobile();!1===s_bMobile&&s_oStage.enableMouseOver(20);s_iPrevTime=(new Date).getTime();createjs.Ticker.addEventListener("tick",this._update);createjs.Ticker.framerate=30;navigator.userAgent.match(/Windows Phone/i)&&(DISABLE_SOUND_MOBILE=!0);s_oSpriteLibrary=new CSpriteLibrary;
f=new CPreloader};this.preloaderReady=function(){this._loadImages();!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||this._initSounds();e=!0};this.soundLoaded=function(){b++;f.refreshLoader(Math.floor(b/d*100))};this._allResourcesLoaded=function(){f.unload();s_oSoundTrack=playSound("soundtrack",1,!0);s_oMain.gotoMenu()};this._initSounds=function(){Howler.mute(!s_bAudioActive);s_aSoundsInfo=[];s_aSoundsInfo.push({path:"./sounds/",filename:"game_completed",loop:!1,volume:1,ingamename:"game_completed"});s_aSoundsInfo.push({path:"./sounds/",
filename:"click",loop:!1,volume:1,ingamename:"click"});s_aSoundsInfo.push({path:"./sounds/",filename:"ball_explosion",loop:!0,volume:1,ingamename:"ball_explosion"});s_aSoundsInfo.push({path:"./sounds/",filename:"game_over",loop:!1,volume:1,ingamename:"game_over"});s_aSoundsInfo.push({path:"./sounds/",filename:"dead",loop:!1,volume:1,ingamename:"dead"});s_aSoundsInfo.push({path:"./sounds/",filename:"rope_hoocked",loop:!1,volume:1,ingamename:"rope_hoocked"});s_aSoundsInfo.push({path:"./sounds/",filename:"rope_launch",
loop:!1,volume:1,ingamename:"rope_launch"});s_aSoundsInfo.push({path:"./sounds/",filename:"boing",loop:!1,volume:1,ingamename:"boing"});s_aSoundsInfo.push({path:"./sounds/",filename:"soundtrack",loop:!0,volume:1,ingamename:"soundtrack"});d+=s_aSoundsInfo.length;s_aSounds=[];for(var k=0;k<s_aSoundsInfo.length;k++)this.tryToLoadSound(s_aSoundsInfo[k],!1)};this.tryToLoadSound=function(k,m){setTimeout(function(){s_aSounds[k.ingamename]=new Howl({src:[k.path+k.filename+".mp3"],autoplay:!1,preload:!0,loop:k.loop,
volume:k.volume,onload:s_oMain.soundLoaded,onloaderror:function(q,u){for(var r=0;r<s_aSoundsInfo.length;r++)if(q===s_aSounds[s_aSoundsInfo[r].ingamename]._sounds[0]._id){s_oMain.tryToLoadSound(s_aSoundsInfo[r],!0);break}},onplayerror:function(q){for(var u=0;u<s_aSoundsInfo.length;u++)if(q===s_aSounds[s_aSoundsInfo[u].ingamename]._sounds[0]._id){s_aSounds[s_aSoundsInfo[u].ingamename].once("unlock",function(){s_aSounds[s_aSoundsInfo[u].ingamename].play();"soundtrack"===s_aSoundsInfo[u].ingamename&&
null!==s_oGame&&setVolume("soundtrack",SOUNDTRACK_VOLUME_IN_GAME)});break}}})},m?200:0)};this._loadImages=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this);s_oSpriteLibrary.addSprite("bg_menu","./sprites/bg_menu.jpg");s_oSpriteLibrary.addSprite("bg_game","./sprites/bg_game.jpg");s_oSpriteLibrary.addSprite("frame","./sprites/frame.png");s_oSpriteLibrary.addSprite("rays","./sprites/rays.jpg");s_oSpriteLibrary.addSprite("title","./sprites/title.png");s_oSpriteLibrary.addSprite("character",
"./sprites/character.png");s_oSpriteLibrary.addSprite("sleep","./sprites/sleep.png");s_oSpriteLibrary.addSprite("snot","./sprites/snot.png");s_oSpriteLibrary.addSprite("door","./sprites/door.png");s_oSpriteLibrary.addSprite("fan","./sprites/fan.png");s_oSpriteLibrary.addSprite("icon_audio","./sprites/icon_audio.png");s_oSpriteLibrary.addSprite("game_over_bg","./sprites/game_over_bg.png");s_oSpriteLibrary.addSprite("game_over_panel","./sprites/game_over_panel.png");s_oSpriteLibrary.addSprite("help_panel",
"./sprites/help_panel.png");s_oSpriteLibrary.addSprite("next_level","./sprites/next_level.png");s_oSpriteLibrary.addSprite("but_play","./sprites/but_play.png");s_oSpriteLibrary.addSprite("but_play_small","./sprites/but_play_small.png");s_oSpriteLibrary.addSprite("but_restart","./sprites/but_restart.png");s_oSpriteLibrary.addSprite("but_exit","./sprites/but_exit.png");s_oSpriteLibrary.addSprite("but_exit_big","./sprites/but_exit_big.png");s_oSpriteLibrary.addSprite("but_arrow","./sprites/but_arrow.png");
s_oSpriteLibrary.addSprite("panel_hearth","./sprites/panel_hearth.png");s_oSpriteLibrary.addSprite("panel_score","./sprites/panel_score.png");s_oSpriteLibrary.addSprite("panel_time","./sprites/panel_time.png");s_oSpriteLibrary.addSprite("platform","./sprites/platform.jpg");s_oSpriteLibrary.addSprite("rope","./sprites/rope.png");s_oSpriteLibrary.addSprite("but_fullscreen","./sprites/but_fullscreen.png");s_oSpriteLibrary.addSprite("but_credits","./sprites/but_credits.png");s_oSpriteLibrary.addSprite("logo_credits",
"./sprites/logo_credits.png");s_oSpriteLibrary.addSprite("credits_panel","./sprites/credits_panel.png");s_oSpriteLibrary.addSprite("joypad","./sprites/joypad.png");for(var k=0;k<COLORS_OF_BALLS;k++)for(var m=0;m<TYPES_OF_BALL;m++)s_oSpriteLibrary.addSprite("ball"+k+"_"+m,"./sprites/ball"+k+"_"+m+".png");for(k=0;k<COLORS_OF_BALLS;k++)for(m=0;m<TYPES_OF_EXPLOSION;m++)s_oSpriteLibrary.addSprite("explosion"+k+"_"+m,"./sprites/explosion"+k+"_"+m+".png");d+=s_oSpriteLibrary.getNumSprites();s_oSpriteLibrary.loadSprites()};
this._onImagesLoaded=function(){b++;f.refreshLoader(Math.floor(b/d*100))};this._onAllImagesLoaded=function(){};this.gotoMenu=function(){new CMenu;c=STATE_MENU};this.gotoGame=function(){h=new CGame(g);c=STATE_GAME;$(s_oMain).trigger("game_start")};this.stopUpdate=function(){e=!1;createjs.Ticker.paused=!0;$("#block_game").css("display","block");!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||Howler.mute(!0)};this.startUpdate=function(){s_iPrevTime=(new Date).getTime();e=!0;createjs.Ticker.paused=!1;$("#block_game").css("display",
"none");(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)&&s_bAudioActive&&Howler.mute(!1)};this._update=function(k){if(!1!==e){var m=(new Date).getTime();s_iTimeElaps=m-s_iPrevTime;s_iCntTime+=s_iTimeElaps;s_iCntFps++;s_iPrevTime=m;1E3<=s_iCntTime&&(s_iCurFps=s_iCntFps,s_iCntTime-=1E3,s_iCntFps=0);c===STATE_GAME&&h.update();s_oStage.update(k)}};s_oMain=this;var g=a;ENABLE_FULLSCREEN=a.fullscreen;ENABLE_CHECK_ORIENTATION=a.check_orientation;s_bAudioActive=a.audio_enable_on_startup;this.initContainer()}
var s_bMobile,s_bAudioActive=!0,s_bFullscreen=!1,s_iCntTime=0,s_iTimeElaps=0,s_iPrevTime=0,s_iCntFps=0,s_iCurFps=0,s_oDrawLayer,s_oStage,s_oMain,s_oSpriteLibrary,s_oSoundTrack=null,s_aSounds,s_oCanvas,s_aSoundsInfo;
function CToggle(a,e,b,d,c){var f,h,g,k,m,q,u;this._init=function(r,w,C,D,A){m=void 0!==A?A:s_oStage;h=[];g=[];A=new createjs.SpriteSheet({images:[C],frames:{width:C.width/2,height:C.height,regX:C.width/2/2,regY:C.height/2},animations:{state_true:[0],state_false:[1]}});f=D;k=createSprite(A,"state_"+f,C.width/2/2,C.height/2,C.width/2,C.height);k.x=r;k.y=w;k.stop();s_bMobile||(k.cursor="pointer");m.addChild(k);this._initListener()};this.unload=function(){k.off("mousedown",q);k.off("pressup",u);m.removeChild(k)};
this._initListener=function(){q=k.on("mousedown",this.buttonDown);u=k.on("pressup",this.buttonRelease)};this.addEventListener=function(r,w,C){h[r]=w;g[r]=C};this.setCursorType=function(r){k.cursor=r};this.setActive=function(r){f=r;k.gotoAndStop("state_"+f)};this.buttonRelease=function(){k.scaleX=1;k.scaleY=1;playSound("click",1,!1);f=!f;k.gotoAndStop("state_"+f);h[ON_MOUSE_UP]&&h[ON_MOUSE_UP].call(g[ON_MOUSE_UP],f)};this.buttonDown=function(){k.scaleX=.9;k.scaleY=.9;h[ON_MOUSE_DOWN]&&h[ON_MOUSE_DOWN].call(g[ON_MOUSE_DOWN])};
this.setPosition=function(r,w){k.x=r;k.y=w};this._init(a,e,b,d,c)}
function CNumToggle(a,e,b,d){var c,f,h,g,k,m,q,u=[];this._init=function(r,w,C,D){f=!1;h=[];g=[];k=new createjs.Container;k.x=r;k.y=w;D.addChild(k);r=s_oSpriteLibrary.getSprite("num_button");w={images:[r],framerate:5,frames:{width:r.width/2,height:r.height,regX:r.width/2/2,regY:r.height/2},animations:{state_true:[0],state_false:[1]}};w=new createjs.SpriteSheet(w);c=!1;m=createSprite(w,"state_"+c,r.width/2/2,r.height/2,r.width/2,r.height);m.stop();r=s_oSpriteLibrary.getSprite("ball");w={images:[r],
frames:{width:r.width/NUM_DIFFERENT_BALLS,height:r.height,regX:r.width/NUM_DIFFERENT_BALLS/2,regY:r.height/2},animations:{red:[0],green:[1],cyan:[0],violet:[1],blue:[1]}};w=new createjs.SpriteSheet(w);q=createSprite(w,"red",r.width/NUM_DIFFERENT_BALLS/2,r.height/2,r.width/NUM_DIFFERENT_BALLS,r.height);q.gotoAndStop(0);q.visible=!1;k.addChild(m,q);this._initListener()};this.unload=function(){k.off("mousedown",this.buttonDown);k.off("pressup",this.buttonRelease);d.removeChild(k)};this._initListener=
function(){k.on("mousedown",this.buttonDown);k.on("pressup",this.buttonRelease)};this.addEventListener=function(r,w,C){h[r]=w;g[r]=C};this.addEventListenerWithParams=function(r,w,C,D){h[r]=w;g[r]=C;u=D};this.setActive=function(r){c=r;m.gotoAndStop("state_"+c)};this.buttonRelease=function(){f||(playSound("click",1,!1),c=!c,m.gotoAndStop("state_"+c),h[ON_MOUSE_UP]&&h[ON_MOUSE_UP].call(g[ON_MOUSE_UP],u))};this.buttonDown=function(){f||h[ON_MOUSE_DOWN]&&h[ON_MOUSE_DOWN].call(g[ON_MOUSE_DOWN],u)};this.setPosition=
function(r,w){k.x=r;k.y=w};this.getGlobalPosition=function(){return{x:k.localToGlobal(0,0).x,y:k.localToGlobal(0,0).y}};this.block=function(r){f=r};this.setExtracted=function(r,w){q.visible=r;q.gotoAndStop(w)};this.highlight=function(){m.gotoAndPlay(0)};this.stopHighlight=function(){m.gotoAndStop(1)};this._init(a,e,b,d)}
function CGfxButton(a,e,b){var d,c,f,h=[],g,k,m,q;this._init=function(u,r,w){d=1;c=[];f=[];g=createBitmap(w);g.x=u;g.y=r;g.regX=w.width/2;g.regY=w.height/2;s_bMobile||(g.cursor="pointer");s_oStage.addChild(g);k=!1;this._initListener()};this.unload=function(){g.off("mousedown",m);g.off("pressup",q);s_oStage.removeChild(g)};this.setVisible=function(u){g.visible=u};this._initListener=function(){m=g.on("mousedown",this.buttonDown);q=g.on("pressup",this.buttonRelease)};this.addEventListener=function(u,
r,w){c[u]=r;f[u]=w};this.addEventListenerWithParams=function(u,r,w,C){c[u]=r;f[u]=w;h=C};this.buttonRelease=function(){k||(g.scaleX=d,g.scaleY=d,playSound("click",1,!1),c[ON_MOUSE_UP]&&c[ON_MOUSE_UP].call(f[ON_MOUSE_UP],h))};this.buttonDown=function(){k||(g.scaleX=.9*d,g.scaleY=.9*d,c[ON_MOUSE_DOWN]&&c[ON_MOUSE_DOWN].call(f[ON_MOUSE_DOWN],h))};this.setScale=function(u){d=u;g.scaleX=u;g.scaleY=u};this.setPosition=function(u,r){g.x=u;g.y=r};this.setX=function(u){g.x=u};this.setY=function(u){g.y=u};
this.getButtonImage=function(){return g};this.getX=function(){return g.x};this.getY=function(){return g.y};this.block=function(u){k=u};this._init(a,e,b);return this}
function CMenu(){var a,e,b,d,c,f,h,g,k,m,q,u,r,w,C=null,D=null;this._init=function(){h=createBitmap(s_oSpriteLibrary.getSprite("bg_menu"));s_oStage.addChild(h);var A=s_oSpriteLibrary.getSprite("but_play");k=new CGfxButton(CANVAS_WIDTH/2,CANVAS_HEIGHT/2+150,A);k.setScale(.8);k.addEventListener(ON_MOUSE_UP,this._onButPlayRelease,this);A=s_oSpriteLibrary.getSprite("title");g=createBitmap(A);g.x=CANVAS_WIDTH/2;g.y=CANVAS_HEIGHT/2-120;g.regX=A.width/2;g.regY=A.height/2;s_oStage.addChild(g);if(!1===DISABLE_SOUND_MOBILE||
!1===s_bMobile)A=s_oSpriteLibrary.getSprite("icon_audio"),c=CANVAS_WIDTH-A.height/2-10,f=A.height/2+10,q=new CToggle(c,f,A,s_bAudioActive,s_oStage),q.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this);A=s_oSpriteLibrary.getSprite("but_credits");a=A.width/2+10;e=A.height/2+10;r=new CGfxButton(a,e,A,s_oStage);r.addEventListener(ON_MOUSE_UP,this._onCredits,this);A=window.document;var P=A.documentElement;C=P.requestFullscreen||P.mozRequestFullScreen||P.webkitRequestFullScreen||P.msRequestFullscreen;
D=A.exitFullscreen||A.mozCancelFullScreen||A.webkitExitFullscreen||A.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(C=!1);C&&screenfull.isEnabled&&(A=s_oSpriteLibrary.getSprite("but_fullscreen"),b=a+A.width/2+10,d=A.height/2+10,w=new CToggle(b,d,A,s_bFullscreen,s_oStage),w.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this));this.createSleepChar(CANVAS_WIDTH/2+325,CANVAS_HEIGHT/2+100);m=new createjs.Shape;m.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);s_oStage.addChild(m);
createjs.Tween.get(m).to({alpha:0},1E3).call(function(){m.visible=!1});this.refreshButtonPos(s_iOffsetX,s_iOffsetY)};this.unload=function(){k.unload();k=null;m.visible=!1;s_oStage.removeChild(h,g,u);u=g=h=null;if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)q.unload(),q=null;C&&screenfull.isEnabled&&w.unload();s_oMenu=null};this.refreshButtonPos=function(A,P){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||q.setPosition(c-A,f+P);C&&screenfull.isEnabled&&w.setPosition(b+A,d+P);r.setPosition(a+A,P+e)};this._onAudioToggle=
function(){Howler.mute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this.createSleepChar=function(A,P){var p=s_oSpriteLibrary.getSprite("sleep");var I={images:[p],frames:{width:p.width/2,height:p.height,regX:p.width/2/2,regY:p.height/2},animations:{sleep:[0,1,"sleep",.05]}};I=new createjs.SpriteSheet(I);p=createSprite(I,"sleep",p.width/2/2,p.height/2,p.width/2,p.height);p.x=0;p.y=0;var H=s_oSpriteLibrary.getSprite("snot");I={images:[H],frames:{width:H.width/8,height:H.height/2,regX:H.width/2/8,
regY:H.height/2/2},animations:{normal:[0,14,"normal",.2]}};I=new createjs.SpriteSheet(I);I=createSprite(I,"normal",H.width/2/8,H.height/2/2,H.width/8,H.height/2);I.x=36;I.y=0;u=new createjs.Container;u.addChild(p,I);u.x=A;u.y=P;s_oStage.addChild(u)};this._onButPlayRelease=function(){this.unload();s_oSoundTrack=playSound("soundtrack",1,!0);$(s_oMain).trigger("start_session");s_oMain.gotoGame()};this.resetFullscreenBut=function(){C&&screenfull.isEnabled&&w.setActive(s_bFullscreen)};this._onFullscreenRelease=
function(){s_bFullscreen?D.call(window.document):C.call(window.document.documentElement);sizeHandler()};this._onCredits=function(){new CCreditsPanel};s_oMenu=this;this._init()}var s_oMenu=null;
function CGame(a){function e(l){!0===ia&&(32===l.keyCode&&y.length<MAX_ROPE&&s_oGame.shoot(),I||(37===l.keyCode?s_oGame.moveLeft():39===l.keyCode&&s_oGame.moveRight()));l.preventDefault();return!1}function b(l){I&&!0===ia&&(37===l.keyCode&&(I=!1,F=0,H=!1,!0===ia&&L.changeState("idle")),39===l.keyCode&&(I=!1,F=0,G=!1,!0===ia&&L.changeState("idle")),32===l.keyCode&&(!0===H?(F=-1,L.changeState("run")):!0===G?(F=1,L.changeState("run")):!1===H&&!1===G&&(I=!1)));l.preventDefault();return!1}var d,c,f,h,
g,k,m,q,u,r=0,w,C,D,A,P,p,I,H,G,F,L,y,ca,ja,da,aa,ka,ea,ha,ia,Y,V,n,W,S,U,J,x,N,T,v;this._init=function(){h=!1;w=CANVAS_WIDTH/2;C=CANVAS_HEIGHT/2;g=[];y=[];S=[];v=[];var l=s_oSpriteLibrary.getSprite("platform");q=l.width/2;u=l.height/2;p=1;P=A=D=f=0;W=CHARACTER_LIVES;T=0;ha=TIME_LEVEL[f];I=!1;N=TIME_RESTART;d=createBitmap(s_oSpriteLibrary.getSprite("bg_game"));s_oStage.addChild(d);s_oStage.setChildIndex(d,0);c=new CInterface(f+1);c.refreshLife(W);c.refreshTime(ha);c.refreshLevel(f);this.createLevel();
this.createLevelPlatform();$(s_oMain).trigger("start_level",f);x=!1;l=s_oSpriteLibrary.getSprite("character");k=(l.width-200)/2/6;m=(l.height-60)/2;L=new CCharacter(w,l,1);l=s_oSpriteLibrary.getSprite("rope");ja=l.width/2;ca=l.height;this.createDoor(w,C+50);F=0;!0===s_bMobile?this.createJoypad():(document.onkeydown=e,document.onkeyup=b);c.helpPage1(f)};this.createJoypad=function(){var l=s_oSpriteLibrary.getSprite("joypad");U=new CJoypad(l,100,700,s_oStage,!1);U.addFireButtonListener(ON_MOUSE_DOWN,
this.shootMobile,this);this.blockJoypad(!0);J=Math.PI/8};this.instanceBall=function(l){for(var t=0;t<MAX_BALL_INSTANCE;t++){var E=s_oSpriteLibrary.getSprite("ball"+l+"_3");v.push(new CBall(-50+-50*l,-50+-50*t,E,0,p,3,l,!1))}};this.createLevel=function(){for(var l=BALLS_LEVEL[f],t=!1,E=!1,O=!1,Q=0;Q<l.length;Q++){var R=l[Q].color;0===R?t=!0:1===R?E=!0:2===R&&(O=!0)}!0===t&&this.instanceBall(0);!0===E&&this.instanceBall(1);!0===O&&this.instanceBall(2);for(Q=t=0;Q<l.length;Q++){E=l[Q].x;O=l[Q].y;var M=
l[Q].type,X=l[Q].XDir;R=l[Q].color;for(var z=0;z<v.length;z++)if(v[z].getInfoData("Color")===R&&!1===v[z].getActive()){g[t]=v[z];g[t].setPosition(E,O);g[t].changeDirection(X);g[t].changeType(M);g[t].setActive(!0);g[t].setInfoData("ID",t);t++;break}}this.setPause(!0);this.canInput(!1)};this.createLevelPlatform=function(){for(var l=BRICKS_LEVEL[f],t=s_oSpriteLibrary.getSprite("platform"),E=0;E<l.length;E++)this.createAPlatform(E,l[E].x,l[E].y,t)};this.createABall=function(l,t,E,O,Q,R,M){g.push(new CBall(t,
E,O,Q,p,R,M,!1));g[l].setInfoData("ID",l)};this.createAPlatform=function(l,t,E,O){S[l]=createBitmap(O);S[l].x=t;S[l].y=E;S[l].regY=O.height/2;S[l].regX=O.width/2;s_oStage.addChild(S[l]);s_oStage.setChildIndex(S[l],5)};this.createDoor=function(l,t){var E=s_oSpriteLibrary.getSprite("door");ea=new CDoor(l,t,E);ea.changeState("open",!1)};this.onExit=function(){s_oGame.unload();s_oMain.gotoMenu();$(s_oMain).trigger("end_level",f);$(s_oMain).trigger("end_session");$(s_oMain).trigger("show_interlevel_ad")};
this.unload=function(){c.unload();for(var l=0;l<g.length;l++)g[l].unload();for(l=0;l<y.length;l++)y[l].unload();!0===s_bMobile&&U&&(U.unload(),U=null);createjs.Tween.removeAllTweens();s_oStage.removeAllChildren()};this.blockJoypad=function(l){U&&U.block(l)};this.shoot=function(){F=0;L.changeState("shoot");s_oGame.createARope(y.length)};this.moveLeft=function(){H=I=!0;F=-1;L.changeState("run");L.rotate(-1)};this.moveRight=function(){G=I=!0;F=1;L.changeState("run");L.rotate(1)};this.createARope=function(l){var t=
s_oSpriteLibrary.getSprite("rope");y.push(new CRope(L.getX(),L.getY(),t,1));y[l].setInfoData("ID",l)};this.combo=function(l,t,E){var O,Q;if(!0===E&&0<n){l>CANVAS_WIDTH/2?(O=-50,Q=0):(O=50,Q=0);var R=new createjs.Text(COMBO_SCORE[n],"bold 40px "+PRIMARY_FONT,"#ffffff");R.textAlign="left";R.textBaseline="alphabetic";R.x=O;R.y=Q;var M=new createjs.Text(COMBO_SCORE[n],"bold 40px "+PRIMARY_FONT,"#000000");M.textAlign="left";M.textBaseline="alphabetic";M.x=O;M.y=Q;M.outline=.2;var X=new createjs.Container;
X.addChild(R,M);X.scaleX=0;X.scaleY=0;X.x=l;X.y=t;s_oStage.addChild(X);createjs.Tween.get(X).to({scaleX:1,scaleY:1},500,createjs.Ease.backOut).call(function(){createjs.Tween.get(X).to({scaleX:0,scaleY:0},500,createjs.Ease.backIn).call(function(){s_oStage.removeChild(X)})});this.addScore(COMBO_SCORE[n])}else n=0;4>n&&!0===E&&n++};this.__updatePhysics=function(l){I&&L.update(F);if(0===y.length)da=aa=-1;else for(var t=0;t<y.length;t++)y[t].update();for(var E=0;E<g.length;E++)if(!0===g[E].getActive()){var O=
g[E].getX(),Q=g[E].getY(),R=g[E].getInfoData("Radius");g[E].update(l);for(var M=0;M<S.length;M++){var X=S[M].x,z=S[M].y;O>X-q-R&&O<X+q+R&&Q>z-u-R&&Q<z+u+R&&(Q>z?g[E].bounceDown():g[E].bounceUp())}if(0!==y.length)for(t=0;t<y.length;t++){da=y[t].getX();aa=y[t].getY();ka=t;for(M=0;M<S.length;M++)X=S[M].x,z=S[M].y,da>X-q&&da<X+q&&aa>z-u&&aa<z+u&&y[ka].aggance(!0);if(O>da-ja-R&&O<da+ja+R&&Q>aa-R&&Q<aa+ca+R){this.addScore(g[E].getInfoData("Score"));g[E].addExplosion();switch(g[E].getInfoData("Type")){case 0:this.unloadBall(E);
break;case 1:g[E].changeType(0);g[E].changeDirection(-1);g[E].resetSpeed();for(M=0;M<v.length;M++)if(v[M].getInfoData("Color")===g[E].getInfoData("Color")&&!1===v[M].getActive()){this.activeABallChached(0,M,O,Q);break}break;case 2:g[E].changeType(1);g[E].changeDirection(-1);g[E].resetSpeed();for(M=0;M<v.length;M++)if(v[M].getInfoData("Color")===g[E].getInfoData("Color")&&!1===v[M].getActive()){this.activeABallChached(1,M,O,Q);break}break;case 3:for(g[E].changeType(2),g[E].changeDirection(-1),g[E].resetSpeed(),
M=0;M<v.length;M++)if(v[M].getInfoData("Color")===g[E].getInfoData("Color")&&!1===v[M].getActive()){this.activeABallChached(2,M,O,Q);break}}y[ka].setInfoData("Unloaded",!1);this.unloadRope(ka);this.combo(O,Q,!0);this.ballFinished();break}}t=L.getX();M=L.getY();O>t-k-R&&O<t+k+R&&Q>M-m-R&&Q<M+m+R&&(g[E].addExplosion(),g[E].setActive(!1),g[E].setPosition(-100,-100),this.setPause(!0),this.canInput(!1),!0===s_bMobile&&(this.blockJoypad(!0),U.resetJoy()),L.changeState("death"),D=A,c.refreshScore(D),x=!0,
playSound("dead",1,!1))}A>D&&(D+=5,c.refreshScore(D))};this.activeABallChached=function(l,t,E,O){v[t].changeType(l);v[t].changeDirection(1);v[t].setPosition(E,O);v[t].setActive(!0);g.push(v[t])};this.restartLevelFromGameOver=function(){W=CHARACTER_LIVES+1;A=D=0;c.refreshScore(D);$(s_oMain).trigger("restart_level",f);this.restartLevel()};this.restartLevel=function(){if(0<W){s_oGame.addLife(-1);for(var l=0,t=0;t<g.length;t++)g[t].unload(),l++;g.splice(0,l);for(t=l=0;t<y.length;t++)y[t].unload(),l++;
y.splice(0,l);for(t=l=0;t<v.length;t++)v[t].unload(),l++;v.splice(0,l);createjs.Tween.removeAllTweens();c.showLevelNum(f);L.changeState("idle");L.setPosition(w,null);F=n=0;this.resetTime();this.createLevel()}else D=A,c.refreshScore(D),c.gameOver(D)};this.resetTime=function(){ha=TIME_LEVEL[f];c.refreshTime(ha)};this.addLife=function(l){var t=new createjs.Container;t.scaleX=0;t.scaleY=0;t.x=CANVAS_WIDTH/2;t.y=CANVAS_HEIGHT/2;s_oStage.addChild(t);var E=new CTLText(t,-120,-100,240,120,60,"center","#fff",
PRIMARY_FONT,1,0,0,TEXT_EXTRA_LIFE,!0,!0,!0,!1),O=new CTLText(t,-120,-100,240,120,60,"center","#000",PRIMARY_FONT,1,0,0,TEXT_EXTRA_LIFE,!0,!0,!0,!1);O.setOutline(1);null!==l?(W+=l,c.refreshLife(W)):(E.refreshText(TEXT_ADDED+" "+EXTRA_POINT+" "+TEXT_SCORE),O.refreshText(TEXT_ADDED+" "+EXTRA_POINT+" "+TEXT_SCORE));createjs.Tween.get(t).to({scaleX:1,scaleY:1},1E3,createjs.Ease.elasticOut).call(function(){createjs.Tween.get(t).wait(300).to({scaleX:0,scaleY:0},1E3,createjs.Ease.elasticIn).call(function(){s_oStage.removeChild(t)})})};
this.canInput=function(l){ia=l};this.ballFinished=function(){if(0===g.length){this.setPause(!0);this.canInput(!1);I=!1;F=0;!0===s_bMobile&&(U.unload(),this.blockJoypad(!0),U.resetJoy(),U=null);ea.openDoorAndRemain();var l=s_oSpriteLibrary.getSprite("rays"),t=new createjs.SpriteSheet({images:[l],frames:{width:l.width/3,height:l.height,regX:l.width/2/3,regY:l.height/2},animations:{cast:[0,2,"cast",.4]}});Y=createSprite(t,"cast",l.width/2/2,l.height/2,l.width/3,l.height);Y.x=CANVAS_WIDTH/2;Y.y=CANVAS_HEIGHT/
2+53;s_oStage.addChild(Y);s_oStage.setChildIndex(Y,2);ea.childIndex(4);T++;T===NUM_LEVELS_FOR_ADS&&(T=0,$(s_oMain).trigger("show_interlevel_ad"));f+1<BALLS_LEVEL.length?(this.createButNextLevel(),c.animContrast(0)):(D=A,c.finishGame(D));$(s_oMain).trigger("end_level",f);L.changeState("idle");D=A;c.refreshScore(D);if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile){var E=playSound("game_completed",1,!1);setVolume("soundtrack",SOUNDTRACK_VOLUME_IN_GAME);E.on("end",function(){setVolume("soundtrack",1);E=null})}}};
this.createButNextLevel=function(){var l=s_oSpriteLibrary.getSprite("next_level"),t=new createjs.SpriteSheet({images:[l],frames:{width:l.width/2,height:l.height,regX:l.width/2/2,regY:l.height},animations:{blink:[0,1,"blink",.3]}});V=createSprite(t,"blink",l.width/2/2,l.height,l.width/2,l.height);V.x=CANVAS_WIDTH/2;V.y=CANVAS_HEIGHT/2+115;V.cursor="pointer";V.on("mousedown",this.nextLevel);s_oStage.addChild(V);s_oStage.setChildIndex(V,s_oStage.numChildren-1)};this.nextLevel=function(){s_oGame.resetLevel();
f++;c.refreshLevel(f);s_oGame.resetTime(TIME_LEVEL[f]);!0===s_bMobile&&(s_oGame.createJoypad(),s_oGame.blockJoypad(!0));L.setPosition(w,null);s_oGame.createLevel();s_oGame.createLevelPlatform();c.showLevelNum(f);$(s_oMain).trigger("start_level",f)};this.setPause=function(l){h=l};this.addScore=function(l){A+=l;this.extraLife(l)};this.extraLife=function(l){P<EXTRA_LIFE?P+=l:(P=0,9>W?this.addLife(1):(this.addLife(null),this.addScore(EXTRA_POINT)))};this.unloadBall=function(l){g[l].unload();g.splice(l,
1);for(l=0;l<g.length;l++)g[l].resetTheIndex(l);var t=0;for(l=0;l<v.length;l++)if(void 0===v){t=l;break}v.splice(t,1)};this.unloadRope=function(l){y[l].unload();y.splice(l,1);for(l=0;l<y.length;l++)y[l].resetTheIndex(l)};this.resetLevel=function(){s_oStage.removeChild(Y,V);V=Y=null;for(var l=0;l<y.length;l++)y[l].unload();var t=0;for(l=0;l<S.length;l++)s_oStage.removeChild(S[l]),t++;S.splice(0,t);for(l=t=0;l<v.length;l++)v[l].unload(),t++;v.splice(0,t);ea.changeState("open",!1)};this.shootMobile=
function(){y.length<MAX_ROPE&&(F=0,L.changeState("shoot"),s_oGame.createARope(y.length),I=!1)};this.checkController=function(l){null===l?0!==F&&(F=0,L.changeState("idle"),I=!1):l>=-J&&l<J?1!==F&&(F=1,L.changeState("run"),L.rotate(1),I=!0):l>=7*J||l<7*-J?-1!==F&&(I=!0,F=-1,L.changeState("run"),L.rotate(-1)):l>=7*-J&&l<5*-J?-1!==F&&(I=!0,F=-1,L.changeState("run"),L.rotate(-1)):l>=3*-J&&l<-J?1!==F&&(F=1,L.changeState("run"),L.rotate(1),I=!0):l>=J&&l<3*J?1!==F&&(F=1,L.changeState("run"),L.rotate(1),I=
!0):l>=5*J&&l<7*J&&-1!==F&&(I=!0,F=-1,L.changeState("run"),L.rotate(-1))};this.update=function(){if(!1===h){U&&this.checkController(U.update());r+=s_iTimeElaps;var l=parseInt(r/fa);r-=fa*l;for(var t=0;t<l;t++)for(var E=0;E<K;E++)this.__updatePhysics();1<ha?(ha-=1/createjs.Ticker.framerate,c.refreshTime(Math.floor(ha)),10<ha?c.colorTime("#fff"):c.colorTime("#f00")):(this.setPause(!0),c.showTimeIsUp(),this.canInput(!1),L.changeState("idle"))}!0===x&&(N-=1/createjs.Ticker.framerate,0>=N&&(s_oGame.restartLevel(),
N=TIME_RESTART,x=!1))};s_oGame=this;var fa=16,K=10;BALL_SPEED=a.ball_speed/K;BALL_DOWN_ACCELLERATION=a.ball_down_accelleration/K;BALL_SCORE=a.ball_score;CHARACTER_SPEED=a.character_speed/K;ROPE_SPEED=a.speed_rope/K;TIME_ROPE=a.time_rope;TIME_LEVEL=a.time_level;COMBO_SCORE=a.combo_score;CHARACTER_LIVES=a.character_lives;EXTRA_LIFE=a.extra_life_at_point;EXTRA_POINT=a.extra_point;NUM_LEVELS_FOR_ADS=a.num_levels_for_ads;this._init()}var s_oGame;
function CInterface(a){var e,b,d,c,f,h,g,k,m,q,u,r,w,C,D,A,P,p,I,H,G,F,L,y,ca,ja,da,aa,ka,ea,ha,ia,Y,V,n,W,S,U,J,x,N,T,v,fa,K,l,t,E,O,Q,R,M=null,X=null;this._init=function(z){U=createBitmap(s_oSpriteLibrary.getSprite("frame"));s_oStage.addChild(U);s_oStage.setChildIndex(U,s_oStage.numChildren-1);var B=s_oSpriteLibrary.getSprite("but_exit");u=CANVAS_WIDTH-(B.width/2+20);r=B.height/2+10;C=new CGfxButton(u,r,B);C.addEventListener(ON_MOUSE_UP,this._onExit,this);!1===DISABLE_SOUND_MOBILE||!1===s_bMobile?
(B=s_oSpriteLibrary.getSprite("icon_audio"),m=u-B.width/2-10,q=B.height/2+10,w=new CToggle(m,q,B,s_bAudioActive,s_oStage),w.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this),e=m-B.width/2-10,b=q):(B=s_oSpriteLibrary.getSprite("but_fullscreen"),e=u-B.width/2-10,b=B.height/2+10);B=window.document;var Z=B.documentElement;M=Z.requestFullscreen||Z.mozRequestFullScreen||Z.webkitRequestFullScreen||Z.msRequestFullscreen;X=B.exitFullscreen||B.mozCancelFullScreen||B.webkitExitFullscreen||B.msExitFullscreen;
!1===ENABLE_FULLSCREEN&&(M=!1);M&&screenfull.isEnabled&&(B=s_oSpriteLibrary.getSprite("but_fullscreen"),R=new CToggle(e,b,B,s_bFullscreen,s_oStage),R.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this));B=s_oSpriteLibrary.getSprite("fan");Z=new createjs.SpriteSheet({images:[B],frames:{width:B.width/3,height:B.height,regX:B.width/2/3,regY:B.height/2},animations:{move:[0,2,"move",.5]}});V=createSprite(Z,"move",B.width/2/2,B.height/2,B.width/3,B.height);V.x=CANVAS_WIDTH/2;V.y=CANVAS_HEIGHT/
2-45;s_oStage.addChild(V);s_oStage.setChildIndex(V,1);v=new createjs.Container;N=new createjs.Text("0"+z,"bold 72px "+PRIMARY_FONT,"#02724e");N.textAlign="center";N.textBaseline="alphabetic";N.x=-220;N.y=70;T=new createjs.Text("0"+z,"bold 72px "+PRIMARY_FONT,"#02724e");T.textAlign="center";T.textBaseline="alphabetic";T.x=220;T.y=70;v.addChild(N,T);v.x=CANVAS_WIDTH/2;v.y=CANVAS_HEIGHT/2;s_oStage.addChild(v);s_oStage.setChildIndex(v,1);B=s_oSpriteLibrary.getSprite("panel_score");z=createBitmap(B);z.regX=
B.width/2;z.regY=B.height/2;P=new createjs.Text("0","bold 40px "+PRIMARY_FONT,"#ffffff");P.textAlign="left";P.textBaseline="alphabetic";P.x=-80;P.y=13;p=new createjs.Text("0","bold 40px "+PRIMARY_FONT,"#000000");p.textAlign="left";p.textBaseline="alphabetic";p.x=-80;p.y=13;p.outline=.2;n=new createjs.Container;n.addChild(z,P,p);g=CANVAS_WIDTH/2-300;k=CANVAS_HEIGHT/2-230;n.x=g;n.y=k;s_oStage.addChild(n);B=s_oSpriteLibrary.getSprite("panel_hearth");z=createBitmap(B);z.regX=B.width/2;z.regY=B.height/
2;I=new createjs.Text("X3","bold 36px "+PRIMARY_FONT,"#ffffff");I.textAlign="left";I.textBaseline="alphabetic";I.x=0;I.y=13;H=new createjs.Text("X3","bold 36px "+PRIMARY_FONT,"#000000");H.textAlign="left";H.textBaseline="alphabetic";H.x=0;H.y=13;H.outline=.2;W=new createjs.Container;W.addChild(z,I,H);f=CANVAS_WIDTH/2-90;h=CANVAS_HEIGHT/2-230;W.x=f;W.y=h;s_oStage.addChild(W);B=s_oSpriteLibrary.getSprite("panel_time");z=createBitmap(B);z.regX=B.width/2;z.regY=B.height/2;G=new createjs.Text(TIME_LEVEL[0],
"bold 36px "+PRIMARY_FONT,"#ffffff");G.textAlign="left";G.textBaseline="alphabetic";G.x=-4;G.y=13;F=new createjs.Text(TIME_LEVEL[0],"bold 36px "+PRIMARY_FONT,"#000000");F.textAlign="left";F.textBaseline="alphabetic";F.x=-4;F.y=13;F.outline=.2;S=new createjs.Container;S.addChild(z,G,F);d=CANVAS_WIDTH/2+40;c=CANVAS_HEIGHT/2-230;S.x=CANVAS_WIDTH/2+80;S.y=CANVAS_HEIGHT/2-180;s_oStage.addChild(S);O=!1;this.createContrast();this.refreshButtonPos(s_iOffsetX,s_iOffsetY)};this.refreshButtonPos=function(z,
B){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||w.setPosition(m-z,q+B);M&&screenfull.isEnabled&&R.setPosition(e-z,b+B);C.setPosition(u-z,r+B);n.x=g+z;n.y=k+B;W.x=f+z;W.y=h+B;S.x=d+z;S.y=c+B};this.createContrast=function(){Q=new createjs.Shape;Q.graphics.beginFill("black").drawRect(80,85,800,370);Q.alpha=0;s_oStage.addChild(Q);s_oStage.setChildIndex(Q,3)};this.refreshLife=function(z){I.text="X"+z;H.text="X"+z};this.refreshLevel=function(z){z+=1;9<z?(N.text=z,T.text=z):(N.text="0"+z,T.text="0"+z)};this.showLevelNum=
function(z){z+=1;var B=new createjs.Container;B.scaleX=0;B.scaleY=0;B.x=CANVAS_WIDTH/2;B.y=CANVAS_HEIGHT/2;B.regX=100;B.regY=120;s_oStage.addChild(B);new CTLText(B,0,0,200,120,60,"center","#fff",PRIMARY_FONT,1,0,0,TEXT_LEVEL+" "+z,!0,!0,!0,!1);(new CTLText(B,0,0,200,120,60,"center","#000",PRIMARY_FONT,1,0,0,TEXT_LEVEL+" "+z,!0,!0,!0,!1)).setOutline(1);this.animContrast(.5);createjs.Tween.get(B).to({scaleX:1,scaleY:1},1E3,createjs.Ease.elasticOut).call(function(){createjs.Tween.get(B).wait(500).to({scaleX:0,
scaleY:0},1E3,createjs.Ease.elasticIn).call(function(){s_oStage.removeChild(B);s_oGame.canInput(!0);s_oGame.setPause(!1);!0===s_bMobile&&s_oGame.blockJoypad(!1)})})};this.showTimeIsUp=function(){x=new createjs.Container;x.scaleX=0;x.scaleY=0;x.x=CANVAS_WIDTH/2;x.y=CANVAS_HEIGHT/2;s_oStage.addChild(x);new CTLText(x,-100,0,200,120,60,"center","#fff",PRIMARY_FONT,1,0,0,TEXT_TIME_IS_UP,!0,!0,!0,!0);(new CTLText(x,-100,0,200,120,60,"center","#000",PRIMARY_FONT,1,0,0,TEXT_TIME_IS_UP,!0,!0,!0,!1)).setOutline(1);
createjs.Tween.get(x).to({scaleX:1,scaleY:1},1E3,createjs.Ease.elasticOut).call(function(){createjs.Tween.get(x).wait(500).to({scaleX:0,scaleY:0},1E3,createjs.Ease.elasticIn).call(function(){s_oStage.removeChild(x);s_oGame.restartLevel()})})};this.gameOver=function(z){s_oGame.setPause(!0);C.block(!0);var B=s_oSpriteLibrary.getSprite("game_over_bg");y=createBitmap(B);y.alpha=0;s_oStage.addChild(y);B=s_oSpriteLibrary.getSprite("game_over_panel");E=createBitmap(B);E.x=CANVAS_WIDTH/2;E.y=-B.height/2;
E.regX=B.width/2;E.regY=B.height/2;s_oStage.addChild(E);J=new createjs.Container;da=new CTLText(J,-100,40,200,40,40,"center","#fff",PRIMARY_FONT,1,0,0,TEXT_GAMEOVER,!0,!0,!0,!1);aa=new CTLText(J,-100,40,200,40,40,"center","#000",PRIMARY_FONT,1,0,0,TEXT_GAMEOVER,!0,!0,!0,!1);aa.setOutline(1);new CTLText(J,-100,90,200,80,40,"center","#fff",PRIMARY_FONT,1,0,0,z,!0,!0,!0,!1);ka=new CTLText(J,-100,90,200,80,40,"center","#000",PRIMARY_FONT,1,0,0,z,!0,!0,!0,!1);ka.setOutline(1);J.x=CANVAS_WIDTH/2;J.y=-200;
s_oStage.addChild(J);createjs.Tween.get(E).to({y:190},1E3,createjs.Ease.backOut);createjs.Tween.get(y).to({alpha:1},1E3,createjs.Ease.backOut).call(function(){createjs.Tween.get(J).to({y:CANVAS_HEIGHT/2-170},1E3,createjs.Ease.bounceOut).call(function(){var ba=s_oSpriteLibrary.getSprite("but_restart"),la=s_oSpriteLibrary.getSprite("but_exit_big");ca=new CGfxButton(CANVAS_WIDTH/2+100,CANVAS_HEIGHT/2+130,la);ca.addEventListener(ON_MOUSE_UP,s_oInterface._onButReturnToMenuRelease,this);ja=new CGfxButton(CANVAS_WIDTH/
2-100,CANVAS_HEIGHT/2+130,ba);ja.addEventListener(ON_MOUSE_UP,s_oInterface._onButRestartLevelRelease,this)})});$(s_oMain).trigger("share_event",z);$(s_oMain).trigger("save_score",z);if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile){var Z=playSound("game_over",1,!1);setVolume("soundtrack",SOUNDTRACK_VOLUME_IN_GAME);Z.on("end",function(){setVolume("soundtrack",1);Z=null})}};this._onButRestartLevelRelease=function(){s_oStage.removeChild(J,y,E);ja.unload();ca.unload();E=J=y=ca=ja=null;$(s_oMain).trigger("show_interlevel_ad");
s_oGame.restartLevelFromGameOver();C.block(!1)};this.finishGame=function(z){s_oGame.setPause(!0);!0===s_bMobile&&s_oGame.blockJoypad(!0);C.block(!0);var B=new createjs.Container;B.x=CANVAS_WIDTH/2;B.y=-200;s_oStage.addChild(B);var Z=new createjs.Container;Z.x=CANVAS_WIDTH/2;Z.y=-200;s_oStage.addChild(Z);L=new createjs.Shape;L.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);L.alpha=0;s_oStage.addChild(L);var ba=50;new CTLText(B,-250,0,500,2*ba,2*ba,"center","#fff",PRIMARY_FONT,
1,0,0,TEXT_CONGRATULATIONS,!0,!0,!0,!1);(new CTLText(B,-250,0,500,2*ba,2*ba,"center","#000",PRIMARY_FONT,1,0,0,TEXT_CONGRATULATIONS,!0,!0,!0,!1)).setOutline(1);ba=50;new CTLText(Z,-100,0,200,ba,ba,"center","#fff",PRIMARY_FONT,1,0,0,TEXT_TOTAL_SCORE,!0,!0,!1,!1);(new CTLText(Z,-100,0,200,ba,ba,"center","#000",PRIMARY_FONT,1,0,0,TEXT_TOTAL_SCORE,!0,!0,!1,!1)).setOutline(1);new CTLText(Z,-100,40,200,ba,ba,"center","#fff",PRIMARY_FONT,1,0,0,z,!0,!0,!1,!1);(new CTLText(Z,-100,40,200,ba,ba,"center","#000",
PRIMARY_FONT,1,0,0,z,!0,!0,!1,!1)).setOutline(1);createjs.Tween.get(L).to({alpha:.5},1E3,createjs.Ease.backOut).call(function(){createjs.Tween.get(B).to({y:CANVAS_HEIGHT/2-150},1E3,createjs.Ease.backOut).call(function(){createjs.Tween.get(Z).wait(500).to({y:CANVAS_HEIGHT/2},1E3,createjs.Ease.bounceOut).call(function(){var la=s_oSpriteLibrary.getSprite("but_play");ca=new CGfxButton(CANVAS_WIDTH/2,CANVAS_HEIGHT/2+150,la);ca.setScale(.8);ca.addEventListener(ON_MOUSE_UP,s_oInterface._onButReturnToMenuRelease,
this)})})});$(s_oMain).trigger("share_event",z);$(s_oMain).trigger("save_score",z)};this._onButNextLevelRelease=function(){ia.unload();Y.unload();s_oStage.removeChild(L);Y=L=ia=null;ha.unload();ha=null;_oButPause.block(!1);s_oGame.nextLevel()};this._onButReturnToMenuRelease=function(){s_oGame.onExit()};this.refreshScore=function(z){P.text=z;p.text=z};this.colorTime=function(z){G.color=z};this.refreshTime=function(z){G.text=z;F.text=z};this._onButPauseRelease=function(){s_oGame.setPause(!0);ea=new createjs.Shape;
ea.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);ea.alpha=.5;s_oStage.addChild(ea);D=new createjs.Text("Pause","bold 48px "+PRIMARY_FONT,"#ffffff");D.textAlign="center";D.textBaseline="alphabetic";D.x=CANVAS_WIDTH/2;D.y=CANVAS_HEIGHT/2-250;s_oStage.addChild(D);_oButPause.block(!0);var z=s_oSpriteLibrary.getSprite("but_continue");A=new CGfxButton(CANVAS_WIDTH/2,CANVAS_HEIGHT/2,z);A.addEventListener(ON_MOUSE_UP,this._onButContinueRelease,this)};this._onButContinueRelease=function(){A.unload();
A=null;s_oStage.removeChild(D,ea);ea=!1;D=null;_oButPause.block(!1);s_oGame.setPause(!1)};this.onButNextPrevPage=function(z){switch(z.page){case 1:this.helpPage1(z.level);l.block(!0);break;case 2:this.helpPage2(z.level);t.block(!0);l.block(!0);break;case 3:this.helpPage3(z.level),t.block(!0),l.block(!0)}};this.helpPage1=function(z){K&&s_oStage.removeChild(K);if(!fa){var B=s_oSpriteLibrary.getSprite("help_panel");fa=createBitmap(B);fa.on("click",function(){s_oInterface.finishHelp(z)},null,!0);s_oStage.addChild(fa)}l?
(t.unload(),t=null):(B=s_oSpriteLibrary.getSprite("but_arrow"),l=new CGfxButton(CANVAS_WIDTH/2+267,CANVAS_HEIGHT/2,B));l.addEventListenerWithParams(ON_MOUSE_UP,this.onButNextPrevPage,this,{level:z,page:2});K=new createjs.Container;new CTLText(K,-150,-30,300,220,36,"center","#fff",PRIMARY_FONT,1,0,0,TEXT_HELP_PAGE_1,!0,!0,!0,!1);(new CTLText(K,-150,-30,300,220,36,"center","#000",PRIMARY_FONT,1,0,0,TEXT_HELP_PAGE_1,!0,!0,!0,!1)).setOutline(1);K.x=CANVAS_WIDTH/2+80;K.y=CANVAS_HEIGHT/2-90;K.alpha=0;createjs.Tween.get(K).to({alpha:1},
500).call(function(){t&&t.block(!1);l&&l.block(!1)});s_oStage.addChild(K)};this.helpPage2=function(z){s_oStage.removeChild(K);var B=s_oSpriteLibrary.getSprite("but_arrow");l.addEventListenerWithParams(ON_MOUSE_UP,this.onButNextPrevPage,this,{level:z,page:3});t||(t=new CGfxButton(CANVAS_WIDTH/2-267,CANVAS_HEIGHT/2,B));t.addEventListenerWithParams(ON_MOUSE_UP,this.onButNextPrevPage,this,{level:z,page:1});t.setScale(-1);K=new createjs.Container;z=new CTLText(K,-150,-30,300,220,33,"center","#fff",PRIMARY_FONT,
1,0,0," ",!0,!0,!0,!1);B=new CTLText(K,-150,-30,300,220,33,"center","#000",PRIMARY_FONT,1,0,0," ",!0,!0,!0,!1);B.setOutline(1);!0===s_bMobile?(z.refreshText(TEXT_HELP_PAGE_2_MOBILE),B.refreshText(TEXT_HELP_PAGE_2_MOBILE)):(z.refreshText(TEXT_HELP_PAGE_2_PC),B.refreshText(TEXT_HELP_PAGE_2_PC));K.x=CANVAS_WIDTH/2+80;K.y=CANVAS_HEIGHT/2-100;K.alpha=0;createjs.Tween.get(K).to({alpha:1},500).call(function(){t&&t.block(!1);l&&l.block(!1)});s_oStage.addChild(K)};this.helpPage3=function(z){s_oStage.removeChild(K);
l.addEventListenerWithParams(ON_MOUSE_UP,this.finishHelp,this,z);t.addEventListenerWithParams(ON_MOUSE_UP,this.onButNextPrevPage,this,{level:z,page:2});K=new createjs.Container;new CTLText(K,-150,-30,300,220,36,"center","#fff",PRIMARY_FONT,1,0,0,TEXT_HELP_PAGE_3_PART1+" "+EXTRA_POINT+" "+TEXT_HELP_PAGE_3_PART2,!0,!0,!0,!1);(new CTLText(K,-150,-30,300,220,36,"center","#000",PRIMARY_FONT,1,0,0,TEXT_HELP_PAGE_3_PART1+" "+EXTRA_POINT+" "+TEXT_HELP_PAGE_3_PART2,!0,!0,!0,!1)).setOutline(1);K.x=CANVAS_WIDTH/
2+80;K.y=CANVAS_HEIGHT/2-90;K.alpha=0;fa.off("click");createjs.Tween.get(K).to({alpha:1},500).call(function(){t.block(!1);l.block(!1)});s_oStage.addChild(K)};this.finishHelp=function(z){s_oStage.removeChild(K);K=null;l&&(l.unload(),l=null);t&&(t.unload(),t=null);createjs.Tween.get(fa).to({alpha:0},500,createjs.Ease.cubicOut).call(function(){s_oStage.removeChild(fa);fa=null;!1===O&&(s_oInterface.showLevelNum(z),O=!0)})};this.animContrast=function(z){createjs.Tween.get(Q).to({alpha:z},2E3,createjs.Ease.cubicOut)};
this.unload=function(){s_oStage.removeChild(da,ca,L);L=ca=da=null;!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||!w||(w.unload(),w=null);M&&screenfull.isEnabled&&R.unload();s_oInterface=null};this._onExit=function(){s_oGame.onExit()};this._onAudioToggle=function(){Howler.mute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this.resetFullscreenBut=function(){M&&screenfull.isEnabled&&R.setActive(s_bFullscreen)};this._onFullscreenRelease=function(){s_bFullscreen?X.call(window.document):M.call(window.document.documentElement);
sizeHandler()};s_oInterface=this;this._init(a);return this}var s_oInterface=null;
function CBall(a,e,b,d,c,f,h,g){var k,m={},q,u,r,w,C,D,A,P,p,I;this._init=function(){k=createBitmap(b);k.x=a;k.y=e;p=0;m.Radius=b.height/2;m.Type=f;m.Score=BALL_SCORE[f];m.Color=h;m.Active=g;q=d;u=1;k.regX=m.Radius;k.regY=m.Radius;var H=76+m.Radius,G=m.Radius+EDGEBOARD_X,F=m.Radius+EDGEBOARD_X;r=CANVAS_WIDTH+(-76-m.Radius);w=H;D=CANVAS_HEIGHT-G;C=F;P=c;A=BALL_SPEED*P;I=-(BALL_DOWN_ACCELLERATION*MAX_FORCE_UP_RATE)*FORCE_RATE_BALL[f];s_oStage.addChild(k);s_oStage.setChildIndex(k,5)};this.edgeOffset=
function(){var H=EDGEBOARD_Y+21+m.Radius,G=m.Radius+EDGEBOARD_X,F=m.Radius+EDGEBOARD_X;r=CANVAS_WIDTH+(-EDGEBOARD_Y-21-m.Radius);w=H;D=CANVAS_HEIGHT-G;C=F};this.changeDirection=function(H){q=H};this.downFloor=function(H){};this.getDirectionY=function(){return u};this.getX=function(){return k.x};this.getY=function(){return k.y};this.setPosition=function(H,G){null!==H&&(k.x=H);null!==G&&(k.y=G)};this.setVisible=function(H){k.visible=H};this.getActive=function(){return m.Active};this.setActive=function(H){m.Active=
H};this.setInfoData=function(H,G){m[H]=G};this.getInfoData=function(H){return m[H]};this.resetTheIndex=function(H){m.ID=H};this.unload=function(){s_oStage.removeChild(k);s_oBall=null};this.resetSpeed=function(){p=0};this.setVelocityRate=function(H){P=H;A=BALL_SPEED*P};this.bounceUp=function(){p=I};this.bounceDown=function(){p=-I-.4};this.changeType=function(H){m.Type!==H&&(m.Type=H,m.Score=BALL_SCORE[H],I=-(BALL_DOWN_ACCELLERATION*MAX_FORCE_UP_RATE)*FORCE_RATE_BALL[H],H=s_oSpriteLibrary.getSprite("ball"+
m.Color+"_"+m.Type),k.image=H,m.Radius=H.width/2,this.edgeOffset(),k.regX=m.Radius,k.regY=m.Radius)};this.addExplosion=function(){var H=s_oSpriteLibrary.getSprite("explosion"+m.Color+"_"+m.Type);var G=createBitmap(H);G.x=k.x;G.y=k.y;G.regX=H.width/2;G.regY=H.height/2;G.scaleX=0;G.scaleY=0;s_oStage.addChild(G);s_oStage.setChildIndex(G,5);playSound("ball_explosion",1,!1);createjs.Tween.get(G).to({scaleX:2,scaleY:2},300).call(function(){s_oStage.removeChild(G)})};this.update=function(H){k.x+=A*q;p+=
BALL_DOWN_ACCELLERATION;k.y+=p;k.x>=r?(q*=-1,playSound("boing",1,!1)):k.x<=w&&(q*=-1,playSound("boing",1,!1));k.y>=D?(this.bounceUp(),playSound("boing",1,!1)):k.y<=C&&this.bounceDown()};s_oBall=this;this._init()}var s_oBall;
function CCharacter(a,e,b){var d,c={},f,h,g,k,m;this._init=function(){var q=new createjs.SpriteSheet({images:[e],frames:{width:e.width/6,height:e.height,regX:e.width/2/6,regY:e.height/2},animations:{run:[0,3,"run",.5],shoot:[4],death:[5],idle:[0]}});d=createSprite(q,"idle",e.width/2/6,e.height/2,e.width/2,e.height);q=CANVAS_HEIGHT-EDGEBOARD_X-e.height/2-4;d.x=a;d.y=q;g=e.width/6;q=EDGEBOARD_Y+g;f=CANVAS_WIDTH+-(EDGEBOARD_Y+g);h=q;m=b;k=CHARACTER_SPEED*m;s_oStage.addChild(d);s_oStage.setChildIndex(d,
4)};this.getX=function(){return d.x};this.getY=function(){return d.y};this.setPosition=function(q,u){null!==q&&(d.x=q);null!==u&&(d.y=u)};this.rotate=function(q){d.scaleX=q};this.changeState=function(q){"run"===q?d.gotoAndPlay(q):d.gotoAndStop(q)};this.setInfoData=function(q,u){c[q]=u};this.getInfoData=function(q){return c[q]};this.unload=function(){s_oStage.removeChild(d);s_oCharacter=null};this.update=function(q){d.x+=k*q;d.x>=f?d.x=f:d.x<=h&&(d.x=h)};s_oCharacter=this;this._init()}var s_oCharacter;
function CDoor(a,e,b){var d,c={};this._init=function(){var f=new createjs.SpriteSheet({images:[b],frames:{width:b.width/3,height:b.height,regX:b.width/2/3,regY:b.height/2},animations:{open:[0,2,"open",.2],close:[2,0,"close",.2]}});d=createSprite(f,"open",b.width/2/2,b.height/2,b.width/3,b.height);d.x=a;d.y=e;s_oStage.addChild(d);s_oStage.setChildIndex(d,1)};this.getX=function(){return d.x};this.getY=function(){return d.y};this.childIndex=function(f){s_oStage.setChildIndex(d,f)};this.setPosition=function(f,
h){null!==f&&(d.x=f);null!==h&&(d.y=h)};this.setInfoData=function(f,h){c[f]=h};this.getInfoData=function(f){return c[f]};this.resetTheIndex=function(f){c.ID=f};this.unload=function(){s_oStage.removeChild(d);s_oDoor=null};this.changeState=function(f,h){!0===h?d.gotoAndPlay(f):d.gotoAndStop(f)};this.openDoorAndRemain=function(){d.gotoAndPlay("open");d.on("animationend",function(){d.gotoAndStop(2)})};this.update=function(){};s_oDoor=this;this._init()}var s_oDoor;
function CJoypad(a,e,b,d,c){var f,h,g,k,m,q,u=[],r,w,C;this._init=function(D,A,P,p,I){f=D.height/2;g=h=0;k=D.height/30;m=[];q=[];C=new createjs.Container;C.x=A;C.y=P;p.addChild(C);A=new createjs.SpriteSheet({images:[D],frames:{width:D.width/2,height:D.height,regX:D.width/2/2,regY:D.height/2},animations:{bg:[0],stick:[1]}});P=createSprite(A,"bg",D.width/2/2,D.height/2,D.width/2,D.height);w=createSprite(A,"stick",D.width/2/2,D.height/2,D.width/2,D.height);C.addChild(P,w);I||(C.visible=!1);p.on("mousedown",
this.onPressStart);p.on("pressmove",this.onPressMove);p.on("pressup",this.onPressRelease);r=!1};this.addFireButtonListener=function(D,A,P,p){m[D]=A;q[D]=P;u=p};this.unload=function(){d.off("mousedown",this.onStageStart);d.off("pressmove",this.onStageMove);d.off("pressup",this.onStageRelease);d.removeChild(C)};this.onPressStart=function(D){r||(D.primary?D.stageX<CANVAS_WIDTH/2?c||(C.visible=!0,C.x=D.stageX,C.y=D.stageY,w.x=0,w.y=0):m[ON_MOUSE_DOWN]&&m[ON_MOUSE_DOWN].call(q[ON_MOUSE_DOWN],u):m[ON_MOUSE_DOWN]&&
m[ON_MOUSE_DOWN].call(q[ON_MOUSE_DOWN],u))};this.onPressMove=function(D){!r&&D.primary&&C.visible&&(w.x=D.stageX-C.x,w.y=D.stageY-C.y,g=Math.atan2(w.y,w.x),h=Math.abs(w.x/Math.cos(g)),Math.pow(w.x,2)+Math.pow(w.y,2)>Math.pow(f,2)&&(w.x=f*Math.cos(g),w.y=f*Math.sin(g)))};this.onPressRelease=function(D){!r&&D.primary&&(c?(new createjs.Tween(w)).to({x:0,y:0},200).call(function(){g=h=0}):(C.visible=!1,g=h=0))};this.block=function(D){r=D};this.resetJoy=function(){g=null;C.visible=!1};this.update=function(){return h>
k?g:null};this._init(a,e,b,d,c)}
function CRope(a,e,b,d){var c,f={},h,g,k,m,q,u;this._init=function(){var r=new createjs.SpriteSheet({images:[b],frames:{width:b.width/2,height:b.height,regX:b.width/2/2,regY:0},animations:{move:[0],ancorate:[1]}});c=createSprite(r,"move",b.width/2/2,0,b.width/2,b.height);c.x=a;c.y=e;u=TIME_ROPE;g=d;q=!1;f.Unloaded=!0;k=!1;h=ROPE_SPEED*g;m=EDGEBOARD_X+1;s_oStage.addChild(c);s_oStage.setChildIndex(c,5);playSound("rope_launch",1,!1)};this.getX=function(){return c.x};this.getY=function(){return c.y};
this.setPosition=function(r,w){null!==r&&(c.x=r);null!==w&&(c.y=w)};this.setInfoData=function(r,w){f[r]=w};this.getInfoData=function(r){return f[r]};this.resetTheIndex=function(r){f.ID=r};this.unload=function(){s_oStage.removeChild(c);s_oRope=null};this.setVelocityRate=function(r){g=r;h=BALL_SPEED*g};this.aggance=function(r){q=r;u+=300};this.isAgganced=function(){return q};this.update=function(){c.y>m&&!1===q?c.y-=h:!1===k&&(c.gotoAndStop("ancorate"),k=!0,playSound("rope_hoocked",1,!1),createjs.Tween.get(c).to({alpha:0},
u).call(function(){!0===f.Unloaded&&(s_oGame.unloadRope(f.ID),s_oGame.combo(0,0,!1))}))};s_oRope=this;this._init()}var s_oRope;
function CCreditsPanel(){var a,e,b,d,c,f,h,g;this._init=function(){g=new createjs.Container;s_oStage.addChild(g);var k=createBitmap(s_oSpriteLibrary.getSprite("bg_menu"));g.addChild(k);c=new createjs.Shape;c.graphics.beginFill("rgba(0,0,0,0.7)").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);g.addChild(c);k=s_oSpriteLibrary.getSprite("credits_panel");e=createBitmap(k);e.x=CANVAS_WIDTH/2;e.y=CANVAS_HEIGHT/2;e.regX=k.width/2;e.regY=k.height/2;g.addChild(e);f=new createjs.Shape;f.graphics.beginFill("#0f0f0f").drawRect(0,
0,CANVAS_WIDTH,CANVAS_HEIGHT);f.alpha=.01;f.on("click",this._onLogoButRelease);g.addChild(f);k=s_oSpriteLibrary.getSprite("but_exit");a=CANVAS_WIDTH/2+164;b=new CGfxButton(a,154,k,g);b.addEventListener(ON_MOUSE_UP,this.unload,this);d=new createjs.Text(TEXT_DEVELOPED_BY,"36px "+PRIMARY_FONT,"#ffffff");d.x=CANVAS_WIDTH/2;d.y=200;d.textAlign="center";g.addChild(d);k=s_oSpriteLibrary.getSprite("logo_credits");var m=createBitmap(k);m.regX=k.width/2;m.regY=k.height/2;m.x=CANVAS_WIDTH/2;m.y=CANVAS_HEIGHT/
2;g.addChild(m);h=new createjs.Text("www.codethislab.com","30px "+PRIMARY_FONT,"#ffffff");h.x=CANVAS_WIDTH/2;h.y=300;h.textAlign="center";g.addChild(h)};this.unload=function(){f.off("click",this._onLogoButRelease);b.unload();b=null;s_oStage.removeChild(g)};this._onLogoButRelease=function(){window.open("http://www.codethislab.com/index.php?&l=en")};this._init()}
CTLText.prototype={constructor:CTLText,__autofit:function(){if(this._bFitText){for(var a=this._iFontSize;(this._oText.getBounds().height>this._iHeight-2*this._iPaddingV||this._oText.getBounds().width>this._iWidth-2*this._iPaddingH)&&!(a--,this._oText.font=a+"px "+this._szFont,this._oText.lineHeight=Math.round(a*this._fLineHeightFactor),this.__updateY(),this.__verticalAlign(),8>a););this._iFontSize=a}},unload:function(){this._oContainer.removeChild(this._oText);this._bDebug&&this._oContainer.removeChild(this._oDebugShape)},
__verticalAlign:function(){if(this._bVerticalAlign){var a=this._oText.getBounds().height;this._oText.y-=(a-this._iHeight)/2+this._iPaddingV}},__updateY:function(){this._oText.y=this._y+this._iPaddingV;switch(this._oText.textBaseline){case "middle":this._oText.y+=this._oText.lineHeight/2+(this._iFontSize*this._fLineHeightFactor-this._iFontSize)}},__createText:function(a){this._bDebug&&(this._oDebugShape=new createjs.Shape,this._oDebugShape.graphics.beginFill("rgba(255,0,0,0.5)").drawRect(this._x,this._y,
this._iWidth,this._iHeight),this._oContainer.addChild(this._oDebugShape));this._oText=new createjs.Text(a,this._iFontSize+"px "+this._szFont,this._szColor);this._oText.textBaseline="middle";this._oText.lineHeight=Math.round(this._iFontSize*this._fLineHeightFactor);this._oText.textAlign=this._szAlign;this._oText.lineWidth=this._bMultiline?this._iWidth-2*this._iPaddingH:null;switch(this._szAlign){case "center":this._oText.x=this._x+this._iWidth/2;break;case "left":this._oText.x=this._x+this._iPaddingH;
break;case "right":this._oText.x=this._x+this._iWidth-this._iPaddingH}this._oContainer.addChild(this._oText);this.refreshText(a)},setVerticalAlign:function(a){this._bVerticalAlign=a},setOutline:function(a){null!==this._oText&&(this._oText.outline=a)},setShadow:function(a,e,b,d){null!==this._oText&&(this._oText.shadow=new createjs.Shadow(a,e,b,d))},setColor:function(a){this._oText.color=a},setAlpha:function(a){this._oText.alpha=a},removeTweens:function(){createjs.Tween.removeTweens(this._oText)},getText:function(){return this._oText},
getY:function(){return this._y},getFontSize:function(){return this._iFontSize},refreshText:function(a){""===a&&(a=" ");null===this._oText&&this.__createText(a);this._oText.text=a;this._oText.font=this._iFontSize+"px "+this._szFont;this._oText.lineHeight=Math.round(this._iFontSize*this._fLineHeightFactor);this.__autofit();this.__updateY();this.__verticalAlign()}};
function CTLText(a,e,b,d,c,f,h,g,k,m,q,u,r,w,C,D,A){this._oContainer=a;this._x=e;this._y=b;this._iWidth=d;this._iHeight=c;this._bMultiline=D;this._iFontSize=f;this._szAlign=h;this._szColor=g;this._szFont=k;this._iPaddingH=q;this._iPaddingV=u;this._bVerticalAlign=C;this._bFitText=w;this._bDebug=A;this._oDebugShape=null;this._fLineHeightFactor=m;this._oText=null;r&&this.__createText(r)};