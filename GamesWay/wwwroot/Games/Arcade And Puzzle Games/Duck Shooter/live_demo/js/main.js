/*
 Platform.js <https://mths.be/platform>
 Copyright 2014-2018 Benjamin Tan <https://bnjmnt4n.now.sh/>
 Copyright 2011-2013 John-David Dalton
 Available under MIT license <https://mths.be/mit>
*/
(function(){var a="undefined"!==typeof window&&"undefined"!==typeof window.document?window.document:{},e="undefined"!==typeof module&&module.exports,b="undefined"!==typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,c=function(){for(var d,k=["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror".split(" "),"webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror".split(" "),
"webkitRequestFullScreen webkitCancelFullScreen webkitCurrentFullScreenElement webkitCancelFullScreen webkitfullscreenchange webkitfullscreenerror".split(" "),"mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror".split(" "),"msRequestFullscreen msExitFullscreen msFullscreenElement msFullscreenEnabled MSFullscreenChange MSFullscreenError".split(" ")],g=0,h=k.length,t={};g<h;g++)if((d=k[g])&&d[1]in a){for(g=0;g<d.length;g++)t[k[0][g]]=
d[g];return t}return!1}(),l={change:c.fullscreenchange,error:c.fullscreenerror},m={request:function(d){var k=c.requestFullscreen;d=d||a.documentElement;if(/5\.1[.\d]* Safari/.test(navigator.userAgent))d[k]();else d[k](b&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){a[c.exitFullscreen]()},toggle:function(d){this.isFullscreen?this.exit():this.request(d)},onchange:function(d){this.on("change",d)},onerror:function(d){this.on("error",d)},on:function(d,k){var g=l[d];g&&a.addEventListener(g,k,!1)},off:function(d,
k){var g=l[d];g&&a.removeEventListener(g,k,!1)},raw:c};c?(Object.defineProperties(m,{isFullscreen:{get:function(){return!!a[c.fullscreenElement]}},element:{enumerable:!0,get:function(){return a[c.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return!!a[c.fullscreenEnabled]}}}),e?module.exports=m:window.screenfull=m):e?module.exports=!1:window.screenfull=!1})();
(function(){function a(n){n=String(n);return n.charAt(0).toUpperCase()+n.slice(1)}function e(n,H){var I=-1,D=n?n.length:0;if("number"==typeof D&&-1<D&&D<=B)for(;++I<D;)H(n[I],I,n);else c(n,H)}function b(n){n=String(n).replace(/^ +| +$/g,"");return/^(?:webOS|i(?:OS|P))/.test(n)?n:a(n)}function c(n,H){for(var I in n)F.call(n,I)&&H(n[I],I,n)}function l(n){return null==n?a(n):v.call(n).slice(8,-1)}function m(n,H){var I=null!=n?typeof n[H]:"number";return!/^(?:boolean|number|string|undefined)$/.test(I)&&
("object"==I?!!n[H]:!0)}function d(n){return String(n).replace(/([ -])(?!$)/g,"$1?")}function k(n,H){var I=null;e(n,function(D,z){I=H(I,D,z,n)});return I}function g(n){function H(S){return k(S,function(M,L){var V=L.pattern||d(L);!M&&(M=RegExp("\\b"+V+" *\\d+[.\\w_]*","i").exec(n)||RegExp("\\b"+V+" *\\w+-[\\w]*","i").exec(n)||RegExp("\\b"+V+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(n))&&((M=String(L.label&&!RegExp(V,"i").test(L.label)?L.label:M).split("/"))[1]&&!/[\d.]+/.test(M[0])&&(M[0]+=
" "+M[1]),L=L.label||L,M=b(M[0].replace(RegExp(V,"i"),L).replace(RegExp("; *(?:"+L+"[_-])?","i")," ").replace(RegExp("("+L+")[-_.]?(\\w)","i"),"$1 $2")));return M})}function I(S){return k(S,function(M,L){return M||(RegExp(L+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(n)||0)[1]||null})}var D=t,z=n&&"object"==typeof n&&"String"!=l(n);z&&(D=n,n=null);var N=D.navigator||{},x=N.userAgent||"";n||(n=x);var Q=z?!!N.likeChrome:/\bChrome\b/.test(n)&&!/internal|\n/i.test(v.toString()),
O=z?"Object":"ScriptBridgingProxyObject",y=z?"Object":"Environment",P=z&&D.java?"JavaPackage":l(D.java),p=z?"Object":"RuntimeObject";y=(P=/\bJava/.test(P)&&D.java)&&l(D.environment)==y;var G=P?"a":"\u03b1",Y=P?"b":"\u03b2",C=D.document||{},R=D.operamini||D.opera,U=r.test(U=z&&R?R["[[Class]]"]:l(R))?U:R=null,f,T=n;z=[];var aa=null,Z=n==x;x=Z&&R&&"function"==typeof R.version&&R.version();var J=function(S){return k(S,function(M,L){return M||RegExp("\\b"+(L.pattern||d(L))+"\\b","i").exec(n)&&(L.label||
L)})}([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),u=function(S){return k(S,function(M,L){return M||RegExp("\\b"+(L.pattern||d(L))+"\\b","i").exec(n)&&(L.label||L)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser",
"PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},
{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),K=H([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad",
"iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),W=function(S){return k(S,function(M,L,V){return M||(L[K]||L[/^[a-z]+(?: +[a-z]+\b)*/i.exec(K)]||RegExp("\\b"+d(V)+"(?:\\b|\\w*\\d)","i").exec(n))&&V})}({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},
"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}}),w=function(S){return k(S,function(M,L){var V=L.pattern||d(L);if(!M&&(M=RegExp("\\b"+V+"(?:/[\\d.]+|[ \\w.]*)","i").exec(n))){var X=M,ba=L.label||L,ca={"10.0":"10","6.4":"10 Technical Preview",
"6.3":"8.1","6.2":"8","6.1":"Server 2008 R2 / 7","6.0":"Server 2008 / Vista","5.2":"Server 2003 / XP 64-bit","5.1":"XP","5.01":"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};V&&ba&&/^Win/i.test(X)&&!/^Windows Phone /i.test(X)&&(ca=ca[/[\d.]+$/.exec(X)])&&(X="Windows "+ca);X=String(X);V&&ba&&(X=X.replace(RegExp(V,"i"),ba));M=X=b(X.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,
"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}return M})}(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X",
"Macintosh","Mac","Windows 98;","Windows "]);J&&(J=[J]);W&&!K&&(K=H([W]));if(f=/\bGoogle TV\b/.exec(K))K=f[0];/\bSimulator\b/i.test(n)&&(K=(K?K+" ":"")+"Simulator");"Opera Mini"==u&&/\bOPiOS\b/.test(n)&&z.push("running in Turbo/Uncompressed mode");"IE"==u&&/\blike iPhone OS\b/.test(n)?(f=g(n.replace(/like iPhone OS/,"")),W=f.manufacturer,K=f.product):/^iP/.test(K)?(u||(u="Safari"),w="iOS"+((f=/ OS ([\d_]+)/i.exec(n))?" "+f[1].replace(/_/g,"."):"")):"Konqueror"!=u||/buntu/i.test(w)?W&&"Google"!=W&&
(/Chrome/.test(u)&&!/\bMobile Safari\b/i.test(n)||/\bVita\b/.test(K))||/\bAndroid\b/.test(w)&&/^Chrome/.test(u)&&/\bVersion\//i.test(n)?(u="Android Browser",w=/\bAndroid\b/.test(w)?w:"Android"):"Silk"==u?(/\bMobi/i.test(n)||(w="Android",z.unshift("desktop mode")),/Accelerated *= *true/i.test(n)&&z.unshift("accelerated")):"PaleMoon"==u&&(f=/\bFirefox\/([\d.]+)\b/.exec(n))?z.push("identifying as Firefox "+f[1]):"Firefox"==u&&(f=/\b(Mobile|Tablet|TV)\b/i.exec(n))?(w||(w="Firefox OS"),K||(K=f[1])):!u||
(f=!/\bMinefield\b/i.test(n)&&/\b(?:Firefox|Safari)\b/.exec(u))?(u&&!K&&/[\/,]|^[^(]+?\)/.test(n.slice(n.indexOf(f+"/")+8))&&(u=null),(f=K||W||w)&&(K||W||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(w))&&(u=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(w)?w:f)+" Browser")):"Electron"==u&&(f=(/\bChrome\/([\d.]+)\b/.exec(n)||0)[1])&&z.push("Chromium "+f):w="Kubuntu";x||(x=I(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",d(u),
"(?:Firefox|Minefield|NetFront)"]));if(f="iCab"==J&&3<parseFloat(x)&&"WebKit"||/\bOpera\b/.test(u)&&(/\bOPR\b/.test(n)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(n)&&!/^(?:Trident|EdgeHTML)$/.test(J)&&"WebKit"||!J&&/\bMSIE\b/i.test(n)&&("Mac OS"==w?"Tasman":"Trident")||"WebKit"==J&&/\bPlayStation\b(?! Vita\b)/i.test(u)&&"NetFront")J=[f];"IE"==u&&(f=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(n)||0)[1])?(u+=" Mobile",w="Windows Phone "+(/\+$/.test(f)?f:f+".x"),z.unshift("desktop mode")):/\bWPDesktop\b/i.test(n)?
(u="IE Mobile",w="Windows Phone 8.x",z.unshift("desktop mode"),x||(x=(/\brv:([\d.]+)/.exec(n)||0)[1])):"IE"!=u&&"Trident"==J&&(f=/\brv:([\d.]+)/.exec(n))&&(u&&z.push("identifying as "+u+(x?" "+x:"")),u="IE",x=f[1]);if(Z){if(m(D,"global"))if(P&&(f=P.lang.System,T=f.getProperty("os.arch"),w=w||f.getProperty("os.name")+" "+f.getProperty("os.version")),y){try{x=D.require("ringo/engine").version.join("."),u="RingoJS"}catch(S){(f=D.system)&&f.global.system==D.system&&(u="Narwhal",w||(w=f[0].os||null))}u||
(u="Rhino")}else"object"==typeof D.process&&!D.process.browser&&(f=D.process)&&("object"==typeof f.versions&&("string"==typeof f.versions.electron?(z.push("Node "+f.versions.node),u="Electron",x=f.versions.electron):"string"==typeof f.versions.nw&&(z.push("Chromium "+x,"Node "+f.versions.node),u="NW.js",x=f.versions.nw)),u||(u="Node.js",T=f.arch,w=f.platform,x=(x=/[\d.]+/.exec(f.version))?x[0]:null));else l(f=D.runtime)==O?(u="Adobe AIR",w=f.flash.system.Capabilities.os):l(f=D.phantom)==p?(u="PhantomJS",
x=(f=f.version||null)&&f.major+"."+f.minor+"."+f.patch):"number"==typeof C.documentMode&&(f=/\bTrident\/(\d+)/i.exec(n))?(x=[x,C.documentMode],(f=+f[1]+4)!=x[1]&&(z.push("IE "+x[1]+" mode"),J&&(J[1]=""),x[1]=f),x="IE"==u?String(x[1].toFixed(1)):x[0]):"number"==typeof C.documentMode&&/^(?:Chrome|Firefox)\b/.test(u)&&(z.push("masking as "+u+" "+x),u="IE",x="11.0",J=["Trident"],w="Windows");w=w&&b(w)}x&&(f=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(x)||/(?:alpha|beta)(?: ?\d)?/i.exec(n+";"+(Z&&N.appMinorVersion))||
/\bMinefield\b/i.test(n)&&"a")&&(aa=/b/i.test(f)?"beta":"alpha",x=x.replace(RegExp(f+"\\+?$"),"")+("beta"==aa?Y:G)+(/\d+\+?/.exec(f)||""));if("Fennec"==u||"Firefox"==u&&/\b(?:Android|Firefox OS)\b/.test(w))u="Firefox Mobile";else if("Maxthon"==u&&x)x=x.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(K))"Xbox 360"==K&&(w=null),"Xbox 360"==K&&/\bIEMobile\b/.test(n)&&z.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(u)&&(!u||K||/Browser|Mobi/.test(u))||"Windows CE"!=w&&!/Mobi/i.test(n))if("IE"==
u&&Z)try{null===D.external&&z.unshift("platform preview")}catch(S){z.unshift("embedded")}else(/\bBlackBerry\b/.test(K)||/\bBB10\b/.test(n))&&(f=(RegExp(K.replace(/ +/g," *")+"/([.\\d]+)","i").exec(n)||0)[1]||x)?(f=[f,/BB10/.test(n)],w=(f[1]?(K=null,W="BlackBerry"):"Device Software")+" "+f[0],x=null):this!=c&&"Wii"!=K&&(Z&&R||/Opera/.test(u)&&/\b(?:MSIE|Firefox)\b/i.test(n)||"Firefox"==u&&/\bOS X (?:\d+\.){2,}/.test(w)||"IE"==u&&(w&&!/^Win/.test(w)&&5.5<x||/\bWindows XP\b/.test(w)&&8<x||8==x&&!/\bTrident\b/.test(n)))&&
!r.test(f=g.call(c,n.replace(r,"")+";"))&&f.name&&(f="ing as "+f.name+((f=f.version)?" "+f:""),r.test(u)?(/\bIE\b/.test(f)&&"Mac OS"==w&&(w=null),f="identify"+f):(f="mask"+f,u=U?b(U.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(f)&&(w=null),Z||(x=null)),J=["Presto"],z.push(f));else u+=" Mobile";if(f=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(n)||0)[1]){f=[parseFloat(f.replace(/\.(\d)$/,".0$1")),f];if("Safari"==u&&"+"==f[1].slice(-1))u="WebKit Nightly",aa="alpha",x=f[1].slice(0,-1);else if(x==
f[1]||x==(f[2]=(/\bSafari\/([\d.]+\+?)/i.exec(n)||0)[1]))x=null;f[1]=(/\bChrome\/([\d.]+)/i.exec(n)||0)[1];537.36==f[0]&&537.36==f[2]&&28<=parseFloat(f[1])&&"WebKit"==J&&(J=["Blink"]);Z&&(Q||f[1])?(J&&(J[1]="like Chrome"),f=f[1]||(f=f[0],530>f?1:532>f?2:532.05>f?3:533>f?4:534.03>f?5:534.07>f?6:534.1>f?7:534.13>f?8:534.16>f?9:534.24>f?10:534.3>f?11:535.01>f?12:535.02>f?"13+":535.07>f?15:535.11>f?16:535.19>f?17:536.05>f?18:536.1>f?19:537.01>f?20:537.11>f?"21+":537.13>f?23:537.18>f?24:537.24>f?25:537.36>
f?26:"Blink"!=J?"27":"28")):(J&&(J[1]="like Safari"),f=(f=f[0],400>f?1:500>f?2:526>f?3:533>f?4:534>f?"4+":535>f?5:537>f?6:538>f?7:601>f?8:"8"));J&&(J[1]+=" "+(f+="number"==typeof f?".x":/[.+]/.test(f)?"":"+"));"Safari"==u&&(!x||45<parseInt(x))&&(x=f)}"Opera"==u&&(f=/\bzbov|zvav$/.exec(w))?(u+=" ",z.unshift("desktop mode"),"zvav"==f?(u+="Mini",x=null):u+="Mobile",w=w.replace(RegExp(" *"+f+"$"),"")):"Safari"==u&&/\bChrome\b/.exec(J&&J[1])&&(z.unshift("desktop mode"),u="Chrome Mobile",x=null,/\bOS X\b/.test(w)?
(W="Apple",w="iOS 4.3+"):w=null);x&&0==x.indexOf(f=/[\d.]+$/.exec(w))&&-1<n.indexOf("/"+f+"-")&&(w=String(w.replace(f,"")).replace(/^ +| +$/g,""));J&&!/\b(?:Avant|Nook)\b/.test(u)&&(/Browser|Lunascape|Maxthon/.test(u)||"Safari"!=u&&/^iOS/.test(w)&&/\bSafari\b/.test(J[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(u)&&J[1])&&(f=J[J.length-1])&&z.push(f);z.length&&(z=["("+z.join("; ")+")"]);W&&K&&0>K.indexOf(W)&&z.push("on "+W);K&&z.push((/^on /.test(z[z.length-
1])?"":"on ")+K);if(w){var da=(f=/ ([\d.+]+)$/.exec(w))&&"/"==w.charAt(w.length-f[0].length-1);w={architecture:32,family:f&&!da?w.replace(f[0],""):w,version:f?f[1]:null,toString:function(){var S=this.version;return this.family+(S&&!da?" "+S:"")+(64==this.architecture?" 64-bit":"")}}}(f=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(T))&&!/\bi686\b/i.test(T)?(w&&(w.architecture=64,w.family=w.family.replace(RegExp(" *"+f),"")),u&&(/\bWOW64\b/i.test(n)||Z&&/\w(?:86|32)$/.test(N.cpuClass||N.platform)&&!/\bWin64; x64\b/i.test(n))&&
z.unshift("32-bit")):w&&/^OS X/.test(w.family)&&"Chrome"==u&&39<=parseFloat(x)&&(w.architecture=64);n||(n=null);D={};D.description=n;D.layout=J&&J[0];D.manufacturer=W;D.name=u;D.prerelease=aa;D.product=K;D.ua=n;D.version=u&&x;D.os=w||{architecture:null,family:null,version:null,toString:function(){return"null"}};D.parse=g;D.toString=function(){return this.description||""};D.version&&z.unshift(x);D.name&&z.unshift(u);w&&u&&(w!=String(w).split(" ")[0]||w!=u.split(" ")[0]&&!K)&&z.push(K?"("+w+")":"on "+
w);z.length&&(D.description=z.join(" "));return D}var h={"function":!0,object:!0},t=h[typeof window]&&window||this,A=h[typeof exports]&&exports;h=h[typeof module]&&module&&!module.nodeType&&module;var q=A&&h&&"object"==typeof global&&global;!q||q.global!==q&&q.window!==q&&q.self!==q||(t=q);var B=Math.pow(2,53)-1,r=/\bOpera/;q=Object.prototype;var F=q.hasOwnProperty,v=q.toString,E=g();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(t.platform=E,define(function(){return E})):A&&
h?c(E,function(n,H){A[H]=n}):t.platform=E}).call(this);var s_iScaleFactor=1,s_iOffsetX,s_iOffsetY;
(function(a){(jQuery.browser=jQuery.browser||{}).mobile=/android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(ad|hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|tablet|treo|up\.(browser|link)|vodafone|wap|webos|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))})(navigator.userAgent||
navigator.vendor||window.opera);$(window).resize(function(){sizeHandler()});function trace(a){console.log(a)}window.addEventListener("orientationchange",onOrientationChange);function onOrientationChange(){window.matchMedia("(orientation: portrait)").matches&&sizeHandler();window.matchMedia("(orientation: landscape)").matches&&sizeHandler()}
function getSize(a){var e=a.toLowerCase(),b=window.document,c=b.documentElement;if(void 0===window["inner"+a])a=c["client"+a];else if(window["inner"+a]!=c["client"+a]){var l=b.createElement("body");l.id="vpw-test-b";l.style.cssText="overflow:scroll";var m=b.createElement("div");m.id="vpw-test-d";m.style.cssText="position:absolute;top:-1000px";m.innerHTML="<style>@media("+e+":"+c["client"+a]+"px){body#vpw-test-b div#vpw-test-d{"+e+":7px!important}}</style>";l.appendChild(m);c.insertBefore(l,b.head);
a=7==m["offset"+a]?c["client"+a]:window["inner"+a];c.removeChild(l)}else a=window["inner"+a];return a}
function sizeHandler(){window.scrollTo(0,1);if($("#canvas")){var a=null!==platform.name&&"safari"===platform.name.toLowerCase()?getIOSWindowHeight():getSize("Height");var e=getSize("Width");_checkOrientation(e,a);var b=Math.min(a/CANVAS_HEIGHT,e/CANVAS_WIDTH),c=CANVAS_WIDTH*b;b*=CANVAS_HEIGHT;if(b<a){var l=a-b;b+=l;c+=CANVAS_WIDTH/CANVAS_HEIGHT*l}else c<e&&(l=e-c,c+=l,b+=CANVAS_HEIGHT/CANVAS_WIDTH*l);l=a/2-b/2;var m=e/2-c/2,d=CANVAS_WIDTH/c;if(m*d<-EDGEBOARD_X||l*d<-EDGEBOARD_Y)b=Math.min(a/(CANVAS_HEIGHT-
2*EDGEBOARD_Y),e/(CANVAS_WIDTH-2*EDGEBOARD_X)),c=CANVAS_WIDTH*b,b*=CANVAS_HEIGHT,l=(a-b)/2,m=(e-c)/2,d=CANVAS_WIDTH/c;s_iOffsetX=-1*m*d;s_iOffsetY=-1*l*d;0<=l&&(s_iOffsetY=0);0<=m&&(s_iOffsetX=0);null!==s_oInterface&&s_oInterface.refreshButtonPos(s_iOffsetX,s_iOffsetY);null!==s_oMenu&&s_oMenu.refreshButtonPos(s_iOffsetX,s_iOffsetY);s_bIsIphone?(canvas=document.getElementById("canvas"),s_oStage.canvas.width=2*c,s_oStage.canvas.height=2*b,canvas.style.width=c+"px",canvas.style.height=b+"px",s_iScaleFactor=
2*Math.min(c/CANVAS_WIDTH,b/CANVAS_HEIGHT),s_oStage.scaleX=s_oStage.scaleY=s_iScaleFactor):s_bMobile||isChrome()?($("#canvas").css("width",c+"px"),$("#canvas").css("height",b+"px")):(s_oStage.canvas.width=c,s_oStage.canvas.height=b,s_iScaleFactor=Math.min(c/CANVAS_WIDTH,b/CANVAS_HEIGHT),s_oStage.scaleX=s_oStage.scaleY=s_iScaleFactor);$("#canvas").css("top","0px");$("#canvas").css("left",m+"px");fullscreenHandler()}}
function _checkOrientation(a,e){s_bMobile&&ENABLE_CHECK_ORIENTATION&&(a>e?"landscape"===$(".orientation-msg-container").attr("data-orientation")?($(".orientation-msg-container").css("display","none"),s_oMain.startUpdate()):($(".orientation-msg-container").css("display","block"),s_oMain.stopUpdate()):"portrait"===$(".orientation-msg-container").attr("data-orientation")?($(".orientation-msg-container").css("display","none"),s_oMain.startUpdate()):($(".orientation-msg-container").css("display","block"),
s_oMain.stopUpdate()))}function isChrome(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}function isIpad(){var a=-1!==navigator.userAgent.toLowerCase().indexOf("ipad");return!a&&navigator.userAgent.match(/Mac/)&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints?!0:a}function isMobile(){return isIpad()?!0:jQuery.browser.mobile}
function isIOS(){var a="iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";");for(-1!==navigator.userAgent.toLowerCase().indexOf("iphone")&&(s_bIsIphone=!0);a.length;)if(navigator.platform===a.pop())return!0;return s_bIsIphone=!1}function getIOSWindowHeight(){return document.documentElement.clientWidth/window.innerWidth*window.innerHeight}function getHeightOfIOSToolbars(){var a=(0===window.orientation?screen.height:screen.width)-getIOSWindowHeight();return 1<a?a:0}
function getMobileOperatingSystem(){var a=navigator.userAgent||navigator.vendor||window.opera;return a.match(/iPad/i)||a.match(/iPhone/i)||a.match(/iPod/i)?"ios":a.match(/Android/i)?"android":"unknown"}function playSound(a,e,b){return!1===DISABLE_SOUND_MOBILE||!1===s_bMobile?(s_aSounds[a].play(),s_aSounds[a].volume(e),s_aSounds[a].loop(b),s_aSounds[a]):null}function stopSound(a){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].stop()}
function setVolume(a,e){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].volume(e)}function setMute(a,e){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].mute(e)}function createBitmap(a,e,b){var c=new createjs.Bitmap(a),l=new createjs.Shape;e&&b?l.graphics.beginFill("#fff").drawRect(0,0,e,b):l.graphics.beginFill("#ff0").drawRect(0,0,a.width,a.height);c.hitArea=l;return c}
function createSprite(a,e,b,c,l,m){a=null!==e?new createjs.Sprite(a,e):new createjs.Sprite(a);e=new createjs.Shape;e.graphics.beginFill("#000000").drawRect(-b,-c,l,m);a.hitArea=e;return a}function randomFloatBetween(a,e,b){"undefined"===typeof b&&(b=2);return parseFloat(Math.min(a+Math.random()*(e-a),e).toFixed(b))}function shuffle(a){for(var e=a.length,b,c;0!==e;)c=Math.floor(Math.random()*e),--e,b=a[e],a[e]=a[c],a[c]=b;return a}function easeLinear(a,e,b,c){return b*a/c+e}
function easeInQuad(a,e,b,c){return b*(a/=c)*a+e}function easeInSine(a,e,b,c){return-b*Math.cos(a/c*(Math.PI/2))+b+e}function easeInCubic(a,e,b,c){return b*(a/=c)*a*a+e}function getTrajectoryPoint(a,e){var b=new createjs.Point,c=(1-a)*(1-a),l=a*a;b.x=c*e.start.x+2*(1-a)*a*e.traj.x+l*e.end.x;b.y=c*e.start.y+2*(1-a)*a*e.traj.y+l*e.end.y;return b}function formatTime(a){a/=1E3;var e=Math.floor(a/60);a=parseFloat(a-60*e).toFixed(1);var b="";b=10>e?b+("0"+e+":"):b+(e+":");return 10>a?b+("0"+a):b+a}
function degreesToRadians(a){return a*Math.PI/180}function checkRectCollision(a,e){var b=getBounds(a,.9);var c=getBounds(e,.98);return calculateIntersection(b,c)}
function calculateIntersection(a,e){var b,c,l,m;var d=a.x+(b=a.width/2);var k=a.y+(c=a.height/2);var g=e.x+(l=e.width/2);var h=e.y+(m=e.height/2);d=Math.abs(d-g)-(b+l);k=Math.abs(k-h)-(c+m);return 0>d&&0>k?(d=Math.min(Math.min(a.width,e.width),-d),k=Math.min(Math.min(a.height,e.height),-k),{x:Math.max(a.x,e.x),y:Math.max(a.y,e.y),width:d,height:k,rect1:a,rect2:e}):null}
function getBounds(a,e){var b={x:Infinity,y:Infinity,width:0,height:0};if(a instanceof createjs.Container){b.x2=-Infinity;b.y2=-Infinity;var c=a.children,l=c.length,m;for(m=0;m<l;m++){var d=getBounds(c[m],1);d.x<b.x&&(b.x=d.x);d.y<b.y&&(b.y=d.y);d.x+d.width>b.x2&&(b.x2=d.x+d.width);d.y+d.height>b.y2&&(b.y2=d.y+d.height)}Infinity==b.x&&(b.x=0);Infinity==b.y&&(b.y=0);Infinity==b.x2&&(b.x2=0);Infinity==b.y2&&(b.y2=0);b.width=b.x2-b.x;b.height=b.y2-b.y;delete b.x2;delete b.y2}else{if(a instanceof createjs.Bitmap){l=
a.sourceRect||a.image;m=l.width*e;var k=l.height*e}else if(a instanceof createjs.Sprite)if(a.spriteSheet._frames&&a.spriteSheet._frames[a.currentFrame]&&a.spriteSheet._frames[a.currentFrame].image){l=a.spriteSheet.getFrame(a.currentFrame);m=l.rect.width;k=l.rect.height;c=l.regX;var g=l.regY}else b.x=a.x||0,b.y=a.y||0;else b.x=a.x||0,b.y=a.y||0;c=c||0;m=m||0;g=g||0;k=k||0;b.regX=c;b.regY=g;l=a.localToGlobal(0-c,0-g);d=a.localToGlobal(m-c,k-g);m=a.localToGlobal(m-c,0-g);c=a.localToGlobal(0-c,k-g);b.x=
Math.min(Math.min(Math.min(l.x,d.x),m.x),c.x);b.y=Math.min(Math.min(Math.min(l.y,d.y),m.y),c.y);b.width=Math.max(Math.max(Math.max(l.x,d.x),m.x),c.x)-b.x;b.height=Math.max(Math.max(Math.max(l.y,d.y),m.y),c.y)-b.y}return b}function NoClickDelay(a){this.element=a;window.Touch&&this.element.addEventListener("touchstart",this,!1)}function shuffle(a){for(var e=a.length,b,c;0<e;)c=Math.floor(Math.random()*e),e--,b=a[e],a[e]=a[c],a[c]=b;return a}
NoClickDelay.prototype={handleEvent:function(a){switch(a.type){case "touchstart":this.onTouchStart(a);break;case "touchmove":this.onTouchMove(a);break;case "touchend":this.onTouchEnd(a)}},onTouchStart:function(a){a.preventDefault();this.moved=!1;this.element.addEventListener("touchmove",this,!1);this.element.addEventListener("touchend",this,!1)},onTouchMove:function(a){this.moved=!0},onTouchEnd:function(a){this.element.removeEventListener("touchmove",this,!1);this.element.removeEventListener("touchend",
this,!1);if(!this.moved){a=document.elementFromPoint(a.changedTouches[0].clientX,a.changedTouches[0].clientY);3==a.nodeType&&(a=a.parentNode);var e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0);a.dispatchEvent(e)}}};
(function(){function a(b){var c={focus:"visible",focusin:"visible",pageshow:"visible",blur:"hidden",focusout:"hidden",pagehide:"hidden"};b=b||window.event;b.type in c?document.body.className=c[b.type]:(document.body.className=this[e]?"hidden":"visible","hidden"===document.body.className?s_oMain.stopUpdate():s_oMain.startUpdate())}var e="hidden";e in document?document.addEventListener("visibilitychange",a):(e="mozHidden")in document?document.addEventListener("mozvisibilitychange",a):(e="webkitHidden")in
document?document.addEventListener("webkitvisibilitychange",a):(e="msHidden")in document?document.addEventListener("msvisibilitychange",a):"onfocusin"in document?document.onfocusin=document.onfocusout=a:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=a})();function ctlArcadeResume(){null!==s_oMain&&s_oMain.startUpdate()}function ctlArcadePause(){null!==s_oMain&&s_oMain.stopUpdate()}
function getParamValue(a){for(var e=window.location.search.substring(1).split("&"),b=0;b<e.length;b++){var c=e[b].split("=");if(c[0]==a)return c[1]}}function fullscreenHandler(){ENABLE_FULLSCREEN&&!1!==screenfull.enabled&&(s_bFullscreen=screen.height<window.innerHeight+3&&screen.height>window.innerHeight-3?!0:!1,null!==s_oInterface&&s_oInterface.resetFullscreenBut(),null!==s_oMenu&&s_oMenu.resetFullscreenBut())}
if(screenfull.enabled)screenfull.on("change",function(){s_bFullscreen=screenfull.isFullscreen;null!==s_oInterface&&s_oInterface.resetFullscreenBut();null!==s_oMenu&&s_oMenu.resetFullscreenBut()});
function CSpriteLibrary(){var a,e,b,c,l,m;this.init=function(d,k,g){b=e=0;c=d;l=k;m=g;a={}};this.addSprite=function(d,k){a.hasOwnProperty(d)||(a[d]={szPath:k,oSprite:new Image},e++)};this.getSprite=function(d){return a.hasOwnProperty(d)?a[d].oSprite:null};this._onSpritesLoaded=function(){l.call(m)};this._onSpriteLoaded=function(){c.call(m);++b==e&&this._onSpritesLoaded()};this.loadSprites=function(){for(var d in a)a[d].oSprite.oSpriteLibrary=this,a[d].oSprite.onload=function(){this.oSpriteLibrary._onSpriteLoaded()},
a[d].oSprite.src=a[d].szPath};this.getNumSprites=function(){return e}}
var CANVAS_WIDTH=1500,CANVAS_HEIGHT=768,EDGEBOARD_X=238,EDGEBOARD_Y=60,PRIMARY_FONT="walibi0615bold",SECONDARY_FONT="ComicSansMS-Bold",DISABLE_SOUND_MOBILE=!1,FPS_TIME=1E3/24,STATE_LOADING=0,STATE_MENU=1,STATE_HELP=1,STATE_GAME=3,ON_MOUSE_DOWN=0,ON_MOUSE_UP=1,ON_MOUSE_OVER=2,ON_MOUSE_OUT=3,ON_DRAG_START=4,ON_DRAG_END=5,ON_PRESS_MOVE=6,SCOPE_ACCELERATION,SCOPE_FRICTION,MAX_SCOPE_SPEED,NUM_BULLETS,SCORE_HIT,BONUS_TIME,PLAYER_LIVES,DUCK_INCREASE_SPEED,DUCK_START_SPEED=1,ENABLE_FULLSCREEN,ENABLE_CHECK_ORIENTATION;
function CDuckSettings(){s_aDuckSpriteSheets=[];var a={images:[s_oSpriteLibrary.getSprite("duck_1")],frames:{width:200,height:204,regX:100,regY:102},animations:{fly:[0,6,"fly"],hit:[7,15,"hit_stop"],hit_stop:[15],fall:[16,44,"fall"]}},e={images:[s_oSpriteLibrary.getSprite("duck_2")],frames:{width:200,height:204,regX:100,regY:102},animations:{fly:[0,6,"fly"],hit:[7,15,"hit_stop"],hit_stop:[15],fall:[16,44,"fall"]}},b={images:[s_oSpriteLibrary.getSprite("duck_3")],frames:{width:200,height:204,regX:100,
regY:102},animations:{fly:[0,6,"fly"],hit:[7,15,"hit_stop"],hit_stop:[15],fall:[16,44,"fall"]}},c={images:[s_oSpriteLibrary.getSprite("duck_4")],frames:{width:200,height:204,regX:100,regY:102},animations:{fly:[0,6,"fly"],hit:[7,15,"hit_stop"],hit_stop:[15],fall:[16,44,"fall"]}};s_aDuckSpriteSheets[0]=new createjs.SpriteSheet(a);s_aDuckSpriteSheets[1]=new createjs.SpriteSheet(e);s_aDuckSpriteSheets[2]=new createjs.SpriteSheet(b);s_aDuckSpriteSheets[3]=new createjs.SpriteSheet(c)}var s_aDuckSpriteSheets;
function CPreloader(){var a,e,b,c,l,m,d;this._init=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this);s_oSpriteLibrary.addSprite("bg_menu","./sprites/bg_menu.jpg");s_oSpriteLibrary.addSprite("progress_bar","./sprites/progress_bar.png");s_oSpriteLibrary.loadSprites();d=new createjs.Container;s_oStage.addChild(d)};this.unload=function(){d.removeAllChildren()};this.hide=function(){var k=this;setTimeout(function(){createjs.Tween.get(m).to({alpha:1},500).call(function(){k.unload();
s_oMain.gotoMenu()})},1E3)};this._onImagesLoaded=function(){};this._onAllImagesLoaded=function(){this.attachSprites();s_oMain.preloaderReady()};this.attachSprites=function(){var k=createBitmap(s_oSpriteLibrary.getSprite("bg_menu"));d.addChild(k);k=s_oSpriteLibrary.getSprite("progress_bar");c=createBitmap(k);c.x=CANVAS_WIDTH/2-k.width/2;c.y=CANVAS_HEIGHT-170;d.addChild(c);a=k.width;e=k.height;l=new createjs.Shape;l.graphics.beginFill("rgba(255,255,255,0.01)").drawRect(c.x,c.y,1,e);d.addChild(l);c.mask=
l;b=new createjs.Text("","30px "+PRIMARY_FONT,"#fff");b.x=CANVAS_WIDTH/2;b.y=CANVAS_HEIGHT-125;b.shadow=new createjs.Shadow("#000",2,2,2);b.textBaseline="alphabetic";b.textAlign="center";d.addChild(b);m=new createjs.Shape;m.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);m.alpha=0;d.addChild(m)};this.refreshLoader=function(k){b.text=k+"%";l.graphics.clear();k=Math.floor(k*a/100);l.graphics.beginFill("rgba(255,255,255,0.01)").drawRect(c.x,c.y,k,e)};this._init()}
function CMain(a){var e,b=0,c=0,l=STATE_LOADING,m,d;this.initContainer=function(){s_oCanvas=document.getElementById("canvas");s_oStage=new createjs.Stage(s_oCanvas);s_oStage.preventSelection=!1;createjs.Touch.enable(s_oStage);s_bMobile=isMobile();!1===s_bMobile&&(s_oStage.enableMouseOver(20),$("body").on("contextmenu","#canvas",function(g){return!1}));s_iPrevTime=(new Date).getTime();createjs.Ticker.addEventListener("tick",this._update);createjs.Ticker.framerate=30;navigator.userAgent.match(/Windows Phone/i)&&
(DISABLE_SOUND_MOBILE=!0);s_oSpriteLibrary=new CSpriteLibrary;m=new CPreloader};this.preloaderReady=function(){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||this._initSounds();this._loadImages();e=!0};this.soundLoaded=function(){b++;b===c&&(m.unload(),isIOS()||(s_oSoundTrack=playSound("soundtrack",1,!0)),s_oMain.gotoMenu())};this._initSounds=function(){var g=[];g.push({path:"./sounds/",filename:"duck_hit",loop:!1,volume:1,ingamename:"duck_hit"});g.push({path:"./sounds/",filename:"click",loop:!1,volume:1,
ingamename:"click"});g.push({path:"./sounds/",filename:"duck_intro",loop:!1,volume:1,ingamename:"duck_intro"});g.push({path:"./sounds/",filename:"game_over",loop:!1,volume:1,ingamename:"game_over"});g.push({path:"./sounds/",filename:"shot",loop:!1,volume:1,ingamename:"shot"});g.push({path:"./sounds/",filename:"no_bullets",loop:!1,volume:1,ingamename:"no_bullets"});g.push({path:"./sounds/",filename:"soundtrack",loop:!0,volume:1,ingamename:"soundtrack"});c+=g.length;s_aSounds=[];for(var h=0;h<g.length;h++)s_aSounds[g[h].ingamename]=
new Howl({src:[g[h].path+g[h].filename+".mp3",g[h].path+g[h].filename+".ogg"],autoplay:!1,preload:!0,loop:g[h].loop,volume:g[h].volume,onload:s_oMain.soundLoaded})};this._loadImages=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this);s_oSpriteLibrary.addSprite("but_play","./sprites/but_play.png");s_oSpriteLibrary.addSprite("but_exit","./sprites/but_exit.png");s_oSpriteLibrary.addSprite("bg_menu","./sprites/bg_menu.jpg");s_oSpriteLibrary.addSprite("msg_box","./sprites/msg_box.png");
s_oSpriteLibrary.addSprite("joypad","./sprites/joypad.png");s_oSpriteLibrary.addSprite("shot_panel","./sprites/shot_panel.png");s_oSpriteLibrary.addSprite("hit_panel","./sprites/hit_panel.png");s_oSpriteLibrary.addSprite("bullet","./sprites/bullet.png");s_oSpriteLibrary.addSprite("tap_shot","./sprites/tap_shot.png");s_oSpriteLibrary.addSprite("hit_icon","./sprites/hit_icon.png");s_oSpriteLibrary.addSprite("audio_icon","./sprites/audio_icon.png");s_oSpriteLibrary.addSprite("bg_game","./sprites/bg_game.jpg");
s_oSpriteLibrary.addSprite("grass","./sprites/grass.png");s_oSpriteLibrary.addSprite("scope","./sprites/gun_sight.png");s_oSpriteLibrary.addSprite("tap_shot","./sprites/tap_shot.png");s_oSpriteLibrary.addSprite("duck_1","./sprites/duck_1.png");s_oSpriteLibrary.addSprite("duck_2","./sprites/duck_2.png");s_oSpriteLibrary.addSprite("duck_3","./sprites/duck_3.png");s_oSpriteLibrary.addSprite("duck_4","./sprites/duck_4.png");s_oSpriteLibrary.addSprite("life","./sprites/life.png");s_oSpriteLibrary.addSprite("space_bar",
"./sprites/space_bar.png");s_oSpriteLibrary.addSprite("keys","./sprites/keys.png");s_oSpriteLibrary.addSprite("swift_hand","./sprites/swift_hand.png");s_oSpriteLibrary.addSprite("touch_hand","./sprites/touch_hand.png");s_oSpriteLibrary.addSprite("dividing_line","./sprites/dividing_line.png");s_oSpriteLibrary.addSprite("rock_sx_1","./sprites/rock_sx_1.png");s_oSpriteLibrary.addSprite("rock_sx_2","./sprites/rock_sx_2.png");s_oSpriteLibrary.addSprite("rock_dx_1","./sprites/rock_dx_1.png");s_oSpriteLibrary.addSprite("rock_dx_2",
"./sprites/rock_dx_2.png");s_oSpriteLibrary.addSprite("but_home","./sprites/but_home.png");s_oSpriteLibrary.addSprite("but_restart","./sprites/but_restart.png");s_oSpriteLibrary.addSprite("but_credits","./sprites/but_credits.png");s_oSpriteLibrary.addSprite("but_fullscreen","./sprites/but_fullscreen.png");s_oSpriteLibrary.addSprite("logo_ctl","./sprites/logo_ctl.png");c+=s_oSpriteLibrary.getNumSprites();s_oSpriteLibrary.loadSprites()};this._onImagesLoaded=function(){b++;m.refreshLoader(Math.floor(b/
c*100));b===c&&(m.unload(),isIOS()||(s_oSoundTrack=playSound("soundtrack",1,!0)),this.gotoMenu())};this._onAllImagesLoaded=function(){};this.gotoMenu=function(){new CMenu;l=STATE_MENU};this.gotoGame=function(){d=new CGame(k);l=STATE_GAME};this.gotoHelp=function(){new CHelp;l=STATE_HELP};this.stopUpdate=function(){e=!1;createjs.Ticker.paused=!0;$("#block_game").css("display","block");!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||Howler.mute(!0)};this.startUpdate=function(){s_iPrevTime=(new Date).getTime();
e=!0;createjs.Ticker.paused=!1;$("#block_game").css("display","none");(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)&&s_bAudioActive&&Howler.mute(!1)};this._update=function(g){if(!1!==e){var h=(new Date).getTime();s_iTimeElaps=h-s_iPrevTime;s_iCntTime+=s_iTimeElaps;s_iCntFps++;s_iPrevTime=h;1E3<=s_iCntTime&&(s_iCurFps=s_iCntFps,s_iCntTime-=1E3,s_iCntFps=0);l===STATE_GAME&&d.update();s_oStage.update(g)}};s_oMain=this;var k=a;ENABLE_FULLSCREEN=a.fullscreen;ENABLE_CHECK_ORIENTATION=a.check_orientation;
this.initContainer()}var s_bMobile,s_bAudioActive=!0,s_iCntTime=0,s_iTimeElaps=0,s_iPrevTime=0,s_iCntFps=0,s_iCurFps=0,s_oDrawLayer,s_oStage,s_oMain,s_oSpriteLibrary,s_oSoundTrack=null,s_oCanvas,s_bFullscreen=!1,s_aSounds;
function CJoypad(a,e,b,c,l){var m,d,k,g,h,t,A=[],q,B;this._init=function(r,F,v,E,n){m=r.height/2;k=d=0;g=r.height/30;h=[];t=[];B=new createjs.Container;B.x=F;B.y=v;E.addChild(B);F=new createjs.SpriteSheet({images:[r],frames:{width:r.width/2,height:r.height,regX:r.width/2/2,regY:r.height/2},animations:{bg:[0],stick:[1]}});v=createSprite(F,"bg",r.width/2/2,r.height/2,r.width/2,r.height);q=createSprite(F,"stick",r.width/2/2,r.height/2,r.width/2,r.height);B.addChild(v,q);n||(B.visible=!1);E.on("mousedown",
this.onPressStart);E.on("pressmove",this.onPressMove);E.on("pressup",this.onPressRelease)};this.addFireButtonListener=function(r,F,v,E){h[r]=F;t[r]=v;A=E};this.unload=function(){c.off("mousedown",this.onStageStart);c.off("pressmove",this.onStageMove);c.off("pressup",this.onStageRelease);c.removeChild(B)};this.onPressStart=function(r){r.primary?r.stageX<CANVAS_WIDTH/2?l||(B.visible=!0,B.x=r.stageX,B.y=r.stageY,q.x=0,q.y=0):h[ON_MOUSE_DOWN]&&h[ON_MOUSE_DOWN].call(t[ON_MOUSE_DOWN],A):h[ON_MOUSE_DOWN]&&
h[ON_MOUSE_DOWN].call(t[ON_MOUSE_DOWN],A)};this.onPressMove=function(r){r.primary&&B.visible&&(q.x=r.stageX-B.x,q.y=r.stageY-B.y,k=Math.atan2(q.y,q.x),d=Math.abs(q.x/Math.cos(k)),Math.pow(q.x,2)+Math.pow(q.y,2)>Math.pow(m,2)&&(q.x=m*Math.cos(k),q.y=m*Math.sin(k)))};this.onPressRelease=function(r){r.primary&&(l?(new createjs.Tween(q)).to({x:0,y:0},200).call(function(){k=d=0}):(B.visible=!1,k=d=0))};this.update=function(){return d>g?k:null};this._init(a,e,b,c,l)}
function CTextButton(a,e,b,c,l,m,d){var k,g,h;this._init=function(t,A,q,B,r,F,v){k=[];g=[];var E=createBitmap(q),n=Math.ceil(v/20),H=new createjs.Text(B,v+"px "+r,"#000000");H.textAlign="center";H.textBaseline="alphabetic";var I=H.getBounds();H.x=q.width/2+n;H.y=Math.floor(q.height/2)+I.height/3+n;B=new createjs.Text(B,v+"px "+r,F);B.textAlign="center";B.textBaseline="alphabetic";I=B.getBounds();B.x=q.width/2;B.y=Math.floor(q.height/2)+I.height/3;h=new createjs.Container;h.x=t;h.y=A;h.regX=q.width/
2;h.regY=q.height/2;s_bMobile||(h.cursor="pointer");h.addChild(E,H,B);s_oStage.addChild(h);this._initListener()};this.unload=function(){h.off("mousedown");h.off("pressup");s_oStage.removeChild(h)};this.setVisible=function(t){h.visible=t};this._initListener=function(){oParent=this;h.on("mousedown",this.buttonDown);h.on("pressup",this.buttonRelease)};this.addEventListener=function(t,A,q){k[t]=A;g[t]=q};this.buttonRelease=function(){h.scaleX=1;h.scaleY=1;playSound("click",1,!1);k[ON_MOUSE_UP]&&k[ON_MOUSE_UP].call(g[ON_MOUSE_UP])};
this.buttonDown=function(){h.scaleX=.9;h.scaleY=.9;k[ON_MOUSE_DOWN]&&k[ON_MOUSE_DOWN].call(g[ON_MOUSE_DOWN])};this.setPosition=function(t,A){h.x=t;h.y=A};this.setX=function(t){h.x=t};this.setY=function(t){h.y=t};this.getButtonImage=function(){return h};this.getX=function(){return h.x};this.getY=function(){return h.y};this._init(a,e,b,c,l,m,d);return this}
function CToggle(a,e,b,c,l){var m,d,k,g;this._init=function(h,t,A,q){d=[];k=[];var B=new createjs.SpriteSheet({images:[A],frames:{width:A.width/2,height:A.height,regX:A.width/2/2,regY:A.height/2},animations:{state_true:[0],state_false:[1]}});m=q;g=createSprite(B,"state_"+m,A.width/2/2,A.height/2,A.width/2,A.height);g.x=h;g.y=t;g.stop();s_bMobile||(g.cursor="pointer");l.addChild(g);this._initListener()};this.unload=function(){g.off("mousedown",this.buttonDown);g.off("pressup",this.buttonRelease);l.removeChild(g)};
this._initListener=function(){g.on("mousedown",this.buttonDown);g.on("pressup",this.buttonRelease)};this.addEventListener=function(h,t,A){d[h]=t;k[h]=A};this.setActive=function(h){m=h;g.gotoAndStop("state_"+m)};this.buttonRelease=function(){g.scaleX=1;g.scaleY=1;playSound("click",1,!1);m=!m;g.gotoAndStop("state_"+m);d[ON_MOUSE_UP]&&d[ON_MOUSE_UP].call(k[ON_MOUSE_UP],m)};this.buttonDown=function(){g.scaleX=.9;g.scaleY=.9;d[ON_MOUSE_DOWN]&&d[ON_MOUSE_DOWN].call(k[ON_MOUSE_DOWN])};this.setPosition=function(h,
t){g.x=h;g.y=t};this._init(a,e,b,c)}
function CGfxButton(a,e,b,c){var l,m,d;this._init=function(k,g,h,t){l=[];m=[];d=createBitmap(h);d.x=k;d.y=g;d.regX=h.width/2;d.regY=h.height/2;s_bMobile||(d.cursor="pointer");t.addChild(d);this._initListener()};this.unload=function(){d.off("mousedown",this.buttonDown);d.off("pressup",this.buttonRelease);c.removeChild(d)};this.setVisible=function(k){d.visible=k};this._initListener=function(){d.on("mousedown",this.buttonDown);d.on("pressup",this.buttonRelease)};this.addEventListener=function(k,g,h){l[k]=
g;m[k]=h};this.buttonRelease=function(){d.scaleX=1;d.scaleY=1;playSound("click",1,!1);l[ON_MOUSE_UP]&&l[ON_MOUSE_UP].call(m[ON_MOUSE_UP])};this.buttonDown=function(){d.scaleX=.9;d.scaleY=.9;l[ON_MOUSE_DOWN]&&l[ON_MOUSE_DOWN].call(m[ON_MOUSE_DOWN])};this.setPosition=function(k,g){d.x=k;d.y=g};this.setX=function(k){d.x=k};this.setY=function(k){d.y=k};this.getButtonImage=function(){return d};this.getX=function(){return d.x};this.getY=function(){return d.y};this._init(a,e,b,c);return this}
function CMenu(){var a,e,b,c,l,m,d,k,g,h,t,A,q,B,r=null,F=null;this._init=function(){g=createBitmap(s_oSpriteLibrary.getSprite("bg_menu"));s_oStage.addChild(g);var v=s_oSpriteLibrary.getSprite("but_play");l=CANVAS_WIDTH/2;m=CANVAS_HEIGHT-150;h=new CGfxButton(l,m,v,s_oStage);h.addEventListener(ON_MOUSE_UP,this._onButPlayRelease,this);if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)v=s_oSpriteLibrary.getSprite("audio_icon"),d=CANVAS_WIDTH-v.height/2-10,k=v.height/2+10,A=new CToggle(d,k,v,s_bAudioActive,
s_oStage),A.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this),setVolume("soundtrack",1);v=s_oSpriteLibrary.getSprite("but_credits");b=v.height/2+10;c=v.height/2+10;q=new CGfxButton(b,c,v,s_oStage);q.addEventListener(ON_MOUSE_UP,this._onButInfoRelease,this);v=window.document;var E=v.documentElement;r=E.requestFullscreen||E.mozRequestFullScreen||E.webkitRequestFullScreen||E.msRequestFullscreen;F=v.exitFullscreen||v.mozCancelFullScreen||v.webkitExitFullscreen||v.msExitFullscreen;!1===ENABLE_FULLSCREEN&&
(r=!1);r&&screenfull.enabled&&(v=s_oSpriteLibrary.getSprite("but_fullscreen"),a=b+v.width/2+10,e=c,B=new CToggle(a,e,v,s_bFullscreen,s_oStage),B.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this));t=new createjs.Shape;t.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);s_oStage.addChild(t);createjs.Tween.get(t).to({alpha:0},1E3).call(function(){t.visible=!1});this.refreshButtonPos(s_iOffsetX,s_iOffsetY)};this.refreshButtonPos=function(v,E){!1!==DISABLE_SOUND_MOBILE&&!1!==
s_bMobile||A.setPosition(d-v,k);r&&screenfull.enabled&&B.setPosition(a+s_iOffsetX,e+s_iOffsetY);h.setPosition(l,m-E);q.setPosition(b+v,c+E)};this.unload=function(){h.unload();h=null;q.unload();if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)A.unload(),A=null;r&&screenfull.enabled&&B.unload();s_oStage.removeChild(g);s_oMenu=g=null};this._onAudioToggle=function(){Howler.mute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this._onButPlayRelease=function(){this.unload();isIOS()&&null===s_oSoundTrack&&(s_oSoundTrack=
playSound("soundtrack",1,!0));$(s_oMain).trigger("start_session");$(s_oMain).trigger("start_level",1);s_oMain.gotoGame()};this._onButInfoRelease=function(){new CCreditsPanel};this.resetFullscreenBut=function(){r&&screenfull.enabled&&B.setActive(s_bFullscreen)};this._onFullscreenRelease=function(){s_bFullscreen?F.call(window.document):r.call(window.document.documentElement);sizeHandler()};s_oMenu=this;this._init()}var s_oMenu=null;
function CGame(a){function e(p){p.preventDefault();switch(p.keyCode){case 37:y.leftStop();break;case 38:y.upStop();break;case 39:y.rightStop();break;case 40:y.downStop()}}function b(p){p||(p=window.event);p.preventDefault();switch(p.keyCode){case 32:s_oGame.onShot();break;case 37:s_oGame.onLeft();break;case 38:s_oGame.onUp();break;case 39:s_oGame.onRight();break;case 40:s_oGame.onDown()}}var c,l,m,d,k,g,h,t,A,q,B,r,F=!1,v,E,n,H,I,D,z,N=null,x,Q,O,y,P=null;this._init=function(){m=c=0;d=BONUS_TIME;
l=NUM_BULLETS;k=0;g=PLAYER_LIVES;t=A=h=0;q=Math.PI/8;E=[];n=[];H=[];I=[];D=[];N=null;new CDuckSettings;var p=createBitmap(s_oSpriteLibrary.getSprite("bg_game"));s_oStage.addChild(p);O=new createjs.Container;s_oStage.addChild(O);p=s_oSpriteLibrary.getSprite("grass");var G=createBitmap(p);x=new createjs.Container;x.x=CANVAS_WIDTH/2-p.width/2;x.y=CANVAS_HEIGHT-p.height;s_oStage.addChild(x);x.addChild(G);Q=new createjs.Container;s_oStage.addChild(Q);Q.on("mousedown",function(){});p=s_oSpriteLibrary.getSprite("rock_sx_1");
B=p.width;p=createBitmap(p);Q.addChild(p);p=s_oSpriteLibrary.getSprite("rock_sx_2");G=createBitmap(p);G.regY=p.height;G.y=CANVAS_HEIGHT;G.x=B;Q.addChild(G);p=s_oSpriteLibrary.getSprite("rock_dx_1");r=p.width;p=createBitmap(p);p.regX=r;p.x=CANVAS_WIDTH;Q.addChild(p);p=s_oSpriteLibrary.getSprite("rock_dx_2");G=createBitmap(p);G.regX=p.width;G.regY=p.height;G.x=CANVAS_WIDTH-r;G.y=CANVAS_HEIGHT;Q.addChild(G);y=new CScope;z=new CInterface;this._initDucks();this._initPos();this.initDuckObj();new CHelpPanel;
setVolume("soundtrack",.5)};this.unload=function(){F=!1;y.unload();z.unload();null!==N&&N.unload();for(var p=0;p<v.length;p++)v[p].unload();Q.off("mousedown",function(){});s_bMobile||(document.onkeydown=null,document.onkeyup=null);s_oStage.removeAllChildren()};this._initDucks=function(){A=12;v=[];for(var p,G=0;G<A;G++)p=G%4,v.push(new CDuck(O,p))};this._initPos=function(){for(var p=B;p<CANVAS_WIDTH-r;)E.push(new createjs.Point(p,565)),p+=CANVAS_WIDTH/20;for(p=0;p<E.length;p++)I.push(p);n[0]=new createjs.Point(-120,
400);n[1]=new createjs.Point(-120,200);n[2]=new createjs.Point(250+B,-120);n[3]=new createjs.Point(500+B,-120);H[0]=new createjs.Point(CANVAS_WIDTH+120,400);H[1]=new createjs.Point(CANVAS_WIDTH+120,200);H[2]=new createjs.Point(1E3-r,-120);H[3]=new createjs.Point(750-r,-120);for(p=0;p<n.length;p++)D.push(p)};this.initDuckObj=function(){playSound("duck_intro",1,!1);if(h===DUCK_ON_SCREEN.length)for(var p=h=0;p<v.length;p++)v[p].increaseSpeed();shuffle(I);shuffle(D);var G=[];for(p=0;p<A;p++)G.push(p);
shuffle(G);for(p=0;p<DUCK_ON_SCREEN[h];p++){var Y=G[p];I[p]<E.length/2?v[Y].reset(E[I[p]],H[D[p]]):v[Y].reset(E[I[p]],n[D[p]]);m++;v[Y].show()}k=DUCK_ON_SCREEN[h];h++;this._refreshScreen()};this.checkDuck=function(){k--;0===k&&this.initDuckObj()};this.onKeyUpReleased=function(){y.upStop()};this.onKeyDownReleased=function(){y.downStop()};this.onKeyLeftReleased=function(){y.leftStop()};this.onKeyRightReleased=function(){y.rightStop()};this.onLeft=function(){y.moveLeft()};this.onRight=function(){y.moveRight()};
this.onUp=function(){y.moveUp()};this.onDown=function(){y.moveDown()};this.onShot=function(){if(0===l)z.noAmmo(),playSound("no_bullets",1,!1);else{l--;z.refreshBullets(l);y.playShot();for(var p=0;p<A;p++)this.checkCollision(v[p])}};this._reloadRifle=function(){l=NUM_BULLETS;z.reloadBullets(l)};this._showTime=function(){z.refreshTime(d)};this._checkIfDuckHit=function(p){if(y.bullsEye().x<B||y.bullsEye().x>CANVAS_WIDTH-r)return!1;if(y.bullsEye().x>p.target().x&&y.bullsEye().x<p.target().x+p.target().w&&
y.bullsEye().y>p.target().y&&y.bullsEye().y<p.target().y+p.target().h)return!0};this.checkCollision=function(p){if(this._checkIfDuckHit(p)&&p.isVisible()&&!p.isHit()){p.onHit();var G=SCORE_HIT+d;t++;1<t&&(G*=t);t=0;c+=G;new CScoreText(G,p.getPos().x,p.getPos().y);z.refreshScore(c);playSound("duck_hit",1,!1)}};this.setHitPane=function(){z.setHit()};this.setNoHitPane=function(){z.setNoHit()};this.subtractLife=function(){g--;0>=g&&(g=0,this.gameOver(),F=!1);z.refreshLife(g)};this._refreshScreen=function(){this._reloadRifle();
d=BONUS_TIME;z.noAmmoDelete()};this.onExit=function(){$(s_oMain).trigger("end_session");$(s_oMain).trigger("end_level",1);$(s_oMain).trigger("show_interlevel_ad");this.unload();s_oMain.gotoMenu()};this.onRestart=function(){this.unload();s_oMain.gotoGame();$(s_oMain).trigger("show_interlevel_ad");$(s_oMain).trigger("restart_level",1)};this._onExitHelp=function(){F=!0;if(s_bMobile){var p=s_oSpriteLibrary.getSprite("joypad");P=new CJoypad(p,100,700,s_oStage,!1);P.addFireButtonListener(ON_MOUSE_DOWN,
this.onShot,this)}else document.onkeydown=b,document.onkeyup=e};this.gameOver=function(){null===N&&(playSound("game_over",1,!1),N=new CEndPanel(s_oSpriteLibrary.getSprite("msg_box")),N.show(c))};this.checkController=function(p){null===p?y.resetAllDirection():p>=-q&&p<q?(y.moveRight(),y.downStop(),y.upStop(),y.leftStop()):p>=q&&p<3*q?(y.moveDown(),y.moveRight(),y.upStop(),y.leftStop()):p>=3*q&&p<5*q?(y.moveDown(),y.upStop(),y.rightStop(),y.leftStop()):p>=5*q&&p<7*q?(y.moveDown(),y.moveLeft(),y.upStop(),
y.rightStop()):p>=7*q||p<7*-q?(y.moveLeft(),y.downStop(),y.rightStop(),y.upStop()):p>=7*-q&&p<5*-q?(y.moveUp(),y.moveLeft(),y.downStop(),y.rightStop()):p>=5*-q&&p<3*-q?(y.moveUp(),y.downStop(),y.rightStop(),y.leftStop()):p>=3*-q&&p<-q&&(y.moveUp(),y.moveRight(),y.downStop(),y.leftStop())};this.update=function(){if(F){P&&this.checkController(P.update());for(var p=0;p<A;p++)v[p].update();y.update();d-=s_iTimeElaps;0>d&&(d=0);this._showTime()}};s_oGame=this;SCOPE_ACCELERATION=a.scope_accelleration;SCOPE_FRICTION=
a.scope_friction;MAX_SCOPE_SPEED=a.max_scope_speed;NUM_BULLETS=a.num_bullets;SCORE_HIT=a.hit_score;BONUS_TIME=a.bonus_time;PLAYER_LIVES=a.lives;DUCK_INCREASE_SPEED=a.duck_increase_speed;DUCK_ON_SCREEN=a.duck_occurence;this._init()}var s_oGame;TEXT_GAMEOVER="GAME OVER";TEXT_SCORE="SCORE";TEXT_HELP1="USE ARROW BUTTONS OR KEYS TO MOVE THE SCOPE";TEXT_HELP2="CLICK SPACEBAR TO SHOOT";TEXT_HELP3="YOU HAVE 3 BULLETS TO HIT THE DUCKS, DON'T LET THEM FLY AWAY OR YOU WILL LOSE A LIFE";TEXT_HELP_MOB1="TOUCH THE LEFT SIDE OF THE SCREEN TO MOVE THE SCOPE";
TEXT_HELP_MOB2="TOUCH THE RIGHT SIDE OF THE SCREEN TO SHOOT";TEXT_HIT="HIT";TEXT_BONUS="BONUS";TEXT_SCORE="SCORE";TEXT_NOAMMO="NO AMMO";TEXT_CREDITS_DEVELOPED="DEVELOPED BY";TEXT_SHARE_IMAGE="200x200.jpg";TEXT_SHARE_TITLE="Congratulations!";TEXT_SHARE_MSG1="You collected <strong>";TEXT_SHARE_MSG2=" points</strong>!<br><br>Share your score with your friends!";TEXT_SHARE_SHARE1="My score is ";TEXT_SHARE_SHARE2=" points! Can you do better?";
function CInterface(){var a,e,b,c,l,m,d,k,g,h,t,A,q,B,r,F,v,E,n,H,I,D,z,N,x,Q,O,y,P,p,G=null,Y=null;this._init=function(){h=0;n=[];b=CANVAS_WIDTH/2-115;c=CANVAS_HEIGHT;O=new createjs.Container;O.x=b;O.y=c;s_oStage.addChild(O);var C=s_oSpriteLibrary.getSprite("hit_panel");A=createBitmap(C);A.regX=C.width/2;A.regY=C.height;O.addChild(A);N=new createjs.Text(TEXT_HIT,"30px "+PRIMARY_FONT,"#ffffff");N.x=-213;N.y=-95;N.textAlign="center";N.textBaseline="middle";O.addChild(N);D=new createjs.Text(TEXT_BONUS,
"22px "+PRIMARY_FONT,"#ffffff");D.x=N.x+133;D.y=N.y-2;D.textAlign="center";D.textBaseline="middle";O.addChild(D);z=new createjs.Text("0000","30px "+SECONDARY_FONT,"#ffffff");z.x=70;z.y=-99;z.textAlign="right";z.textBaseline="middle";O.addChild(z);C=s_oSpriteLibrary.getSprite("life");Q=createBitmap(C);Q.regX=C.width/2;Q.regY=C.height/2;Q.x=167;Q.y=-96;O.addChild(Q);F=new createjs.Text("X "+PLAYER_LIVES,"22px "+PRIMARY_FONT,"#ffffff");F.x=Q.x+83;F.y=Q.y;F.textAlign="right";F.textBaseline="middle";F.shadow=
new createjs.Shadow("#000",2,2,2);O.addChild(F);v=[];C=s_oSpriteLibrary.getSprite("hit_icon");var R=new createjs.SpriteSheet({images:[C],frames:{width:51,height:43},animations:{nohit:[0],hit:[1]}});C=-260;for(var U=-52,f=0;9>f;f++){var T=createSprite(R,"nohit",0,0,51,43);T.x=C;T.y=U;T.visible=!1;O.addChild(T);v[f]=T;C+=58}C=s_oSpriteLibrary.getSprite("shot_panel");P=createBitmap(C);P.regX=C.width/2;P.regY=C.height;P.x=380;O.addChild(P);r=new createjs.Text(TEXT_NOAMMO,"30px "+PRIMARY_FONT,"#ffffff");
r.x=P.x;r.y=P.y-90;r.lineWidth=60;r.textAlign="center";r.textBaseline="middle";r.shadow=new createjs.Shadow("#000",2,2,2);r.visible=!1;O.addChild(r);E=[];R=30-1.5*NUM_BULLETS;C=P.x-80;U=P.y-85;for(f=0;f<NUM_BULLETS;f++)T=createBitmap(s_oSpriteLibrary.getSprite("bullet")),T.x=C,T.y=U,O.addChild(T),E[f]=T,C+=R;l=0;y=new createjs.Container;s_oStage.addChild(y);H=new createjs.Text(TEXT_SCORE,"30px "+PRIMARY_FONT,"#000");H.x=32;H.y=12;y.addChild(H);I=new createjs.Text(TEXT_SCORE,"30px "+PRIMARY_FONT,"#ffffff");
I.x=30;I.y=10;y.addChild(I);B=new createjs.Text("0","30px "+PRIMARY_FONT,"#000");B.x=172;B.y=12;y.addChild(B);q=new createjs.Text("0","30px "+PRIMARY_FONT,"#ffffff");q.x=170;q.y=10;y.addChild(q);C=s_oSpriteLibrary.getSprite("but_exit");k=CANVAS_WIDTH-C.height/2-10;g=C.height/2+10;t=new CGfxButton(k,g,C,s_oStage);t.addEventListener(ON_MOUSE_UP,this._onExit,this);!1===DISABLE_SOUND_MOBILE||!1===s_bMobile?(C=s_oSpriteLibrary.getSprite("audio_icon"),m=k-C.width/2-10,d=g,x=new CToggle(m,d,C,s_bAudioActive,
s_oStage),x.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this),C=s_oSpriteLibrary.getSprite("but_fullscreen"),a=m-C.width/2-10,e=d):(C=s_oSpriteLibrary.getSprite("but_fullscreen"),a=k-C.width/2-10,e=g);U=window.document;f=U.documentElement;G=f.requestFullscreen||f.mozRequestFullScreen||f.webkitRequestFullScreen||f.msRequestFullscreen;Y=U.exitFullscreen||U.mozCancelFullScreen||U.webkitExitFullscreen||U.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(G=!1);G&&screenfull.enabled&&(p=new CToggle(a,e,C,
s_bFullscreen,s_oStage),p.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this));this.refreshButtonPos(s_iOffsetX,s_iOffsetY)};this.refreshButtonPos=function(C,R){t.setPosition(k-C,g);!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||x.setPosition(m-C,d);G&&screenfull.enabled&&p.setPosition(a-s_iOffsetX,e+s_iOffsetY);y.x=l+C;O.y=c-2*R};this.unload=function(){t.unload();t=null;if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)x.unload(),x=null;G&&screenfull.enabled&&p.unload();s_oInterface=null};this.refreshScore=
function(C){B.text=C;q.text=C};this.refreshTime=function(C){z.text=C};this.refreshLife=function(C){F.text="X "+C};this.refreshBullets=function(C){E[C].visible=!1};this.reloadBullets=function(C){for(var R=0;R<C;R++)E[R].visible=!0};this.noAmmo=function(){r.visible=!0;r.alpha=1;createjs.Tween.get(r,{override:!0}).to({alpha:0},1E3,createjs.Ease.quadIn)};this.noAmmoDelete=function(){r.visible=!1;createjs.Tween.removeTweens(r)};this.setHit=function(){n.push(!0);this._setVisibleDuck()};this.setNoHit=function(){n.push(!1);
this._setVisibleDuck()};this._setVisibleDuck=function(){if(8<h){for(var C=0;8>C;C++)!0===n[h-8+C]?v[C].gotoAndPlay("hit"):v[C].gotoAndPlay("nohit");!0===n[h]?v[8].gotoAndPlay("hit"):v[8].gotoAndPlay("nohit")}else!0===n[h]?(v[h].gotoAndPlay("hit"),v[h].visible=!0):!1===n[h]&&(v[h].gotoAndPlay("nohit"),v[h].visible=!0);h++};this._onKeyUpReleased=function(){s_oGame.onKeyUpReleased()};this._onKeyDownReleased=function(){s_oGame.onKeyDownReleased()};this._onKeyRightReleased=function(){s_oGame.onKeyRightReleased()};
this._onKeyLeftReleased=function(){s_oGame.onKeyLeftReleased()};this._onLeftPressed=function(){s_oGame.onLeft()};this._onRightPressed=function(){s_oGame.onRight()};this._onDownPressed=function(){s_oGame.onDown()};this._onUpPressed=function(){s_oGame.onUp()};this._onShot=function(){s_oGame.onShot()};this.onExitFromHelp=function(){(void 0).unload()};this._onAudioToggle=function(){Howler.mute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this.resetFullscreenBut=function(){G&&screenfull.enabled&&p.setActive(s_bFullscreen)};
this._onFullscreenRelease=function(){s_bFullscreen?Y.call(window.document):G.call(window.document.documentElement);sizeHandler()};this._onExit=function(){s_oGame.onExit()};s_oInterface=this;this._init();return this}var s_oInterface=null;
function CHelpPanel(){var a,e,b,c,l,m,d,k,g,h;this._init=function(){k=new createjs.Container;s_oStage.addChild(k);var t=s_oSpriteLibrary.getSprite("msg_box");d=createBitmap(t);s_oStage.addChild(d);e=new createjs.Text("","22px "+PRIMARY_FONT,"#000000");e.textAlign="left";e.lineWidth=360;e.textBaseline="middle";e.x=472;e.y=246;a=new createjs.Text("","22px "+PRIMARY_FONT,"#ffffff");a.textAlign="left";a.lineWidth=360;a.textBaseline="middle";a.x=470;a.y=244;g=createBitmap(s_oSpriteLibrary.getSprite("keys"));
g.x=905;g.y=224;c=new createjs.Text("","22px "+PRIMARY_FONT,"#000000");c.textAlign="left";c.textBaseline="middle";c.lineWidth=300;c.x=472;c.y=366;b=new createjs.Text("","22px "+PRIMARY_FONT,"#ffffff");b.textAlign="left";b.lineWidth=300;b.textBaseline="middle";b.x=470;b.y=364;h=createBitmap(s_oSpriteLibrary.getSprite("space_bar"));h.x=845;h.y=369;m=new createjs.Text(TEXT_HELP3,"22px "+PRIMARY_FONT,"#000000");m.textAlign="left";m.lineWidth=440;m.textBaseline="middle";m.x=472;m.y=501;l=new createjs.Text(TEXT_HELP3,
"22px "+PRIMARY_FONT,"#ffffff");l.textAlign="left";l.lineWidth=440;l.textBaseline="middle";l.x=470;l.y=499;k.addChild(d,e,a,c,b,m,l,g,h);if(!1===s_bMobile)e.text=TEXT_HELP1,a.text=TEXT_HELP1,c.text=TEXT_HELP2,b.text=TEXT_HELP2;else{e.text=TEXT_HELP_MOB1;e.lineWidth=290;e.textAlign="center";e.x=594;a.text=TEXT_HELP_MOB1;a.lineWidth=290;a.textAlign="center";a.x=592;c.text=TEXT_HELP_MOB2;c.x=902;c.y=e.y;c.lineWidth=290;c.textAlign="center";b.text=TEXT_HELP_MOB2;b.x=900;b.y=a.y;b.lineWidth=290;b.textAlign=
"center";a.scaleX=a.scaleY=e.scaleX=e.scaleY=b.scaleX=b.scaleY=c.scaleX=c.scaleY=.8;t=s_oSpriteLibrary.getSprite("dividing_line");var A=createBitmap(t);A.regX=t.width/2;A.x=CANVAS_WIDTH/2;A.y=210;k.addChild(A);t=s_oSpriteLibrary.getSprite("swift_hand");g.regY=t.height/2;g.x=550;g.y=380;g.image=t;createjs.Tween.get(g,{loop:!0}).to({x:g.x+50},1E3,createjs.Ease.cubicIn).to({x:550},1E3,createjs.Ease.cubicIn);createjs.Tween.get(g,{loop:!0}).to({y:g.y+30},500,createjs.Ease.sinOut).to({y:380},500,createjs.Ease.sinIn);
t=s_oSpriteLibrary.getSprite("touch_hand");h.regX=t.width/2;h.regY=t.height/2;h.x=900;h.y=380;h.image=t;createjs.Tween.get(h,{loop:!0}).to({scaleX:.9,scaleY:.9},250,createjs.Ease.cubicIn).to({scaleX:1,scaleY:1},250,createjs.Ease.cubicIn)}t=120/NUM_BULLETS;for(A=0;A<NUM_BULLETS;A++){var q=createBitmap(s_oSpriteLibrary.getSprite("bullet"));q.x=910+A*t;q.y=499;k.addChild(q)}var B=this;k.on("pressup",function(){B._onExitHelp()})};this.unload=function(){s_oStage.removeChild(k);var t=this;k.off("pressup",
function(){t._onExitHelp()})};this._onExitHelp=function(){this.unload();s_oGame._onExitHelp()};this._init()}
function CEndPanel(a){var e,b,c,l,m,d,k,g;this._init=function(h){e=createBitmap(h);m=new createjs.Text("","70px "+PRIMARY_FONT,"#000");m.x=CANVAS_WIDTH/2+2;m.y=CANVAS_HEIGHT/2-170;m.textAlign="center";l=new createjs.Text("","70px "+PRIMARY_FONT,"#ffffff");l.x=CANVAS_WIDTH/2;l.y=CANVAS_HEIGHT/2-172;l.textAlign="center";b=new createjs.Text("","40px "+PRIMARY_FONT,"#000");b.x=CANVAS_WIDTH/2+2;b.y=CANVAS_HEIGHT/2-68;b.textAlign="center";c=new createjs.Text("","40px "+PRIMARY_FONT,"#ffffff");c.x=CANVAS_WIDTH/
2;c.y=CANVAS_HEIGHT/2-70;c.textAlign="center";d=new createjs.Container;d.alpha=0;d.visible=!1;d.addChild(e,b,c,m,l);h=s_oSpriteLibrary.getSprite("but_restart");k=new CGfxButton(CANVAS_WIDTH/2+140,484,h,d);k.addEventListener(ON_MOUSE_UP,this._onRestart,this);h=s_oSpriteLibrary.getSprite("but_home");g=new CGfxButton(CANVAS_WIDTH/2-140,484,h,d);g.addEventListener(ON_MOUSE_UP,this._onExit,this);s_oStage.addChild(d)};this.unload=function(){d.off("mousedown",this._onExit);k.unload();g.unload()};this._initListener=
function(){d.on("mousedown",function(){})};this.show=function(h){playSound("game_over",1,!1);m.text=TEXT_GAMEOVER;l.text=TEXT_GAMEOVER;b.text=TEXT_SCORE+": "+h;c.text=TEXT_SCORE+": "+h;d.visible=!0;var t=this;createjs.Tween.get(d).to({alpha:1},500).call(function(){t._initListener()});$(s_oMain).trigger("save_score",h);$(s_oMain).trigger("share_event",h)};this._onRestart=function(){d.off("mousedown",function(){});s_oStage.removeChild(d);s_oGame.onRestart()};this._onExit=function(){d.off("mousedown",
function(){});s_oStage.removeChild(d);s_oGame.onExit()};this._init(a);return this}
function CDuck(a,e){var b,c,l,m,d,k,g,h,t,A,q,B,r,F;this._init=function(v,E){c=0;l=DUCK_START_SPEED;m=200;b=102;k=300;h=!1;A=v;B=new createjs.Rectangle(0,0,160,80);q=createSprite(s_aDuckSpriteSheets[E],"fly",100,102,200,204);q.visible=!1;q.stop();A.addChild(q)};this._changeSprite=function(){q.spriteSheet=s_aDuckSpriteSheets[Math.floor(4*Math.random())]};this._calculateMid=function(){var v=r.x>F.x?new createjs.Point(r.x+.2*(r.x-F.x),F.y-b/2):new createjs.Point(F.x-.2*(F.x-r.x),F.y-b/2);t={start:r,
end:F,traj:v}};this._selectInterpolation=function(){d=Math.floor(2*Math.random())};this.reset=function(v,E){createjs.Tween.removeTweens(q);q.x=v.x;q.y=v.y;r=v;F=E;h=!1;k=300;this._calculateMid();this._selectInterpolation()};this.increaseSpeed=function(){l+=DUCK_INCREASE_SPEED};this.unload=function(){A.removeChild(q)};this.show=function(){r.x<CANVAS_WIDTH/2&&(q.scaleX=-1);r.x>CANVAS_WIDTH/2&&(q.scaleX=1);q.visible=!0;q.gotoAndPlay("fly");g=!0};this.unShow=function(){q.visible=!1};this._updateRect=
function(){B.x=q.x-80;B.y=q.y-40};this.target=function(){return{x:B.x,y:B.y,w:B.width,h:B.height}};this.setVisible=function(){q.visible=!0};this.isVisible=function(){return q.visible};this.onHit=function(){q.alpha=1;q.gotoAndPlay("hit");c=0;g=h=!0};this.getSprite=function(){return q};this.getPos=function(){return{x:q.x,y:q.y}};this.isHit=function(){return h};this._updateFly=function(){c+=l;c>m&&(c=0,g=q.visible=!1,s_oGame.setNoHitPane(),s_oGame.checkDuck(),s_oGame.subtractLife());switch(d){case 0:var v=
easeLinear(c,0,1,m);break;case 1:v=easeInSine(c,0,1,m)}v=getTrajectoryPoint(v,t);q.x=v.x;q.y=v.y;this._updateRect()};this._updateFall=function(){createjs.Tween.get(q).to({y:CANVAS_HEIGHT},1E3,createjs.Ease.quadIn).call(function(){s_oGame.checkDuck()}).call(function(){s_oGame.setHitPane()})};this.update=function(){if(g)switch(q.currentAnimation){case "fly":this._updateFly();break;case "hit_stop":k-=s_iTimeElaps;0>k&&(k=300,q.gotoAndPlay("fall"));break;case "fall":this._updateFall(),g=!1}};this._init(a,
e)}
function CScope(){var a,e,b,c,l=!1,m=!1,d=!1,k=!1,g,h,t,A;this._init=function(){a=88;e=87.5;h=g=0;var q=s_oSpriteLibrary.getSprite("scope");b=createBitmap(q);b.x=CANVAS_WIDTH/2-a;b.y=CANVAS_HEIGHT/2-e;s_oStage.addChild(b);q={images:[s_oSpriteLibrary.getSprite("tap_shot")],frames:{width:200,height:200,regX:100,regY:100},animations:{show:[0,19,"hide"],hide:[20,21]}};q=new createjs.SpriteSheet(q);c=createSprite(q,"hide",100,100,200,200);c.addEventListener("animationend",this.onAnimationEnd);c.stop();c.visible=
!1;s_oStage.addChild(c)};this.unload=function(){c.removeEventListener("animationend",this.onAnimationEnd)};this.resetAllDirection=function(){k=d=m=l=!1};this.onAnimationEnd=function(){c.visible=!1};this.playShot=function(){c.x=b.x+a;c.y=b.y+e;c.visible=!0;c.gotoAndPlay("show");playSound("shot",1,!1)};this._checkBoundary=function(){b.x+a>CANVAS_WIDTH-200&&(b.x=CANVAS_WIDTH-a-200);200>b.x+a&&(b.x=-a+200);b.y+e>CANVAS_HEIGHT&&(b.y=CANVAS_HEIGHT-e);0>b.y+e&&(b.y=-e)};this.bullsEye=function(){t=b.x+a;
A=b.y+e;return{x:t,y:A}};this.upStop=function(){d=!1};this.downStop=function(){k=!1};this.leftStop=function(){l=!1};this.rightStop=function(){m=!1};this.moveLeft=function(){l=!0;m=!1};this.moveRight=function(){m=!0;l=!1};this.moveUp=function(){d=!0;k=!1};this.moveDown=function(){k=!0;d=!1};this.getSprite=function(){return b};this.update=function(){m&&d?(g+=SCOPE_ACCELERATION,h-=SCOPE_ACCELERATION):m&&k?(g+=SCOPE_ACCELERATION,h+=SCOPE_ACCELERATION):l&&k?(g-=SCOPE_ACCELERATION,h+=SCOPE_ACCELERATION):
l&&d?(g-=SCOPE_ACCELERATION,h-=SCOPE_ACCELERATION):l?g-=SCOPE_ACCELERATION:m?g+=SCOPE_ACCELERATION:d?h-=SCOPE_ACCELERATION:k&&(h+=SCOPE_ACCELERATION);b.x+=g;b.y+=h;g*=SCOPE_FRICTION;h*=SCOPE_FRICTION;g>MAX_SCOPE_SPEED&&(g=MAX_SCOPE_SPEED);g<-MAX_SCOPE_SPEED&&(g=-MAX_SCOPE_SPEED);h>MAX_SCOPE_SPEED&&(h=MAX_SCOPE_SPEED);h<-MAX_SCOPE_SPEED&&(h=-MAX_SCOPE_SPEED);.2>Math.abs(g)&&(g=0);.2>Math.abs(h)&&(h=0);this._checkBoundary()};this._init()}
function CScoreText(a,e,b){var c;this._init=function(l,m,d){c=new createjs.Text("00000","30px "+SECONDARY_FONT,"#ffffff");c.textAlign="right";c.text=l;c.x=m;c.y=d;c.alpha=0;c.shadow=new createjs.Shadow("#000000",2,2,2);s_oStage.addChild(c);var k=this;createjs.Tween.get(c).to({alpha:1},400,createjs.Ease.quadIn).call(function(){k.moveUp()})};this.moveUp=function(){var l=c.y-100,m=this;createjs.Tween.get(c).to({y:l},1E3,createjs.Ease.sineIn).call(function(){m.unload()})};this.unload=function(){s_oStage.removeChild(c)};
this._init(a,e,b)}
function CCreditsPanel(){var a,e,b,c,l,m,d,k;this._init=function(){k=new createjs.Container;s_oStage.addChild(k);var g=s_oSpriteLibrary.getSprite("msg_box");m=new createjs.Shape;m.graphics.beginFill("#000").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);m.alpha=.5;m.on("click",this._onLogoButRelease);m.cursor="pointer";k.addChild(m);e=createBitmap(g);e.x=CANVAS_WIDTH/2;e.y=CANVAS_HEIGHT/2;e.regX=.5*g.width;e.regY=.5*g.height;k.addChild(e);g=s_oSpriteLibrary.getSprite("but_exit");a=.5*CANVAS_WIDTH+260;c=
new CGfxButton(a,250,g,k);c.addEventListener(ON_MOUSE_UP,this.unload,this);l=new createjs.Text(TEXT_CREDITS_DEVELOPED,"40px "+PRIMARY_FONT,"#ffffff");l.textAlign="center";l.textBaseline="alphabetic";l.x=CANVAS_WIDTH/2;l.y=340;k.addChild(l);g=s_oSpriteLibrary.getSprite("logo_ctl");b=createBitmap(g);b.regX=g.width/2;b.regY=g.height/2;b.x=CANVAS_WIDTH/2;b.y=CANVAS_HEIGHT/2+20;k.addChild(b);d=new createjs.Text("WWW.CODETHISLAB.COM","26px "+PRIMARY_FONT,"#ffffff");d.textAlign="center";d.textBaseline="alphabetic";
d.x=CANVAS_WIDTH/2;d.y=480;k.addChild(d)};this.unload=function(){m.off("click",this._onLogoButRelease);c.unload();c=null;s_oStage.removeChild(k)};this._onLogoButRelease=function(){window.open("http://www.codethislab.com/index.php?&l=en","_blank")};this._init()};