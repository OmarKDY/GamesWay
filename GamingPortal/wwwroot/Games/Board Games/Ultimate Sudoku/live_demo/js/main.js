/*
 screenfull
 v5.0.0 - 2019-09-09
 (c) Sindre Sorhus; MIT License
 Platform.js <https://mths.be/platform>
 Copyright 2014-2018 Benjamin Tan <https://bnjmnt4n.now.sh/>
 Copyright 2011-2013 John-David Dalton
 Available under MIT license <https://mths.be/mit>
*/
(function(){var a="undefined"!==typeof window&&"undefined"!==typeof window.document?window.document:{},f="undefined"!==typeof module&&module.exports,c=function(){for(var k,n=["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror".split(" "),"webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror".split(" "),"webkitRequestFullScreen webkitCancelFullScreen webkitCurrentFullScreenElement webkitCancelFullScreen webkitfullscreenchange webkitfullscreenerror".split(" "),
"mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror".split(" "),"msRequestFullscreen msExitFullscreen msFullscreenElement msFullscreenEnabled MSFullscreenChange MSFullscreenError".split(" ")],p=0,d=n.length,h={};p<d;p++)if((k=n[p])&&k[1]in a){for(p=0;p<k.length;p++)h[n[0][p]]=k[p];return h}return!1}(),b={change:c.fullscreenchange,error:c.fullscreenerror},e={request:function(k){return new Promise(function(n,p){var d=function(){this.off("change",
d);n()}.bind(this);this.on("change",d);k=k||a.documentElement;Promise.resolve(k[c.requestFullscreen]())["catch"](p)}.bind(this))},exit:function(){return new Promise(function(k,n){if(this.isFullscreen){var p=function(){this.off("change",p);k()}.bind(this);this.on("change",p);Promise.resolve(a[c.exitFullscreen]())["catch"](n)}else k()}.bind(this))},toggle:function(k){return this.isFullscreen?this.exit():this.request(k)},onchange:function(k){this.on("change",k)},onerror:function(k){this.on("error",k)},
on:function(k,n){var p=b[k];p&&a.addEventListener(p,n,!1)},off:function(k,n){var p=b[k];p&&a.removeEventListener(p,n,!1)},raw:c};c?(Object.defineProperties(e,{isFullscreen:{get:function(){return!!a[c.fullscreenElement]}},element:{enumerable:!0,get:function(){return a[c.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return!!a[c.fullscreenEnabled]}}}),f?module.exports=e:window.screenfull=e):f?module.exports={isEnabled:!1}:window.screenfull={isEnabled:!1}})();
(function(){function a(u){u=String(u);return u.charAt(0).toUpperCase()+u.slice(1)}function f(u,H){var I=-1,B=u?u.length:0;if("number"==typeof B&&-1<B&&B<=v)for(;++I<B;)H(u[I],I,u);else b(u,H)}function c(u){u=String(u).replace(/^ +| +$/g,"");return/^(?:webOS|i(?:OS|P))/.test(u)?u:a(u)}function b(u,H){for(var I in u)m.call(u,I)&&H(u[I],I,u)}function e(u){return null==u?a(u):y.call(u).slice(8,-1)}function k(u,H){var I=null!=u?typeof u[H]:"number";return!/^(?:boolean|number|string|undefined)$/.test(I)&&
("object"==I?!!u[H]:!0)}function n(u){return String(u).replace(/([ -])(?!$)/g,"$1?")}function p(u,H){var I=null;f(u,function(B,r){I=H(I,B,r,u)});return I}function d(u){function H(P){return p(P,function(O,L){var Q=L.pattern||n(L);!O&&(O=RegExp("\\b"+Q+" *\\d+[.\\w_]*","i").exec(u)||RegExp("\\b"+Q+" *\\w+-[\\w]*","i").exec(u)||RegExp("\\b"+Q+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(u))&&((O=String(L.label&&!RegExp(Q,"i").test(L.label)?L.label:O).split("/"))[1]&&!/[\d.]+/.test(O[0])&&(O[0]+=
" "+O[1]),L=L.label||L,O=c(O[0].replace(RegExp(Q,"i"),L).replace(RegExp("; *(?:"+L+"[_-])?","i")," ").replace(RegExp("("+L+")[-_.]?(\\w)","i"),"$1 $2")));return O})}function I(P){return p(P,function(O,L){return O||(RegExp(L+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(u)||0)[1]||null})}var B=g,r=u&&"object"==typeof u&&"String"!=e(u);r&&(B=u,u=null);var M=B.navigator||{},G=M.userAgent||"";u||(u=G);var W=r?!!M.likeChrome:/\bChrome\b/.test(u)&&!/internal|\n/i.test(y.toString()),
Z=r?"Object":"ScriptBridgingProxyObject",X=r?"Object":"Environment",T=r&&B.java?"JavaPackage":e(B.java),aa=r?"Object":"RuntimeObject";X=(T=/\bJava/.test(T)&&B.java)&&e(B.environment)==X;var q=T?"a":"\u03b1",t=T?"b":"\u03b2",w=B.document||{},C=B.operamini||B.opera,N=A.test(N=r&&C?C["[[Class]]"]:e(C))?N:C=null,l,U=u;r=[];var Y=null,S=u==G;G=S&&C&&"function"==typeof C.version&&C.version();var J=function(P){return p(P,function(O,L){return O||RegExp("\\b"+(L.pattern||n(L))+"\\b","i").exec(u)&&(L.label||
L)})}([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),D=function(P){return p(P,function(O,L){return O||RegExp("\\b"+(L.pattern||n(L))+"\\b","i").exec(u)&&(L.label||L)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser",
"PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},
{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),K=H([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad",
"iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),R=function(P){return p(P,function(O,L,Q){return O||(L[K]||L[/^[a-z]+(?: +[a-z]+\b)*/i.exec(K)]||RegExp("\\b"+n(Q)+"(?:\\b|\\w*\\d)","i").exec(u))&&Q})}({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},
"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}}),F=function(P){return p(P,function(O,L){var Q=L.pattern||n(L);if(!O&&(O=RegExp("\\b"+Q+"(?:/[\\d.]+|[ \\w.]*)","i").exec(u))){var V=O,ba=L.label||L,ca={"10.0":"10","6.4":"10 Technical Preview",
"6.3":"8.1","6.2":"8","6.1":"Server 2008 R2 / 7","6.0":"Server 2008 / Vista","5.2":"Server 2003 / XP 64-bit","5.1":"XP","5.01":"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};Q&&ba&&/^Win/i.test(V)&&!/^Windows Phone /i.test(V)&&(ca=ca[/[\d.]+$/.exec(V)])&&(V="Windows "+ca);V=String(V);Q&&ba&&(V=V.replace(RegExp(Q,"i"),ba));O=V=c(V.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,
"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}return O})}(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X",
"Macintosh","Mac","Windows 98;","Windows "]);J&&(J=[J]);R&&!K&&(K=H([R]));if(l=/\bGoogle TV\b/.exec(K))K=l[0];/\bSimulator\b/i.test(u)&&(K=(K?K+" ":"")+"Simulator");"Opera Mini"==D&&/\bOPiOS\b/.test(u)&&r.push("running in Turbo/Uncompressed mode");"IE"==D&&/\blike iPhone OS\b/.test(u)?(l=d(u.replace(/like iPhone OS/,"")),R=l.manufacturer,K=l.product):/^iP/.test(K)?(D||(D="Safari"),F="iOS"+((l=/ OS ([\d_]+)/i.exec(u))?" "+l[1].replace(/_/g,"."):"")):"Konqueror"!=D||/buntu/i.test(F)?R&&"Google"!=R&&
(/Chrome/.test(D)&&!/\bMobile Safari\b/i.test(u)||/\bVita\b/.test(K))||/\bAndroid\b/.test(F)&&/^Chrome/.test(D)&&/\bVersion\//i.test(u)?(D="Android Browser",F=/\bAndroid\b/.test(F)?F:"Android"):"Silk"==D?(/\bMobi/i.test(u)||(F="Android",r.unshift("desktop mode")),/Accelerated *= *true/i.test(u)&&r.unshift("accelerated")):"PaleMoon"==D&&(l=/\bFirefox\/([\d.]+)\b/.exec(u))?r.push("identifying as Firefox "+l[1]):"Firefox"==D&&(l=/\b(Mobile|Tablet|TV)\b/i.exec(u))?(F||(F="Firefox OS"),K||(K=l[1])):!D||
(l=!/\bMinefield\b/i.test(u)&&/\b(?:Firefox|Safari)\b/.exec(D))?(D&&!K&&/[\/,]|^[^(]+?\)/.test(u.slice(u.indexOf(l+"/")+8))&&(D=null),(l=K||R||F)&&(K||R||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(F))&&(D=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(F)?F:l)+" Browser")):"Electron"==D&&(l=(/\bChrome\/([\d.]+)\b/.exec(u)||0)[1])&&r.push("Chromium "+l):F="Kubuntu";G||(G=I(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",n(D),
"(?:Firefox|Minefield|NetFront)"]));if(l="iCab"==J&&3<parseFloat(G)&&"WebKit"||/\bOpera\b/.test(D)&&(/\bOPR\b/.test(u)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(u)&&!/^(?:Trident|EdgeHTML)$/.test(J)&&"WebKit"||!J&&/\bMSIE\b/i.test(u)&&("Mac OS"==F?"Tasman":"Trident")||"WebKit"==J&&/\bPlayStation\b(?! Vita\b)/i.test(D)&&"NetFront")J=[l];"IE"==D&&(l=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(u)||0)[1])?(D+=" Mobile",F="Windows Phone "+(/\+$/.test(l)?l:l+".x"),r.unshift("desktop mode")):/\bWPDesktop\b/i.test(u)?
(D="IE Mobile",F="Windows Phone 8.x",r.unshift("desktop mode"),G||(G=(/\brv:([\d.]+)/.exec(u)||0)[1])):"IE"!=D&&"Trident"==J&&(l=/\brv:([\d.]+)/.exec(u))&&(D&&r.push("identifying as "+D+(G?" "+G:"")),D="IE",G=l[1]);if(S){if(k(B,"global"))if(T&&(l=T.lang.System,U=l.getProperty("os.arch"),F=F||l.getProperty("os.name")+" "+l.getProperty("os.version")),X){try{G=B.require("ringo/engine").version.join("."),D="RingoJS"}catch(P){(l=B.system)&&l.global.system==B.system&&(D="Narwhal",F||(F=l[0].os||null))}D||
(D="Rhino")}else"object"==typeof B.process&&!B.process.browser&&(l=B.process)&&("object"==typeof l.versions&&("string"==typeof l.versions.electron?(r.push("Node "+l.versions.node),D="Electron",G=l.versions.electron):"string"==typeof l.versions.nw&&(r.push("Chromium "+G,"Node "+l.versions.node),D="NW.js",G=l.versions.nw)),D||(D="Node.js",U=l.arch,F=l.platform,G=(G=/[\d.]+/.exec(l.version))?G[0]:null));else e(l=B.runtime)==Z?(D="Adobe AIR",F=l.flash.system.Capabilities.os):e(l=B.phantom)==aa?(D="PhantomJS",
G=(l=l.version||null)&&l.major+"."+l.minor+"."+l.patch):"number"==typeof w.documentMode&&(l=/\bTrident\/(\d+)/i.exec(u))?(G=[G,w.documentMode],(l=+l[1]+4)!=G[1]&&(r.push("IE "+G[1]+" mode"),J&&(J[1]=""),G[1]=l),G="IE"==D?String(G[1].toFixed(1)):G[0]):"number"==typeof w.documentMode&&/^(?:Chrome|Firefox)\b/.test(D)&&(r.push("masking as "+D+" "+G),D="IE",G="11.0",J=["Trident"],F="Windows");F=F&&c(F)}G&&(l=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(G)||/(?:alpha|beta)(?: ?\d)?/i.exec(u+";"+(S&&M.appMinorVersion))||
/\bMinefield\b/i.test(u)&&"a")&&(Y=/b/i.test(l)?"beta":"alpha",G=G.replace(RegExp(l+"\\+?$"),"")+("beta"==Y?t:q)+(/\d+\+?/.exec(l)||""));if("Fennec"==D||"Firefox"==D&&/\b(?:Android|Firefox OS)\b/.test(F))D="Firefox Mobile";else if("Maxthon"==D&&G)G=G.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(K))"Xbox 360"==K&&(F=null),"Xbox 360"==K&&/\bIEMobile\b/.test(u)&&r.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(D)&&(!D||K||/Browser|Mobi/.test(D))||"Windows CE"!=F&&!/Mobi/i.test(u))if("IE"==
D&&S)try{null===B.external&&r.unshift("platform preview")}catch(P){r.unshift("embedded")}else(/\bBlackBerry\b/.test(K)||/\bBB10\b/.test(u))&&(l=(RegExp(K.replace(/ +/g," *")+"/([.\\d]+)","i").exec(u)||0)[1]||G)?(l=[l,/BB10/.test(u)],F=(l[1]?(K=null,R="BlackBerry"):"Device Software")+" "+l[0],G=null):this!=b&&"Wii"!=K&&(S&&C||/Opera/.test(D)&&/\b(?:MSIE|Firefox)\b/i.test(u)||"Firefox"==D&&/\bOS X (?:\d+\.){2,}/.test(F)||"IE"==D&&(F&&!/^Win/.test(F)&&5.5<G||/\bWindows XP\b/.test(F)&&8<G||8==G&&!/\bTrident\b/.test(u)))&&
!A.test(l=d.call(b,u.replace(A,"")+";"))&&l.name&&(l="ing as "+l.name+((l=l.version)?" "+l:""),A.test(D)?(/\bIE\b/.test(l)&&"Mac OS"==F&&(F=null),l="identify"+l):(l="mask"+l,D=N?c(N.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(l)&&(F=null),S||(G=null)),J=["Presto"],r.push(l));else D+=" Mobile";if(l=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(u)||0)[1]){l=[parseFloat(l.replace(/\.(\d)$/,".0$1")),l];if("Safari"==D&&"+"==l[1].slice(-1))D="WebKit Nightly",Y="alpha",G=l[1].slice(0,-1);else if(G==
l[1]||G==(l[2]=(/\bSafari\/([\d.]+\+?)/i.exec(u)||0)[1]))G=null;l[1]=(/\bChrome\/([\d.]+)/i.exec(u)||0)[1];537.36==l[0]&&537.36==l[2]&&28<=parseFloat(l[1])&&"WebKit"==J&&(J=["Blink"]);S&&(W||l[1])?(J&&(J[1]="like Chrome"),l=l[1]||(l=l[0],530>l?1:532>l?2:532.05>l?3:533>l?4:534.03>l?5:534.07>l?6:534.1>l?7:534.13>l?8:534.16>l?9:534.24>l?10:534.3>l?11:535.01>l?12:535.02>l?"13+":535.07>l?15:535.11>l?16:535.19>l?17:536.05>l?18:536.1>l?19:537.01>l?20:537.11>l?"21+":537.13>l?23:537.18>l?24:537.24>l?25:537.36>
l?26:"Blink"!=J?"27":"28")):(J&&(J[1]="like Safari"),l=(l=l[0],400>l?1:500>l?2:526>l?3:533>l?4:534>l?"4+":535>l?5:537>l?6:538>l?7:601>l?8:"8"));J&&(J[1]+=" "+(l+="number"==typeof l?".x":/[.+]/.test(l)?"":"+"));"Safari"==D&&(!G||45<parseInt(G))&&(G=l)}"Opera"==D&&(l=/\bzbov|zvav$/.exec(F))?(D+=" ",r.unshift("desktop mode"),"zvav"==l?(D+="Mini",G=null):D+="Mobile",F=F.replace(RegExp(" *"+l+"$"),"")):"Safari"==D&&/\bChrome\b/.exec(J&&J[1])&&(r.unshift("desktop mode"),D="Chrome Mobile",G=null,/\bOS X\b/.test(F)?
(R="Apple",F="iOS 4.3+"):F=null);G&&0==G.indexOf(l=/[\d.]+$/.exec(F))&&-1<u.indexOf("/"+l+"-")&&(F=String(F.replace(l,"")).replace(/^ +| +$/g,""));J&&!/\b(?:Avant|Nook)\b/.test(D)&&(/Browser|Lunascape|Maxthon/.test(D)||"Safari"!=D&&/^iOS/.test(F)&&/\bSafari\b/.test(J[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(D)&&J[1])&&(l=J[J.length-1])&&r.push(l);r.length&&(r=["("+r.join("; ")+")"]);R&&K&&0>K.indexOf(R)&&r.push("on "+R);K&&r.push((/^on /.test(r[r.length-
1])?"":"on ")+K);if(F){var da=(l=/ ([\d.+]+)$/.exec(F))&&"/"==F.charAt(F.length-l[0].length-1);F={architecture:32,family:l&&!da?F.replace(l[0],""):F,version:l?l[1]:null,toString:function(){var P=this.version;return this.family+(P&&!da?" "+P:"")+(64==this.architecture?" 64-bit":"")}}}(l=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(U))&&!/\bi686\b/i.test(U)?(F&&(F.architecture=64,F.family=F.family.replace(RegExp(" *"+l),"")),D&&(/\bWOW64\b/i.test(u)||S&&/\w(?:86|32)$/.test(M.cpuClass||M.platform)&&!/\bWin64; x64\b/i.test(u))&&
r.unshift("32-bit")):F&&/^OS X/.test(F.family)&&"Chrome"==D&&39<=parseFloat(G)&&(F.architecture=64);u||(u=null);B={};B.description=u;B.layout=J&&J[0];B.manufacturer=R;B.name=D;B.prerelease=Y;B.product=K;B.ua=u;B.version=D&&G;B.os=F||{architecture:null,family:null,version:null,toString:function(){return"null"}};B.parse=d;B.toString=function(){return this.description||""};B.version&&r.unshift(G);B.name&&r.unshift(D);F&&D&&(F!=String(F).split(" ")[0]||F!=D.split(" ")[0]&&!K)&&r.push(K?"("+F+")":"on "+
F);r.length&&(B.description=r.join(" "));return B}var h={"function":!0,object:!0},g=h[typeof window]&&window||this,z=h[typeof exports]&&exports;h=h[typeof module]&&module&&!module.nodeType&&module;var x=z&&h&&"object"==typeof global&&global;!x||x.global!==x&&x.window!==x&&x.self!==x||(g=x);var v=Math.pow(2,53)-1,A=/\bOpera/;x=Object.prototype;var m=x.hasOwnProperty,y=x.toString,E=d();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(g.platform=E,define(function(){return E})):z&&
h?b(E,function(u,H){z[H]=u}):g.platform=E}).call(this);var s_iScaleFactor=1,s_oCanvasLeft,s_oCanvasTop,s_bIsIphone=!1,s_bFocus=!0;
(function(a){(jQuery.browser=jQuery.browser||{}).mobile=/android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(ad|hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|tablet|treo|up\.(browser|link)|vodafone|wap|webos|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))})(navigator.userAgent||
navigator.vendor||window.opera);$(window).resize(function(){sizeHandler();s_oGame&&s_oGame.showPausePanel(!1);s_oMain.startUpdate();sizeHandler()});$(window).blur(function(){isMobile()||(s_oGame&&s_oGame.showPausePanel(!0),s_oMain.stopUpdate())});$(window).focus(function(){isMobile()||(s_oGame&&s_oGame.showPausePanel(!1),s_oMain.startUpdate())});function trace(a){console.log(a)}
function getSize(a){var f=a.toLowerCase(),c=window.document,b=c.documentElement;if(void 0===window["inner"+a])a=b["client"+a];else if(window["inner"+a]!=b["client"+a]){var e=c.createElement("body");e.id="vpw-test-b";e.style.cssText="overflow:scroll";var k=c.createElement("div");k.id="vpw-test-d";k.style.cssText="position:absolute;top:-1000px";k.innerHTML="<style>@media("+f+":"+b["client"+a]+"px){body#vpw-test-b div#vpw-test-d{"+f+":7px!important}}</style>";e.appendChild(k);b.insertBefore(e,c.head);
a=7==k["offset"+a]?b["client"+a]:window["inner"+a];b.removeChild(e)}else a=window["inner"+a];return a}window.addEventListener("orientationchange",onOrientationChange);function onOrientationChange(){window.matchMedia("(orientation: portrait)").matches&&sizeHandler();window.matchMedia("(orientation: landscape)").matches&&sizeHandler()}function isChrome(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}
function isIpad(){var a=-1!==navigator.userAgent.toLowerCase().indexOf("ipad");return!a&&navigator.userAgent.match(/Mac/)&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints?!0:a}function isMobile(){return isIpad()?!0:jQuery.browser.mobile}
function isIOS(){var a="iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";");if(-1!==navigator.userAgent.toLowerCase().indexOf("iphone"))return s_bIsIphone=!0;for(;a.length;)if(navigator.platform===a.pop())return s_bIsIphone=!0;return s_bIsIphone=!1}function getIOSWindowHeight(){return document.documentElement.clientWidth/window.innerWidth*window.innerHeight}
function getHeightOfIOSToolbars(){var a=(0===window.orientation?screen.height:screen.width)-getIOSWindowHeight();return 1<a?a:0}
function sizeHandler(){window.scrollTo(0,1);if($("#canvas")){var a=null!==platform.name&&"safari"===platform.name.toLowerCase()?getIOSWindowHeight():getSize("Height");var f=getSize("Width");s_bFocus&&_checkOrientation(f,a);var c=Math.min(a/CANVAS_HEIGHT,f/CANVAS_WIDTH),b=Math.round(CANVAS_WIDTH*c);c=Math.round(CANVAS_HEIGHT*c);if(c<a){var e=a-c;c+=e;b+=CANVAS_WIDTH/CANVAS_HEIGHT*e}else b<f&&(e=f-b,b+=e,c+=CANVAS_HEIGHT/CANVAS_WIDTH*e);e=a/2-c/2;var k=f/2-b/2,n=CANVAS_WIDTH/b;if(k*n<-EDGEBOARD_X||
e*n<-EDGEBOARD_Y)c=Math.min(a/(CANVAS_HEIGHT-2*EDGEBOARD_Y),f/(CANVAS_WIDTH-2*EDGEBOARD_X)),b=Math.round(CANVAS_WIDTH*c),c=Math.round(CANVAS_HEIGHT*c),e=(a-c)/2,k=(f-b)/2,n=CANVAS_WIDTH/b;s_iOffsetX=-1*k*n;s_iOffsetY=-1*e*n;0<=e&&(s_iOffsetY=0);0<=k&&(s_iOffsetX=0);null!==s_oInterface&&s_oInterface.refreshButtonPos(s_iOffsetX,s_iOffsetY);null!==s_oMenu&&s_oMenu.refreshButtonPos(s_iOffsetX,s_iOffsetY);null!==s_oModeMenu&&s_oModeMenu.refreshButtonPos(s_iOffsetX,s_iOffsetY);s_bIsIphone?(canvas=document.getElementById("canvas"),
s_oStage.canvas.width=2*b,s_oStage.canvas.height=2*c,canvas.style.width=b+"px",canvas.style.height=c+"px",s_iScaleFactor=2*Math.min(b/CANVAS_WIDTH,c/CANVAS_HEIGHT),s_oStage.scaleX=s_oStage.scaleY=s_iScaleFactor):s_bMobile||isChrome()?($("#canvas").css("width",b+"px"),$("#canvas").css("height",c+"px")):(s_oStage.canvas.width=b,s_oStage.canvas.height=c,s_iScaleFactor=Math.min(b/CANVAS_WIDTH,c/CANVAS_HEIGHT),s_oStage.scaleX=s_oStage.scaleY=s_iScaleFactor);0>e||(e=(a-c)/2);$("#canvas").css("top",e+"px");
$("#canvas").css("left",k+"px");fullscreenHandler()}}
function _checkOrientation(a,f){s_bMobile&&ENABLE_CHECK_ORIENTATION&&(a>f?"landscape"===$(".orientation-msg-container").attr("data-orientation")?($(".orientation-msg-container").css("display","none"),s_oMain.startUpdate()):($(".orientation-msg-container").css("display","block"),s_oMain.stopUpdate()):"portrait"===$(".orientation-msg-container").attr("data-orientation")?($(".orientation-msg-container").css("display","none"),s_oMain.startUpdate()):($(".orientation-msg-container").css("display","block"),
s_oMain.stopUpdate()))}function inIframe(){try{return window.self!==window.top}catch(a){return!0}}function playSound(a,f,c){return!1===DISABLE_SOUND_MOBILE||!1===s_bMobile?(s_aSounds[a].play(),s_aSounds[a].volume(f),s_aSounds[a].loop(c),s_aSounds[a]):null}function stopSound(a){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].stop()}function setVolume(a,f){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].volume(f)}
function setMute(a,f){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].mute(f)}function fadeSound(a,f,c,b){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].fade(f,c,b)}function soundPlaying(a){if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)return s_aSounds[a].playing()}function createBitmap(a,f,c){var b=new createjs.Bitmap(a),e=new createjs.Shape;f&&c?e.graphics.beginFill("#fff").drawRect(0,0,f,c):e.graphics.beginFill("#ff0").drawRect(0,0,a.width,a.height);b.hitArea=e;return b}
function createSprite(a,f,c,b,e,k){a=null!==f?new createjs.Sprite(a,f):new createjs.Sprite(a);f=new createjs.Shape;f.graphics.beginFill("#000000").drawRect(-c,-b,e,k);a.hitArea=f;return a}function randomFloatBetween(a,f,c){"undefined"===typeof c&&(c=2);return parseFloat(Math.min(a+Math.random()*(f-a),f).toFixed(c))}function rotateVector2D(a,f){var c=f.getX()*Math.cos(a)+f.getY()*Math.sin(a),b=f.getX()*-Math.sin(a)+f.getY()*Math.cos(a);f.set(c,b)}function tweenVectorsOnX(a,f,c){return a+c*(f-a)}
function shuffle(a){for(var f=a.length,c,b;0!==f;)b=Math.floor(Math.random()*f),--f,c=a[f],a[f]=a[b],a[b]=c;return a}function bubbleSort(a){do{var f=!1;for(var c=0;c<a.length-1;c++)a[c]>a[c+1]&&(f=a[c],a[c]=a[c+1],a[c+1]=f,f=!0)}while(f)}function compare(a,f){return a.index>f.index?-1:a.index<f.index?1:0}function easeLinear(a,f,c,b){return c*a/b+f}function easeInQuad(a,f,c,b){return c*(a/=b)*a+f}function easeInSine(a,f,c,b){return-c*Math.cos(a/b*(Math.PI/2))+c+f}
function easeInCubic(a,f,c,b){return c*(a/=b)*a*a+f}function getTrajectoryPoint(a,f){var c=new createjs.Point,b=(1-a)*(1-a),e=a*a;c.x=b*f.start.x+2*(1-a)*a*f.traj.x+e*f.end.x;c.y=b*f.start.y+2*(1-a)*a*f.traj.y+e*f.end.y;return c}function formatTime(a){a/=1E3;var f=Math.floor(a/60);a=Math.floor(a-60*f);var c="";c=10>f?c+("0"+f+":"):c+(f+":");return 10>a?c+("0"+a):c+a}function degreesToRadians(a){return a*Math.PI/180}
function checkRectCollision(a,f){var c=getBounds(a,.9);var b=getBounds(f,.98);return calculateIntersection(c,b)}function calculateIntersection(a,f){var c,b,e,k;var n=a.x+(c=a.width/2);var p=a.y+(b=a.height/2);var d=f.x+(e=f.width/2);var h=f.y+(k=f.height/2);n=Math.abs(n-d)-(c+e);p=Math.abs(p-h)-(b+k);return 0>n&&0>p?(n=Math.min(Math.min(a.width,f.width),-n),p=Math.min(Math.min(a.height,f.height),-p),{x:Math.max(a.x,f.x),y:Math.max(a.y,f.y),width:n,height:p,rect1:a,rect2:f}):null}
function dlx_cover(a){a.right.left=a.left;a.left.right=a.right;for(var f=a.down;f!==a;f=f.down)for(var c=f.right;c!==f;c=c.right)c.down.up=c.up,c.up.down=c.down,c.column.size--}function dlx_uncover(a){for(var f=a.up;f!==a;f=f.up)for(var c=f.left;c!==f;c=c.left)c.column.size++,c.down.up=c,c.up.down=c;a.right.left=a;a.left.right=a}
function dlx_search(a,f,c,b,e){if(a.right===a)return b.push(f.slice(0)),b.length>=e?b:null;for(var k=null,n=99999,p=a.right;p!==a;p=p.right){if(0===p.size)return null;p.size<n&&(n=p.size,k=p)}dlx_cover(k);for(var d=k.down;d!==k;d=d.down){f[c]=d.row;for(p=d.right;p!==d;p=p.right)dlx_cover(p.column);n=dlx_search(a,f,c+1,b,e);if(null!==n)return n;for(p=d.left;p!==d;p=p.left)dlx_uncover(p.column)}dlx_uncover(k);return null}
function dlx_solve(a,f,c){for(var b=Array(a[0].length),e=0;e<b.length;e++)b[e]={};for(e=0;e<b.length;e++)b[e].index=e,b[e].up=b[e],b[e].down=b[e],e>=f?(e-1>=f&&(b[e].left=b[e-1]),e+1<b.length&&(b[e].right=b[e+1])):(b[e].left=b[e],b[e].right=b[e]),b[e].size=0;for(e=0;e<a.length;e++)for(var k=null,n=0;n<a[e].length;n++)if(a[e][n]){var p={};p.row=e;p.column=b[n];p.up=b[n].up;p.down=b[n];k?(p.left=k,p.right=k.right,k.right.left=p,k.right=p):(p.left=p,p.right=p);b[n].up.down=p;b[n].up=p;b[n].size++;k=
p}a={};a.right=b[f];a.left=b[b.length-1];b[f].left=a;b[b.length-1].right=a;solutions=[];dlx_search(a,[],0,solutions,c);return solutions}
function solve_sudoku(a){for(var f=[],c=[],b=0;9>b;b++)for(var e=0;9>e;e++){var k=a[b][e]-1;if(0<=k){var n=Array(324);n[9*b+e]=1;n[81+9*b+k]=1;n[162+9*e+k]=1;n[243+9*(3*Math.floor(b/3)+Math.floor(e/3))+k]=1;f.push(n);c.push({row:b,col:e,n:k+1})}else for(k=0;9>k;k++)n=Array(324),n[9*b+e]=1,n[81+9*b+k]=1,n[162+9*e+k]=1,n[243+9*(3*Math.floor(b/3)+Math.floor(e/3))+k]=1,f.push(n),c.push({row:b,col:e,n:k+1})}f=dlx_solve(f,0,2);if(0<f.length){e=f[0];for(b=0;b<e.length;b++)a[c[e[b]].row][c[e[b]].col]=c[e[b]].n;
return f.length}return 0}function solve(a){a=solve_sudoku(a);if(0<a){if(1<a)return 1}else return trace("no solution"),0}
function getBounds(a,f){var c={x:Infinity,y:Infinity,width:0,height:0};if(a instanceof createjs.Container){c.x2=-Infinity;c.y2=-Infinity;var b=a.children,e=b.length,k;for(k=0;k<e;k++){var n=getBounds(b[k],1);n.x<c.x&&(c.x=n.x);n.y<c.y&&(c.y=n.y);n.x+n.width>c.x2&&(c.x2=n.x+n.width);n.y+n.height>c.y2&&(c.y2=n.y+n.height)}Infinity==c.x&&(c.x=0);Infinity==c.y&&(c.y=0);Infinity==c.x2&&(c.x2=0);Infinity==c.y2&&(c.y2=0);c.width=c.x2-c.x;c.height=c.y2-c.y;delete c.x2;delete c.y2}else{if(a instanceof createjs.Bitmap){e=
a.sourceRect||a.image;k=e.width*f;var p=e.height*f}else if(a instanceof createjs.Sprite)if(a.spriteSheet._frames&&a.spriteSheet._frames[a.currentFrame]&&a.spriteSheet._frames[a.currentFrame].image){e=a.spriteSheet.getFrame(a.currentFrame);k=e.rect.width;p=e.rect.height;b=e.regX;var d=e.regY}else c.x=a.x||0,c.y=a.y||0;else c.x=a.x||0,c.y=a.y||0;b=b||0;k=k||0;d=d||0;p=p||0;c.regX=b;c.regY=d;e=a.localToGlobal(0-b,0-d);n=a.localToGlobal(k-b,p-d);k=a.localToGlobal(k-b,0-d);b=a.localToGlobal(0-b,p-d);c.x=
Math.min(Math.min(Math.min(e.x,n.x),k.x),b.x);c.y=Math.min(Math.min(Math.min(e.y,n.y),k.y),b.y);c.width=Math.max(Math.max(Math.max(e.x,n.x),k.x),b.x)-c.x;c.height=Math.max(Math.max(Math.max(e.y,n.y),k.y),b.y)-c.y}return c}function NoClickDelay(a){this.element=a;window.Touch&&this.element.addEventListener("touchstart",this,!1)}function shuffle(a){for(var f=a.length,c,b;0<f;)b=Math.floor(Math.random()*f),f--,c=a[f],a[f]=a[b],a[b]=c;return a}
NoClickDelay.prototype={handleEvent:function(a){switch(a.type){case "touchstart":this.onTouchStart(a);break;case "touchmove":this.onTouchMove(a);break;case "touchend":this.onTouchEnd(a)}},onTouchStart:function(a){a.preventDefault();this.moved=!1;this.element.addEventListener("touchmove",this,!1);this.element.addEventListener("touchend",this,!1)},onTouchMove:function(a){this.moved=!0},onTouchEnd:function(a){this.element.removeEventListener("touchmove",this,!1);this.element.removeEventListener("touchend",
this,!1);if(!this.moved){a=document.elementFromPoint(a.changedTouches[0].clientX,a.changedTouches[0].clientY);3==a.nodeType&&(a=a.parentNode);var f=document.createEvent("MouseEvents");f.initEvent("click",!0,!0);a.dispatchEvent(f)}}};
(function(){function a(c){var b={focus:"visible",focusin:"visible",pageshow:"visible",blur:"hidden",focusout:"hidden",pagehide:"hidden"};c=c||window.event;c.type in b?document.body.className=b[c.type]:(document.body.className=this[f]?"hidden":"visible","hidden"===document.body.className?(s_oMain.stopUpdate(),s_bFocus=!1):(s_oMain.startUpdate(),s_bFocus=!0))}var f="hidden";f in document?document.addEventListener("visibilitychange",a):(f="mozHidden")in document?document.addEventListener("mozvisibilitychange",
a):(f="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",a):(f="msHidden")in document?document.addEventListener("msvisibilitychange",a):"onfocusin"in document?document.onfocusin=document.onfocusout=a:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=a})();function ctlArcadeResume(){null!==s_oMain&&s_oMain.startUpdate()}function ctlArcadePause(){null!==s_oMain&&s_oMain.stopUpdate()}
function getParamValue(a){for(var f=window.location.search.substring(1).split("&"),c=0;c<f.length;c++){var b=f[c].split("=");if(b[0]==a)return b[1]}}function fullscreenHandler(){ENABLE_FULLSCREEN&&screenfull.isEnabled&&(s_bFullscreen=screenfull.isFullscreen,null!==s_oInterface&&s_oInterface.resetFullscreenBut(),null!==s_oMenu&&s_oMenu.resetFullscreenBut())}
if(screenfull.isEnabled)screenfull.on("change",function(){s_bFullscreen=screenfull.isFullscreen;null!==s_oInterface&&s_oInterface.resetFullscreenBut();null!==s_oMenu&&s_oMenu.resetFullscreenBut()});
function CSpriteLibrary(){var a={},f,c,b,e,k,n;this.init=function(p,d,h){f={};b=c=0;e=p;k=d;n=h};this.addSprite=function(p,d){if(!a.hasOwnProperty(p)){var h=new Image;a[p]=f[p]={szPath:d,oSprite:h,bLoaded:!1};c++}};this.getSprite=function(p){return a.hasOwnProperty(p)?a[p].oSprite:null};this._onSpritesLoaded=function(){c=0;k.call(n)};this._onSpriteLoaded=function(){e.call(n);++b===c&&this._onSpritesLoaded()};this.loadSprites=function(){for(var p in f)f[p].oSprite.oSpriteLibrary=this,f[p].oSprite.szKey=
p,f[p].oSprite.onload=function(){this.oSpriteLibrary.setLoaded(this.szKey);this.oSpriteLibrary._onSpriteLoaded(this.szKey)},f[p].oSprite.onerror=function(d){var h=d.currentTarget;setTimeout(function(){f[h.szKey].oSprite.src=f[h.szKey].szPath},500)},f[p].oSprite.src=f[p].szPath};this.setLoaded=function(p){a[p].bLoaded=!0};this.isLoaded=function(p){return a[p].bLoaded};this.getNumSprites=function(){return c}}
var CANVAS_WIDTH=1080,CANVAS_HEIGHT=1920,EDGEBOARD_X=25,EDGEBOARD_Y=200,CELL_SIZE=106,FPS=30,FPS_TIME=1E3/FPS,DISABLE_SOUND_MOBILE=!1,GAME_NAME="ultimate_sudoku",PRIMARY_FONT="Arial",SECONDARY_FONT="blackplotan",PRIMARY_FONT_COLOUR="#008df0",TIME_LOOP_WAIT=2E3,STATE_LOADING=0,STATE_MENU=1,STATE_HELP=1,STATE_GAME=3,EASY_MODE=0,MEDIUM_MODE=1,HARD_MODE=2,ON_MOUSE_DOWN=0,ON_MOUSE_UP=1,ON_MOUSE_OVER=2,ON_MOUSE_OUT=3,ON_DRAG_START=4,ON_DRAG_END=5,MAX_GIVENS_EASY,MAX_GIVENS_MEDIUM,MAX_GIVENS_HARD,RANGE_GIVENS=
0,LOWER_BOUND_EASY=4,LOWER_BOUND_MEDIUM=3,LOWER_BOUND_HARD=2,TIME_BONUS_LIMIT=[],ENABLE_FULLSCREEN,ENABLE_CHECK_ORIENTATION,TIME_SAVE_DATA=6E4,TEXT_PRELOADER_CONTINUE="START",TEXT_GAMEOVER="YOU COMPLETED ",TEXT_ARE_SURE="ARE YOU SURE?",TEXT_SUDOKU=" SUDOKU",TEXT_IN=" IN ",TEXT_HELP_USED="YOU USED THE FOLLOWING HELP:",TEXT_HELPS_USED="YOU USED THE FOLLOWING HELPS:",TEXT_HELP_NOTE="NOTES AUTOFILL",TEXT_HELP_SOLVE="SOLVER",TEXT_HELP_TIME="SET NO TIME",TEXT_HELP_HINT=" HINT",TEXT_HELP_HINTS=" HINTS",
TEXT_SCORE="SCORE:",TEXT_PLAY="PLAY",TEXT_RESTART="RESTART",TEXT_TIME="TIME",TEXT_GENERATE_SUDOKU="GENERATING SUDOKU. PLEASE WAIT",TEXT_PAUSE="PAUSE",TEXT_NEW="NEW",TEXT_CONTINUE="CONTINUE",TEXT_WARNING_NEW_GAME="YOU HAVE A SAVED GAME IN PROGRESS, DO YOU WANT TO START A NEW SUDOKU ANYWAY?",TEXT_IOS_PRIVATE='Your web browser does not support storing settings locally. In Safari, the most common cause of this is using "Private Browsing Mode". Some info may not save or some features may not work properly',
TEXT_DEVELOPED="DEVELOPED BY",TEXT_INFO_SOLVE="(all points lost)",TEXT_INFO_NOTE="(half of all points lost)",TEXT_INFO_HINT="points per hint)",TEXT_TOP_MODE="SELECT YOUR LEVEL",TEXT_EASY="BEGINNER",TEXT_MEDIUM="INTERMEDIATE",TEXT_HARD="ADVANCED",TEXT_HELP0="RULES",TEXT_HELP1="FILL IN THE BLANKS WITH NUMBERS FROM 1 TO 9. EACH ROW, COLUMN OR 3X3 BLOCK, MUST CONTAIN THE NUMBER 1 THROUGH 9 EXACTLY ONCE",TEXT_HELP0_PAGE2="HOW-TO",TEXT_HELP1_PAGE2="USE KEYBOARD OR NUMBER BUTTONS TO FILL IN THE BLANKS. THERE ARE 3 DIFFERENT GAME MODES:",
TEXT_HELP1_MOB_PAGE2="USE NUMBER BUTTONS TO FILL BLANKS IN GAME. THERE ARE 3 DIFFERENT GAME MODES:",TEXT_HELP2_PAGE2='"CELL FIRST" MODE: CLICK FIRST THE CELL YOU WANT TO FILL IN, THEN SELECT THE NUMBER YOU WANT TO ENTER',TEXT_HELP3_PAGE2='"NUMBER FIRST" MODE: SELECT THE NUMBER YOU WANT TO ENTER FIRST, THEN CLICK THE CELL YOU WANT TO FILL IN',TEXT_HELP4_PAGE2="MEMO MODE: THIS BUTTON ALLOWS YOU TO WRITE DOWN A MEMO IN A BLANK",TEXT_FILL_WITH_NOTE="FILL THE BOARD WITH NOTES",TEXT_DELETE_ALL_NOTE="DELETE ALL NOTES",
TEXT_SOLVE="SOLVE THE SUDOKU",TEXT_RESET="RESET THE SUDOKU",TEXT_SETNOTIME="PLAY WITHOUT TIME",TEXT_GETHINT="GET A HINT",TEXT_FULLSCREEN="FULL SCREEN",TEXT_SHARE_IMAGE="200x200.jpg",TEXT_SHARE_TITLE="Congratulations!",TEXT_SHARE_MSG1="You collected <strong>",TEXT_SHARE_MSG2=" points</strong>!<br><br>Share your score with your friends!",TEXT_SHARE_SHARE1="My score is ",TEXT_SHARE_SHARE2=" points! Can you do better";
function CPreloader(){var a,f,c,b,e,k,n,p,d,h;this._init=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this);s_oSpriteLibrary.addSprite("progress_bar","./sprites/progress_bar.png");s_oSpriteLibrary.addSprite("200x200","./sprites/200x200.jpg");s_oSpriteLibrary.addSprite("but_start","./sprites/but_start.png");s_oSpriteLibrary.loadSprites();h=new createjs.Container;s_oStage.addChild(h)};this.unload=function(){h.removeAllChildren();d.unload()};this._onImagesLoaded=function(){};
this._onAllImagesLoaded=function(){this.attachSprites();s_oMain.preloaderReady()};this.attachSprites=function(){var g=new createjs.Shape;g.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);h.addChild(g);g=s_oSpriteLibrary.getSprite("200x200");n=createBitmap(g);n.regX=.5*g.width;n.regY=.5*g.height;n.x=CANVAS_WIDTH/2;n.y=CANVAS_HEIGHT/2-180;h.addChild(n);p=new createjs.Shape;p.graphics.beginFill("rgba(0,0,0,0.01)").drawRoundRect(n.x-100,n.y-100,200,200,10);h.addChild(p);n.mask=p;
g=s_oSpriteLibrary.getSprite("progress_bar");b=createBitmap(g);b.x=CANVAS_WIDTH/2-g.width/2;b.y=CANVAS_HEIGHT/2+50;h.addChild(b);a=g.width;f=g.height;e=new createjs.Shape;e.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(b.x,b.y,1,f);h.addChild(e);b.mask=e;c=new createjs.Text("","30px "+PRIMARY_FONT,PRIMARY_FONT_COLOUR);c.x=CANVAS_WIDTH/2;c.y=CANVAS_HEIGHT/2+100;c.textBaseline="alphabetic";c.textAlign="center";h.addChild(c);g=s_oSpriteLibrary.getSprite("but_start");d=new CTextButton(CANVAS_WIDTH/
2,CANVAS_HEIGHT/2,g,TEXT_PRELOADER_CONTINUE,"Arial","#000","bold 50",h);d.addEventListener(ON_MOUSE_UP,this._onButStartRelease,this);d.setVisible(!1);k=new createjs.Shape;k.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);h.addChild(k);createjs.Tween.get(k).to({alpha:0},500).call(function(){createjs.Tween.removeTweens(k);h.removeChild(k)})};this._onButStartRelease=function(){s_oMain._onRemovePreloader()};this.refreshLoader=function(g){c.text=g+"%";100===g&&(s_oMain._onRemovePreloader(),
c.visible=!1,b.visible=!1);e.graphics.clear();g=Math.floor(g*a/100);e.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(b.x,b.y,g,f)};this._init()}
function CMain(a){var f,c=0,b=0,e=STATE_LOADING,k,n;this.initContainer=function(){s_oCanvas=document.getElementById("canvas");s_oStage=new createjs.Stage(s_oCanvas);s_oStage.preventSelection=!1;createjs.Touch.enable(s_oStage,!0);s_bMobile=isMobile();!1===s_bMobile&&(s_oStage.enableMouseOver(20),$("body").on("contextmenu","#canvas",function(d){return!1}));s_iPrevTime=(new Date).getTime();createjs.Ticker.addEventListener("tick",this._update);createjs.Ticker.framerate=FPS;navigator.userAgent.match(/Windows Phone/i)&&
(DISABLE_SOUND_MOBILE=!0);s_oSpriteLibrary=new CSpriteLibrary;k=new CPreloader;s_oLocalStorage=new CLocalStorage(GAME_NAME)};this.preloaderReady=function(){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||this._initSounds();this._loadImages()};this.soundLoaded=function(){c++;k.refreshLoader(Math.floor(c/b*100))};this._initSounds=function(){Howler.mute(!s_bAudioActive);s_aSoundsInfo=[];s_aSoundsInfo.push({path:"./sounds/",filename:"press_button",loop:!1,volume:1,ingamename:"click"});s_aSoundsInfo.push({path:"./sounds/",
filename:"game_over",loop:!1,volume:1,ingamename:"game_over"});b+=s_aSoundsInfo.length;s_aSounds=[];for(var d=0;d<s_aSoundsInfo.length;d++)this.tryToLoadSound(s_aSoundsInfo[d],!1)};this.tryToLoadSound=function(d,h){setTimeout(function(){s_aSounds[d.ingamename]=new Howl({src:[d.path+d.filename+".mp3"],autoplay:!1,preload:!0,loop:d.loop,volume:d.volume,onload:s_oMain.soundLoaded,onloaderror:function(g,z){for(var x=0;x<s_aSoundsInfo.length;x++)if(g===s_aSounds[s_aSoundsInfo[x].ingamename]._sounds[0]._id){s_oMain.tryToLoadSound(s_aSoundsInfo[x],
!0);break}},onplayerror:function(g){for(var z=0;z<s_aSoundsInfo.length;z++)if(g===s_aSounds[s_aSoundsInfo[z].ingamename]._sounds[0]._id){s_aSounds[s_aSoundsInfo[z].ingamename].once("unlock",function(){s_aSounds[s_aSoundsInfo[z].ingamename].play()});break}}})},h?200:0)};this._loadImages=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this);s_oSpriteLibrary.addSprite("but_play","./sprites/but_play.png");s_oSpriteLibrary.addSprite("msg_box","./sprites/msg_box.png");s_oSpriteLibrary.addSprite("but_credits",
"./sprites/but_credits.png");s_oSpriteLibrary.addSprite("ctl_logo","./sprites/ctl_logo.png");s_oSpriteLibrary.addSprite("bg_menu","./sprites/bg_menu.jpg");s_oSpriteLibrary.addSprite("bg_mode_menu","./sprites/bg_mode_menu.jpg");s_oSpriteLibrary.addSprite("mod_easy_icon","./sprites/mod_easy_icon.png");s_oSpriteLibrary.addSprite("mod_medium_icon","./sprites/mod_medium_icon.png");s_oSpriteLibrary.addSprite("mod_hard_icon","./sprites/mod_hard_icon.png");s_oSpriteLibrary.addSprite("bg_game","./sprites/bg_game.jpg");
s_oSpriteLibrary.addSprite("bg_help","./sprites/bg_help.png");s_oSpriteLibrary.addSprite("bg_help2","./sprites/bg_help2.png");s_oSpriteLibrary.addSprite("arrow","./sprites/arrow.png");s_oSpriteLibrary.addSprite("but_yes","./sprites/but_yes.png");s_oSpriteLibrary.addSprite("but_exit","./sprites/but_exit.png");s_oSpriteLibrary.addSprite("audio_icon","./sprites/audio_icon.png");s_oSpriteLibrary.addSprite("config_icon","./sprites/config_icon.png");s_oSpriteLibrary.addSprite("but_help_icon","./sprites/but_help_icon.png");
s_oSpriteLibrary.addSprite("but_help_note","./sprites/but_help_note.png");s_oSpriteLibrary.addSprite("but_del_note","./sprites/but_del_note.png");s_oSpriteLibrary.addSprite("but_solve","./sprites/but_solve.png");s_oSpriteLibrary.addSprite("but_reset","./sprites/but_reset.png");s_oSpriteLibrary.addSprite("but_time","./sprites/but_time.png");s_oSpriteLibrary.addSprite("but_help_hint","./sprites/but_help_hint.png");s_oSpriteLibrary.addSprite("time_display","./sprites/time_display.png");s_oSpriteLibrary.addSprite("given_bg",
"./sprites/given_bg.png");s_oSpriteLibrary.addSprite("blank","./sprites/blank.png");s_oSpriteLibrary.addSprite("background","./sprites/background.png");s_oSpriteLibrary.addSprite("highlight","./sprites/highlight.png");s_oSpriteLibrary.addSprite("cell_selected","./sprites/cell_selected.png");s_oSpriteLibrary.addSprite("but_num","./sprites/but_num.png");s_oSpriteLibrary.addSprite("but_del_toggle","./sprites/but_del_toggle.png");s_oSpriteLibrary.addSprite("note_toggle","./sprites/note_toggle.png");s_oSpriteLibrary.addSprite("mode_toggle",
"./sprites/mode_toggle.png");s_oSpriteLibrary.addSprite("credit_bg","./sprites/credit_bg.png");s_oSpriteLibrary.addSprite("but_fullscreen","./sprites/but_fullscreen.png");s_oSpriteLibrary.addSprite("but_fullscreen_help","./sprites/but_fullscreen_help.png");s_oSpriteLibrary.addSprite("but_undo","./sprites/but_undo.png");s_oSpriteLibrary.addSprite("arrow_back","./sprites/arrow_back.png");b+=s_oSpriteLibrary.getNumSprites();s_oSpriteLibrary.loadSprites()};this._onImagesLoaded=function(){c++;k.refreshLoader(Math.floor(c/
b*100))};this._onAllImagesLoaded=function(){};this.onAllPreloaderImagesLoaded=function(){this._loadImages()};this._onRemovePreloader=function(){k.unload();this.gotoMenu()};this.gotoMenu=function(){new CMenu;e=STATE_MENU};this.goToModeMenu=function(){new CModeMenu;e=STATE_MENU};this.gotoGame=function(d){s_iDifficultyMode=d;n=new CGame(p);e=STATE_GAME};this.gotoHelp=function(){new CHelp;e=STATE_HELP};this.stopUpdate=function(){f=!1;createjs.Ticker.paused=!0;$("#block_game").css("display","block");Howler.mute(!0)};
this.startUpdate=function(){s_iPrevTime=(new Date).getTime();f=!0;createjs.Ticker.paused=!1;$("#block_game").css("display","none");s_bAudioActive&&Howler.mute(!1)};this._update=function(d){if(!1!==f){var h=(new Date).getTime();s_iTimeElaps=h-s_iPrevTime;s_iCntTime+=s_iTimeElaps;s_iCntFps++;s_iPrevTime=h;1E3<=s_iCntTime&&(s_iCurFps=s_iCntFps,s_iCntTime-=1E3,s_iCntFps=0);e===STATE_GAME&&n.update();s_oStage.update(d)}};s_oMain=this;var p=a;ENABLE_FULLSCREEN=a.fullscreen;ENABLE_CHECK_ORIENTATION=a.check_orientation;
s_bAudioActive=a.audio_enable_on_startup;this.initContainer()}var s_bMobile,s_iDifficultyMode,s_bAudioActive=!0,s_iCntTime=0,s_iTimeElaps=0,s_iPrevTime=0,s_iCntFps=0,s_iCurFps=0,s_oDrawLayer,s_oStage,s_oMain,s_oSpriteLibrary,s_oCanvas,s_bFullscreen=!1,s_aSounds,s_aSoundsInfo;
function CTextButton(a,f,c,b,e,k,n,p){var d,h,g,z,x,v,A,m,y,E;this._init=function(u,H,I,B,r,M,G){d=!1;h=1;g=[];z=[];E=createBitmap(I);m=new createjs.Container;m.x=u;m.y=H;m.regX=I.width/2;m.regY=I.height/2;s_bMobile||(m.cursor="pointer");m.addChild(E,y);p.addChild(m);y=new CTLText(m,10,5,I.width-20,I.height-10,G,"center",M,r,1,0,0,B,!0,!0,!1,!1);this._initListener()};this.unload=function(){m.off("mousedown",x);m.off("pressup",v);p.removeChild(m)};this.setVisible=function(u){m.visible=u};this.setAlign=
function(u){y.textAlign=u};this.setTextX=function(u){y.x=u};this.setScale=function(u){h=m.scaleX=m.scaleY=u};this.enable=function(){d=!1};this.disable=function(){d=!0};this._initListener=function(){x=m.on("mousedown",this.buttonDown);v=m.on("pressup",this.buttonRelease)};this.addEventListener=function(u,H,I){g[u]=H;z[u]=I};this.addEventListenerWithParams=function(u,H,I,B){g[u]=H;z[u]=I;A=B};this.buttonRelease=function(){d||(playSound("click",1,!1),m.scaleX=h,m.scaleY=h,g[ON_MOUSE_UP]&&g[ON_MOUSE_UP].call(z[ON_MOUSE_UP],
A))};this.buttonDown=function(){d||(m.scaleX=.9*h,m.scaleY=.9*h,g[ON_MOUSE_DOWN]&&g[ON_MOUSE_DOWN].call(z[ON_MOUSE_DOWN]))};this.setPosition=function(u,H){m.x=u;m.y=H};this.tweenPosition=function(u,H,I,B,r,M,G){createjs.Tween.get(m).wait(B).to({x:u,y:H},I,r).call(function(){void 0!==M&&M.call(G)})};this.animNotify=function(){createjs.Tween.get(m,{loop:!0}).to({rotation:-2},55).to({rotation:0},55).to({rotation:2},55).to({rotation:0},55).to({rotation:-2},55).to({rotation:0},55).to({rotation:2},55).to({rotation:0},
55).wait(800)};this.changeText=function(u){y.refreshText(u)};this.setX=function(u){m.x=u};this.setY=function(u){m.y=u};this.getButtonImage=function(){return m};this.getX=function(){return m.x};this.getY=function(){return m.y};this.getSprite=function(){return m};this.getScale=function(){return m.scaleX};this._init(a,f,c,b,e,k,n)}
function CToggle(a,f,c,b,e){var k,n,p,d,h,g,z;this._init=function(v,A,m,y){n=[];p=[];var E=new createjs.SpriteSheet({images:[m],frames:{width:m.width/2,height:m.height,regX:m.width/2/2,regY:m.height/2},animations:{state_true:[0],state_false:[1]}});k=y;d=createSprite(E,"state_"+k,m.width/2/2,m.height/2,m.width/2,m.height);d.x=v;d.y=A;d.stop();x.addChild(d);this._initListener()};this.unload=function(){d.off("mousedown",h);d.off("pressup",g);s_bMobile||d.off("mouseover",z);x.removeChild(d)};this._initListener=
function(){h=d.on("mousedown",this.buttonDown);g=d.on("pressup",this.buttonRelease);s_bMobile||(z=d.on("mouseover",this.buttonOver))};this.addEventListener=function(v,A,m){n[v]=A;p[v]=m};this.setActive=function(v){k=v;d.gotoAndStop("state_"+k)};this.buttonRelease=function(){d.scaleX=1;d.scaleY=1;playSound("click",1,!1);k=!k;d.gotoAndStop("state_"+k);n[ON_MOUSE_UP]&&n[ON_MOUSE_UP].call(p[ON_MOUSE_UP],k)};this.buttonDown=function(){d.scaleX=.9;d.scaleY=.9;n[ON_MOUSE_DOWN]&&n[ON_MOUSE_DOWN].call(p[ON_MOUSE_DOWN])};
this.buttonOver=function(v){s_bMobile||(v.target.cursor="pointer")};this.setPosition=function(v,A){d.x=v;d.y=A};var x=e;this._init(a,f,c,b)}
function CDeleteButton(a,f,c,b){var e,k,n,p,d,h,g,z;this._init=function(x,v,A,m){k=!0;n=[];p=[];var y=new createjs.SpriteSheet({images:[A],frames:{width:A.width/2,height:A.height,regX:A.width/2/2,regY:A.height/2},animations:{state_true:[0],state_false:[1]}});e=m;d=createSprite(y,"state_"+e,A.width/2/2,A.height/2,A.width/2,A.height);d.x=x;d.y=v;d.stop();s_oStage.addChild(d);this._initListener()};this.unload=function(){d.off("mousedown",h);d.off("pressup",g);s_bMobile||d.off("mouseover",z);s_oStage.removeChild(d)};
this.changeMode=function(){k=!k;e=!1;d.gotoAndStop("state_"+e)};this.reset=function(){e=!1;d.gotoAndStop("state_"+e)};this._initListener=function(){h=d.on("mousedown",this.buttonDown);g=d.on("pressup",this.buttonRelease);s_bMobile||(z=d.on("mouseover",this.buttonOver))};this.buttonOver=function(x){s_bMobile||(x.target.cursor="pointer")};this.addEventListener=function(x,v,A){n[x]=v;p[x]=A};this.setActive=function(x){e=x;d.gotoAndStop("state_"+e)};this.buttonRelease=function(){d.scaleX=1;d.scaleY=1;
k?(s_oInterface.setAllBlackColor(),e=!0,d.gotoAndStop("state_"+e),s_oGame.setDeleteState()):s_oGame.deleteCell();n[ON_MOUSE_UP]&&n[ON_MOUSE_UP].call(p[ON_MOUSE_UP],e)};this.buttonDown=function(){d.scaleX=.9;d.scaleY=.9;n[ON_MOUSE_DOWN]&&n[ON_MOUSE_DOWN].call(p[ON_MOUSE_DOWN])};this.setPosition=function(x,v){d.x=x;d.y=v};this._init(a,f,c,b)}
function CGfxButton(a,f,c,b){var e,k,n,p,d,h,g,z,x,v,A,m;this._init=function(y,E,u,H){k=1;d=[];h=[];n=u.width;p=u.height;g=createBitmap(u);g.x=y;g.y=E;g.regX=n/2;g.regY=p/2;A=H;A.addChild(g);this._initListener()};this.unload=function(){g.off("mousedown",z);g.off("pressup",x);s_bMobile||g.off("mouseover",v);A.removeChild(g)};this.setVisible=function(y){g.visible=y};this._initListener=function(){z=g.on("mousedown",this.buttonDown);x=g.on("pressup",this.buttonRelease);s_bMobile||(v=g.on("mouseover",
this.buttonOver))};this.addEventListener=function(y,E,u){d[y]=E;h[y]=u};this.buttonRelease=function(){e||(m||(g.scaleX=k,g.scaleY=k),d[ON_MOUSE_UP]&&d[ON_MOUSE_UP].call(h[ON_MOUSE_UP]))};this.buttonDown=function(){e||(m||(g.scaleX=.9*k,g.scaleY=.9*k),playSound("click",1,!1),d[ON_MOUSE_DOWN]&&d[ON_MOUSE_DOWN].call(h[ON_MOUSE_DOWN]))};this.buttonOver=function(y){s_bMobile||(y.target.cursor="pointer")};this.pulseAnimation=function(){m=createjs.Tween.get(g,{loop:!0}).to({scaleX:1.1*k,scaleY:1.1*k},850,
createjs.Ease.quadOut).to({scaleX:k,scaleY:k},650,createjs.Ease.quadIn)};this.setPosition=function(y,E){g.x=y;g.y=E};this.setX=function(y){g.x=y};this.setY=function(y){g.y=y};this.getButtonImage=function(){return g};this.getX=function(){return g.x};this.getY=function(){return g.y};this.enable=function(){e=!1;g.filters=[];g.cache(0,0,n,p)};this.disable=function(){e=!0;try{var y=(new createjs.ColorMatrix).adjustSaturation(-100).adjustBrightness(40);g.filters=[new createjs.ColorMatrixFilter(y)];g.cache(0,
0,n,p)}catch(E){}};this._init(a,f,c,b);return this}
function CMenu(){var a,f,c,b,e,k,n,p,d,h,g,z,x,v=null,A=null;this._init=function(){n=createBitmap(s_oSpriteLibrary.getSprite("bg_menu"));s_oStage.addChild(n);if(s_oLocalStorage.isUsed()){var m=TEXT_NEW;var y=s_oSpriteLibrary.getSprite("but_play");d=new CTextButton(CANVAS_WIDTH/2,CANVAS_HEIGHT-400,y,TEXT_CONTINUE,SECONDARY_FONT,"#ffffff",100,s_oStage);d.addEventListener(ON_MOUSE_UP,this._onButContinue,this);d.animNotify()}else m=TEXT_PLAY;y=s_oSpriteLibrary.getSprite("but_play");p=new CTextButton(CANVAS_WIDTH/
2,CANVAS_HEIGHT-600,y,m,SECONDARY_FONT,"#ffffff",100,s_oStage);p.addEventListener(ON_MOUSE_UP,this._onButPlayRelease,this);if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)y=s_oSpriteLibrary.getSprite("audio_icon"),e=CANVAS_WIDTH-y.height/2-10,k=y.height/2+10,g=new CToggle(e,k,y,s_bAudioActive,s_oStage),g.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this);y=s_oSpriteLibrary.getSprite("but_credits");c=y.height/2+10;b=y.height/2+10;z=new CGfxButton(c,b,y,s_oStage);z.addEventListener(ON_MOUSE_UP,this._onButCreditRelease,
this);m=window.document;y=m.documentElement;v=y.requestFullscreen||y.mozRequestFullScreen||y.webkitRequestFullScreen||y.msRequestFullscreen;A=m.exitFullscreen||m.mozCancelFullScreen||m.webkitExitFullscreen||m.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(v=!1);v&&screenfull.isEnabled&&(y=s_oSpriteLibrary.getSprite("but_fullscreen"),a=c+y.width/2+10,f=b,x=new CToggle(a,f,y,s_bFullscreen,s_oStage),x.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this));h=new createjs.Shape;h.graphics.beginFill("black").drawRect(0,
0,CANVAS_WIDTH,CANVAS_HEIGHT);s_oStage.addChild(h);createjs.Tween.get(h).to({alpha:0},1E3).call(function(){h.visible=!1});this.refreshButtonPos(s_iOffsetX,s_iOffsetY);s_oLocalStorage.isAvailable()||new CMsgBox(TEXT_IOS_PRIVATE)};this.unload=function(){p.unload();p=null;d&&(d.unload(),d=null);if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)g.unload(),g=null;v&&screenfull.isEnabled&&x.unload();s_oStage.removeChild(n);s_oMenu=n=null};this.refreshButtonPos=function(m,y){z.setPosition(c+m,y+b);!1!==DISABLE_SOUND_MOBILE&&
!1!==s_bMobile||g.setPosition(e-m,y+k);v&&screenfull.isEnabled&&x.setPosition(a+m,f+y)};this._onAudioToggle=function(){Howler.mute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this._onButPlayRelease=function(){s_oLocalStorage.isUsed()?(new CAreYouSurePanel(s_oMenu._onConfirmExit)).setMsg(TEXT_WARNING_NEW_GAME):this._onConfirmExit()};this._onConfirmExit=function(){s_oLocalStorage.deleteData();s_oMenu.unload();$(s_oMain).trigger("start_session");s_oMain.goToModeMenu()};this._onButContinue=function(){s_oMenu.unload();
$(s_oMain).trigger("start_session");s_oMain.gotoGame()};this._onButCreditRelease=function(){new CCreditsPanel};this.resetFullscreenBut=function(){v&&screenfull.isEnabled&&x.setActive(s_bFullscreen)};this._onFullscreenRelease=function(){s_bFullscreen?A.call(window.document):v.call(window.document.documentElement);sizeHandler()};s_oMenu=this;this._init()}var s_oMenu=null;
function CModeMenu(){var a,f,c,b,e,k,n,p,d,h,g;this._init=function(){c=createBitmap(s_oSpriteLibrary.getSprite("bg_mode_menu"));s_oStage.addChild(c);new CTLText(s_oStage,CANVAS_WIDTH/2-500,220,1E3,100,100,"center",PRIMARY_FONT_COLOUR,SECONDARY_FONT,1,0,0,TEXT_TOP_MODE,!0,!0,!1,!1);var x=CANVAS_WIDTH/2;b=new createjs.Container;b.x=x;b.y=420;e=new createjs.Container;e.x=x;e.y=850;k=new createjs.Container;k.x=x;k.y=1280;new CTLText(b,-160,-40,320,50,50,"center",PRIMARY_FONT_COLOUR,SECONDARY_FONT,1,0,
0,TEXT_EASY,!0,!0,!1,!1);var v=s_oSpriteLibrary.getSprite("mod_easy_icon");n=new CGfxButton(x,580,v,s_oStage);n.addEventListener(ON_MOUSE_UP,this._selectEasy,this);new CTLText(e,-160,-40,320,50,50,"center",PRIMARY_FONT_COLOUR,SECONDARY_FONT,1,0,0,TEXT_MEDIUM,!0,!0,!1,!1);v=s_oSpriteLibrary.getSprite("mod_medium_icon");p=new CGfxButton(x,1010,v,s_oStage);p.addEventListener(ON_MOUSE_UP,this._selectMedium,this);new CTLText(k,-160,-40,320,50,50,"center",PRIMARY_FONT_COLOUR,SECONDARY_FONT,1,0,0,TEXT_HARD,
!0,!0,!1,!1);v=s_oSpriteLibrary.getSprite("mod_hard_icon");d=new CGfxButton(x,1440,v,s_oStage);d.addEventListener(ON_MOUSE_UP,this._selectHard,this);s_oStage.addChild(b,e,k);v=s_oSpriteLibrary.getSprite("arrow_back");a=v.width/2+10;f=CANVAS_HEIGHT-v.height/2-10;h=new CGfxButton(a,f,v,s_oStage);h.addEventListener(ON_MOUSE_UP,this._onExit,this);g=new createjs.Shape;g.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);s_oStage.addChild(g);createjs.Tween.get(g).to({alpha:0},400).call(function(){g.visible=
!1});this.refreshButtonPos(s_iOffsetX,s_iOffsetY)};this.unload=function(){s_oStage.removeAllChildren();h.unload();c=null};this.refreshButtonPos=function(x,v){h.setPosition(a+x,f-v)};this._selectEasy=function(){z.unload();$(s_oMain).trigger("start_level",1);s_oMain.gotoGame(0)};this._selectMedium=function(){z.unload();$(s_oMain).trigger("start_level",1);s_oMain.gotoGame(1)};this._selectHard=function(){z.unload();$(s_oMain).trigger("start_level",1);s_oMain.gotoGame(2)};this._onExit=function(){z.unload();
s_oMain.gotoMenu()};var z=this;this._init();s_oModeMenu=this}var s_oModeMenu=null;
function CGame(a){function f(q){q||(q=window.event);q.preventDefault();q=q.keyCode-48;10>q&&0<q?I.pressNumButton(q):-2===q?I.pressDelButton():58>q&&48<q&&I.pressNumButton(q-48)}function c(q){q.preventDefault();q=q.keyCode-48;10>q&&0<q?I.releaseNumButton(q):-2===q?I.releaseDelButton():58>q&&48<q&&I.releaseNumButton(q-48)}var b,e,k,n,p,d,h,g,z,x,v,A,m,y,E,u,H,I,B=null,r,M,G,W,Z,X,T;this._init=function(){g=h=d=p=n=k=!1;X=y=m=z=x=v=0;T=[];var q=createBitmap(s_oSpriteLibrary.getSprite("bg_game"));s_oStage.addChild(q);
G=null;I=new CInterface;r=new CGrid;s_oLocalStorage.isUsed()?this.resumeGame():this.setNewGame();!1===s_bMobile&&(document.onkeydown=f,document.onkeyup=c)};this.unload=function(){I.unload();null!==B&&B.unload();createjs.Tween.removeAllTweens();s_oStage.removeAllChildren();s_oGame=null};this.setNewGame=function(){E=Array(81);this._generateValidGrid(E);E=this._convertToMatrix(E);u=[];for(var q=0;9>q;q++){u[q]=[];for(var t=0;9>t;t++)u[q][t]=E[q][t]}M=new CSudokuLoader;e=!0};this.resumeGame=function(){u=
[];E=[];H=[];for(var q=0;9>q;q++){u[q]=[];E[q]=[];H[q]=[];for(var t=0;9>t;t++)E[q][t]=s_aSolution[q][t],u[q][t]=s_aSolution[q][t],H[q][t]=s_aGridMask[q][t]}this._coverGrid(E);this.setGrid(E);if(null!==s_aGridState)for(q=0;9>q;q++)for(t=0;9>t;t++)if(!r.isGiven(q,t))if(0!==s_aGridState[q][t]){var w=s_aGridState[q][t];r.resumeNum(w,q,t);I.updateCounterOnButton(w,r.getList(w).length);E[q][t]=w}else null!==s_aNotesWritten&&0<s_aNotesWritten[q][t].length&&r.resumeNotes(s_aNotesWritten[q][t],q,t);d=s_oGameParam.helpnotes;
g=s_oGameParam.helptime;m=s_oGameParam.numhint;v=s_oGameParam.time;s_iDifficultyMode=s_oGameParam.difficulty;g&&this.setNoTime();b=!0};this.saveData=function(){X=0;s_oGameParam={helpnotes:d,helptime:g,numhint:m,time:v,difficulty:s_iDifficultyMode};s_oLocalStorage.saveData()};this.getHint=function(){m++;for(var q=[],t=0;9>t;t++)for(var w=0;9>w;w++)0===E[t][w]&&q.push({row:t,col:w});if(1===q.length)this.gameOver();else if(0!==q.length){shuffle(q);t=q[0].row;w=q[0].col;var C=u[t][w];E[t][w]=C;r.setHintNumber(t,
w,C);r.setActiveCell(q[0]);r.updateNote(C);r.setActiveCell(q[0]);this._getEndCounterAndSetButCounter();s_aGridState=E;this.saveData()}};this.setNoTime=function(){b=!1;I.setNoTime();g=!0;this.saveData()};this.solveAndWrite=function(){for(var q=0;9>q;q++)for(var t=0;9>t;t++)r.isGiven(q,t)&&E[q][t]===u[q][t]||(r.setSolvedNumber(q,t,u[q][t]),E[q][t]=u[q][t]);this._setEndingStateWhenSolve();h=!0};this.resetGame=function(){for(var q=0;9>q;q++)for(var t=0;9>t;t++)r.isGiven(q,t)||(r.deleteResetNumber(q,t),
E[q][t]=0);this._getEndCounterAndSetButCounter();r.turnOffAllCells();r.highlightCells()};this.fillWithNote=function(){this.clearNoteFill();for(var q=r.getList(0),t=0;t<q.length;t++)for(var w=q[t],C=1;10>C;C++)!0!==r.checkCollision(C,w.row,w.col,!1)&&r.writeHelpNote(C,w.row,w.col);d=!0;s_aNotesWritten=r.getAllNotes();this.saveData()};this.deleteAllNote=function(){this.clearNoteFill();s_aNotesWritten=r.getAllNotes();this.saveData()};this.clearNoteFill=function(){r.deleteAllNote()};this.setNoteState=
function(){k=!k};this.setDigitState=function(){p=!p;n=!1;z=0};this.setDeleteState=function(){n=!0;z=0};this.setCurNum=function(q){n=!1;z=q};this.activeCell=function(q){p&&!n?(r.setActiveCell(q),this.writeNum(z)):p&&n?(r.setActiveCell(q),r.deleteCell()):r.setActiveCell(q)};this.writeNum=function(q){if(k)r.writeNote(q),s_aNotesWritten=r.getAllNotes();else{var t=r.getCurActiveCell().row,w=r.getCurActiveCell().col,C=r.getCurActiveCell().num;this.addHistory(q,C);var N=r.writeNum(q);I.updateCounterOnButton(q,
r.getList(q).length);0!==C&&I.updateCounterOnButton(C,r.getList(C).length);N&&(E[t][w]=q)}s_aGridState=E;this.saveData()};this.deleteCell=function(){var q=r.getCurActiveCell().num,t=r.getCurActiveCell().row,w=r.getCurActiveCell().col;r.deleteCell();0!==q&&(this.addHistory(0,q),I.updateCounterOnButton(q,r.getList(q).length),E[t][w]=0,s_aGridState=E);s_aNotesWritten=r.getAllNotes();this.saveData()};this.showPausePanel=function(q){q?null===G&&(G=new CPausePanel):null!==G&&(G.unload(),G=null)};this.tryShowAd=
function(){y++;y===AD_SHOW_COUNTER&&(y=0,$(s_oMain).trigger("show_interlevel_ad"))};this.restartGame=function(){this.unload();this._init()};this.onExit=function(){this.saveData();this.unload();s_oMain.gotoMenu()};this._onExitHelp=function(){b=!0};this.checkEndGame=function(q){"add"===q?x++:x--;81===x&&this.gameOver()};this.gameOver=function(){var q=Math.floor((TIME_BONUS_LIMIT[s_iDifficultyMode]-v)/100);B=new CEndPanel(s_oSpriteLibrary.getSprite("msg_box"),d,h,g,m,q);B.show(v);s_oLocalStorage.deleteData()};
this.addHistory=function(q,t){var w=r.getCurActiveCell().row,C=r.getCurActiveCell().col,N=r.checkCollision(q,w,C,!1)&&0<q;r.isGiven(w,C)||q===t||N||(T.push({row:w,col:C,numpushed:q,oldnum:t}),I.enableUndo())};this.undo=function(){var q=T.pop(),t=q.row,w=q.col,C=q.oldnum;q=q.numpushed;r.setActiveCell({row:t,col:w});0===C?(r.deleteCell(),I.updateCounterOnButton(q,r.getList(q).length),E[t][w]=0):(r.writeNum(C),I.updateCounterOnButton(C,r.getList(C).length),0!==q&&I.updateCounterOnButton(q,r.getList(q).length),
E[t][w]=C);s_aGridState=E;this.saveData();0===T.length&&I.disableUndo()};this.pauseTimer=function(q){b=!q};this.update=function(){if(e){M.update();for(var q=0;12>q;q++){for(var t=0;9>t;t++)for(var w=0;9>w;w++)E[t][w]=u[t][w];this._generateMask(s_iDifficultyMode);this._coverGrid(E);A=solve(E);if(1!==A){e=!1;M.unload();this._coverGrid(E);this.setGrid(E);b=!0;s_oMain.startUpdate();s_aSolution=u;s_aGridMask=H;this.saveData();break}}}b&&(X+=s_iTimeElaps,X>TIME_SAVE_DATA&&this.saveData(),v+=s_iTimeElaps,
5999E3<v&&(v=5999E3),I.refreshTime(formatTime(v)))};this.setGrid=function(q){for(var t=0;9>t;t++)for(var w=0;9>w;w++)r.setGiven(t,w,q[t][w]);this._getEndCounterAndSetButCounter()};this._getEndCounterAndSetButCounter=function(){x=0;for(var q=1;10>q;q++){var t=r.getList(q).length;x+=t;I.updateCounterOnButton(q,t)}};this._setEndingStateWhenSolve=function(){x=81;for(var q=1;10>q;q++)I.updateCounterOnButton(q,9);W=new createjs.Shape;W.graphics.beginFill("rgba(255,255,255,0.01)").drawRect(0,0,CANVAS_WIDTH,
CANVAS_HEIGHT);s_oStage.addChild(W);Z=W.on("mousedown",this.buttonDownWhenSolve);s_bMobile||(Z=W.on("mouseover",this.buttonOverWhenSolve))};this.buttonDownWhenSolve=function(){W.off("mousedown",Z);s_bMobile||W.off("mouseover",Z);aa.gameOver()};this.buttonOverWhenSolve=function(q){s_bMobile||(q.target.cursor="pointer")};this._convertToMatrix=function(q){for(var t=0,w=[],C=0;81>C;C+=9)w[t]=[q[C],q[C+1],q[C+2],q[C+3],q[C+4],q[C+5],q[C+6],q[C+7],q[C+8]],t++;return w};this._generateMask=function(q){H=
[];for(var t=0;9>t;t++){H[t]=[];for(var w=0;9>w;w++)H[t][w]=0}t=MAX_GIVENS_EASY-RANGE_GIVENS;switch(q){case EASY_MODE:t=MAX_GIVENS_EASY-RANGE_GIVENS;var C=t+Math.ceil(Math.random()*RANGE_GIVENS);var N=LOWER_BOUND_EASY;break;case MEDIUM_MODE:t=MAX_GIVENS_MEDIUM-RANGE_GIVENS;C=t+Math.ceil(Math.random()*RANGE_GIVENS);N=LOWER_BOUND_MEDIUM;break;case HARD_MODE:t=MAX_GIVENS_HARD-RANGE_GIVENS,C=t+Math.ceil(Math.random()*RANGE_GIVENS),N=LOWER_BOUND_HARD}var l=[];for(t=0;9>t;t++)t<N?l.push(1):l.push(0);q=
[];for(t=0;9>t;t++)for(q[t]=0,shuffle(l),w=0;9>w;w++)1===l[w]&&(H[t][w]=1);var U=[];for(t=0;9>t;t++)for(U[t]=0,shuffle(l),w=0;9>w;w++)1===l[w]&&(H[w][t]=1);for(t=l=0;9>t;t++)for(w=0;9>w;w++)1===H[t][w]&&(q[t]++,U[w]++,l++);C=l-C;if(0>C)this._generateMask(s_iDifficultyMode);else if(0===C)return;l=[];for(t=0;9>t;t++)for(w=0;9>w;w++)1===H[t][w]&&l.push({row:t,col:w,weightRow:q[t],weightCol:U[w],weightTotal:q[t]+U[w]});l.sort(function(J,D){return J.weightTotal<D.weightTotal?-1:J.weightTotal>D.weightTotal?
1:0});for(w=0;w<C;){t=l.length-1;if(0>t)break;if(l[t].weightRow>N&&l[t].weightCol>N){H[l[t].row][l[t].col]=0;var Y=l[t].row,S=l[t].col;q[Y]--;U[S]--;for(t=0;t<l.length;t++)l[t].row===Y&&(l[t].weightRow=q[Y],l[t].weightTotal--),l[t].col===S&&(l[t].weightCol=U[S],l[t].weightTotal--);w++}l.pop()}};this._coverGrid=function(q){for(var t=0;9>t;t++)for(var w=0;9>w;w++)0===H[t][w]&&(q[t][w]=0)};this.printGrid=function(q){for(var t="",w=0;9>w;w++){for(var C=0;9>C;C++)if(t+=q[w][C]+" ",2===C||5===C)t+="| ";
t+="\n";if(2===w||5===w)t+="---------------------\n"}trace(t)};this._generateValidGrid=function(q){for(var t=0;9>t;t++)for(var w=0;9>w;w++)q[9*t+w]=(3*t+Math.floor(t/3)+w)%9+1;for(t=0;42>t;t++){var C=Math.ceil(9*Math.random());do var N=Math.ceil(9*Math.random());while(C===N);for(w=0;9>w;w++)for(var l=0;9>l;l++)q[9*w+l]===C?q[9*w+l]=N:q[9*w+l]===N&&(q[9*w+l]=C)}for(l=0;42>l;l++)for(C=Math.floor(3*Math.random()),N=Math.floor(3*Math.random()),w=0;9>w;w++)t=q[9*w+(3*C+l%3)],q[9*w+(3*C+l%3)]=q[9*w+(3*
N+l%3)],q[9*w+(3*N+l%3)]=t;for(C=0;42>C;C++)for(l=Math.floor(3*Math.random()),N=Math.floor(3*Math.random()),w=0;9>w;w++)t=q[9*w+(C%3*3+l)],q[9*w+(C%3*3+l)]=q[9*w+(C%3*3+N)],q[9*w+(C%3*3+N)]=t;for(C=0;42>C;C++)for(w=Math.floor(3*Math.random()),N=Math.floor(3*Math.random()),l=0;9>l;l++)t=q[9*(C%3*3+w)+l],q[9*(C%3*3+w)+l]=q[9*(C%3*3+N)+l],q[9*(C%3*3+N)+l]=t};s_oGame=this;MAX_GIVENS_EASY=a.max_givens_beginner;MAX_GIVENS_MEDIUM=a.max_givens_intermediate;MAX_GIVENS_HARD=a.max_givens_advanced;TIME_BONUS_LIMIT[0]=
a.bonus_time_beginner;TIME_BONUS_LIMIT[1]=a.bonus_time_intermediate;TIME_BONUS_LIMIT[2]=a.bonus_time_advanced;AD_SHOW_COUNTER=a.ad_show_counter;var aa=this;this._init()}var s_oGame;
function CInterface(){var a,f,c,b,e,k,n,p,d,h,g,z,x,v,A,m,y,E,u,H,I,B;this._init=function(){g=[];for(var r=0;9>r;r++)g[r+1]=5<r?new CNumButton(97+177.5*(r-6),1650,r+1):new CNumButton(97+177.5*r,1500,r+1);r=s_oSpriteLibrary.getSprite("but_del_toggle");z=new CDeleteButton(629.5,1650,r,!1);z.changeMode();r=s_oSpriteLibrary.getSprite("note_toggle");x=new CToggle(807,1650,r,!0,s_oStage);x.addEventListener(ON_MOUSE_UP,this._onNoteToggle,this);r=s_oSpriteLibrary.getSprite("mode_toggle");v=new CToggle(984.5,
1650,r,!0,s_oStage);v.addEventListener(ON_MOUSE_UP,this._onModeToggle,this);var M;r=s_oSpriteLibrary.getSprite("but_exit");d=CANVAS_WIDTH-r.height/2-20;h=r.height/2+10;H=new CGfxButton(d,h,r,s_oStage);H.addEventListener(ON_MOUSE_UP,this._onExit,this);n=M=CANVAS_WIDTH-r.width/2-175;p=r.height/2+10;if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)r=s_oSpriteLibrary.getSprite("audio_icon"),E=new CToggle(n,p,r,s_bAudioActive,s_oStage),E.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this);M=CANVAS_WIDTH-
r.width/2-257;r=s_oSpriteLibrary.getSprite("config_icon");e=M;k=r.height/2+10;u=new CGfxButton(e,k,r,s_oStage);u.addEventListener(ON_MOUSE_UP,this._onConf,this);M=CANVAS_WIDTH-r.width/2-490;r=s_oSpriteLibrary.getSprite("but_help_icon");c=M;b=r.height/2+10;A=new CGfxButton(c,b,r,s_oStage);A.addEventListener(ON_MOUSE_UP,this._onHelpPress,this);M=c-r.width-10;r=s_oSpriteLibrary.getSprite("but_undo");a=M;f=r.height/2+10;I=new CGfxButton(a,f,r,s_oStage);I.addEventListener(ON_MOUSE_UP,this._onUndoPress,
this);this.disableUndo();r=s_oSpriteLibrary.getSprite("time_display");y=createBitmap(r);y.x=30;y.y=260;s_oStage.addChild(y);m=new CTLText(s_oStage,55,276,150,60,60,"center","#fff",PRIMARY_FONT,1.1,0,0,"00:00",!0,!0,!1,!1);this.refreshButtonPos(s_iOffsetX,s_iOffsetY)};this.unload=function(){if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)E.unload(),E=null;H.unload();for(var r=0;9>r;r++)g[r+1].unload();z.unload();x.unload();v.unload();A.unload();I.unload();s_oInterface=B=null};this.refreshButtonPos=function(r,
M){H.setPosition(d-r,M+h);u.setPosition(e-r,M+k);A.setPosition(c-r,M+b);I.setPosition(a-r,M+f);!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||E.setPosition(n-r,M+p)};this.refreshTime=function(r){m.refreshText(r)};this._onConf=function(){B=new CConfigPanel};this.setNoTime=function(){s_oStage.removeChild(m.getText());s_oStage.removeChild(y)};this._onHelpPress=function(){new CHelpPanel;s_oGame.pauseTimer(!0)};this.enableUndo=function(){I.enable()};this.disableUndo=function(){I.disable()};this._onUndoPress=
function(){s_oGame.undo()};this._onNoteToggle=function(){s_oGame.setNoteState()};this._onModeToggle=function(){for(var r=0;9>r;r++)g[r+1].changeMode();z.changeMode();this.setAllBlackColor();s_oGame.setDigitState()};this.updateCounterOnButton=function(r,M){0<r&&9>=r&&(g[r].clearCounter(),g[r].setCounter(M))};this.pressNumButton=function(r){g[r].buttonDown()};this.releaseNumButton=function(r){g[r].buttonRelease()};this.pressDelButton=function(){z.buttonDown()};this.releaseDelButton=function(r){z.buttonRelease()};
this.setAllBlackColor=function(){for(var r=0;9>r;r++)g[r+1].changeNumColor(!1);z.reset()};this.resetFullscreenBut=function(){B&&B.resetFullscreenBut()};this.onExitFromConfig=function(){B=null};this._onAudioToggle=function(){Howler.mute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this._onExit=function(){new CAreYouSurePanel(s_oInterface._onConfirmExit)};this._onNegateExit=function(){};this._onConfirmExit=function(){$(s_oMain).trigger("end_level",1);$(s_oMain).trigger("end_session");$(s_oMain).trigger("show_interlevel_ad");
s_oGame.onExit()};s_oInterface=this;this._init();return this}var s_oInterface=null;
function CHelpPanel(){var a,f,c,b,e,k,n,p,d,h,g;this._init=function(){var x=this;b=new createjs.Container;s_oStage.addChild(b);f=createBitmap(s_oSpriteLibrary.getSprite("bg_help"));b.addChild(f);var v=CANVAS_WIDTH/2,A=CANVAS_HEIGHT/2-400;new CTLText(b,v-350,A-210,700,140,140,"center",PRIMARY_FONT_COLOUR,SECONDARY_FONT,1,0,0,TEXT_HELP0,!0,!0,!1,!1);new CTLText(b,v-400,A,800,250,48,"center",PRIMARY_FONT_COLOUR,PRIMARY_FONT,1,0,0,TEXT_HELP1,!0,!0,!0,!1);k=b.on("pressup",function(){x._onExitHelp()});
e=new createjs.Container;e.visible=0;s_oStage.addChild(e);e.on("pressup",function(){x._onExitHelp()});c=createBitmap(s_oSpriteLibrary.getSprite("bg_help2"));e.addChild(c);a=!1===s_bMobile?TEXT_HELP1_PAGE2:TEXT_HELP1_MOB_PAGE2;new CTLText(e,v-400,A-210,800,140,140,"center",PRIMARY_FONT_COLOUR,SECONDARY_FONT,1,0,0,TEXT_HELP0_PAGE2,!0,!0,!1,!1);new CTLText(e,CANVAS_WIDTH/2-400,CANVAS_HEIGHT/2-470,800,80,35,"center",PRIMARY_FONT_COLOUR,PRIMARY_FONT,1,0,0,a,!0,!0,!0,!1);new CTLText(e,CANVAS_WIDTH/2-200,
CANVAS_HEIGHT/2-300,600,150,35,"left",PRIMARY_FONT_COLOUR,PRIMARY_FONT,1,0,0,TEXT_HELP2_PAGE2,!0,!0,!0,!1);new CTLText(e,CANVAS_WIDTH/2-380,CANVAS_HEIGHT/2+10,600,150,35,"right",PRIMARY_FONT_COLOUR,PRIMARY_FONT,1,0,0,TEXT_HELP3_PAGE2,!0,!0,!0,!1);new CTLText(e,CANVAS_WIDTH/2-200,CANVAS_HEIGHT/2+300,600,150,35,"left",PRIMARY_FONT_COLOUR,PRIMARY_FONT,1,0,0,TEXT_HELP4_PAGE2,!0,!0,!0,!1);n=e.on("pressup",function(){x._onExitHelp()});createjs.Tween.get(e).to({alpha:1},700);h=createBitmap(s_oSpriteLibrary.getSprite("arrow"));
h.x=740;h.y=1450;h.alpha=0;p=h.on("click",x._changePageTo2);if(!s_bMobile)h.on("mouseover",x.buttonOver);s_oStage.addChild(h);g=createBitmap(s_oSpriteLibrary.getSprite("arrow"));g.scaleX=-1;g.x=340;g.y=1450;g.visible=!1;d=g.on("click",x._changePageTo1);if(!s_bMobile)g.on("mouseover",x.buttonOver);s_oStage.addChild(g);createjs.Tween.get(h).to({alpha:1},700)};this.unload=function(){s_oStage.removeChild(b,e,h,g);b.off("pressup",k);e.off("pressup",n);s_bMobile||(h.off("mouseover",p),g.off("mouseover",
d))};this._changePageTo1=function(){e.visible=!1;g.visible=!1;b.visible=!0;h.visible=!0};this._changePageTo2=function(){b.visible=!1;h.visible=!1;e.visible=!0;g.visible=!0};this.buttonOver=function(x){s_bMobile||(x.target.cursor="pointer")};this._onExitHelp=function(){$(s_oMain).trigger("show_interlevel_ad");z.unload();s_oGame._onExitHelp()};var z=this;this._init()}
function CPausePanel(){var a,f,c;this._init=function(){a=createBitmap(s_oSpriteLibrary.getSprite("msg_box"));c=new createjs.Text(TEXT_PAUSE," 120px "+SECONDARY_FONT,PRIMARY_FONT_COLOUR);c.x=CANVAS_WIDTH/2;c.y=CANVAS_HEIGHT/2;c.textAlign="center";c.textBaseline="alphabetic";c.lineWidth=700;f=new createjs.Container;f.addChild(a,c);s_oStage.addChild(f);s_oStage.update()};this.unload=function(){s_oStage.removeChild(f)};this._init()}
function CSudokuLoader(){var a,f,c,b,e;this._init=function(){a=!0;f=0;c=new createjs.Container;s_oStage.addChild(c);var k=(new createjs.Graphics).beginFill("rgba(0,0,0,0.8)").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);e=new createjs.Shape(k);e.on("click",function(){});c.addChild(e);new CTLText(c,.5*CANVAS_WIDTH-400,.5*CANVAS_HEIGHT-100,800,120,60,"center","#fff",SECONDARY_FONT,1,0,0,TEXT_GENERATE_SUDOKU,!0,!0,!0,!1);b=new createjs.Text(""," 180px "+PRIMARY_FONT,"#ffffff");b.x=.5*CANVAS_WIDTH-76;b.y=
.5*CANVAS_HEIGHT+50;b.textAlign="left";b.textBaseline="alphabetic";b.lineWidth=800;c.addChild(b)};this.unload=function(){a=!1;s_oStage.removeChild(c)};this.update=function(){a&&(f+=s_iTimeElaps,0<=f&&f<TIME_LOOP_WAIT/4?b.text="":f>=TIME_LOOP_WAIT/4&&f<2*TIME_LOOP_WAIT/4?b.text=".":f>=2*TIME_LOOP_WAIT/4&&f<3*TIME_LOOP_WAIT/4?b.text="..":f>=3*TIME_LOOP_WAIT/4&&f<TIME_LOOP_WAIT?b.text="...":f=0)};s_oSudokuLoader=this;this._init()}var s_oSudokuLoader;
function CEndPanel(a,f,c,b,e,k){var n,p,d,h,g,z,x,v,A;this._init=function(m,y,E,u,H,I){n=I;if(0<H){var B=Math.floor(TIME_BONUS_LIMIT[s_iDifficultyMode]/4E3);n-=B*H}y&&(n/=2);if(E||u)n=0;0>n&&(n=0);p=[];y&&p.push(TEXT_HELP_NOTE+" "+TEXT_INFO_NOTE);E&&p.push(TEXT_HELP_SOLVE+" "+TEXT_INFO_SOLVE);u&&p.push(TEXT_HELP_TIME+" "+TEXT_INFO_SOLVE);0<H&&(1<H?p.push(H+TEXT_HELP_HINTS+" (-"+B+" "+TEXT_INFO_HINT):p.push(H+TEXT_HELP_HINT+" (-"+B+" "+TEXT_INFO_HINT));g=new createjs.Container;g.alpha=0;g.visible=
!1;s_oStage.addChild(g);h=createBitmap(m);g.addChild(h);z=new CTLText(g,CANVAS_WIDTH/2-350,CANVAS_HEIGHT/2-562,700,300,80,"center",PRIMARY_FONT_COLOUR,SECONDARY_FONT,1,0,0," ",!0,!0,!0,!1);x=new CTLText(g,CANVAS_WIDTH/2-350,CANVAS_HEIGHT/2-220,700,80,50,"center",PRIMARY_FONT_COLOUR,SECONDARY_FONT,1,0,0," ",!0,!0,!0,!1);d=[];m=CANVAS_WIDTH/2-350;d[0]=new CTLText(g,m,CANVAS_HEIGHT/2-90,700,80,40,"center",PRIMARY_FONT_COLOUR,SECONDARY_FONT,1,0,0," ",!0,!0,!0,!1);d[1]=new CTLText(g,m,CANVAS_HEIGHT/2+
10,700,80,40,"center",PRIMARY_FONT_COLOUR,SECONDARY_FONT,1,0,0," ",!0,!0,!0,!1);d[2]=new CTLText(g,m,CANVAS_HEIGHT/2+110,700,80,40,"center",PRIMARY_FONT_COLOUR,SECONDARY_FONT,1,0,0," ",!0,!0,!0,!1);d[3]=new CTLText(g,m,CANVAS_HEIGHT/2+210,700,80,40,"center",PRIMARY_FONT_COLOUR,SECONDARY_FONT,1,0,0," ",!0,!0,!0,!1);v=new CTLText(g,m,CANVAS_HEIGHT/2+380,700,70,70,"center",PRIMARY_FONT_COLOUR,SECONDARY_FONT,1,0,0," ",!0,!0,!1,!1)};this.unload=function(){g.off("mousedown",A)};this._initListener=function(){A=
g.on("mousedown",this._onExit)};this.show=function(m){playSound("game_over",1,!1);m=formatTime(m);var y=[];y[0]=TEXT_EASY;y[1]=TEXT_MEDIUM;y[2]=TEXT_EASY;b?z.refreshText(TEXT_GAMEOVER+y[s_iDifficultyMode]+TEXT_SUDOKU):z.refreshText(TEXT_GAMEOVER+y[s_iDifficultyMode]+TEXT_SUDOKU+TEXT_IN+m);1===p.length?x.refreshText(TEXT_HELP_USED):1<p.length&&x.refreshText(TEXT_HELPS_USED);if(0<p.length)for(y=0;y<p.length;y++)d[y].refreshText("-"+p[y]);v.refreshText(TEXT_SCORE+" "+n);g.visible=!0;var E=this;createjs.Tween.get(g).to({alpha:1},
500).call(function(){E._initListener()});$(s_oMain).trigger("save_score",[n,s_iDifficultyMode,m,f,c,b,e]);$(s_oMain).trigger("share_event",k);$(s_oMain).trigger("end_level",1)};this._onExit=function(){g.off("mousedown",A);s_oStage.removeChild(g);$(s_oMain).trigger("end_session");s_oGame.onExit()};this._init(a,f,c,b,e,k);return this}
function CConfigPanel(){var a=null,f=null,c,b,e,k,n,p,d,h,g,z,x,v,A,m,y,E,u;this._init=function(){s_oGame.pauseTimer(!0);var I=this;c=createBitmap(s_oSpriteLibrary.getSprite("msg_box"));x=new createjs.Container;x.x=130;x.y=450;s_oStage.addChild(x);new CTLText(x,0,-50,600,50,50,"left",PRIMARY_FONT_COLOUR,SECONDARY_FONT,1,0,0,TEXT_GETHINT,!0,!0,!1,!1);var B=s_oSpriteLibrary.getSprite("but_help_hint");h=new CGfxButton(750,0,B,x);h.addEventListener(ON_MOUSE_UP,this._onHintPress,this);v=new createjs.Container;
v.x=130;v.y=620;s_oStage.addChild(v);new CTLText(v,0,-50,600,50,50,"left",PRIMARY_FONT_COLOUR,SECONDARY_FONT,1,0,0,TEXT_FILL_WITH_NOTE,!0,!0,!1,!1);B=s_oSpriteLibrary.getSprite("but_help_note");e=new CGfxButton(750,0,B,v);e.addEventListener(ON_MOUSE_UP,this._onHelpPress,this);A=new createjs.Container;A.x=130;A.y=790;s_oStage.addChild(A);new CTLText(A,0,-50,600,50,50,"left",PRIMARY_FONT_COLOUR,SECONDARY_FONT,1,0,0,TEXT_SOLVE,!0,!0,!1,!1);B=s_oSpriteLibrary.getSprite("but_solve");n=new CGfxButton(750,
0,B,A);n.addEventListener(ON_MOUSE_UP,this._onSolvePress,this);m=new createjs.Container;m.x=130;m.y=1210;s_oStage.addChild(m);new CTLText(m,0,-50,600,50,50,"left",PRIMARY_FONT_COLOUR,SECONDARY_FONT,1,0,0,TEXT_RESET,!0,!0,!1,!1);B=s_oSpriteLibrary.getSprite("but_reset");p=new CGfxButton(750,0,B,m);p.addEventListener(ON_MOUSE_UP,this._onResetPress,this);y=new createjs.Container;y.x=130;y.y=1390;s_oStage.addChild(y);new CTLText(y,0,-50,600,50,50,"left",PRIMARY_FONT_COLOUR,SECONDARY_FONT,1,0,0,TEXT_DELETE_ALL_NOTE,
!0,!0,!1,!1);B=s_oSpriteLibrary.getSprite("but_del_note");k=new CGfxButton(750,0,B,y);k.addEventListener(ON_MOUSE_UP,this._onDelPress,this);E=new createjs.Container;E.x=130;E.y=1570;s_oStage.addChild(E);new CTLText(E,0,-50,600,50,50,"left",PRIMARY_FONT_COLOUR,SECONDARY_FONT,1,0,0,TEXT_SETNOTIME,!0,!0,!1,!1);B=s_oSpriteLibrary.getSprite("but_time");d=new CGfxButton(750,0,B,E);d.addEventListener(ON_MOUSE_UP,this._onTimePress,this);B=window.document;var r=B.documentElement;a=r.requestFullscreen||r.mozRequestFullScreen||
r.webkitRequestFullScreen||r.msRequestFullscreen;f=B.exitFullscreen||B.mozCancelFullScreen||B.webkitExitFullscreen||B.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(a=!1);u=new createjs.Container;u.x=130;u.y=1030;s_oStage.addChild(u);a&&screenfull.isEnabled&&(new CTLText(u,0,-50,600,50,50,"left",PRIMARY_FONT_COLOUR,SECONDARY_FONT,1,0,0,TEXT_FULLSCREEN,!0,!0,!1,!1),B=s_oSpriteLibrary.getSprite("but_fullscreen"),g=new CToggle(750,0,B,s_bFullscreen,u),g.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,
this));b=new createjs.Container;b.addChild(c,x,v,A,m,y,E,u);s_oStage.addChild(b);z=c.on("pressup",function(){I._onExitHelp()})};this.unload=function(){$(s_oMain).trigger("show_interlevel_ad");s_oStage.removeChild(b);c.off("pressup",z);s_oInterface.onExitFromConfig()};this._onHelpPress=function(){s_oGame.fillWithNote();H._onExitHelp()};this._onDelPress=function(){s_oGame.deleteAllNote();H._onExitHelp()};this._onSolvePress=function(){s_oGame.solveAndWrite();H.unload()};this._onResetPress=function(){$(s_oMain).trigger("restart_level",
1);s_oGame.resetGame();H._onExitHelp()};this._onTimePress=function(){s_oGame.setNoTime();H._onExitHelp()};this._onHintPress=function(){s_oGame.getHint();H._onExitHelp()};this.resetFullscreenBut=function(){a&&screenfull.isEnabled&&g.setActive(s_bFullscreen)};this._onFullscreenRelease=function(){s_bFullscreen?f.call(window.document):a.call(window.document.documentElement);sizeHandler()};this._onExitHelp=function(){H.unload();s_oGame.pauseTimer(!1)};var H=this;this._init()}
function CGrid(){var a,f,c,b,e,k,n,p;this._init=function(){f=a=0;k=new createjs.Container;k.x=CANVAS_WIDTH/2;k.y=880;s_oStage.addChild(k);var d=CELL_SIZE,h=9*CELL_SIZE+44,g=.5*h,z=d,x=[];x.push(.5*d);n=[];for(var v=0;8>v;v++){if(2===v%3){var A=(new createjs.Graphics).beginFill("rgba(0,0,0,1)").drawRect(-g,-g+z,h,10);z+=d+10}else A=(new createjs.Graphics).beginFill("rgba(0,0,0,1)").drawRect(-g,-g+z,h,4),z+=d+4;x.push(z-.5*d);n[v]=new createjs.Shape(A);k.addChild(n[v])}z=d;p=[];for(v=0;8>v;v++)2===
v%3?(A=(new createjs.Graphics).beginFill("rgba(0,0,0,1)").drawRect(-g+z,-g,10,h),z+=d+10):(A=(new createjs.Graphics).beginFill("rgba(0,0,0,1)").drawRect(-g+z,-g,4,h),z+=d+4),p[v]=new createjs.Shape(A),k.addChild(p[v]);A=(new createjs.Graphics).beginFill("rgba(0,0,0,1)").drawRect(-g-10,-g-10,10,h+20);v=new createjs.Shape(A);k.addChild(v);A=(new createjs.Graphics).beginFill("rgba(0,0,0,1)").drawRect(g,-g-10,10,h+20);v=new createjs.Shape(A);k.addChild(v);A=(new createjs.Graphics).beginFill("rgba(0,0,0,1)").drawRect(-g-
10,-g-10,h+20,10);v=new createjs.Shape(A);k.addChild(v);A=(new createjs.Graphics).beginFill("rgba(0,0,0,1)").drawRect(-g-10,+g,h+20,10);h=new createjs.Shape(A);k.addChild(h);c=[];for(v=0;9>v;v++)for(c[v]=[],h=0;9>h;h++)c[v][h]={x:x[h],y:x[v]};b=[];for(v=0;9>v;v++)for(b[v]=[],h=0;9>h;h++)b[v][h]=new CCell(c[v][h].x-g,c[v][h].y-g,{row:v,col:h},k);e=[];for(v=0;10>v;v++)e[v]=[]};this.setCurNum=function(d){};this.setActiveCell=function(d){this.turnOffAllCells();a=d.row;f=d.col;this.highlightCells();0!==
b[a][f].getNumber()&&this.showSameNumbers(b[a][f].getNumber())};this.showCorner=function(){b[a][f].setCorner(!0)};this.turnOffAllCells=function(){for(var d=0;9>d;d++)for(var h=0;9>h;h++)b[d][h].highlight("off");b[a][f].setCorner(!1)};this.showSameNumbers=function(d){if(0!==d){for(var h=0;h<e[d].length;h++)b[e[d][h].row][e[d][h].col].highlight("green");for(h=0;9>h;h++)for(var g=0;9>g;g++)0!==b[h][g].getNote(d)&&b[h][g].highlight("green")}};this.highlightCells=function(){this.showCorner();for(var d=
0;9>d;d++)b[a][d].highlight("yellow");for(d=0;9>d;d++)b[d][f].highlight("yellow");d=3*Math.floor(a/3);for(var h=3*Math.floor(f/3),g=0;3>g;g++)for(var z=0;3>z;z++)b[d+g][h+z].highlight("yellow")};this.deleteCell=function(){b[a][f].getGiven()||(0!==b[a][f].getNumber()&&s_oGame.checkEndGame("remove"),this.deleteSmartFromList(b[a][f].getNumber()),b[a][f].clearCell(),this.turnOffAllCells(),this.highlightCells())};this.writeNum=function(d){if(!b[a][f].getGiven()&&0!==d&&d!==b[a][f].getNumber()&&(this.turnOffAllCells(),
this.highlightCells(),!this.checkCollision(d,a,f,!0)))return 0!==b[a][f].getNumber()&&this.deleteCell(),b[a][f].setNumber(d),this.insertSmartInList(d),this.updateNote(d),this.showSameNumbers(d),s_oGame.checkEndGame("add"),!0};this.resumeNum=function(d,h,g){b[h][g].setNumber(d);e[d].push({row:h,col:g});this.updateNote(d);s_oGame.checkEndGame("add")};this.resumeNotes=function(d,h,g){for(var z=0;z<d.length;z++)b[h][g].setNote(d[z])};this.deleteAllNote=function(){for(var d=0;d<e[0].length;d++)b[e[0][d].row][e[0][d].col].clearAllNote();
this.turnOffAllCells();this.highlightCells();this.showSameNumbers(b[a][f].getNumber())};this.writeNote=function(d){b[a][f].getGiven()||(this.turnOffAllCells(),this.highlightCells(),b[a][f].setNote(d),this.showSameNumbers(b[a][f].getNumber()))};this.writeHelpNote=function(d,h,g){b[h][g].setHelpNote(d)};this.getAllNotes=function(){for(var d=[],h=0;h<b.length;h++){d[h]=[];for(var g=0;g<b[h].length;g++)d[h][g]=b[h][g].getAllNotesWritten()}return d};this.setGiven=function(d,h,g){b[d][h].setGiven(g);e[g].push({row:d,
col:h})};this.isGiven=function(d,h){return b[d][h].getGiven()};this.setSolvedNumber=function(d,h,g){b[d][h].setHintNumber(g);e[g].push({row:d,col:h});for(g=0;g<e[0].length;g++)e[0][g].row===d&&e[0][g].col===h&&e[0].splice(g,1)};this.setHintNumber=function(d,h,g){b[d][h].setHintNumber(g);e[g].push({row:d,col:h});for(g=0;g<e[0].length;g++)e[0][g].row===d&&e[0][g].col===h&&e[0].splice(g,1)};this.deleteResetNumber=function(d,h){var g=b[d][h].getNumber();if(0!==g){for(var z=0;z<e[g].length;z++)e[g][z].row===
d&&e[g][z].col===h&&e[g].splice(z,1);b[d][h].clearCell()}e[0].push({row:d,col:h})};this.updateNote=function(d){for(var h=0;9>h;h++)0!==b[a][h].getNote(d)&&b[a][h].clearNote(d),0!==b[h][f].getNote(d)&&b[h][f].clearNote(d);var g=3*Math.floor(a/3),z=3*Math.floor(f/3);for(h=0;3>h;h++)for(var x=0;3>x;x++)0!==b[g+h][z+x].getNote(d)&&b[g+h][z+x].clearNote(d)};this.checkCollision=function(d,h,g,z){for(var x=3*Math.floor(h/3),v=3*Math.floor(g/3),A=0;A<e[d].length;A++)if(e[d][A].row===h||e[d][A].col===g||x<=
e[d][A].row&&e[d][A].row<x+3&&v<=e[d][A].col&&e[d][A].col<v+3)return z&&b[e[d][A].row][e[d][A].col].highlight("red"),!0};this.deleteSmartFromList=function(d){if(0!==d){for(var h=0;h<e[d].length;h++)e[d][h].row===a&&e[d][h].col===f&&e[d].splice(h,1);e[0].push({row:a,col:f})}};this.insertSmartInList=function(d){if(0!==d)for(e[d].push({row:a,col:f}),d=0;d<e[0].length;d++)e[0][d].row===a&&e[0][d].col===f&&e[0].splice(d,1)};this.removeList=function(d){e[d]={}};this.getList=function(d){return e[d]};this.viewList=
function(d){trace(e[d]);trace(e[d].length)};this.getCurActiveCell=function(){return{row:a,col:f,num:b[a][f].getNumber()}};this.getCurGrid=function(){for(var d=[],h=0;9>h;h++){d[h]=[];for(var g=0;9>g;g++)d[h][g]=b[h][g].getNumber()}return d};this._init()}
function CCell(a,f,c,b){var e,k,n,p,d,h,g,z,x,v;this._init=function(m,y,E,u){e=!1;var H=CELL_SIZE;k=0;p=[];v=new createjs.Container;v.x=m;v.y=y;u.addChild(v);d={row:E.row,col:E.col};m=s_oSpriteLibrary.getSprite("background");y={images:[m],frames:{width:m.width/2,height:m.height,regX:m.width/2/2,regY:m.height/2},animations:{white:[0],grey:[1]}};y=new createjs.SpriteSheet(y);g=createSprite(y,"white",m.width/2/2,m.height/2,m.width/2,m.height);v.addChild(g);m=s_oSpriteLibrary.getSprite("highlight");y=
{images:[m],frames:{width:m.width/3,height:m.height,regX:m.width/3/2,regY:m.height/2},animations:{yellow:[0],green:[1],red:[2]}};y=new createjs.SpriteSheet(y);h=createSprite(y,"yellow",m.width/3/2,m.height/2,m.width/2,m.height);h.alpha=.9;h.visible=!1;v.addChild(h);n=[];m=H/3;n[1]={x:-m,y:-m};n[2]={x:0,y:-m};n[3]={x:m,y:-m};n[4]={x:-m,y:0};n[5]={x:0,y:0};n[6]={x:m,y:0};n[7]={x:-m,y:m};n[8]={x:0,y:m};n[9]={x:+m,y:m};this.clearAllNote();m=s_oSpriteLibrary.getSprite("cell_selected");z=createBitmap(m);
z.regX=m.width/2;z.regY=m.height/2;z.visible=!1;v.addChild(z);(new createjs.Graphics).beginFill("rgba(158,158,158,0.01)").drawRect(-H/2,-H/2,H,H);v.on("click",this._setActive)};this.unload=function(){b.removeChild(v)};this.setGiven=function(m){0!==m&&(g.gotoAndStop("grey"),e=!0);this.setNumber(m)};this.getGiven=function(){return e};this.setHintNumber=function(m){0!==m&&(this.clearNumber(),this.clearAllNote(),x=new createjs.Text(m,"bold 80px "+PRIMARY_FONT,"#add8fd"),x.textAlign="center",x.textBaseline=
"middle",v.addChild(x),k=m)};this.setNumber=function(m){0!==m&&(this.clearNumber(),this.clearAllNote(),x=new createjs.Text(m,"bold 80px "+PRIMARY_FONT,"#000000"),x.textAlign="center",x.textBaseline="middle",v.addChild(x),k=m)};this.getNumber=function(){return k};this.clearNumber=function(){k=0;v.removeChild(x)};this.setNote=function(m){0===k&&(0!==p[m]?this.clearNote(m):(p[m]=new createjs.Text(m," 30px "+PRIMARY_FONT,"#000000"),p[m].textAlign="center",p[m].textBaseline="middle",p[m].x=n[m].x,p[m].y=
n[m].y,v.addChild(p[m])))};this.setHelpNote=function(m){this.clearNote(m);p[m]=new createjs.Text(m," 30px "+PRIMARY_FONT,"#000000");p[m].textAlign="center";p[m].textBaseline="middle";p[m].x=n[m].x;p[m].y=n[m].y;v.addChild(p[m])};this.getNote=function(m){return p[m]};this.getAllNotesWritten=function(){for(var m=[],y=1;9>=y;y++)0!==p[y]&&m.push(y);return m};this.clearNote=function(m){v.removeChild(p[m]);p[m]=0};this.clearAllNote=function(){for(var m=1;10>m;m++)v.removeChild(p[m]),p[m]=0};this.clearCell=
function(){this.clearNumber();this.clearAllNote()};this.highlight=function(m){h.visible=!0;"off"!==m?h.gotoAndStop(m):h.visible=!1};this.setCorner=function(m){z.visible=m?!0:!1};this._setActive=function(){A.highlight("yellow");s_oGame.activeCell(d)};var A=this;this._init(a,f,c,b)}
function CNumButton(a,f,c){var b,e,k,n,p,d,h,g,z,x,v;this._init=function(m,y,E){k=!1;n=E;h=new createjs.Container;h.x=m;h.y=y;s_oStage.addChild(h);y=s_oSpriteLibrary.getSprite("but_num");p=createBitmap(y);m=y.width;y=y.height;p.regX=m/2;p.regY=y/2;d=new createjs.Text(E,"Bold 90px "+PRIMARY_FONT,"#000000");d.textAlign="center";d.textBaseline="middle";h.addChild(p,d);b=m/3-2;e=-y/3+5;this.setCounter(0);this._initListener()};this.unload=function(){h.off("mousedown",z);h.off("pressup",x);s_bMobile||h.off("mouseover",
v);s_oStage.removeChild(h)};this._initListener=function(){z=h.on("mousedown",this.buttonDown);x=h.on("pressup",this.buttonRelease);s_bMobile||(v=h.on("mouseover",this.buttonOver))};this.buttonRelease=function(){h.scaleX=1;h.scaleY=1;s_oGame.tryShowAd();k?(s_oGame.setCurNum(n),s_oInterface.setAllBlackColor(),A.changeNumColor(!0)):s_oGame.writeNum(n)};this.buttonDown=function(){h.scaleX=.9;h.scaleY=.9};this.buttonOver=function(m){s_bMobile||(m.target.cursor="pointer")};this.changeNumColor=function(m){d.color=
m?"#ff8814":"#000000"};this.changeMode=function(){k=!k};this.setCounter=function(m){g=new createjs.Text(m," 30px "+PRIMARY_FONT,"#000000");g.textAlign="center";g.textBaseline="middle";g.x=b;g.y=e;h.addChild(g)};this.clearCounter=function(){h.removeChild(g)};var A=this;this._init(a,f,c)}
function CCreditsPanel(){var a,f,c,b,e;this._init=function(){b=new createjs.Shape;b.graphics.beginFill("#0f0f0f").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);b.alpha=.01;e=b.on("click",this._onLogoButRelease);s_oStage.addChild(b);a=new createjs.Container;s_oStage.addChild(a);var k=s_oSpriteLibrary.getSprite("credit_bg"),n=createBitmap(k);n.regX=k.width/2;n.regY=k.height/2;a.addChild(n);a.x=CANVAS_WIDTH/2;a.y=CANVAS_HEIGHT/2;k=new createjs.Text(TEXT_DEVELOPED," 80px "+SECONDARY_FONT,"#000000");k.y=-120;
k.textAlign="center";k.textBaseline="middle";k.lineWidth=600;k.outline=5;n=new createjs.Text(TEXT_DEVELOPED," 80px "+SECONDARY_FONT,PRIMARY_FONT_COLOUR);n.y=k.y;n.textAlign="center";n.textBaseline="middle";n.lineWidth=600;a.addChild(n);k=new createjs.Text("www.codethislab.com"," 80px "+SECONDARY_FONT,PRIMARY_FONT_COLOUR);k.y=120;k.textAlign="center";k.textBaseline="middle";k.lineWidth=600;k.outline=5;n=new createjs.Text("www.codethislab.com"," 80px "+SECONDARY_FONT,PRIMARY_FONT_COLOUR);n.y=k.y;n.textAlign=
"center";n.textBaseline="middle";n.lineWidth=600;a.addChild(n);k=s_oSpriteLibrary.getSprite("ctl_logo");c=createBitmap(k);c.regX=k.width/2;c.regY=k.height/2;a.addChild(c);k=s_oSpriteLibrary.getSprite("but_exit");f=new CGfxButton(400,-204,k,a);f.addEventListener(ON_MOUSE_UP,this.unload,this)};this.unload=function(){s_oStage.removeChild(void 0);s_oStage.removeChild(a);f.unload();b.off("click",e)};this._onLogoButRelease=function(){window.open("http://www.codethislab.com/index.php?&l=en")};this._init()}
function CAreYouSurePanel(a,f){var c,b,e,k,n;this._init=function(d,h){k=new createjs.Container;n=k.on("mousedown",function(){});s_oStage.addChild(k);var g=s_oSpriteLibrary.getSprite("credit_bg"),z=createBitmap(g);z.regX=g.width/2;z.regY=g.height/2;k.addChild(z);k.x=CANVAS_WIDTH/2;k.y=CANVAS_HEIGHT/2;c=new CTLText(k,-400,-180,800,240,120,"center",PRIMARY_FONT_COLOUR,SECONDARY_FONT,1,0,0,TEXT_ARE_SURE,!0,!0,!0,!1);b=new CGfxButton(150,150,s_oSpriteLibrary.getSprite("but_yes"),k);b.addEventListener(ON_MOUSE_UP,
this._onButYes,this);e=new CGfxButton(-150,150,s_oSpriteLibrary.getSprite("but_exit"),k);e.addEventListener(ON_MOUSE_UP,this._onButNo,this);e.pulseAnimation()};this.unload=function(){e.unload();b.unload();k.off("mousedown",n);s_oStage.removeChild(k)};this._onButYes=function(){p.unload();a&&a()};this._onButNo=function(){p.unload();f&&f()};this.setMsg=function(d){c.refreshText(d)};var p=this;this._init(a,f)}
CTLText.prototype={constructor:CTLText,__autofit:function(){if(this._bFitText){for(var a=this._iFontSize;(this._oText.getBounds().height>this._iHeight-2*this._iPaddingV||this._oText.getBounds().width>this._iWidth-2*this._iPaddingH)&&!(a--,this._oText.font=a+"px "+this._szFont,this._oText.lineHeight=Math.round(a*this._fLineHeightFactor),this.__updateY(),this.__verticalAlign(),8>a););this._iFontSize=a}},__verticalAlign:function(){if(this._bVerticalAlign){var a=this._oText.getBounds().height;this._oText.y-=
(a-this._iHeight)/2+this._iPaddingV}},__updateY:function(){this._oText.y=this._y+this._iPaddingV;switch(this._oText.textBaseline){case "middle":this._oText.y+=this._oText.lineHeight/2+(this._iFontSize*this._fLineHeightFactor-this._iFontSize)}},__createText:function(a){this._bDebug&&(this._oDebugShape=new createjs.Shape,this._oDebugShape.graphics.beginFill("rgba(255,0,0,0.5)").drawRect(this._x,this._y,this._iWidth,this._iHeight),this._oContainer.addChild(this._oDebugShape));this._oText=new createjs.Text(a,
this._iFontSize+"px "+this._szFont,this._szColor);this._oText.textBaseline="middle";this._oText.lineHeight=Math.round(this._iFontSize*this._fLineHeightFactor);this._oText.textAlign=this._szAlign;this._oText.lineWidth=this._bMultiline?this._iWidth-2*this._iPaddingH:null;switch(this._szAlign){case "center":this._oText.x=this._x+this._iWidth/2;break;case "left":this._oText.x=this._x+this._iPaddingH;break;case "right":this._oText.x=this._x+this._iWidth-this._iPaddingH}this._oContainer.addChild(this._oText);
this.refreshText(a)},setVerticalAlign:function(a){this._bVerticalAlign=a},setOutline:function(a){null!==this._oText&&(this._oText.outline=a)},setShadow:function(a,f,c,b){null!==this._oText&&(this._oText.shadow=new createjs.Shadow(a,f,c,b))},setColor:function(a){this._oText.color=a},setAlpha:function(a){this._oText.alpha=a},removeTweens:function(){createjs.Tween.removeTweens(this._oText)},getText:function(){return this._oText},getY:function(){return this._y},getFontSize:function(){return this._iFontSize},
refreshText:function(a){""===a&&(a=" ");null===this._oText&&this.__createText(a);this._oText.text=a;this._oText.font=this._iFontSize+"px "+this._szFont;this._oText.lineHeight=Math.round(this._iFontSize*this._fLineHeightFactor);this.__autofit();this.__updateY();this.__verticalAlign()}};
function CTLText(a,f,c,b,e,k,n,p,d,h,g,z,x,v,A,m,y){this._oContainer=a;this._x=f;this._y=c;this._iWidth=b;this._iHeight=e;this._bMultiline=m;this._iFontSize=k;this._szAlign=n;this._szColor=p;this._szFont=d;this._iPaddingH=g;this._iPaddingV=z;this._bVerticalAlign=A;this._bFitText=v;this._bDebug=y;this._oDebugShape=null;this._fLineHeightFactor=h;this._oText=null;x&&this.__createText(x)}
var LOCALSTORAGE_SOLUTION="solution",LOCALSTORAGE_MASK="gridmask",LOCALSTORAGE_GRID_STATE="gridstate",LOCALSTORAGE_NOTES_WRITTEN="noteswritten",LOCALSTORAGE_GAME_PARAM="gameparam",s_aSolution=null,s_aGridMask=null,s_aGridState=null,s_aNotesWritten=null,s_oGameParam=null;
function CLocalStorage(a){var f=!0;this._init=function(c){try{var b=window.localStorage.getItem(c);this.resetData();null!==b&&void 0!==b&&this.loadData()}catch(e){this.resetData()}};this.isUsed=function(){return null!==s_aSolution?!0:!1};this.isAvailable=function(){try{window.localStorage.setItem("ls_available","ok")}catch(c){f=!1}return f};this.resetData=function(){s_oGameParam=s_aNotesWritten=s_aGridState=s_aGridMask=s_aSolution=null};this.deleteData=function(){window.localStorage.removeItem(a);
this.resetData()};this.saveData=function(){var c={};c[LOCALSTORAGE_SOLUTION]=s_aSolution;c[LOCALSTORAGE_MASK]=s_aGridMask;c[LOCALSTORAGE_GRID_STATE]=s_aGridState;c[LOCALSTORAGE_NOTES_WRITTEN]=s_aNotesWritten;c[LOCALSTORAGE_GAME_PARAM]=s_oGameParam;window.localStorage.setItem(a,JSON.stringify(c))};this.loadData=function(){var c=JSON.parse(window.localStorage.getItem(a)),b=c[LOCALSTORAGE_SOLUTION];s_aSolution=b;s_aGridMask=b=c[LOCALSTORAGE_MASK];s_aGridState=b=c[LOCALSTORAGE_GRID_STATE];s_aNotesWritten=
b=c[LOCALSTORAGE_NOTES_WRITTEN];s_oGameParam=b=c[LOCALSTORAGE_GAME_PARAM];console.log(c)};this._init(a)}
function CMsgBox(a,f){var c,b,e,k;this._init=function(p,d){e=new createjs.Shape;e.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);e.alpha=.01;e.on("mousedown",function(){});s_oStage.addChild(e);k=new createjs.Container;s_oStage.addChild(k);var h=s_oSpriteLibrary.getSprite("credit_bg"),g=createBitmap(h);g.regX=h.width/2;g.regY=h.height/2;k.addChild(g);k.x=CANVAS_WIDTH/2;k.y=CANVAS_HEIGHT/2;c=new CTLText(k,-450,-190,900,270,46,"center",PRIMARY_FONT_COLOUR,SECONDARY_FONT,1,0,0,p,
!0,!0,!0,!1);b=new CGfxButton(380,190,s_oSpriteLibrary.getSprite("but_yes"),k);b.addEventListener(ON_MOUSE_UP,this._onButYes,this);b.pulseAnimation()};this._onButYes=function(){n.unload()};this.changeMessage=function(p){c.refreshText(p)};this.unload=function(){b.unload();s_oStage.removeChild(e);s_oStage.removeChild(k);e.off("mousedown",function(){})};var n=this;this._init(a,f)};