/*
 screenfull
 v5.0.0 - 2019-09-09
 (c) Sindre Sorhus; MIT License
 Platform.js <https://mths.be/platform>
 Copyright 2014-2018 Benjamin Tan <https://bnjmnt4n.now.sh/>
 Copyright 2011-2013 John-David Dalton
 Available under MIT license <https://mths.be/mit>
*/
(function(){var a="undefined"!==typeof window&&"undefined"!==typeof window.document?window.document:{},h="undefined"!==typeof module&&module.exports,b=function(){for(var k,l=["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror".split(" "),"webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror".split(" "),"webkitRequestFullScreen webkitCancelFullScreen webkitCurrentFullScreenElement webkitCancelFullScreen webkitfullscreenchange webkitfullscreenerror".split(" "),
"mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror".split(" "),"msRequestFullscreen msExitFullscreen msFullscreenElement msFullscreenEnabled MSFullscreenChange MSFullscreenError".split(" ")],r=0,f=l.length,p={};r<f;r++)if((k=l[r])&&k[1]in a){for(r=0;r<k.length;r++)p[l[0][r]]=k[r];return p}return!1}(),e={change:b.fullscreenchange,error:b.fullscreenerror},d={request:function(k){return new Promise(function(l,r){var f=function(){this.off("change",
f);l()}.bind(this);this.on("change",f);k=k||a.documentElement;Promise.resolve(k[b.requestFullscreen]())["catch"](r)}.bind(this))},exit:function(){return new Promise(function(k,l){if(this.isFullscreen){var r=function(){this.off("change",r);k()}.bind(this);this.on("change",r);Promise.resolve(a[b.exitFullscreen]())["catch"](l)}else k()}.bind(this))},toggle:function(k){return this.isFullscreen?this.exit():this.request(k)},onchange:function(k){this.on("change",k)},onerror:function(k){this.on("error",k)},
on:function(k,l){var r=e[k];r&&a.addEventListener(r,l,!1)},off:function(k,l){var r=e[k];r&&a.removeEventListener(r,l,!1)},raw:b};b?(Object.defineProperties(d,{isFullscreen:{get:function(){return!!a[b.fullscreenElement]}},element:{enumerable:!0,get:function(){return a[b.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return!!a[b.fullscreenEnabled]}}}),h?module.exports=d:window.screenfull=d):h?module.exports={isEnabled:!1}:window.screenfull={isEnabled:!1}})();
(function(){function a(c){c=String(c);return c.charAt(0).toUpperCase()+c.slice(1)}function h(c,y){var F=-1,m=c?c.length:0;if("number"==typeof m&&-1<m&&m<=v)for(;++F<m;)y(c[F],F,c);else e(c,y)}function b(c){c=String(c).replace(/^ +| +$/g,"");return/^(?:webOS|i(?:OS|P))/.test(c)?c:a(c)}function e(c,y){for(var F in c)w.call(c,F)&&y(c[F],F,c)}function d(c){return null==c?a(c):E.call(c).slice(8,-1)}function k(c,y){var F=null!=c?typeof c[y]:"number";return!/^(?:boolean|number|string|undefined)$/.test(F)&&
("object"==F?!!c[y]:!0)}function l(c){return String(c).replace(/([ -])(?!$)/g,"$1?")}function r(c,y){var F=null;h(c,function(m,n){F=y(F,m,n,c)});return F}function f(c){function y(L){return r(L,function(K,J){var N=J.pattern||l(J);!K&&(K=RegExp("\\b"+N+" *\\d+[.\\w_]*","i").exec(c)||RegExp("\\b"+N+" *\\w+-[\\w]*","i").exec(c)||RegExp("\\b"+N+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(c))&&((K=String(J.label&&!RegExp(N,"i").test(J.label)?J.label:K).split("/"))[1]&&!/[\d.]+/.test(K[0])&&(K[0]+=
" "+K[1]),J=J.label||J,K=b(K[0].replace(RegExp(N,"i"),J).replace(RegExp("; *(?:"+J+"[_-])?","i")," ").replace(RegExp("("+J+")[-_.]?(\\w)","i"),"$1 $2")));return K})}function F(L){return r(L,function(K,J){return K||(RegExp(J+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(c)||0)[1]||null})}var m=q,n=c&&"object"==typeof c&&"String"!=d(c);n&&(m=c,c=null);var C=m.navigator||{},x=C.userAgent||"";c||(c=x);var P=n?!!C.likeChrome:/\bChrome\b/.test(c)&&!/internal|\n/i.test(E.toString()),
Q=n?"Object":"ScriptBridgingProxyObject",G=n?"Object":"Environment",M=n&&m.java?"JavaPackage":d(m.java),ba=n?"Object":"RuntimeObject";G=(M=/\bJava/.test(M)&&m.java)&&d(m.environment)==G;var ca=M?"a":"\u03b1",da=M?"b":"\u03b2",X=m.document||{},S=m.operamini||m.opera,U=z.test(U=n&&S?S["[[Class]]"]:d(S))?U:S=null,u,V=c;n=[];var W=null,T=c==x;x=T&&S&&"function"==typeof S.version&&S.version();var H=function(L){return r(L,function(K,J){return K||RegExp("\\b"+(J.pattern||l(J))+"\\b","i").exec(c)&&(J.label||
J)})}([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),B=function(L){return r(L,function(K,J){return K||RegExp("\\b"+(J.pattern||l(J))+"\\b","i").exec(c)&&(J.label||J)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser",
"PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},
{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),I=y([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad",
"iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),O=function(L){return r(L,function(K,J,N){return K||(J[I]||J[/^[a-z]+(?: +[a-z]+\b)*/i.exec(I)]||RegExp("\\b"+l(N)+"(?:\\b|\\w*\\d)","i").exec(c))&&N})}({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},
"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}}),D=function(L){return r(L,function(K,J){var N=J.pattern||l(J);if(!K&&(K=RegExp("\\b"+N+"(?:/[\\d.]+|[ \\w.]*)","i").exec(c))){var R=K,Y=J.label||J,Z={"10.0":"10","6.4":"10 Technical Preview",
"6.3":"8.1","6.2":"8","6.1":"Server 2008 R2 / 7","6.0":"Server 2008 / Vista","5.2":"Server 2003 / XP 64-bit","5.1":"XP","5.01":"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};N&&Y&&/^Win/i.test(R)&&!/^Windows Phone /i.test(R)&&(Z=Z[/[\d.]+$/.exec(R)])&&(R="Windows "+Z);R=String(R);N&&Y&&(R=R.replace(RegExp(N,"i"),Y));K=R=b(R.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/,
" $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}return K})}(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac",
"Windows 98;","Windows "]);H&&(H=[H]);O&&!I&&(I=y([O]));if(u=/\bGoogle TV\b/.exec(I))I=u[0];/\bSimulator\b/i.test(c)&&(I=(I?I+" ":"")+"Simulator");"Opera Mini"==B&&/\bOPiOS\b/.test(c)&&n.push("running in Turbo/Uncompressed mode");"IE"==B&&/\blike iPhone OS\b/.test(c)?(u=f(c.replace(/like iPhone OS/,"")),O=u.manufacturer,I=u.product):/^iP/.test(I)?(B||(B="Safari"),D="iOS"+((u=/ OS ([\d_]+)/i.exec(c))?" "+u[1].replace(/_/g,"."):"")):"Konqueror"!=B||/buntu/i.test(D)?O&&"Google"!=O&&(/Chrome/.test(B)&&
!/\bMobile Safari\b/i.test(c)||/\bVita\b/.test(I))||/\bAndroid\b/.test(D)&&/^Chrome/.test(B)&&/\bVersion\//i.test(c)?(B="Android Browser",D=/\bAndroid\b/.test(D)?D:"Android"):"Silk"==B?(/\bMobi/i.test(c)||(D="Android",n.unshift("desktop mode")),/Accelerated *= *true/i.test(c)&&n.unshift("accelerated")):"PaleMoon"==B&&(u=/\bFirefox\/([\d.]+)\b/.exec(c))?n.push("identifying as Firefox "+u[1]):"Firefox"==B&&(u=/\b(Mobile|Tablet|TV)\b/i.exec(c))?(D||(D="Firefox OS"),I||(I=u[1])):!B||(u=!/\bMinefield\b/i.test(c)&&
/\b(?:Firefox|Safari)\b/.exec(B))?(B&&!I&&/[\/,]|^[^(]+?\)/.test(c.slice(c.indexOf(u+"/")+8))&&(B=null),(u=I||O||D)&&(I||O||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(D))&&(B=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(D)?D:u)+" Browser")):"Electron"==B&&(u=(/\bChrome\/([\d.]+)\b/.exec(c)||0)[1])&&n.push("Chromium "+u):D="Kubuntu";x||(x=F(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",l(B),"(?:Firefox|Minefield|NetFront)"]));
if(u="iCab"==H&&3<parseFloat(x)&&"WebKit"||/\bOpera\b/.test(B)&&(/\bOPR\b/.test(c)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(c)&&!/^(?:Trident|EdgeHTML)$/.test(H)&&"WebKit"||!H&&/\bMSIE\b/i.test(c)&&("Mac OS"==D?"Tasman":"Trident")||"WebKit"==H&&/\bPlayStation\b(?! Vita\b)/i.test(B)&&"NetFront")H=[u];"IE"==B&&(u=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(c)||0)[1])?(B+=" Mobile",D="Windows Phone "+(/\+$/.test(u)?u:u+".x"),n.unshift("desktop mode")):/\bWPDesktop\b/i.test(c)?(B="IE Mobile",D="Windows Phone 8.x",
n.unshift("desktop mode"),x||(x=(/\brv:([\d.]+)/.exec(c)||0)[1])):"IE"!=B&&"Trident"==H&&(u=/\brv:([\d.]+)/.exec(c))&&(B&&n.push("identifying as "+B+(x?" "+x:"")),B="IE",x=u[1]);if(T){if(k(m,"global"))if(M&&(u=M.lang.System,V=u.getProperty("os.arch"),D=D||u.getProperty("os.name")+" "+u.getProperty("os.version")),G){try{x=m.require("ringo/engine").version.join("."),B="RingoJS"}catch(L){(u=m.system)&&u.global.system==m.system&&(B="Narwhal",D||(D=u[0].os||null))}B||(B="Rhino")}else"object"==typeof m.process&&
!m.process.browser&&(u=m.process)&&("object"==typeof u.versions&&("string"==typeof u.versions.electron?(n.push("Node "+u.versions.node),B="Electron",x=u.versions.electron):"string"==typeof u.versions.nw&&(n.push("Chromium "+x,"Node "+u.versions.node),B="NW.js",x=u.versions.nw)),B||(B="Node.js",V=u.arch,D=u.platform,x=(x=/[\d.]+/.exec(u.version))?x[0]:null));else d(u=m.runtime)==Q?(B="Adobe AIR",D=u.flash.system.Capabilities.os):d(u=m.phantom)==ba?(B="PhantomJS",x=(u=u.version||null)&&u.major+"."+
u.minor+"."+u.patch):"number"==typeof X.documentMode&&(u=/\bTrident\/(\d+)/i.exec(c))?(x=[x,X.documentMode],(u=+u[1]+4)!=x[1]&&(n.push("IE "+x[1]+" mode"),H&&(H[1]=""),x[1]=u),x="IE"==B?String(x[1].toFixed(1)):x[0]):"number"==typeof X.documentMode&&/^(?:Chrome|Firefox)\b/.test(B)&&(n.push("masking as "+B+" "+x),B="IE",x="11.0",H=["Trident"],D="Windows");D=D&&b(D)}x&&(u=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(x)||/(?:alpha|beta)(?: ?\d)?/i.exec(c+";"+(T&&C.appMinorVersion))||/\bMinefield\b/i.test(c)&&
"a")&&(W=/b/i.test(u)?"beta":"alpha",x=x.replace(RegExp(u+"\\+?$"),"")+("beta"==W?da:ca)+(/\d+\+?/.exec(u)||""));if("Fennec"==B||"Firefox"==B&&/\b(?:Android|Firefox OS)\b/.test(D))B="Firefox Mobile";else if("Maxthon"==B&&x)x=x.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(I))"Xbox 360"==I&&(D=null),"Xbox 360"==I&&/\bIEMobile\b/.test(c)&&n.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(B)&&(!B||I||/Browser|Mobi/.test(B))||"Windows CE"!=D&&!/Mobi/i.test(c))if("IE"==B&&T)try{null===
m.external&&n.unshift("platform preview")}catch(L){n.unshift("embedded")}else(/\bBlackBerry\b/.test(I)||/\bBB10\b/.test(c))&&(u=(RegExp(I.replace(/ +/g," *")+"/([.\\d]+)","i").exec(c)||0)[1]||x)?(u=[u,/BB10/.test(c)],D=(u[1]?(I=null,O="BlackBerry"):"Device Software")+" "+u[0],x=null):this!=e&&"Wii"!=I&&(T&&S||/Opera/.test(B)&&/\b(?:MSIE|Firefox)\b/i.test(c)||"Firefox"==B&&/\bOS X (?:\d+\.){2,}/.test(D)||"IE"==B&&(D&&!/^Win/.test(D)&&5.5<x||/\bWindows XP\b/.test(D)&&8<x||8==x&&!/\bTrident\b/.test(c)))&&
!z.test(u=f.call(e,c.replace(z,"")+";"))&&u.name&&(u="ing as "+u.name+((u=u.version)?" "+u:""),z.test(B)?(/\bIE\b/.test(u)&&"Mac OS"==D&&(D=null),u="identify"+u):(u="mask"+u,B=U?b(U.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(u)&&(D=null),T||(x=null)),H=["Presto"],n.push(u));else B+=" Mobile";if(u=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(c)||0)[1]){u=[parseFloat(u.replace(/\.(\d)$/,".0$1")),u];if("Safari"==B&&"+"==u[1].slice(-1))B="WebKit Nightly",W="alpha",x=u[1].slice(0,-1);else if(x==
u[1]||x==(u[2]=(/\bSafari\/([\d.]+\+?)/i.exec(c)||0)[1]))x=null;u[1]=(/\bChrome\/([\d.]+)/i.exec(c)||0)[1];537.36==u[0]&&537.36==u[2]&&28<=parseFloat(u[1])&&"WebKit"==H&&(H=["Blink"]);T&&(P||u[1])?(H&&(H[1]="like Chrome"),u=u[1]||(u=u[0],530>u?1:532>u?2:532.05>u?3:533>u?4:534.03>u?5:534.07>u?6:534.1>u?7:534.13>u?8:534.16>u?9:534.24>u?10:534.3>u?11:535.01>u?12:535.02>u?"13+":535.07>u?15:535.11>u?16:535.19>u?17:536.05>u?18:536.1>u?19:537.01>u?20:537.11>u?"21+":537.13>u?23:537.18>u?24:537.24>u?25:537.36>
u?26:"Blink"!=H?"27":"28")):(H&&(H[1]="like Safari"),u=(u=u[0],400>u?1:500>u?2:526>u?3:533>u?4:534>u?"4+":535>u?5:537>u?6:538>u?7:601>u?8:"8"));H&&(H[1]+=" "+(u+="number"==typeof u?".x":/[.+]/.test(u)?"":"+"));"Safari"==B&&(!x||45<parseInt(x))&&(x=u)}"Opera"==B&&(u=/\bzbov|zvav$/.exec(D))?(B+=" ",n.unshift("desktop mode"),"zvav"==u?(B+="Mini",x=null):B+="Mobile",D=D.replace(RegExp(" *"+u+"$"),"")):"Safari"==B&&/\bChrome\b/.exec(H&&H[1])&&(n.unshift("desktop mode"),B="Chrome Mobile",x=null,/\bOS X\b/.test(D)?
(O="Apple",D="iOS 4.3+"):D=null);x&&0==x.indexOf(u=/[\d.]+$/.exec(D))&&-1<c.indexOf("/"+u+"-")&&(D=String(D.replace(u,"")).replace(/^ +| +$/g,""));H&&!/\b(?:Avant|Nook)\b/.test(B)&&(/Browser|Lunascape|Maxthon/.test(B)||"Safari"!=B&&/^iOS/.test(D)&&/\bSafari\b/.test(H[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(B)&&H[1])&&(u=H[H.length-1])&&n.push(u);n.length&&(n=["("+n.join("; ")+")"]);O&&I&&0>I.indexOf(O)&&n.push("on "+O);I&&n.push((/^on /.test(n[n.length-
1])?"":"on ")+I);if(D){var aa=(u=/ ([\d.+]+)$/.exec(D))&&"/"==D.charAt(D.length-u[0].length-1);D={architecture:32,family:u&&!aa?D.replace(u[0],""):D,version:u?u[1]:null,toString:function(){var L=this.version;return this.family+(L&&!aa?" "+L:"")+(64==this.architecture?" 64-bit":"")}}}(u=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(V))&&!/\bi686\b/i.test(V)?(D&&(D.architecture=64,D.family=D.family.replace(RegExp(" *"+u),"")),B&&(/\bWOW64\b/i.test(c)||T&&/\w(?:86|32)$/.test(C.cpuClass||C.platform)&&!/\bWin64; x64\b/i.test(c))&&
n.unshift("32-bit")):D&&/^OS X/.test(D.family)&&"Chrome"==B&&39<=parseFloat(x)&&(D.architecture=64);c||(c=null);m={};m.description=c;m.layout=H&&H[0];m.manufacturer=O;m.name=B;m.prerelease=W;m.product=I;m.ua=c;m.version=B&&x;m.os=D||{architecture:null,family:null,version:null,toString:function(){return"null"}};m.parse=f;m.toString=function(){return this.description||""};m.version&&n.unshift(x);m.name&&n.unshift(B);D&&B&&(D!=String(D).split(" ")[0]||D!=B.split(" ")[0]&&!I)&&n.push(I?"("+D+")":"on "+
D);n.length&&(m.description=n.join(" "));return m}var p={"function":!0,object:!0},q=p[typeof window]&&window||this,t=p[typeof exports]&&exports;p=p[typeof module]&&module&&!module.nodeType&&module;var g=t&&p&&"object"==typeof global&&global;!g||g.global!==g&&g.window!==g&&g.self!==g||(q=g);var v=Math.pow(2,53)-1,z=/\bOpera/;g=Object.prototype;var w=g.hasOwnProperty,E=g.toString,A=f();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(q.platform=A,define(function(){return A})):t&&
p?e(A,function(c,y){t[y]=c}):q.platform=A}).call(this);
function buildIOSMeta(){for(var a=[{name:"viewport",content:"width=device-width, height=device-height, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"},{name:"apple-mobile-web-app-capable",content:"yes"},{name:"apple-mobile-web-app-status-bar-style",content:"black"}],h=0;h<a.length;h++){var b=document.createElement("meta");b.name=a[h].name;b.content=a[h].content;var e=window.document.head.querySelector('meta[name="'+b.name+'"]');e&&e.parentNode.removeChild(e);window.document.head.appendChild(b)}}
function hideIOSFullscreenPanel(){jQuery(".xxx-ios-fullscreen-message").css("display","none");jQuery(".xxx-ios-fullscreen-scroll").css("display","none");jQuery(".xxx-game-iframe-full").removeClass("xxx-game-iframe-iphone-se")}function buildIOSFullscreenPanel(){jQuery("body").append('<div class="xxx-ios-fullscreen-message"><div class="xxx-ios-fullscreen-swipe"></div></div><div class="xxx-ios-fullscreen-scroll"></div>')}
function showIOSFullscreenPanel(){jQuery(".xxx-ios-fullscreen-message").css("display","block");jQuery(".xxx-ios-fullscreen-scroll").css("display","block")}
function __iosResize(){window.scrollTo(0,0);console.log(window.devicePixelRatio);console.log(window.innerWidth);console.log(window.innerHeight);if("iPhone"===platform.product)switch(window.devicePixelRatio){case 2:switch(window.innerWidth){case 568:320!==window.innerHeight&&jQuery(".xxx-game-iframe-full").addClass("xxx-game-iframe-iphone-se");break;case 667:375===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();break;case 808:414===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();
break;default:hideIOSFullscreenPanel()}break;case 3:switch(window.innerWidth){case 736:414===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();break;case 724:375===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();break;case 808:414===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();break;default:hideIOSFullscreenPanel()}break;default:hideIOSFullscreenPanel()}}function iosResize(){__iosResize();setTimeout(function(){__iosResize()},500)}
function iosInIframe(){try{return window.self!==window.top}catch(a){return!0}}function isIOSLessThen13(){var a=platform.os,h=a.family.toLowerCase();a=parseFloat(a.version);return"ios"===h&&13>a?!0:!1}$(document).ready(function(){platform&&"iPhone"===platform.product&&"safari"===platform.name.toLowerCase()&&isIOSLessThen13()&&!iosInIframe()&&(buildIOSFullscreenPanel(),buildIOSMeta())});
jQuery(window).resize(function(){platform&&"iPhone"===platform.product&&"safari"===platform.name.toLowerCase()&&isIOSLessThen13()&&!iosInIframe()&&iosResize()});var s_iScaleFactor=1,s_bIsIphone=!1,s_iOffsetX,s_iOffsetY,s_bFocus=!0;
(function(a){(jQuery.browser=jQuery.browser||{}).mobile=/android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(ad|hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|tablet|treo|up\.(browser|link)|vodafone|wap|webos|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(a.substr(0,
4))})(navigator.userAgent||navigator.vendor||window.opera);$(window).resize(function(){sizeHandler()});function NotImplementedError(a){this.name="NotImplementedError";this.message=a||""}NotImplementedError.prototype=Error.prototype;function error(a){throw{name:"NotImplementedError",message:a};}function trace(a){console.log(a)}window.addEventListener("orientationchange",onOrientationChange);function onOrientationChange(){sizeHandler()}
function isIpad(){var a=-1!==navigator.userAgent.toLowerCase().indexOf("ipad");return!a&&navigator.userAgent.match(/Mac/)&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints?!0:a}function isMobile(){return isIpad()?!0:jQuery.browser.mobile}function ifArrayContainsValue(a,h){for(var b=0;b<a.length;b++)if(a[b]===h)return!0;return!1}
function getSize(a){var h=a.toLowerCase(),b=window.document,e=b.documentElement;if(void 0===window["inner"+a])a=e["client"+a];else if(window["inner"+a]!=e["client"+a]){var d=b.createElement("body");d.id="vpw-test-b";d.style.cssText="overflow:scroll";var k=b.createElement("div");k.id="vpw-test-d";k.style.cssText="position:absolute;top:-1000px";k.innerHTML="<style>@media("+h+":"+e["client"+a]+"px){body#vpw-test-b div#vpw-test-d{"+h+":7px!important}}</style>";d.appendChild(k);e.insertBefore(d,b.head);
a=7==k["offset"+a]?e["client"+a]:window["inner"+a];e.removeChild(d)}else a=window["inner"+a];return a}
function sizeHandler(){window.scrollTo(0,1);if($("#canvas")){var a=null!==platform.name&&"safari"===platform.name.toLowerCase()?getIOSWindowHeight():getSize("Height");var h=getSize("Width");s_bFocus&&_checkOrientation(h,a);var b=Math.min(a/CANVAS_HEIGHT,h/CANVAS_WIDTH),e=Math.round(CANVAS_WIDTH*b);b=Math.round(CANVAS_HEIGHT*b);if(b<a){var d=a-b;b+=d;e+=CANVAS_WIDTH/CANVAS_HEIGHT*d}else e<h&&(d=h-e,e+=d,b+=CANVAS_HEIGHT/CANVAS_WIDTH*d);d=a/2-b/2;var k=h/2-e/2,l=CANVAS_WIDTH/e;if(k*l<-EDGEBOARD_X||
d*l<-EDGEBOARD_Y)b=Math.min(a/(CANVAS_HEIGHT-2*EDGEBOARD_Y),h/(CANVAS_WIDTH-2*EDGEBOARD_X)),e=Math.round(CANVAS_WIDTH*b),b=Math.round(CANVAS_HEIGHT*b),d=(a-b)/2,k=(h-e)/2,l=CANVAS_WIDTH/e;s_iOffsetX=-1*k*l;s_iOffsetY=-1*d*l;0<=d&&(s_iOffsetY=0);0<=k&&(s_iOffsetX=0);null!==s_oInterface&&s_oInterface.refreshButtonPos(s_iOffsetX,s_iOffsetY);null!==s_oMenu&&s_oMenu.refreshButtonPos(s_iOffsetX,s_iOffsetY);null!==s_oPlayersSelection&&s_oPlayersSelection.refreshButtonPos(s_iOffsetX,s_iOffsetY);s_bIsIphone?
(canvas=document.getElementById("canvas"),s_oStage.canvas.width=2*e,s_oStage.canvas.height=2*b,canvas.style.width=e+"px",canvas.style.height=b+"px",s_oStage.scaleX=s_oStage.scaleY=2*Math.min(e/CANVAS_WIDTH,b/CANVAS_HEIGHT)):s_bMobile?($("#canvas").css("width",e+"px"),$("#canvas").css("height",b+"px")):(s_oStage.canvas.width=e,s_oStage.canvas.height=b,s_iScaleFactor=Math.min(e/CANVAS_WIDTH,b/CANVAS_HEIGHT),s_oStage.scaleX=s_oStage.scaleY=s_iScaleFactor);0>d||(d=(a-b)/2);$("#canvas").css("top",d+"px");
$("#canvas").css("left",k+"px");fullscreenHandler()}}
function _checkOrientation(a,h){s_bMobile&&ENABLE_CHECK_ORIENTATION&&(a>h?"landscape"===$(".orientation-msg-container").attr("data-orientation")?($(".orientation-msg-container").css("display","none"),s_oMain.startUpdate()):($(".orientation-msg-container").css("display","block"),s_oMain.stopUpdate()):"portrait"===$(".orientation-msg-container").attr("data-orientation")?($(".orientation-msg-container").css("display","none"),s_oMain.startUpdate()):($(".orientation-msg-container").css("display","block"),
s_oMain.stopUpdate()))}function isChrome(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}function isIOS(){var a="iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";");if(-1!==navigator.userAgent.toLowerCase().indexOf("iphone"))return s_bIsIphone=!0;for(;a.length;)if(navigator.platform===a.pop())return!0;return s_bIsIphone=!1}function getIOSWindowHeight(){return document.documentElement.clientWidth/window.innerWidth*window.innerHeight}
function getHeightOfIOSToolbars(){var a=(0===window.orientation?screen.height:screen.width)-getIOSWindowHeight();return 1<a?a:0}function getMobileOperatingSystem(){var a=navigator.userAgent||navigator.vendor||window.opera;return a.match(/iPad/i)||a.match(/iPhone/i)||a.match(/iPod/i)?"ios":a.match(/Android/i)?"android":"unknown"}function inIframe(){try{return window.self!==window.top}catch(a){return!0}}
function soundPlaying(a){if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)return s_aSounds[a].playing()}function stopSound(a){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].stop()}function playSound(a,h,b){return!1===DISABLE_SOUND_MOBILE||!1===s_bMobile?(s_aSounds[a].play(),s_aSounds[a].volume(h),s_aSounds[a].loop(b),s_aSounds[a]):null}function setVolume(a,h){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].volume(h)}
function setMute(a,h){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[h].mute(a)}function createBitmap(a,h,b){var e=new createjs.Bitmap(a),d=new createjs.Shape;h&&b?d.graphics.beginFill("#fff").drawRect(0,0,h,b):d.graphics.beginFill("#ff0").drawRect(0,0,a.width,a.height);e.hitArea=d;return e}function createSprite(a,h,b,e,d,k){a=null!==h?new createjs.Sprite(a,h):new createjs.Sprite(a);h=new createjs.Shape;h.graphics.beginFill("#000000").drawRect(-b,-e,d,k);a.hitArea=h;return a}
function randomFloatBetween(a,h,b){"undefined"===typeof b&&(b=2);return parseFloat(Math.min(a+Math.random()*(h-a),h).toFixed(b))}function shuffle(a){for(var h=a.length,b,e;0!==h;)e=Math.floor(Math.random()*h),--h,b=a[h],a[h]=a[e],a[e]=b;return a}function easeLinear(a,h,b,e){return b*a/e+h}function easeInQuad(a,h,b,e){return b*(a/=e)*a+h}function easeInSine(a,h,b,e){return-b*Math.cos(a/e*(Math.PI/2))+b+h}function easeInCubic(a,h,b,e){return b*(a/=e)*a*a+h}
function getTrajectoryPoint(a,h){var b=new createjs.Point,e=(1-a)*(1-a),d=a*a;b.x=e*h.start.x+2*(1-a)*a*h.traj.x+d*h.end.x;b.y=e*h.start.y+2*(1-a)*a*h.traj.y+d*h.end.y;return b}function formatTime(a){a/=1E3;var h=Math.floor(a/60);a=parseFloat(a-60*h).toFixed(0);var b="";b=10>h?b+("0"+h+":"):b+(h+":");return 10>a?b+("0"+a):b+a}function degreesToRadians(a){return a*Math.PI/180}function checkRectCollision(a,h){var b=getBounds(a,.9);var e=getBounds(h,.98);return calculateIntersection(b,e)}
function calculateIntersection(a,h){var b,e,d,k;var l=a.x+(b=a.width/2);var r=a.y+(e=a.height/2);var f=h.x+(d=h.width/2);var p=h.y+(k=h.height/2);l=Math.abs(l-f)-(b+d);r=Math.abs(r-p)-(e+k);return 0>l&&0>r?(l=Math.min(Math.min(a.width,h.width),-l),r=Math.min(Math.min(a.height,h.height),-r),{x:Math.max(a.x,h.x),y:Math.max(a.y,h.y),width:l,height:r,rect1:a,rect2:h}):null}
function getBounds(a,h){var b={x:Infinity,y:Infinity,width:0,height:0};if(a instanceof createjs.Container){b.x2=-Infinity;b.y2=-Infinity;var e=a.children,d=e.length,k;for(k=0;k<d;k++){var l=getBounds(e[k],1);l.x<b.x&&(b.x=l.x);l.y<b.y&&(b.y=l.y);l.x+l.width>b.x2&&(b.x2=l.x+l.width);l.y+l.height>b.y2&&(b.y2=l.y+l.height)}Infinity==b.x&&(b.x=0);Infinity==b.y&&(b.y=0);Infinity==b.x2&&(b.x2=0);Infinity==b.y2&&(b.y2=0);b.width=b.x2-b.x;b.height=b.y2-b.y;delete b.x2;delete b.y2}else{if(a instanceof createjs.Bitmap){d=
a.sourceRect||a.image;k=d.width*h;var r=d.height*h}else if(a instanceof createjs.Sprite)if(a.spriteSheet._frames&&a.spriteSheet._frames[a.currentFrame]&&a.spriteSheet._frames[a.currentFrame].image){d=a.spriteSheet.getFrame(a.currentFrame);k=d.rect.width;r=d.rect.height;e=d.regX;var f=d.regY}else b.x=a.x||0,b.y=a.y||0;else b.x=a.x||0,b.y=a.y||0;e=e||0;k=k||0;f=f||0;r=r||0;b.regX=e;b.regY=f;d=a.localToGlobal(0-e,0-f);l=a.localToGlobal(k-e,r-f);k=a.localToGlobal(k-e,0-f);e=a.localToGlobal(0-e,r-f);b.x=
Math.min(Math.min(Math.min(d.x,l.x),k.x),e.x);b.y=Math.min(Math.min(Math.min(d.y,l.y),k.y),e.y);b.width=Math.max(Math.max(Math.max(d.x,l.x),k.x),e.x)-b.x;b.height=Math.max(Math.max(Math.max(d.y,l.y),k.y),e.y)-b.y}return b}function NoClickDelay(a){this.element=a;window.Touch&&this.element.addEventListener("touchstart",this,!1)}
NoClickDelay.prototype={handleEvent:function(a){switch(a.type){case "touchstart":this.onTouchStart(a);break;case "touchmove":this.onTouchMove(a);break;case "touchend":this.onTouchEnd(a)}},onTouchStart:function(a){a.preventDefault();this.moved=!1;this.element.addEventListener("touchmove",this,!1);this.element.addEventListener("touchend",this,!1)},onTouchMove:function(a){this.moved=!0},onTouchEnd:function(a){this.element.removeEventListener("touchmove",this,!1);this.element.removeEventListener("touchend",
this,!1);if(!this.moved){a=document.elementFromPoint(a.changedTouches[0].clientX,a.changedTouches[0].clientY);3==a.nodeType&&(a=a.parentNode);var h=document.createEvent("MouseEvents");h.initEvent("click",!0,!0);a.dispatchEvent(h)}}};
(function(){function a(b){var e={focus:"visible",focusin:"visible",pageshow:"visible",blur:"hidden",focusout:"hidden",pagehide:"hidden"};b=b||window.event;b.type in e?document.body.className=e[b.type]:(document.body.className=this[h]?"hidden":"visible","hidden"===document.body.className?(s_oMain.stopUpdate(),s_bFocus=!1):(s_oMain.startUpdate(),s_bFocus=!0))}var h="hidden";h in document?document.addEventListener("visibilitychange",a):(h="mozHidden")in document?document.addEventListener("mozvisibilitychange",
a):(h="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",a):(h="msHidden")in document?document.addEventListener("msvisibilitychange",a):"onfocusin"in document?document.onfocusin=document.onfocusout=a:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=a})();function ctlArcadeResume(){null!==s_oMain&&s_oMain.startUpdate()}function ctlArcadePause(){null!==s_oMain&&s_oMain.stopUpdate()}
function getParamValue(a){for(var h=window.location.search.substring(1).split("&"),b=0;b<h.length;b++){var e=h[b].split("=");if(e[0]==a)return e[1]}}function saveItem(a,h){s_bStorageAvailable&&localStorage.setItem(a,h)}function getItem(a){return s_bStorageAvailable?localStorage.getItem(a):null}function setItemJson(a,h){s_bStorageAvailable&&localStorage.setItem(a,JSON.stringify(h))}function getItemJson(a){return s_bStorageAvailable?JSON.parse(localStorage.getItem(a)):null}
function fullscreenHandler(){ENABLE_FULLSCREEN&&screenfull.isEnabled&&(s_bFullscreen=screenfull.isFullscreen,null!==s_oInterface&&s_oInterface.resetFullscreenBut(),null!==s_oMenu&&s_oMenu.resetFullscreenBut(),null!==s_oPlayersSelection&&s_oPlayersSelection.resetFullscreenBut())}
if(screenfull.isEnabled)screenfull.on("change",function(){s_bFullscreen=screenfull.isFullscreen;null!==s_oInterface&&s_oInterface.resetFullscreenBut();null!==s_oMenu&&s_oMenu.resetFullscreenBut();null!==s_oPlayersSelection&&s_oPlayersSelection.resetFullscreenBut()});
function CSpriteLibrary(){var a={},h,b,e,d,k,l;this.init=function(r,f,p){h={};e=b=0;d=r;k=f;l=p};this.addSprite=function(r,f){if(!a.hasOwnProperty(r)){var p=new Image;a[r]=h[r]={szPath:f,oSprite:p,bLoaded:!1};b++}};this.getSprite=function(r){return a.hasOwnProperty(r)?a[r].oSprite:null};this._onSpritesLoaded=function(){b=0;k.call(l)};this._onSpriteLoaded=function(){d.call(l);++e===b&&this._onSpritesLoaded()};this.loadSprites=function(){for(var r in h)h[r].oSprite.oSpriteLibrary=this,h[r].oSprite.szKey=
r,h[r].oSprite.onload=function(){this.oSpriteLibrary.setLoaded(this.szKey);this.oSpriteLibrary._onSpriteLoaded(this.szKey)},h[r].oSprite.onerror=function(f){var p=f.currentTarget;setTimeout(function(){h[p.szKey].oSprite.src=h[p.szKey].szPath},500)},h[r].oSprite.src=h[r].szPath};this.setLoaded=function(r){a[r].bLoaded=!0};this.isLoaded=function(r){return a[r].bLoaded};this.getNumSprites=function(){return b}}
var CANVAS_WIDTH=1360,CANVAS_HEIGHT=640,CANVAS_WIDTH_HALF=.5*CANVAS_WIDTH,CANVAS_HEIGHT_HALF=.5*CANVAS_HEIGHT,EDGEBOARD_X=140,EDGEBOARD_Y=10,FPS=30,FPS_TIME=1E3/FPS,DISABLE_SOUND_MOBILE=!1,PRIMARY_FONT="liberationserif-bold",PRIMARY_FONT_COLOR="#fef89f",SECONDARY_FONT_COLOR="#000000",THIRD_FONT_COLOR="#fef89f",FONT_SIZE_SCOREBOARD="14px ",FONT_SIZE_PAUSE="60px ",STATE_LOADING=0,STATE_MENU=1,STATE_PLAYERS_SELECTION=2,STATE_HELP=3,STATE_GAME=4,PLAYER_HUMAN_NUMBER=0,PLAYER_TEXT_POSITIONS_X=[0,0,-450,
450],PLAYER_TEXT_POSITIONS_Y=[250,-255,0,0],PLAYER_SCORE_TEXTS_POSITION_Y=[-124,-94,-64,-34,-4,27,-124,-94,-64,-34,-4,27,57],PLAYER_TOTALS_TEXTS_POSITION_Y=[57,87,87,117],HIT_AREA_WIDTH=260,HIT_AREA_HEIGHT=30,COMBINATIONS_NUMBER=13,COMBINATION_TOP_LIMIT=6,TOP_BONUS_LIMIT=63,TOP_BONUS_VALUE=35,DICES_LAUNCH_POSSIBILITIES=3,DICES_NUMBER=5,DICE_FRAME_SIZE=96,DICE_POSITION_X_START=CANVAS_WIDTH_HALF-2*DICE_FRAME_SIZE,DICE_TIME_DELAY=100,WIN_PANEL_POPUP_DELAY=1E3,HAND_ANIMATION_FADE_SPEED=1E3,HAND_ANIMATION_DELAY=
1E3,HAND_ANIMATION_MAX_ALPHA=1,DEFAULT_VALUE="-",ID_SCORE_TOP_BONUS=0,ID_SCORE_TOP_TOTAL=1,ID_SCORE_BOTTOM_TOTAL=2,ID_SCORE_GRAND_TOTAL=3,ID_3_OF_A_KIND=6,ID_4_OF_A_KIND=7,ID_FULL_HOUSE=8,ID_SMALL_STRAIGHT=9,ID_LARGE_STRAIGHT=10,ID_YACHT=11,ID_CHANCE=12,DICE_VALUES=[1,2,3,4,5,6],CPU_TIMER_VALUE_MAX,COMBINATION_VALUE_FULL_HOUSE,COMBINATION_VALUE_SMALL_STRAIGHT,COMBINATION_VALUE_LARGE_STRAIGHT,COMBINATION_VALUE_YACHT,ENABLE_FULLSCREEN,ENABLE_CHECK_ORIENTATION,SOUNDTRACK_VOLUME_IN_GAME=.5,ON_MOUSE_DOWN=
0,ON_MOUSE_UP=1,TEXT_HELP1="FOR EACH ROUND, THE PLAYER HAS ",TEXT_HELP2=" ROLLS OF DICES",TEXT_HELP3="AT ANY ROLL HE MUST CHOOSE ONE OF HIS REMAINING COMBINATIONS",TEXT_HELP4="THE PLAYER CAN BLOCK A DICE IN ORDER TO KEEP IT FOR THE NEXT ROLL",TEXT_HELP_TOPBONUS_1="IF THE TOP TOTAL IS AT LEAST ",TEXT_HELP_TOPBONUS_2=" THE PLAYER WILL RECEIVE A BONUS",TEXT_HELP_COMBINATION_0="THE SUM OF DICES WITH NUMBER 1",TEXT_HELP_COMBINATION_1="THE SUM OF DICES WITH NUMBER 2",TEXT_HELP_COMBINATION_2="THE SUM OF DICES WITH NUMBER 3",
TEXT_HELP_COMBINATION_3="THE SUM OF DICES WITH NUMBER 4",TEXT_HELP_COMBINATION_4="THE SUM OF DICES WITH NUMBER 5",TEXT_HELP_COMBINATION_5="THE SUM OF DICES WITH NUMBER 6",TEXT_HELP_COMBINATION_6="AT LEAST 3 DICES THE SAME",TEXT_HELP_COMBINATION_7="AT LEAST 4 DICES THE SAME",TEXT_HELP_COMBINATION_8="3 OF ONE NUMBER AND 2 OF ANOTHER",TEXT_HELP_COMBINATION_9="4 SEQUENTIAL DICES",TEXT_HELP_COMBINATION_10="5 SEQUENTIAL DICES",TEXT_HELP_COMBINATION_11="ALL 5 DICES THE SAME",TEXT_HELP_COMBINATION_12="ANY COMBINATION, THE SUM OF ALL NUMBERS",
TEXT_SELECT_PLAYERS="SELECT PLAYERS",TEXT_WIN="CONGRATULATIONS, YOU WON!",TEXT_LOSE_1="SORRY, PLAYER ",TEXT_LOSE_2=" WINS!\nTRY AGAIN?",TEXT_PAUSE="PAUSE",TEXT_ARE_SURE="ARE YOU SURE YOU WANT TO EXIT?\nALL UNSAVED PROGRESS WILL BE LOST",TEXT_BEST_SCORE="BEST SCORE",TEXT_NEW_BEST_SCORE="NEW BEST SCORE",TEXT_PLAYER="PLAYER",TEXT_FINALSCORE="SCORE",TEXT_COMBINATION_0="ONES",TEXT_COMBINATION_1="TWOS",TEXT_COMBINATION_2="THREES",TEXT_COMBINATION_3="FOURS",TEXT_COMBINATION_4="FIVES",TEXT_COMBINATION_5=
"SIXES",TEXT_COMBINATION_6="3 OF A KIND",TEXT_COMBINATION_7="4 OF A KIND",TEXT_COMBINATION_8="FULL HOUSE",TEXT_COMBINATION_9="LITTLE STRAIGHT",TEXT_COMBINATION_10="BIG STRAIGHT",TEXT_COMBINATION_11="YACHT",TEXT_COMBINATION_12="CHANCE",TEXT_BONUS="TOP BONUS",TEXT_TOTAL_TOP="TOP TOTAL",TEXT_TOTAL_BOTTOM="BOTTOM TOTAL",TEXT_GRAND_TOTAL="FINAL TOTAL",TEXT_PRELOADER_CONTINUE="START",TEXT_CREDITS_DEVELOPED="DEVELOPED BY",TEXT_LINK="www.codethislab.com",TEXT_ERR_LS="YOUR WEB BROWSER DOES NOT SUPPORT LOCAL STORAGE. IF YOU'RE USING SAFARI, IT MAY BE RELATED TO PRIVATE BROWSING. AS A RESULT, SOME INFO MAY NOT BE SAVED OR SOME FEATURES MAY NOT BE AVAILABLE.",
TEXT_SHARE_IMAGE="200x200.jpg",TEXT_SHARE_TITLE="Congratulations!",TEXT_SHARE_MSG1="You collected <strong>",TEXT_SHARE_MSG2=" points</strong>!<br><br>Share your score with your friends!",TEXT_SHARE_SHARE1="My score is ",TEXT_SHARE_SHARE2=" points! Can you do better?";
function CPreloader(){var a,h,b,e,d,k,l,r,f,p;this._init=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this);s_oSpriteLibrary.addSprite("progress_bar","./sprites/progress_bar.png");s_oSpriteLibrary.addSprite("200x200","./sprites/200x200.jpg");s_oSpriteLibrary.addSprite("but_start","./sprites/but_start.png");s_oSpriteLibrary.loadSprites();p=new createjs.Container;s_oStage.addChild(p)};this.unload=function(){f.unload();f=null;p.removeAllChildren()};this._onImagesLoaded=
function(){};this._onAllImagesLoaded=function(){this.attachSprites();s_oMain.preloaderReady()};this.attachSprites=function(){var q=new createjs.Shape;q.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);p.addChild(q);q=s_oSpriteLibrary.getSprite("200x200");l=createBitmap(q);l.regX=.5*q.width;l.regY=.5*q.height;l.x=CANVAS_WIDTH_HALF;l.y=CANVAS_HEIGHT_HALF-180;p.addChild(l);r=new createjs.Shape;r.graphics.beginFill("rgba(0,0,0,0.01)").drawRoundRect(l.x-100,l.y-100,200,200,10);p.addChild(r);
l.mask=r;q=s_oSpriteLibrary.getSprite("progress_bar");e=createBitmap(q);e.x=CANVAS_WIDTH_HALF-q.width/2;e.y=CANVAS_HEIGHT_HALF+50;p.addChild(e);a=q.width;h=q.height;d=new createjs.Shape;d.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(e.x,e.y,1,h);p.addChild(d);e.mask=d;b=new createjs.Text("","30px "+PRIMARY_FONT,PRIMARY_FONT_COLOR);b.x=CANVAS_WIDTH_HALF;b.y=CANVAS_HEIGHT_HALF+100;b.textBaseline="alphabetic";b.textAlign="center";p.addChild(b);q=s_oSpriteLibrary.getSprite("but_start");f=new CTextButton(CANVAS_WIDTH_HALF,
CANVAS_HEIGHT_HALF,q,TEXT_PRELOADER_CONTINUE,"Arial","#000",50,p);f.addEventListener(ON_MOUSE_UP,this._onButStartRelease,this);f.setVisible(!1);k=new createjs.Shape;k.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);p.addChild(k);createjs.Tween.get(k).to({alpha:0},500).call(function(){createjs.Tween.removeTweens(k);p.removeChild(k)})};this._onButStartRelease=function(){s_oMain._onRemovePreloader()};this.refreshLoader=function(q){b.text=q+"%";100===q&&(s_oMain._onRemovePreloader(),
b.visible=!1,e.visible=!1);d.graphics.clear();q=Math.floor(q*a/100);d.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(e.x,e.y,q,h)};this._init()}
function CMain(a){var h,b=0,e=0,d=STATE_LOADING,k,l;this.initContainer=function(){s_oCanvas=document.getElementById("canvas");s_oStage=new createjs.Stage(s_oCanvas);s_oStage.preventSelection=!1;createjs.Touch.enable(s_oStage,!0);s_bMobile=isMobile();!1===s_bMobile&&(s_oStage.enableMouseOver(FPS),$("body").on("contextmenu","#canvas",function(f){return!1}));s_iPrevTime=(new Date).getTime();createjs.Ticker.addEventListener("tick",this._update);createjs.Ticker.framerate=FPS;navigator.userAgent.match(/Windows Phone/i)&&
(DISABLE_SOUND_MOBILE=!0);s_oSpriteLibrary=new CSpriteLibrary;k=new CPreloader};this.preloaderReady=function(){this._loadImages();!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||this._initSounds();h=!0};this.soundLoaded=function(){b++;k.refreshLoader(Math.floor(b/e*100))};this._initSounds=function(){Howler.mute(!s_bAudioActive);s_aSoundsInfo=[];s_aSoundsInfo.push({path:"./sounds/",filename:"soundtrack",loop:!0,volume:1,ingamename:"soundtrack"});s_aSoundsInfo.push({path:"./sounds/",filename:"click",loop:!1,
volume:1,ingamename:"click"});s_aSoundsInfo.push({path:"./sounds/",filename:"dice",loop:!1,volume:1,ingamename:"dice"});s_aSoundsInfo.push({path:"./sounds/",filename:"correct",loop:!1,volume:1,ingamename:"correct"});s_aSoundsInfo.push({path:"./sounds/",filename:"wrong",loop:!1,volume:1,ingamename:"wrong"});s_aSoundsInfo.push({path:"./sounds/",filename:"select",loop:!1,volume:1,ingamename:"select"});s_aSoundsInfo.push({path:"./sounds/",filename:"rolldices",loop:!1,volume:1,ingamename:"rolldices"});
s_aSoundsInfo.push({path:"./sounds/",filename:"game_win",loop:!1,volume:1,ingamename:"game_win"});s_aSoundsInfo.push({path:"./sounds/",filename:"game_over",loop:!1,volume:1,ingamename:"game_over"});e+=s_aSoundsInfo.length;s_aSounds=[];for(var f=0;f<s_aSoundsInfo.length;f++)this.tryToLoadSound(s_aSoundsInfo[f],!1)};this.tryToLoadSound=function(f,p){setTimeout(function(){s_aSounds[f.ingamename]=new Howl({src:[f.path+f.filename+".mp3"],autoplay:!1,preload:!0,loop:f.loop,volume:f.volume,onload:s_oMain.soundLoaded,
onloaderror:function(q,t){for(var g=0;g<s_aSoundsInfo.length;g++)if(q===s_aSounds[s_aSoundsInfo[g].ingamename]._sounds[0]._id){s_oMain.tryToLoadSound(s_aSoundsInfo[g],!0);break}},onplayerror:function(q){for(var t=0;t<s_aSoundsInfo.length;t++)if(q===s_aSounds[s_aSoundsInfo[t].ingamename]._sounds[0]._id){s_aSounds[s_aSoundsInfo[t].ingamename].once("unlock",function(){s_aSounds[s_aSoundsInfo[t].ingamename].play();"soundtrack"===s_aSoundsInfo[t].ingamename&&null!==s_oGame&&setVolume("soundtrack",SOUNDTRACK_VOLUME_IN_GAME)});
break}}})},p?200:0)};this._loadImages=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this);for(var f=0;4>f;f++)s_oSpriteLibrary.addSprite("player_frame"+f,"./sprites/player_frame"+f+".png");for(f=1;4>f;f++)s_oSpriteLibrary.addSprite("player_stripes"+f+"a","./sprites/player_stripes"+f+"a.png"),s_oSpriteLibrary.addSprite("player_stripes"+f+"b","./sprites/player_stripes"+f+"b.png");for(f=1;7>f;f++)s_oSpriteLibrary.addSprite("roll_"+f,"./sprites/roll_"+f+".png");s_oSpriteLibrary.addSprite("logo_ctl",
"./sprites/logo_ctl.png");s_oSpriteLibrary.addSprite("audio_icon","./sprites/audio_icon.png");s_oSpriteLibrary.addSprite("but_home","./sprites/but_home.png");s_oSpriteLibrary.addSprite("but_play","./sprites/but_play.png");s_oSpriteLibrary.addSprite("but_exit","./sprites/but_exit.png");s_oSpriteLibrary.addSprite("but_settings","./sprites/but_settings.png");s_oSpriteLibrary.addSprite("but_help","./sprites/but_help.png");s_oSpriteLibrary.addSprite("but_credits","./sprites/but_credits.png");s_oSpriteLibrary.addSprite("but_roll",
"./sprites/but_roll.png");s_oSpriteLibrary.addSprite("but_scoreboard","./sprites/but_scoreboard.png");s_oSpriteLibrary.addSprite("but_restart","./sprites/but_restart.png");s_oSpriteLibrary.addSprite("but_1players","./sprites/but_1players.png");s_oSpriteLibrary.addSprite("but_2players","./sprites/but_2players.png");s_oSpriteLibrary.addSprite("but_3players","./sprites/but_3players.png");s_oSpriteLibrary.addSprite("but_4players","./sprites/but_4players.png");s_oSpriteLibrary.addSprite("but_continue",
"./sprites/but_continue.png");s_oSpriteLibrary.addSprite("but_fullscreen","./sprites/but_fullscreen.png");s_oSpriteLibrary.addSprite("but_yes","./sprites/but_yes.png");s_oSpriteLibrary.addSprite("but_no","./sprites/but_no.png");s_oSpriteLibrary.addSprite("bg_menu","./sprites/bg_menu.jpg");s_oSpriteLibrary.addSprite("bg_players_select","./sprites/bg_players_select.jpg");s_oSpriteLibrary.addSprite("bg_game","./sprites/bg_game.jpg");s_oSpriteLibrary.addSprite("bg_help","./sprites/bg_help.png");s_oSpriteLibrary.addSprite("msg_box",
"./sprites/msg_box.png");s_oSpriteLibrary.addSprite("msg_box_small","./sprites/msg_box_small.png");s_oSpriteLibrary.addSprite("highlight","./sprites/highlight.png");s_oSpriteLibrary.addSprite("hand_anim","./sprites/hand_anim.png");s_oSpriteLibrary.addSprite("but_continue_small","./sprites/but_continue_small.png");s_oSpriteLibrary.addSprite("score_confirm","./sprites/score_confirm.png");s_oSpriteLibrary.addSprite("but_back_small","./sprites/but_back_small.png");s_oSpriteLibrary.addSprite("roll","./sprites/roll.png");
e+=s_oSpriteLibrary.getNumSprites();s_oSpriteLibrary.loadSprites()};this._onImagesLoaded=function(){b++;k.refreshLoader(Math.floor(b/e*100))};this._onAllImagesLoaded=function(){};this._onRemovePreloader=function(){try{saveItem("ls_available","ok")}catch(f){s_bStorageAvailable=!1}k.unload();s_oSoundtrack=playSound("soundtrack",1,!0);this.gotoMenu()};this.onAllPreloaderImagesLoaded=function(){this._loadImages()};this.gotoMenu=function(){new CMenu;d=STATE_MENU};this.gotoGame=function(){l=new CGame(r);
d=STATE_GAME};this.gotoPlayersSelection=function(){new CPlayersSelection;d=STATE_PLAYERS_SELECTION};this.gotoHelp=function(){new CHelp;d=STATE_HELP};this.stopUpdate=function(){h=!1;createjs.Ticker.paused=!0;$("#block_game").css("display","block");!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||Howler.mute(!0)};this.startUpdate=function(){s_iPrevTime=(new Date).getTime();h=!0;createjs.Ticker.paused=!1;$("#block_game").css("display","none");(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)&&s_bAudioActive&&Howler.mute(!1)};
this._update=function(f){if(!1!==h){var p=(new Date).getTime();s_iTimeElaps=p-s_iPrevTime;s_iCntTime+=s_iTimeElaps;s_iCntFps++;s_iPrevTime=p;1E3<=s_iCntTime&&(s_iCurFps=s_iCntFps,s_iCntTime-=1E3,s_iCntFps=0);d===STATE_GAME&&l.update();s_oStage.update(f)}};CPU_TIMER_VALUE_MAX=a.cpu_timer_value_max;COMBINATION_VALUE_FULL_HOUSE=a.combination_value_full_house;COMBINATION_VALUE_SMALL_STRAIGHT=a.combination_value_small_straight;COMBINATION_VALUE_LARGE_STRAIGHT=a.combination_value_large_straight;COMBINATION_VALUE_YACHT=
a.combination_value_yacht;ENABLE_CHECK_ORIENTATION=a.check_orientation;ENABLE_FULLSCREEN=a.fullscreen;s_bAudioActive=a.audio_enable_on_startup;var r=a;s_oMain=this;this.initContainer()}var s_bMobile,s_bAudioActive=!0,s_iCntTime=0,s_iTimeElaps=0,s_iPrevTime=0,s_iCntFps=0,s_iCurFps=0,s_iBestScore=0,s_bFullscreen=!1,s_bStorageAvailable=!0,s_oDrawLayer,s_oStage,s_oMain,s_oSpriteLibrary,s_oSoundtrack=null,s_oCanvas,s_iPlayersNumber=0,s_aSoundsInfo;
function CToggle(a,h,b,e){var d,k,l,r=[],f,p=1;this._init=function(q,t,g,v){k=[];l=[];var z=new createjs.SpriteSheet({images:[g],frames:{width:g.width/2,height:g.height,regX:g.width/2/2,regY:g.height/2},animations:{state_true:[0],state_false:[1]}});d=v;f=createSprite(z,"state_"+d,g.width/2/2,g.height/2,g.width/2,g.height);f.x=q;f.y=t;f.stop();s_bMobile||(f.cursor="pointer");s_oStage.addChild(f);this._initListener()};this.setRotation=function(q){f.rotation=q};this.unload=function(){f.off("mousedown",
this.buttonDown);f.off("pressup",this.buttonRelease);s_oStage.removeChild(f)};this._initListener=function(){f.on("mousedown",this.buttonDown);f.on("pressup",this.buttonRelease)};this.addEventListener=function(q,t,g){k[q]=t;l[q]=g};this.addEventListenerWithParams=function(q,t,g,v){k[q]=t;l[q]=g;r=v};this.setActive=function(q){d=q;f.gotoAndStop("state_"+d)};this.setScale=function(q){p=q;f.scaleX=p;f.scaleY=p};this.buttonRelease=function(){f.scaleX=p;f.scaleY=p;playSound("click",1,!1);d=!d;f.gotoAndStop("state_"+
d);k[ON_MOUSE_UP]&&k[ON_MOUSE_UP].call(l[ON_MOUSE_UP],r)};this.buttonDown=function(){f.scaleX=p-.1;f.scaleY=p-.1;k[ON_MOUSE_DOWN]&&k[ON_MOUSE_DOWN].call(l[ON_MOUSE_DOWN],r)};this.getButtonImage=function(){return f};this.setPosition=function(q,t){f.x=q;f.y=t};this.setVisible=function(q){f.visible=q};this._init(a,h,b,e)}
function CGfxButton(a,h,b,e){var d,k,l=[],r,f,p,q,t,g,v;this._init=function(w,E,A,c){v=d=!1;k=1;q=[];t=[];g=createBitmap(A);g.x=w;g.y=E;g.scaleX=g.scaleY=k;g.regX=A.width/2;g.regY=A.height/2;c.addChild(g);this._initListener()};this.unload=function(){s_bMobile?g.off("mousedown",r):(g.off("mousedown",r),g.off("mouseover",p));g.off("pressup",f);e.removeChild(g)};this.setVisible=function(w){g.visible=w};this.setClickable=function(w){d=!w};this._initListener=function(){s_bMobile?r=g.on("mousedown",this.buttonDown):
(r=g.on("mousedown",this.buttonDown),p=g.on("mouseover",this.buttonOver));f=g.on("pressup",this.buttonRelease)};this.addEventListener=function(w,E,A){q[w]=E;t[w]=A};this.addEventListenerWithParams=function(w,E,A,c){q[w]=E;t[w]=A;l=c};this.buttonRelease=function(){d||(g.scaleX=k,g.scaleY=k,q[ON_MOUSE_UP]&&q[ON_MOUSE_UP].call(t[ON_MOUSE_UP],l))};this.buttonDown=function(){d||(g.scaleX=.9*k,g.scaleY=.9*k,v||playSound("click",1,0),q[ON_MOUSE_DOWN]&&q[ON_MOUSE_DOWN].call(t[ON_MOUSE_DOWN],l))};this.buttonOver=
function(w){s_bMobile||d||(w.target.cursor="pointer")};this.pulseAnimation=function(){createjs.Tween.get(g).to({scaleX:.9*k,scaleY:.9*k},850,createjs.Ease.quadOut).to({scaleX:k,scaleY:k},650,createjs.Ease.quadIn).call(function(){z.pulseAnimation()})};this.trembleAnimation=function(){createjs.Tween.get(g).to({rotation:5},75,createjs.Ease.quadOut).to({rotation:-5},140,createjs.Ease.quadIn).to({rotation:0},75,createjs.Ease.quadIn).wait(750).call(function(){z.trebleAnimation()})};this.setPosition=function(w,
E){g.x=w;g.y=E};this.setX=function(w){g.x=w};this.setY=function(w){g.y=w};this.getButtonImage=function(){return g};this.getX=function(){return g.x};this.getY=function(){return g.y};this.setMuted=function(w){v=w};var z=this;this._init(a,h,b,e);return this}
function CConfirmationButton(a,h,b,e){var d,k,l=[],r,f,p,q,t,g;this._init=function(v,z,w,E){d=!1;k=1;q=[];t=[];w=s_oSpriteLibrary.getSprite("but_scoreboard");g=createBitmap(w);g.x=v;g.y=z;g.scaleX=g.scaleY=k;g.regX=w.width/2;g.regY=w.height/2;E.addChild(g);this._initListener()};this.unload=function(){s_bMobile?g.off("mousedown",r):(g.off("mousedown",r),g.off("mouseover",p));g.off("pressup",f);e.removeChild(g)};this.setVisible=function(v){g.visible=v};this.setClickable=function(v){d=!v};this._initListener=
function(){s_bMobile?r=g.on("mousedown",this.buttonDown):(r=g.on("mousedown",this.buttonDown),p=g.on("mouseover",this.buttonOver));f=g.on("pressup",this.buttonRelease)};this.addEventListener=function(v,z,w){q[v]=z;t[v]=w};this.addEventListenerWithParams=function(v,z,w,E){q[v]=z;t[v]=w;l=E};this.buttonRelease=function(){d||(g.scaleX=k,g.scaleY=k,q[ON_MOUSE_UP]&&q[ON_MOUSE_UP].call(t[ON_MOUSE_UP],l))};this.buttonDown=function(){d||(g.scaleX=.9*k,g.scaleY=.9*k,q[ON_MOUSE_DOWN]&&q[ON_MOUSE_DOWN].call(t[ON_MOUSE_DOWN],
l))};this.buttonOver=function(v){s_bMobile||d||(v.target.cursor="pointer")};this.getX=function(){return g.x};this.getY=function(){return g.y};this._init(a,h,b,e);return this}
function CHitArea(a,h,b,e,d,k){var l,r,f,p,q=[],t,g,v;this._init=function(z,w,E,A,c,y){l=!1;t=[];g=[];v=new createjs.Shape;v.graphics.beginFill("#000000").drawRect(E,A,z,w);v.alpha=.01;y.addChild(v);this._initListener()};this.unload=function(){s_bMobile?v.off("mousedown",r):(v.off("mousedown",r),v.off("mouseover",p));v.off("pressup",f);k.removeChild(v)};this.setClickable=function(z){l=!z;v.alpha=l?0:.01};this._initListener=function(){s_bMobile?r=v.on("mousedown",this.onDown):(r=v.on("mousedown",this.onDown),
p=v.on("mouseover",this.onOver));f=v.on("pressup",this.onRelease)};this.addEventListener=function(z,w,E){t[z]=w;g[z]=E};this.addEventListenerWithParams=function(z,w,E,A){t[z]=w;g[z]=E;q=A};this.onRelease=function(){l||t[ON_MOUSE_UP]&&t[ON_MOUSE_UP].call(g[ON_MOUSE_UP],q)};this.onDown=function(){l||t[ON_MOUSE_DOWN]&&t[ON_MOUSE_DOWN].call(g[ON_MOUSE_DOWN],q)};this.onOver=function(z){s_bMobile||l||(z.target.cursor="pointer")};this.getX=function(){return v.x};this.getY=function(){return v.y};this._init(a,
h,b,e,d,k);return this}
function CTextButton(a,h,b,e,d,k,l,r){var f,p,q,t,g,v,z,w,E,A;this._init=function(c,y,F,m,n,C,x){f=!1;p=1;q=[];t=[];A=createBitmap(F);w=new createjs.Container;w.x=c;w.y=y;w.regX=F.width/2;w.regY=F.height/2;s_bMobile||(w.cursor="pointer");w.addChild(A,E);r.addChild(w);E=new CTLText(w,10,5,F.width-20,F.height-10,x,"center",C,n,1,0,0,m,!0,!0,!1,!1);this._initListener()};this.unload=function(){w.off("mousedown",g);w.off("pressup",v);r.removeChild(w)};this.setVisible=function(c){w.visible=c};this.setAlign=
function(c){E.textAlign=c};this.setTextX=function(c){E.x=c};this.setScale=function(c){p=w.scaleX=w.scaleY=c};this.enable=function(){f=!1};this.disable=function(){f=!0};this._initListener=function(){g=w.on("mousedown",this.buttonDown);v=w.on("pressup",this.buttonRelease)};this.addEventListener=function(c,y,F){q[c]=y;t[c]=F};this.addEventListenerWithParams=function(c,y,F,m){q[c]=y;t[c]=F;z=m};this.buttonRelease=function(){f||(playSound("click",1,!1),w.scaleX=p,w.scaleY=p,q[ON_MOUSE_UP]&&q[ON_MOUSE_UP].call(t[ON_MOUSE_UP],
z))};this.buttonDown=function(){f||(w.scaleX=.9*p,w.scaleY=.9*p,q[ON_MOUSE_DOWN]&&q[ON_MOUSE_DOWN].call(t[ON_MOUSE_DOWN]))};this.setPosition=function(c,y){w.x=c;w.y=y};this.tweenPosition=function(c,y,F,m,n,C,x){createjs.Tween.get(w).wait(m).to({x:c,y:y},F,n).call(function(){void 0!==C&&C.call(x)})};this.changeText=function(c){E.refreshText(c)};this.setX=function(c){w.x=c};this.setY=function(c){w.y=c};this.getButtonImage=function(){return w};this.getX=function(){return w.x};this.getY=function(){return w.y};
this.getSprite=function(){return w};this.getScale=function(){return w.scaleX};this._init(a,h,b,e,d,k,l)}
function CMenu(){var a,h,b,e,d,k,l,r,f,p,q,t,g,v,z=null,w=null,E;this._init=function(){f=createBitmap(s_oSpriteLibrary.getSprite("bg_menu"));f.cache(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);s_oStage.addChild(f);var A=s_oSpriteLibrary.getSprite("but_play");d=CANVAS_WIDTH_HALF;k=CANVAS_HEIGHT-120;p=new CGfxButton(d,k,A,s_oStage);p.addEventListener(ON_MOUSE_UP,this._onButPlayRelease,this);p.pulseAnimation();E=new CTLText(s_oStage,CANVAS_WIDTH/2-300,CANVAS_HEIGHT_HALF+55,600,50,36,"center",PRIMARY_FONT_COLOR,
PRIMARY_FONT,1,0,0," ",!0,!0,!1,!1);if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)A=s_oSpriteLibrary.getSprite("audio_icon"),l=CANVAS_WIDTH-.5*A.height-20,r=.5*A.height+20,g=new CToggle(l,r,A,s_bAudioActive,s_oStage),g.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this);var c=s_oSpriteLibrary.getSprite("but_credits");b=.5*A.height+20;e=.5*A.height+20;q=new CGfxButton(b,e,c,s_oStage);q.addEventListener(ON_MOUSE_UP,this._onButInfoRelease,this);A=window.document;c=A.documentElement;z=c.requestFullscreen||
c.mozRequestFullScreen||c.webkitRequestFullScreen||c.msRequestFullscreen;w=A.exitFullscreen||A.mozCancelFullScreen||A.webkitExitFullscreen||A.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(z=!1);z&&screenfull.isEnabled&&(A=s_oSpriteLibrary.getSprite("but_fullscreen"),a=b+.5*A.width+10,h=e,v=new CToggle(a,h,A,s_bFullscreen,s_oStage),v.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this));t=new createjs.Shape;t.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);s_oStage.addChild(t);
createjs.Tween.get(t).to({alpha:0},1E3).call(function(){t.visible=!1});s_bFirstTime=!0;s_bStorageAvailable?(A=getItem("yachtdicegame_best_score"),s_iBestScore=null!==A&&void 0!==A?A:0,E.refreshText(TEXT_BEST_SCORE+": "+s_iBestScore)):new CMsgBox(TEXT_ERR_LS,s_oStage);this.refreshButtonPos(s_iOffsetX,s_iOffsetY)};this.refreshButtonPos=function(A,c){p.setPosition(d,k-c);q.setPosition(b+A,e+c);!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||g.setPosition(l-A,r+c);z&&screenfull.isEnabled&&v.setPosition(a+
A,h+c)};this.unload=function(){p.unload();p=null;if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)g.unload(),g=null;z&&screenfull.isEnabled&&v.unload();s_oStage.removeAllChildren();createjs.Tween.removeAllTweens();s_oMenu=null};this._onAudioToggle=function(){Howler.mute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this._onButInfoRelease=function(){new CCreditsPanel};this._onButPlayRelease=function(){this.unload();s_oMain.gotoPlayersSelection()};this._onFullscreenRelease=function(){s_bFullscreen?w.call(window.document):
z.call(window.document.documentElement);sizeHandler()};this.resetFullscreenBut=function(){z&&screenfull.isEnabled&&v.setActive(s_bFullscreen)};s_oMenu=this;this._init()}var s_oMenu=null;
function CPlayersSelection(){var a,h,b,e,d,k,l,r,f,p,q,t,g,v,z,w,E=null,A=null;this._init=function(){var c=new createjs.Shape;c.graphics.beginFill("#000000").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);c.alpha=.7;r=new createjs.Container;s_oStage.addChild(r);var y=createBitmap(s_oSpriteLibrary.getSprite("bg_players_select"));r.addChild(y);r.addChild(c);c=s_oSpriteLibrary.getSprite("msg_box");y=createBitmap(c);y.regX=.5*c.width;y.regY=.5*c.height;y.x=CANVAS_WIDTH_HALF;y.y=CANVAS_HEIGHT_HALF;r.addChild(y);
a=CANVAS_WIDTH_HALF-210;new CTLText(s_oStage,a,120,420,40,40,"center","#fff",PRIMARY_FONT,1,0,0,TEXT_SELECT_PLAYERS,!0,!0,!1,!1);y=CANVAS_HEIGHT_HALF-50;var F=CANVAS_HEIGHT_HALF+130;c=s_oSpriteLibrary.getSprite("but_1players");t=new CGfxButton(CANVAS_WIDTH_HALF-90,y,c,s_oStage);t.addEventListenerWithParams(ON_MOUSE_UP,this._onButModeRelease,this,1);c=s_oSpriteLibrary.getSprite("but_2players");g=new CGfxButton(CANVAS_WIDTH_HALF+90,y,c,s_oStage);g.addEventListenerWithParams(ON_MOUSE_UP,this._onButModeRelease,
this,2);c=s_oSpriteLibrary.getSprite("but_3players");v=new CGfxButton(CANVAS_WIDTH_HALF-90,F,c,s_oStage);v.addEventListenerWithParams(ON_MOUSE_UP,this._onButModeRelease,this,3);c=s_oSpriteLibrary.getSprite("but_4players");z=new CGfxButton(CANVAS_WIDTH_HALF+90,F,c,s_oStage);z.addEventListenerWithParams(ON_MOUSE_UP,this._onButModeRelease,this,4);c=s_oSpriteLibrary.getSprite("but_exit");e=CANVAS_WIDTH-c.width/2-10;d=c.height/2+10;q=new CGfxButton(e,d,c,s_oStage);q.addEventListener(ON_MOUSE_UP,this._onExit,
this);if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)k=q.getX()-c.width-10,l=c.height/2+10,p=new CToggle(k,l,s_oSpriteLibrary.getSprite("audio_icon"),s_bAudioActive,s_oStage),p.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this);c=window.document;y=c.documentElement;E=y.requestFullscreen||y.mozRequestFullScreen||y.webkitRequestFullScreen||y.msRequestFullscreen;A=c.exitFullscreen||c.mozCancelFullScreen||c.webkitExitFullscreen||c.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(E=!1);E&&screenfull.isEnabled&&
(c=s_oSpriteLibrary.getSprite("but_fullscreen"),h=c.width/4+10,b=c.height/2+10,w=new CToggle(h,b,c,s_bFullscreen,s_oStage),w.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this));f=new createjs.Shape;f.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);s_oStage.addChild(f);createjs.Tween.get(f).to({alpha:0},1E3).call(function(){f.visible=!1});this.refreshButtonPos(s_iOffsetX,s_iOffsetY)};this.refreshButtonPos=function(){q.setPosition(e-s_iOffsetX,d);!1!==DISABLE_SOUND_MOBILE&&
!1!==s_bMobile||p.setPosition(k-s_iOffsetX,l);E&&screenfull.isEnabled&&w.setPosition(h+s_iOffsetX,b+s_iOffsetY)};this.unload=function(){q.unload();q=null;if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)p.unload(),p=null;E&&screenfull.isEnabled&&w.unload();s_oStage.removeAllChildren();createjs.Tween.removeAllTweens();s_oPlayersSelection=null};this._onExit=function(){this.unload();s_oMain.gotoMenu()};this._onAudioToggle=function(){Howler.mute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this._onButModeRelease=
function(c){this.unload();s_iPlayersNumber=c;s_oMain.gotoGame()};this._onFullscreenRelease=function(){s_bFullscreen?A.call(window.document):E.call(window.document.documentElement);sizeHandler()};this.resetFullscreenBut=function(){E&&screenfull.isEnabled&&w.setActive(s_bFullscreen)};s_oPlayersSelection=this;this._init()}var s_oPlayersSelection=null;
function CPlayer(a,h){var b,e,d,k,l,r,f,p;this.init=function(){r=[0,0,40,-40];f=[-40,40,0,0];p=[0,180,90,270];d=a;k=[];l=[];b=new createjs.Container;q.addChild(b);this._initFrame();this._initText();this._initDices();this._initCombinations()};this._initFrame=function(){var t={images:[s_oSpriteLibrary.getSprite("player_frame"+a)],frames:{width:427,height:178},animations:{turn_off:[0,0,"turn_off"],turn_on:[1,1,"turn_on"]},framerate:0};t=new createjs.SpriteSheet(t);e=createSprite(t,0,213.5,89,427,178);
e.regX=213.5;e.regY=89;e.x=CANVAS_WIDTH_HALF+PLAYER_TEXT_POSITIONS_X[d]+r[d];e.y=CANVAS_HEIGHT_HALF+PLAYER_TEXT_POSITIONS_Y[d]+f[d];e.rotation=p[d];e.gotoAndStop("turn_off");b.addChild(e)};this._initText=function(){var t=new CTLText(b,CANVAS_WIDTH_HALF+[-120,100,-390,373][d]-75,CANVAS_HEIGHT_HALF+[168,-200,-120,100][d],170,28,28,"center","#fff",PRIMARY_FONT,1,0,0,TEXT_PLAYER+" "+(d+1),!0,!0,!1,!1);2===d?t.setRotation(90):2<d&&t.setRotation(270)};this._initDices=function(){for(var t=0;t<DICES_NUMBER;t++){var g=
new CDice(d,t,b);k.push(g)}};this._initCombinations=function(){for(var t=0;t<COMBINATIONS_NUMBER;t++)l[t]={value:DEFAULT_VALUE,completed:!1}};this.setTurn=function(t){t?e.gotoAndStop("turn_on"):e.gotoAndStop("turn_off")};this.getPlayerNumber=function(){return d};this.getDices=function(){return k};this.getCombinations=function(){return l};this.setCombinationValue=function(t,g){l[t].value=g;l[t].completed=!0};this.isTurnBlocked=function(){for(var t=!1,g=0;g<k.length;g++)!0===k[g].isAnimationOn()&&(t=
!0);return t};this.setDicesValues=function(t){if(!0!==this.isTurnBlocked())for(var g=0;g<k.length;g++)!1===k[g].isLocked()&&k[g].setValue(t[g])};this.getTotal=function(t){var g=0;switch(t){case ID_SCORE_TOP_BONUS:for(t=0;t<COMBINATION_TOP_LIMIT;t++)-1<l[t].value&&(g+=l[t].value);g=g<TOP_BONUS_LIMIT?DEFAULT_VALUE:TOP_BONUS_VALUE;break;case ID_SCORE_TOP_TOTAL:for(t=0;t<COMBINATION_TOP_LIMIT;t++)-1<l[t].value&&(g+=l[t].value);-1<this.getTotal(ID_SCORE_TOP_BONUS)&&(g+=this.getTotal(ID_SCORE_TOP_BONUS));
break;case ID_SCORE_BOTTOM_TOTAL:for(t=COMBINATION_TOP_LIMIT;t<l.length;t++)-1<l[t].value&&(g+=l[t].value)}return g};var q=h;this.init()}
function CGame(){var a,h,b,e,d,k,l,r,f,p,q,t,g,v,z,w,E,A,c,y,F;this._init=function(){this._resetVariables();$(s_oMain).trigger("start_session");p=new createjs.Container;s_oStage.addChild(p);var m=s_oSpriteLibrary.getSprite("bg_game");w=createBitmap(m);w.cache(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);p.addChild(w);t=new CScoreboard(p);this._initPlayers();this._initHandAnimation();A=new CArtificialIntelligence;g=new CInterface(p);q=new createjs.Container;p.addChild(q);this._setTurnIcons();new CHelpPanel;setVolume("soundtrack",
SOUNDTRACK_VOLUME_IN_GAME)};this._resetVariables=function(){c=[];y=[];this._resetTurnDicesValue();z=v=null;a=PLAYER_HUMAN_NUMBER;e=b=h=0;f=l=k=r=d=!1};this._resetTurnDicesValue=function(){F=[];for(var m=0;m<DICES_NUMBER;m++)F.push(0)};this._getSortedDicesValues=function(){for(var m=[],n=0;n<F.length;n++)m.push(F[n]);m.sort();return m};this._initPlayers=function(){for(var m=0;m<s_iPlayersNumber;m++){var n=new CPlayer(m,p);c.push(n)}};this._initHandAnimation=function(){var m=s_oSpriteLibrary.getSprite("hand_anim");
E=createBitmap(m);E.regX=.5*m.width;E.regY=.5*m.height;E.x=CANVAS_WIDTH_HALF-250;E.y=CANVAS_HEIGHT_HALF+170;E.rotation=-135;E.visible=!1;p.addChild(E);this._resetHandMoviment()};this._resetHandMoviment=function(){var m=this;createjs.Tween.get(E).to({x:CANVAS_WIDTH_HALF-240,y:CANVAS_HEIGHT_HALF+180},500,createjs.Ease.cubicOut).to({x:CANVAS_WIDTH_HALF-260,y:CANVAS_HEIGHT_HALF+200},500,createjs.Ease.cubicIn).call(function(){m._resetHandMoviment()})};this._setHandAnimationVisible=function(m){!0===m?(E.alpha=
0,E.visible=!0,createjs.Tween.get(E).to({alpha:HAND_ANIMATION_MAX_ALPHA},HAND_ANIMATION_FADE_SPEED,createjs.Ease.cubicOut)):(E.alpha=HAND_ANIMATION_MAX_ALPHA,createjs.Tween.get(E).to({alpha:0},.2*HAND_ANIMATION_FADE_SPEED,createjs.Ease.cubicOut).call(function(){E.visible=!1}))};this._resetMomentaryCombinations=function(){for(var m=0;m<COMBINATIONS_NUMBER;m++)y[m]=0};this._resetPlayerCombinations=function(){var m=a-1;0>m&&(m=s_iPlayersNumber-1);for(var n=c[m].getCombinations(),C=0;C<n.length;C++)t.updateCombinationValue(m,
C,n[C].value)};this._unload=function(){d=!1;null!==v&&v.unload();null!==z&&z.unload();g.unload();p.removeAllChildren();createjs.Tween.removeAllTweens();!1===s_bMobile&&(document.onkeydown=null,document.onkeyup=null)};this.onExit=function(){this._unload();$(s_oMain).trigger("show_interlevel_ad");$(s_oMain).trigger("end_session");setVolume("soundtrack",1);s_oMain.gotoMenu()};this._onExitHelp=function(){d=!0};this.pause=function(m){d=!m};this._checkIfCombinationsAreCompleted=function(){for(var m=0,n=
c[c.length-1].getCombinations(),C=0;C<n.length;C++)!0===n[C].completed&&m++;return m===COMBINATIONS_NUMBER?!0:!1};this._findWinner=function(){for(var m=c[0].getTotal(ID_SCORE_TOP_TOTAL)+c[0].getTotal(ID_SCORE_BOTTOM_TOTAL),n=0,C=1;C<c.length;C++){var x=c[C].getTotal(ID_SCORE_TOP_TOTAL)+c[C].getTotal(ID_SCORE_BOTTOM_TOTAL);x>m&&(m=x,n=C)}return n};this.isTurnBlocked=function(){return c[a].isTurnBlocked()};this._checkForGameOver=function(){if(!0===this._checkIfCombinationsAreCompleted()){d=!1;for(var m=
[],n=0;n<c.length;n++){var C=c[n].getTotal(ID_SCORE_TOP_TOTAL)+c[n].getTotal(ID_SCORE_BOTTOM_TOTAL);m.push(C)}n=this._findWinner();C=c[n].getTotal(ID_SCORE_TOP_TOTAL)+c[n].getTotal(ID_SCORE_BOTTOM_TOTAL);n===PLAYER_HUMAN_NUMBER?this._gameWin(C,m):this._gameOver(n,C,m);return!0}return!1};this._gameWin=function(m,n){var C=!1;null===v&&($(s_oMain).trigger("share_event",m),$(s_oMain).trigger("save_score",m),m>s_iBestScore&&(s_iBestScore=m,saveItem("yachtdicegame_best_score",m),C=!0),playSound("game_win",
1,!1),v=new CWinPanel(m,n,q,C),v.show())};this._gameOver=function(m,n,C){null===z&&(playSound("game_over",1,!1),z=new CLosePanel(m,n,C,q),z.show())};this.restartGame=function(){this._unload();$(s_oMain).trigger("restart_level",1);s_oMain.gotoGame()};this.isStartGame=function(){return d};this.isLaunchDone=function(){return k};this.isTurnStarted=function(){return r};this._updateTotalScores=function(){var m=c[a].getTotal(ID_SCORE_TOP_BONUS);t.updateTotalBoardTexts(a,ID_SCORE_TOP_BONUS,m);m=c[a].getTotal(ID_SCORE_TOP_TOTAL);
t.updateTotalBoardTexts(a,ID_SCORE_TOP_TOTAL,m);var n=c[a].getTotal(ID_SCORE_BOTTOM_TOTAL);t.updateTotalBoardTexts(a,ID_SCORE_BOTTOM_TOTAL,n);t.updateTotalBoardTexts(a,ID_SCORE_GRAND_TOTAL,m+n)};this.getTurn=function(){return a};this._resetPlayerDices=function(){for(var m=c[a].getDices(),n=0;n<m.length;n++)m[n].resetDice()};this._changeTurn=function(){l=k=!1;this._resetPlayerDices();a++;a===s_iPlayersNumber&&(a=0);b=h=0;this._setTurnIcons();this._resetTurnDicesValue();this._resetMomentaryCombinations();
this._resetPlayerCombinations();g.setRollButtonActive(!1);a===PLAYER_HUMAN_NUMBER&&g.setRollButtonActive(!0)};this._setNextLaunch=function(){k=!1};this._setTurnIcons=function(){for(var m=0;m<c.length;m++)c[m].setTurn(!1),m===a&&c[m].setTurn(!0)};this.hasLaunched=function(){return 0<h?!0:!1};this.onRollDices=function(){if(!0!==k&&!0!==c[a].isTurnBlocked()){playSound("rolldices",1,!1);k=r=!0;h++;for(var m=c[a].getDices(),n=0;n<F.length;n++)!1===m[n].isLocked()&&(F[n]=Math.floor(6*Math.random()));c[a].setDicesValues(F);
this._checkForNewLaunch()}};this.onAnimationsOver=function(){this._checkDiceCombinations()};this._calculateTopSectionValues=function(){for(var m=[0,0,0,0,0,0],n=0;n<F.length;n++){var C=F[n];m[C]+=DICE_VALUES[C]}return m};this._calculateThreeOfAKind=function(){var m=0,n=this._getSortedDicesValues();if(n[0]===n[2]||n[1]===n[3]||n[2]===n[4])m=3*DICE_VALUES[n[2]];return m};this._calculateFourOfAKind=function(){var m=0,n=this._getSortedDicesValues();if(n[0]===n[3]||n[1]===n[4])m=4*DICE_VALUES[n[1]];return m};
this._calculateFullHouse=function(){var m=0,n=this._getSortedDicesValues();if(n[0]===n[1]&&n[2]===n[4]||n[0]===n[2]&&n[3]===n[4])m=COMBINATION_VALUE_FULL_HOUSE;return m};this._calculateSmallStraight=function(){for(var m=0,n=this._getSortedDicesValues(),C=[[0,1,2,3],[1,2,3,4],[0,2,3,4],[0,1,3,4]],x=[[0,1,2,3],[1,2,3,4],[2,3,4,5]],P=0;P<C.length;P++)for(var Q=0;Q<x.length;Q++)n[C[P][0]]===x[Q][0]&&n[C[P][1]]===x[Q][1]&&n[C[P][2]]===x[Q][2]&&n[C[P][3]]===x[Q][3]&&(m=COMBINATION_VALUE_SMALL_STRAIGHT);
return m};this._calculateLargeStraight=function(){for(var m=0,n=this._getSortedDicesValues(),C=[[0,1,2,3,4],[1,2,3,4,5]],x=0;x<C.length;x++)n[0]===C[x][0]&&n[1]===C[x][1]&&n[2]===C[x][2]&&n[3]===C[x][3]&&n[4]===C[x][4]&&(m=COMBINATION_VALUE_LARGE_STRAIGHT);return m};this._calculateYacht=function(){var m=0,n=this._getSortedDicesValues();n[0]===n[4]&&(m=COMBINATION_VALUE_YACHT);return m};this._calculateChance=function(){for(var m=0,n=0;n<F.length;n++)m+=DICE_VALUES[F[n]];return m};this._checkDiceCombinations=
function(){var m=this._calculateTopSectionValues();this.setTopLevelValues(m);for(var n=0;n<m.length;n++)y[n]=m[n];m=c[a].getCombinations();!1===m[ID_3_OF_A_KIND].completed&&(n=this._calculateThreeOfAKind(),this._checkAndUpdateBottomSectionCombination(ID_3_OF_A_KIND,n));!1===m[ID_4_OF_A_KIND].completed&&(n=this._calculateFourOfAKind(),this._checkAndUpdateBottomSectionCombination(ID_4_OF_A_KIND,n));!1===m[ID_FULL_HOUSE].completed&&(n=this._calculateFullHouse(),this._checkAndUpdateBottomSectionCombination(ID_FULL_HOUSE,
n));!1===m[ID_SMALL_STRAIGHT].completed&&(n=this._calculateSmallStraight(),this._checkAndUpdateBottomSectionCombination(ID_SMALL_STRAIGHT,n));!1===m[ID_LARGE_STRAIGHT].completed&&(n=this._calculateLargeStraight(),this._checkAndUpdateBottomSectionCombination(ID_LARGE_STRAIGHT,n));!1===m[ID_YACHT].completed&&(n=this._calculateYacht(),this._checkAndUpdateBottomSectionCombination(ID_YACHT,n));!1===m[ID_CHANCE].completed&&(n=this._calculateChance(),this._checkAndUpdateBottomSectionCombination(ID_CHANCE,
n))};this.checkToActivateRollButton=function(){a===PLAYER_HUMAN_NUMBER&&h<DICES_LAUNCH_POSSIBILITIES&&g.setRollButtonActive(!0)};this._checkAndUpdateBottomSectionCombination=function(m,n){y[m]=n;t.updateCombinationValue(a,m,y[m])};this.setTopLevelValues=function(m){for(var n=c[a].getCombinations(),C=0;C<n.length;C++)!1===n[C].completed&&t.updateCombinationValue(a,C,m[C])};this.confirmCombinationValue=function(m){var n=y[m];c[a].setCombinationValue(m,n);t.updateCombinationValue(a,m,n);t.showConfirmation(a,
m);0===n?playSound("wrong",1,!1):playSound("correct",1,!1);this._onConfirmedSelection()};this._onConfirmedSelection=function(){f=r=!1;this._setHandAnimationVisible(!1);this._updateTotalScores();!1===this._checkForGameOver()&&this._changeTurn()};this.isEndOfTurn=function(){return l};this._onEndOfTurn=function(){l=!0;a===PLAYER_HUMAN_NUMBER&&d&&(e=0,f=!0,g.setRollButtonActive(!1))};this._checkForNewLaunch=function(){h===DICES_LAUNCH_POSSIBILITIES?this._onEndOfTurn():this._setNextLaunch()};this._CPUConfirmSelection=
function(){var m=c[a].getCombinations();m=A.checkForBestCombination(y,m);this.confirmCombinationValue(m)};this._CPULockDices=function(){if(h===DICES_LAUNCH_POSSIBILITIES)return!1;for(var m=c[a].getDices(),n=c[a].getCombinations(),C=0;C<m.length;C++)!0===m[C].isLocked()&&(m[C].setLocked(!1),m[C].setHighlightVisible(!1));return A.checkForDicesToKeep(m,n)};this._areDicesLocked=function(){for(var m=c[a].getDices(),n=0;n<m.length;n++)if(!1===m[n].isLocked())return!1;return!0};this._decideCPUAction=function(){!1===
l?!1===k?(this.onRollDices(),k=!0):!0===this._CPULockDices()&&!1===this._areDicesLocked()?this._setNextLaunch():this._CPUConfirmSelection():this._CPUConfirmSelection()};this.update=function(){!1!==d&&(f&&(e+=s_iTimeElaps,e>HAND_ANIMATION_DELAY&&(e=0,this._setHandAnimationVisible(!0),f=!1)),a!==PLAYER_HUMAN_NUMBER&&(E.alpha===HAND_ANIMATION_MAX_ALPHA&&this._setHandAnimationVisible(!1),b+=s_iTimeElaps,b>CPU_TIMER_VALUE_MAX&&(b=0,this._decideCPUAction())))};s_oGame=this;this._init()}var s_oGame;
function CInterface(a){var h,b,e,d,k,l,r,f,p,q,t,g,v,z,w=null,E,A,c,y,F,m,n,C,x=null,P=null;this._init=function(){v=new createjs.Container;Q.addChild(v);var G=s_oSpriteLibrary.getSprite("but_roll");k=CANVAS_WIDTH_HALF+280;l=CANVAS_HEIGHT-70;n=new CGfxButton(k,l,G,v);n.addEventListener(ON_MOUSE_UP,this._onRoll,this);z=new createjs.Container;v.addChild(z);G=s_oSpriteLibrary.getSprite("but_settings");h=CANVAS_WIDTH-.5*G.width-10;b=.5*G.height+10;G=s_oSpriteLibrary.getSprite("but_exit");t=h;g=b+G.height+
10;y=new CGfxButton(t,g,G,v);y.addEventListener(ON_MOUSE_UP,this._onExit,this);y.setVisible(!1);G=s_oSpriteLibrary.getSprite("but_help");e=h;d=g+G.height+10;m=new CGfxButton(e,d,G,v);m.addEventListener(ON_MOUSE_UP,function(){new CHelpPanel},this);m.setVisible(!1);p=e;q=d+G.height+10;if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)G=s_oSpriteLibrary.getSprite("audio_icon"),A=new CToggle(p,q,G,s_bAudioActive,v),A.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this),A.setVisible(!1);G=window.document;
var M=G.documentElement;x=M.requestFullscreen||M.mozRequestFullScreen||M.webkitRequestFullScreen||M.msRequestFullscreen;P=G.exitFullscreen||G.mozCancelFullScreen||G.webkitExitFullscreen||G.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(x=!1);x&&screenfull.isEnabled&&(G=s_oSpriteLibrary.getSprite("but_fullscreen"),A?(r=p,f=q+G.height+10):(r=p,f=q),F=new CToggle(r,f,G,s_bFullscreen,v),F.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this),F.setVisible(!1));G=s_oSpriteLibrary.getSprite("but_settings");
c=new CGfxButton(h,b,G,v);c.addEventListener(ON_MOUSE_UP,this.onSettings);C=!1;this.refreshButtonPos(s_iOffsetX,s_iOffsetY)};this.onSettings=function(){C?s_oInterface.closePanel():(E=new CPause(z),C=!0,y.setX(c.getX()),y.setY(c.getY()),y.setVisible(!0),m.setX(c.getX()),m.setY(c.getY()),m.setVisible(!0),A&&(A.setPosition(c.getX(),c.getY()),A.setVisible(!0),(new createjs.Tween.get(A.getButtonImage())).to({x:p-s_iOffsetX,y:q},300,createjs.Ease.cubicOut)),F&&(F.setPosition(c.getX(),c.getY()),F.setVisible(!0),
(new createjs.Tween.get(F.getButtonImage())).to({x:r-s_iOffsetX,y:f},300,createjs.Ease.cubicOut)),(new createjs.Tween.get(y.getButtonImage())).to({x:t-s_iOffsetX,y:g},300,createjs.Ease.cubicOut),(new createjs.Tween.get(m.getButtonImage())).to({x:e-s_iOffsetX,y:d},300,createjs.Ease.cubicOut))};this.closePanel=function(){E.onExit();C=!1;(new createjs.Tween.get(y.getButtonImage())).to({x:c.getX(),y:c.getY()},300,createjs.Ease.cubicIn).call(function(){y.setVisible(!1);m.setVisible(!1);A&&A.setVisible(!1);
F&&F.setVisible(!1)});(new createjs.Tween.get(m.getButtonImage())).to({x:c.getX(),y:c.getY()},300,createjs.Ease.cubicIn);A&&(new createjs.Tween.get(A.getButtonImage())).to({x:c.getX(),y:c.getY()},300,createjs.Ease.cubicIn);F&&(new createjs.Tween.get(F.getButtonImage())).to({x:c.getX(),y:c.getY()},300,createjs.Ease.cubicIn)};this.unloadPause=function(){};this.unload=function(){if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)A.unload(),A=null;y.unload();Q.removeChild(v);x&&screenfull.isEnabled&&F.unload();
s_oInterface=null};this.refreshButtonPos=function(G,M){c.setPosition(h-G,M+b);y.setPosition(t-G,M+g);m.setPosition(e-G,M+d);!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||A.setPosition(p-G,q);x&&screenfull.isEnabled&&F.setPosition(r-G,f)};this._onButHelpRelease=function(){w=new CHelpPanel};this._onButRestartRelease=function(){s_oGame.restartGame();$(s_oMain).trigger("restart_level")};this.onExitFromHelp=function(){w.unload();w=null};this._onExit=function(){new CAreYouSurePanel(s_oGame.onExit)};this._onRoll=
function(){n.setVisible(!1);s_oGame.onRollDices()};this.setRollButtonActive=function(G){n.setVisible(G)};this._onAudioToggle=function(){Howler.mute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this._onFullscreenRelease=function(){s_bFullscreen?P.call(window.document):x.call(window.document.documentElement);sizeHandler()};this.resetFullscreenBut=function(){x&&screenfull.isEnabled&&F.setActive(s_bFullscreen)};this._onRestart=function(){s_oGame.onRestart()};s_oInterface=this;var Q=a;this._init();
return this}var s_oInterface=null;
function CHelpPanel(){var a,h,b,e,d,k,l,r,f,p,q,t,g,v,z,w,E=[],A;this._init=function(){A=1;var c=s_oSpriteLibrary.getSprite("bg_help");t=createBitmap(c);t.x=CANVAS_WIDTH_HALF+5;t.y=CANVAS_HEIGHT_HALF;t.regX=.5*c.width;t.regY=.5*c.height;p=new createjs.Shape;p.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);p.alpha=.85;p.on("mousedown",function(){});g=new createjs.Container;g.addChild(p,t);s_oStage.addChild(g);this.initHelpPage1();c=CANVAS_HEIGHT_HALF+130;var y=s_oSpriteLibrary.getSprite("but_back_small");
a=CANVAS_WIDTH_HALF-y.width/2-200;h=c-5;z=new CGfxButton(a,h,y,s_oStage);z.addEventListener(ON_MOUSE_UP,this._onBack,this);y=s_oSpriteLibrary.getSprite("but_continue_small");b=CANVAS_WIDTH_HALF+y.width/2+200;e=c-5;v=new CGfxButton(b,e,y,s_oStage);v.addEventListener(ON_MOUSE_UP,this._onContinue,this);y=s_oSpriteLibrary.getSprite("but_continue");d=CANVAS_WIDTH_HALF;k=c;w=new CGfxButton(d,k,y,s_oStage);w.addEventListener(ON_MOUSE_UP,this._onExitHelp,this);q=new createjs.Shape;q.graphics.beginFill("black").drawRect(0,
0,CANVAS_WIDTH,CANVAS_HEIGHT);s_oStage.addChild(q);createjs.Tween.get(q).to({alpha:0},1E3).call(function(){q.visible=!1})};this.initHelpPage1=function(){var c=CANVAS_HEIGHT_HALF-160;l=new CTLText(g,CANVAS_WIDTH/2-250,c,500,50,32,"center",PRIMARY_FONT_COLOR,PRIMARY_FONT,1,0,0,TEXT_HELP1+DICES_LAUNCH_POSSIBILITIES+TEXT_HELP2,!0,!0,!0,!1);r=new CTLText(g,CANVAS_WIDTH/2-250,c+70,500,50,32,"center",PRIMARY_FONT_COLOR,PRIMARY_FONT,1,0,0,TEXT_HELP3,!0,!0,!0,!1);f=new CTLText(g,CANVAS_WIDTH/2-250,c+140,500,
50,32,"center",PRIMARY_FONT_COLOR,PRIMARY_FONT,1,0,0,TEXT_HELP4,!0,!0,!0,!1)};this.initNewText=function(c,y){return new CTLText(g,CANVAS_WIDTH_HALF-240,CANVAS_HEIGHT_HALF-170+32*y,500,30,18,"left",PRIMARY_FONT_COLOR,PRIMARY_FONT,1,0,0,c,!0,!0,!0,!1)};this.initHelpPage2=function(){for(var c=["- "+TEXT_COMBINATION_0+": "+TEXT_HELP_COMBINATION_0,"- "+TEXT_COMBINATION_1+": "+TEXT_HELP_COMBINATION_1,"- "+TEXT_COMBINATION_2+": "+TEXT_HELP_COMBINATION_2,"- "+TEXT_COMBINATION_3+": "+TEXT_HELP_COMBINATION_3,
"- "+TEXT_COMBINATION_4+": "+TEXT_HELP_COMBINATION_4,"- "+TEXT_COMBINATION_5+": "+TEXT_HELP_COMBINATION_5,"- "+TEXT_BONUS+": "+TEXT_HELP_TOPBONUS_1+TOP_BONUS_LIMIT+TEXT_HELP_TOPBONUS_2],y=0;y<c.length;y++){var F=this.initNewText(c[y],y);E.push(F)}};this.initHelpPage3=function(){for(var c=["- "+TEXT_COMBINATION_6+": "+TEXT_HELP_COMBINATION_6,"- "+TEXT_COMBINATION_7+": "+TEXT_HELP_COMBINATION_7,"- "+TEXT_COMBINATION_8+": "+TEXT_HELP_COMBINATION_8,"- "+TEXT_COMBINATION_9+": "+TEXT_HELP_COMBINATION_9,
"- "+TEXT_COMBINATION_10+": "+TEXT_HELP_COMBINATION_10,"- "+TEXT_COMBINATION_11+": "+TEXT_HELP_COMBINATION_11,"- "+TEXT_COMBINATION_12+": "+TEXT_HELP_COMBINATION_12],y=0;y<c.length;y++){var F=this.initNewText(c[y],y);E.push(F)}};this._onBack=function(){switch(A){case 1:A=3;this.removePage1();this.initHelpPage3();break;case 2:A=1;this.removePageTexts();this.initHelpPage1();break;case 3:A=2,this.removePageTexts(),this.initHelpPage2()}};this.removePage1=function(){l.unload();r.unload();f.unload()};this.removePageTexts=
function(){for(var c=0;c<E.length;c++)E[c].unload()};this._onContinue=function(){switch(A){case 1:A=2;this.removePage1();this.initHelpPage2();break;case 2:A=3;this.removePageTexts();this.initHelpPage3();break;case 3:A=1,this.removePageTexts(),this.initHelpPage1()}};this.unload=function(){s_oStage.removeChild(g);v.unload();z.unload();w.unload();var c=this;g.off("pressup",function(){c._onExitHelp()})};this._onExitHelp=function(){this.unload();setTimeout(s_oGame._onExitHelp,200)};this._init()}
function CLosePanel(a,h,b,e){var d,k,l,r,f,p,q,t,g;this._init=function(){t=a+1;q=h;g=b;var v=s_oSpriteLibrary.getSprite("msg_box_small");$(s_oMain).trigger("save_score",q);p=new createjs.Shape;p.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);p.alpha=0;l=new createjs.Container;l.alpha=1;l.visible=!1;d=new createjs.Container;d.y=CANVAS_HEIGHT;l.addChild(d);k=createBitmap(v);k.x=CANVAS_WIDTH_HALF;k.y=CANVAS_HEIGHT_HALF;k.regX=.5*v.width;k.regY=.5*v.height;d.addChild(k);new CTLText(d,
CANVAS_WIDTH/2-250,170,500,64,32,"center",PRIMARY_FONT_COLOR,PRIMARY_FONT,1,0,0,TEXT_LOSE_1+t+TEXT_LOSE_2,!0,!0,!0,!1);for(v=0;v<g.length;v++)new CTLText(d,CANVAS_WIDTH/2-250,CANVAS_HEIGHT_HALF-70+30*v,500,22,22,"center",PRIMARY_FONT_COLOR,PRIMARY_FONT,1,0,0,TEXT_PLAYER+" "+(1+v)+" "+TEXT_FINALSCORE+": "+g[v],!0,!0,!1,!1);new CTLText(d,CANVAS_WIDTH/2-125,CANVAS_HEIGHT_HALF+70,250,64,32,"center",PRIMARY_FONT_COLOR,PRIMARY_FONT,1,0,0,TEXT_BEST_SCORE+": "+s_iBestScore,!0,!0,!0,!1);e.addChild(p,l,d);
v=CANVAS_HEIGHT_HALF+110;var z=s_oSpriteLibrary.getSprite("but_home");r=new CGfxButton(CANVAS_WIDTH_HALF-190,v,z,d);r.addEventListener(ON_MOUSE_DOWN,this._onExit,this);z=s_oSpriteLibrary.getSprite("but_restart");f=new CGfxButton(CANVAS_WIDTH_HALF+190-10,v,z,d);f.addEventListener(ON_MOUSE_DOWN,this._onRestart,this);f.pulseAnimation()};this.unload=function(){createjs.Tween.get(d).wait(500).to({alpha:0},500,createjs.Ease.cubicOut).call(function(){e.removeChild(p);e.removeChild(d)});createjs.Tween.get(l).wait(500).to({alpha:0},
500,createjs.Ease.cubicOut).call(function(){e.removeChild(l);r.unload();r=null;p.removeAllEventListeners();f.unload();f=null})};this.show=function(){l.visible=!0;createjs.Tween.get(d).wait(WIN_PANEL_POPUP_DELAY).to({y:0},1E3,createjs.Ease.elasticOut);createjs.Tween.get(p).wait(WIN_PANEL_POPUP_DELAY).to({alpha:.8},500,createjs.Ease.cubicOut).call(function(){$(s_oMain).trigger("show_interlevel_ad")});p.on("click",function(){})};this.getContainer=function(){return l};this.bounceContainerOffScreen=function(){var v=
this;createjs.Tween.get(d).to({y:CANVAS_HEIGHT},400,createjs.Ease.backIn).call(function(){v.unload()})};this._onRestart=function(){this.bounceContainerOffScreen();createjs.Tween.get(p).to({alpha:0},500).call(function(){e.removeChild(p);s_oGame.restartGame()})};this._onExit=function(){this.bounceContainerOffScreen();createjs.Tween.get(p).to({alpha:0},500).call(function(){e.removeChild(p);s_oGame.onExit()})};this._init();return this}
function CWinPanel(a,h,b,e){var d,k,l,r,f,p,q,t;this._init=function(){d=a;t=h;var g=s_oSpriteLibrary.getSprite("msg_box_small");$(s_oMain).trigger("share_event",d);$(s_oMain).trigger("save_score",d);q=new createjs.Shape;q.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);q.alpha=0;r=new createjs.Container;r.alpha=1;r.visible=!1;k=new createjs.Container;k.y=CANVAS_HEIGHT;r.addChild(k);l=createBitmap(g);l.x=CANVAS_WIDTH_HALF;l.y=CANVAS_HEIGHT_HALF;l.regX=.5*g.width;l.regY=.5*g.height;
k.addChild(l);new CTLText(k,CANVAS_WIDTH/2-250,170,500,64,32,"center",PRIMARY_FONT_COLOR,PRIMARY_FONT,1,0,0,TEXT_WIN,!0,!0,!0,!1);for(g=0;g<t.length;g++)new CTLText(k,CANVAS_WIDTH/2-250,CANVAS_HEIGHT_HALF-70+30*g,500,22,22,"center",PRIMARY_FONT_COLOR,PRIMARY_FONT,1,0,0,TEXT_PLAYER+" "+(1+g)+" "+TEXT_FINALSCORE+": "+t[g],!0,!0,!1,!1);new CTLText(k,CANVAS_WIDTH/2-125,CANVAS_HEIGHT_HALF+70,250,64,32,"center",PRIMARY_FONT_COLOR,PRIMARY_FONT,1,0,0,TEXT_BEST_SCORE+": "+s_iBestScore,!0,!0,!0,!1);b.addChild(q,
r,k);g=CANVAS_HEIGHT_HALF+110;var v=s_oSpriteLibrary.getSprite("but_home");f=new CGfxButton(CANVAS_WIDTH_HALF-190,g,v,k);f.addEventListener(ON_MOUSE_DOWN,this._onExit,this);v=s_oSpriteLibrary.getSprite("but_restart");p=new CGfxButton(CANVAS_WIDTH_HALF+190-10,g,v,k);p.addEventListener(ON_MOUSE_DOWN,this._onTryAgain,this);p.pulseAnimation()};this.unload=function(){createjs.Tween.get(k).wait(500).to({alpha:0},500,createjs.Ease.cubicOut).call(function(){b.removeChild(k);b.removeChild(q)});createjs.Tween.get(r).wait(500).to({alpha:0},
500,createjs.Ease.cubicOut).call(function(){b.removeChild(r);f.unload();f=null;q.removeAllEventListeners();p.unload();p=null})};this.show=function(){r.visible=!0;createjs.Tween.get(k).wait(WIN_PANEL_POPUP_DELAY).to({y:0},1E3,createjs.Ease.elasticOut);createjs.Tween.get(q).wait(WIN_PANEL_POPUP_DELAY).to({alpha:.8},500,createjs.Ease.cubicOut).call(function(){$(s_oMain).trigger("show_interlevel_ad")});q.on("click",function(){})};this.bounceContainerOffScreen=function(){var g=this;createjs.Tween.get(k).to({y:CANVAS_HEIGHT},
400,createjs.Ease.backIn).call(function(){g.unload()})};this.getContainer=function(){return r};this._onTryAgain=function(){this.bounceContainerOffScreen();s_oGame.restartGame();createjs.Tween.get(q).to({alpha:0},500).call(function(){b.removeChild(q)})};this._onExit=function(){this.unload();s_oGame.onExit()};this._init();return this}
function CMsgBox(a,h){var b,e;this._init=function(l){e=new createjs.Container;k.addChild(e);l=new createjs.Shape;l.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);l.alpha=.85;l.on("click",function(){});e.addChild(l);l=s_oSpriteLibrary.getSprite("msg_box_small");var r=createBitmap(l);r.x=CANVAS_WIDTH_HALF;r.y=CANVAS_HEIGHT_HALF;r.regX=.5*l.width;r.regY=.5*l.height;e.addChild(r);new CTLText(e,CANVAS_WIDTH/2-260,CANVAS_HEIGHT_HALF-150,520,170,22,"center","#fff",PRIMARY_FONT,1,0,
0,TEXT_ERR_LS,!0,!0,!0,!1);b=new CGfxButton(CANVAS_WIDTH_HALF,CANVAS_HEIGHT_HALF+90,s_oSpriteLibrary.getSprite("but_yes"),e);b.addEventListener(ON_MOUSE_UP,this._onButOk,this)};this._onButOk=function(){d.unload()};this.unload=function(){b.unload();k.removeChild(e)};var d=this;var k=h;this._init(a)}
function CCreditsPanel(){var a,h,b,e,d,k,l,r,f,p,q,t;this._init=function(){d=new createjs.Shape;d.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);d.alpha=.7;s_oStage.addChild(d);var g=s_oSpriteLibrary.getSprite("msg_box_small");t=CANVAS_HEIGHT+.5*g.height;q=new createjs.Container;q.y=t;s_oStage.addChild(q);e=createBitmap(g);e.regX=.5*g.width;e.regY=.5*g.height;e.x=CANVAS_WIDTH_HALF;e.y=CANVAS_HEIGHT_HALF;q.addChild(e);r=new createjs.Text(TEXT_CREDITS_DEVELOPED,"42px "+PRIMARY_FONT,
PRIMARY_FONT_COLOR);r.textAlign="center";r.textBaseline="alphabetic";r.x=CANVAS_WIDTH_HALF;r.y=CANVAS_HEIGHT_HALF-70;q.addChild(r);g=s_oSpriteLibrary.getSprite("logo_ctl");k=createBitmap(g);k.regX=.5*g.width;k.regY=.5*g.height;k.x=CANVAS_WIDTH_HALF;k.y=CANVAS_HEIGHT_HALF;q.addChild(k);p=new createjs.Text(TEXT_LINK,"32px "+PRIMARY_FONT,PRIMARY_FONT_COLOR);p.textAlign="center";p.textBaseline="alphabetic";p.x=CANVAS_WIDTH_HALF;p.y=CANVAS_HEIGHT_HALF+90;q.addChild(p);f=new createjs.Shape;f.graphics.beginFill("#0f0f0f").drawRect(0,
0,CANVAS_WIDTH,CANVAS_HEIGHT);f.alpha=.01;b=f.on("click",this._onLogoButRelease);q.addChild(f);s_bMobile||(f.cursor="pointer");g=s_oSpriteLibrary.getSprite("but_exit");a=CANVAS_WIDTH_HALF+235;h=CANVAS_HEIGHT_HALF-125;l=new CGfxButton(a,h,g,q);l.addEventListener(ON_MOUSE_UP,this.unload,this);(new createjs.Tween.get(q)).to({y:0},1E3,createjs.Ease.backOut)};this.unload=function(){createjs.Tween.get(d).to({alpha:0},500);createjs.Tween.get(q).to({y:t},400,createjs.Ease.backIn).call(function(){f.off("click",
b);l.unload();l=null;s_oStage.removeChild(q,d)})};this._onLogoButRelease=function(){window.open("http://www.codethislab.com","_blank")};this._init()}
function CPause(a){var h,b,e,d;this.init=function(k){s_oGame.pause(!0);e=new createjs.Container;d=k;d.addChild(e);h=new createjs.Shape;h.graphics.beginFill("#black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);h.alpha=.85;h.on("mousedown",this.exitPause);b=new createjs.Text(TEXT_PAUSE,FONT_SIZE_PAUSE+PRIMARY_FONT,PRIMARY_FONT_COLOR);b.textBaseline="alphabetic";b.textAlign="center";b.x=CANVAS_WIDTH_HALF;b.y=CANVAS_HEIGHT_HALF+10;e.addChild(h,b);b.alpha=1};this.exitPause=function(){s_oInterface.closePanel();
s_oStage.removeChild(e);s_oGame.pause(!1)};this.onExit=function(){h.alpha=0;b.alpha=0;s_oStage.removeChild(e);s_oGame.pause(!1)};this.init(a)}
function CDice(a,h,b){var e,d,k,l,r,f,p,q,t,g;this.init=function(){r=a;f=h;t=0;g=!1;this.calculatePosition();e=new createjs.Container;v.addChild(e);this.addHighlight();this.addDiceSpritesheet();e.rotation=0;e.x=p;e.y=q;r===PLAYER_HUMAN_NUMBER&&this.initHitArea()};this.calculatePosition=function(){var z=.8*DICE_FRAME_SIZE,w=-1.9*z,E=[w,w,-440,450];w=[250,-237.5,w,w];2>r?(p=CANVAS_WIDTH_HALF+E[r]+f*z,q=CANVAS_HEIGHT_HALF+w[r]):(p=CANVAS_WIDTH_HALF+E[r],q=CANVAS_HEIGHT_HALF+w[r]+f*z)};this.addDiceSpritesheet=
function(){var z={images:[s_oSpriteLibrary.getSprite("roll"),s_oSpriteLibrary.getSprite("roll_1"),s_oSpriteLibrary.getSprite("roll_2"),s_oSpriteLibrary.getSprite("roll_3"),s_oSpriteLibrary.getSprite("roll_4"),s_oSpriteLibrary.getSprite("roll_5"),s_oSpriteLibrary.getSprite("roll_6")],frames:{width:DICE_FRAME_SIZE,height:DICE_FRAME_SIZE},animations:{empty:[0],roll:[0,9],roll_1:[10,24,"stop1"],stop1:[24],roll_2:[25,39,"stop2"],stop2:[39],roll_3:[40,54,"stop3"],stop3:[54],roll_4:[55,69,"stop4"],stop4:[69],
roll_5:[70,84,"stop5"],stop5:[84],roll_6:[85,99,"stop6"],stop6:[99]},framerate:30};z=new createjs.SpriteSheet(z);d=createSprite(z,0,.5*DICE_FRAME_SIZE,.5*DICE_FRAME_SIZE,DICE_FRAME_SIZE,DICE_FRAME_SIZE);d.regX=.5*DICE_FRAME_SIZE;d.regY=.5*DICE_FRAME_SIZE;2===r&&(d.x=8);d.alpha=0;e.addChild(d)};this.addHighlight=function(){var z=s_oSpriteLibrary.getSprite("highlight");k=createBitmap(z);k.regX=.5*z.width;k.regY=.5*z.height;k.x=[-10,-8,-4,-12][r];k.y=[-4,-8,-6,-6][r];k.visible=!1;e.addChild(k)};this.initHitArea=
function(){l=new createjs.Shape;l.graphics.beginFill("#000").drawRect(0,0,DICE_FRAME_SIZE,DICE_FRAME_SIZE);l.x=d.x;l.y=d.y;d.hitArea=l;d.on("pressup",this.onClickedDice);s_bMobile||(d.cursor="pointer")};this.onClickedDice=function(){s_oGame.getTurn()===PLAYER_HUMAN_NUMBER&&!1!==s_oGame.hasLaunched()&&!0!==s_oGame.isEndOfTurn()&&(playSound("dice",1,!1),g=g?!1:!0,k.visible=g)};this.resetDice=function(){g=!1;d.gotoAndStop("stop_"+t);d.on("animationend",function(){});k.visible=!1;createjs.Tween.get(d).wait(200).to({alpha:0},
500,createjs.Ease.cubicIn).call(function(){t=0;createjs.Tween.removeTweens(d)})};this.setHighlightVisible=function(z){k.visible=z};this.isLocked=function(){return g};this.setLocked=function(z){!1===soundPlaying("dice")&&playSound("dice",1,!1);g=z};this.getValue=function(){return t};this.isAnimationOn=function(){return"roll_1"===d.currentAnimation||"roll_2"===d.currentAnimation||"roll_3"===d.currentAnimation||"roll_4"===d.currentAnimation||"roll_5"===d.currentAnimation||"roll_6"===d.currentAnimation?
!0:!1};this.setValue=function(z){d.on("animationend",function(){});t=z;d.gotoAndPlay("roll_"+(1+t));createjs.Tween.get(d).wait(DICE_TIME_DELAY*f).to({alpha:1},200,createjs.Ease.cubicIn).call(function(){d.on("animationend",function(){s_oGame.checkToActivateRollButton();s_oGame.onAnimationsOver()})})};var v=b;this.init()}
function CScoreboard(a){var h,b,e,d,k,l;this._init=function(){h=new createjs.Container;r.addChild(h);this._addPlayerStripes();b=[];e=[];d=[];k=[];l=[];for(var f=[TEXT_COMBINATION_0,TEXT_COMBINATION_1,TEXT_COMBINATION_2,TEXT_COMBINATION_3,TEXT_COMBINATION_4,TEXT_COMBINATION_5,TEXT_BONUS,TEXT_TOTAL_TOP],p=0;p<f.length;p++)new CTLText(h,CANVAS_WIDTH_HALF+-260,CANVAS_HEIGHT_HALF+-133+30*p,130,20,20,"left","#fff",PRIMARY_FONT,1,0,0,f[p],!0,!0,!1,!1);f=[TEXT_COMBINATION_6,TEXT_COMBINATION_7,TEXT_COMBINATION_8,
TEXT_COMBINATION_9,TEXT_COMBINATION_10,TEXT_COMBINATION_11,TEXT_COMBINATION_12,TEXT_TOTAL_BOTTOM,TEXT_GRAND_TOTAL];for(p=0;p<f.length;p++)new CTLText(h,CANVAS_WIDTH_HALF+5,CANVAS_HEIGHT_HALF+-133+30*p,130,20,20,"left","#fff",PRIMARY_FONT,1,0,0,f[p],!0,!0,!1,!1);this._initPlayersScoreTexts();this._initAutomaticScoreText()};this.addStripe=function(f,p,q){var t=CANVAS_HEIGHT_HALF-4;f=s_oSpriteLibrary.getSprite(f);p=s_oSpriteLibrary.getSprite(p);var g=createBitmap(f),v=createBitmap(p);g.regX=.5*f.width;
g.regY=.5*f.height+15;v.regX=.5*p.width;v.regY=.5*p.height;g.x=CANVAS_WIDTH_HALF-105+30*q;v.x=CANVAS_WIDTH_HALF+155+30*q;g.y=v.y=t;h.addChild(g,v)};this._addPlayerStripes=function(){1<s_iPlayersNumber&&this.addStripe("player_stripes1a","player_stripes1b",1);2<s_iPlayersNumber&&this.addStripe("player_stripes2a","player_stripes2b",2);3<s_iPlayersNumber&&this.addStripe("player_stripes3a","player_stripes3b",3)};this._addHumanPlayerConfirmation=function(f,p,q,t){var g=new CHitArea(HIT_AREA_WIDTH,HIT_AREA_HEIGHT,
f-155,p-18,q,t);g.addEventListenerWithParams(ON_MOUSE_UP,this._onConfirmationButtonClick,this,q);l.push(g);f=new CConfirmationButton(f,p,q,t);f.addEventListenerWithParams(ON_MOUSE_UP,this._onConfirmationButtonClick,this,q);k.push(f)};this._onConfirmationButtonClick=function(f){s_oGame.getTurn()===PLAYER_HUMAN_NUMBER&&!0!==s_oGame.isTurnBlocked()&&!1!==s_oGame.isTurnStarted()&&(playSound("select",1,0),s_oGame.confirmCombinationValue(f),this.lockConfirmationButton(f,!1))};this.lockConfirmationButton=
function(f,p){k[f].setClickable(p);k[f].setVisible(p);l[f].setClickable(p)};this._initPlayersScoreTexts=function(){for(var f=0;f<s_iPlayersNumber;f++){for(var p=[],q=[],t=0;t<COMBINATIONS_NUMBER;t++){var g=CANVAS_WIDTH_HALF+(156+30*f);t<COMBINATION_TOP_LIMIT&&(g=CANVAS_WIDTH_HALF+(-105+30*f));var v=CANVAS_HEIGHT_HALF+PLAYER_SCORE_TEXTS_POSITION_Y[t];f===PLAYER_HUMAN_NUMBER&&this._addHumanPlayerConfirmation(g,v,t,h);var z=this.createScoreSprite(g,v);g=this.createScoreBoardText(" ",g,v);p.push(g);q.push(z)}e.push(p);
b.push(q)}};this.createScoreSprite=function(f,p){var q=s_oSpriteLibrary.getSprite("score_confirm"),t=createBitmap(q);t.regX=.5*q.width;t.regY=.5*q.height;t.x=f;t.y=p;t.alpha=0;h.addChild(t);return t};this._initAutomaticScoreText=function(){for(var f=0;f<s_iPlayersNumber;f++){for(var p=[],q=0;4>q;q++){var t=CANVAS_WIDTH_HALF+(156+30*f);2>q&&(t=CANVAS_WIDTH_HALF+(-105+30*f));t=this.createScoreBoardText(" ",t,CANVAS_HEIGHT_HALF+PLAYER_TOTALS_TEXTS_POSITION_Y[q]);p.push(t)}d.push(p)}};this.createScoreBoardText=
function(f,p,q){f=new createjs.Text(f,FONT_SIZE_SCOREBOARD+PRIMARY_FONT,PRIMARY_FONT_COLOR);f.x=p;f.y=q;f.textAlign="center";f.textBaseline="middle";h.addChild(f);return f};this.updateTotalBoardTexts=function(f,p,q){d[f][p].text=q};this.updateCombinationValue=function(f,p,q){e[f][p].text=q};this.showConfirmation=function(f,p){var q=b[f][p];createjs.Tween.get(q,{loop:!1}).to({alpha:1},200,createjs.Ease.cubicOut).to({alpha:0},500,createjs.Ease.cubicOut).call(function(){createjs.Tween.removeTweens(q)})};
var r=a;this._init()}
function CArtificialIntelligence(){var a,h;this.checkForDicesToKeep=function(b,e){a=[];h=e;for(var d=0;d<b.length;d++)a.push(b[d]);a.sort(this.compareValue);d=!1;!1===d&&!1===h[ID_YACHT].completed&&(d=this._checkForYacht());!1===d&&(d=this._checkForStraight());!1===d&&!1===h[ID_FULL_HOUSE].completed&&(d=this._checkForFullHouse());!1===d&&(d=this._checkForFourOfAKind());!1===d&&(d=this._checkForThreeOfAKind());!1===d&&(d=this._checkForDoublePairs());!1===d&&(d=this._checkForPairs());!1===d&&(d=this._checkForBestDices());
return d};this._lockDice=function(b){a[b].setLocked(!0);a[b].setHighlightVisible(!0)};this._lockAllDices=function(){this._lockDice(0);this._lockDice(1);this._lockDice(2);this._lockDice(3);this._lockDice(4)};this._lockDices=function(b){for(var e=0;e<b.length;e++)this._lockDice(b[e])};this._checkForStraight=function(){if(!1===h[ID_LARGE_STRAIGHT].completed)for(var b=[[0,1,2,3,4],[1,2,3,4,5]],e=0;e<b.length;e++)if(a[0].getValue()===b[e][0]&&a[1].getValue()===b[e][1]&&a[2].getValue()===b[e][2]&&a[3].getValue()===
b[e][3]&&a[4].getValue()===b[e][4])return this._lockAllDices(),!0;if(!1===h[ID_SMALL_STRAIGHT].completed){var d=[[0,1,2,3],[1,2,3,4],[0,2,3,4],[0,1,3,4]];b=[[0,1,2,3],[1,2,3,4],[2,3,4,5]];for(e=0;e<d.length;e++)for(var k=0;k<b.length;k++)if(a[d[e][0]].getValue()===b[k][0]&&a[d[e][1]].getValue()===b[k][1]&&a[d[e][2]].getValue()===b[k][2]&&a[d[e][3]].getValue()===b[k][3])return this._lockDices(d[e]),!0}return!1};this._checkForFullHouse=function(){var b=!1;a[0].getValue()===a[2].getValue()&&a[0].getValue()!==
a[3].getValue()&&a[3].getValue()===a[4].getValue()?b=!0:a[0].getValue()===a[1].getValue()&&a[0].getValue()!==a[2].getValue()&&a[2].getValue()===a[4].getValue()&&(b=!0);!0===b&&this._lockAllDices();return b};this._checkForBestDices=function(){for(var b=!1,e=0;e<a.length;e++)if(a[e].getValue()===DICE_VALUES[5]||a[e].getValue()===DICE_VALUES[4])b=!0,this._lockDice(e);return b};this._checkForYacht=function(){var b=!1;a[0].getValue()===a[4].getValue()&&(this._lockAllDices(),b=!0);return b};this._checkForFourOfAKind=
function(){var b=!1;a[0].getValue()===a[3].getValue()?(b=[0,1,2,3],this._lockDices(b),b=!0):a[1].getValue()===a[4].getValue()&&(b=[1,2,3,4],this._lockDices(b),b=!0);return b};this._checkForDoublePairs=function(){var b=!1;a[0].getValue()===a[1].getValue()&&a[2].getValue()===a[3].getValue()?(b=[0,1,2,3],this._lockDices(b),b=!0):a[0].getValue()===a[1].getValue()&&a[3].getValue()===a[4].getValue()?(b=[0,1,3,4],this._lockDices(b),b=!0):a[1].getValue()===a[2].getValue()&&a[3].getValue()===a[4].getValue()&&
(b=[1,2,3,4],this._lockDices(b),b=!0);return b};this._checkForPairs=function(){var b=!1;a[0].getValue()===a[1].getValue()?(this._lockDice(0),this._lockDice(1),b=!0):a[1].getValue()===a[2].getValue()?(this._lockDice(1),this._lockDice(2),b=!0):a[2].getValue()===a[3].getValue()?(this._lockDice(2),this._lockDice(3),b=!0):a[3].getValue()===a[4].getValue()&&(this._lockDice(3),this._lockDice(4),b=!0);return b};this._checkForThreeOfAKind=function(){var b=!1;a[0].getValue()===a[2].getValue()?(b=[0,1,2],this._lockDices(b),
b=!0):a[1].getValue()===a[3].getValue()?(b=[1,2,3],this._lockDices(b),b=!0):a[2].getValue()===a[4].getValue()&&(b=[2,3,4],this._lockDices(b),b=!0);return b};this.checkForBestCombination=function(b,e){for(var d=0,k=b[0],l=1;l<ID_CHANCE;l++)if(!1===e[l].completed){if(l<COMBINATION_TOP_LIMIT&&e[l].value===DICE_VALUES[l])break;b[l]>k&&b[l]!==l+1&&(d=l,k=b[l])}if(0<k&&!1===e[d].completed)return d;if(!1===e[ID_CHANCE].completed)d=ID_CHANCE;else for(l=0;l<ID_CHANCE;l++)!1===e[l].completed&&(d=l);return d};
this.compareValue=function(b,e){return b.getValue()<e.getValue()?-1:b.getValue()>e.getValue()?1:0}}
function CAreYouSurePanel(){var a,h,b,e,d;this._init=function(){e=new createjs.Shape;e.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);e.alpha=.85;e.on("mousedown",function(){});s_oStage.addChild(e);(new createjs.Tween.get(e)).to({alpha:.7},500);d=new createjs.Container;s_oStage.addChild(d);var l=s_oSpriteLibrary.getSprite("msg_box_small"),r=createBitmap(l);r.regX=.5*l.width;r.regY=.5*l.height;r.x=CANVAS_WIDTH_HALF;r.y=CANVAS_HEIGHT_HALF;d.addChild(r);d.y=CANVAS_HEIGHT+.5*l.height;
a=d.y;(new createjs.Tween.get(d)).to({y:0},1E3,createjs.Ease.backOut);new CTLText(d,CANVAS_WIDTH/2-250,CANVAS_HEIGHT_HALF-140,500,120,32,"center",PRIMARY_FONT_COLOR,PRIMARY_FONT,1,0,0,TEXT_ARE_SURE,!0,!0,!0,!1);l=CANVAS_HEIGHT_HALF+110;h=new CGfxButton(CANVAS_WIDTH_HALF+180-10,l,s_oSpriteLibrary.getSprite("but_yes"),d);h.addEventListener(ON_MOUSE_UP,this._onButYes,this);b=new CGfxButton(CANVAS_WIDTH_HALF-180,l,s_oSpriteLibrary.getSprite("but_no"),d);b.addEventListener(ON_MOUSE_UP,this._onButNo,this);
s_oGame.pause(!0)};this._onButYes=function(){(new createjs.Tween.get(e)).to({alpha:0},500);(new createjs.Tween.get(d)).to({y:a},400,createjs.Ease.backIn).call(function(){k.unload();s_oGame.onExit()})};this._onButNo=function(){s_oInterface.closePanel();(new createjs.Tween.get(e)).to({alpha:0},500);(new createjs.Tween.get(d)).to({y:a},400,createjs.Ease.backIn).call(function(){k.unload()});s_oGame.pause(!1)};this.unload=function(){b.unload();h.unload();s_oStage.removeChild(e);s_oStage.removeChild(d);
e.off("mousedown",function(){})};var k=this;this._init()}
CTLText.prototype={constructor:CTLText,__autofit:function(){if(this._bFitText){for(var a=this._iFontSize;(this._oText.getBounds().height>this._iHeight-2*this._iPaddingV||this._oText.getBounds().width>this._iWidth-2*this._iPaddingH)&&!(a--,this._oText.font=a+"px "+this._szFont,this._oText.lineHeight=Math.round(a*this._fLineHeightFactor),this.__updateY(),this.__verticalAlign(),8>a););this._iFontSize=a}},__verticalAlign:function(){if(this._bVerticalAlign){var a=this._oText.getBounds().height;this._oText.y-=
(a-this._iHeight)/2+this._iPaddingV}},__updateY:function(){this._oText.y=this._y+this._iPaddingV;switch(this._oText.textBaseline){case "middle":this._oText.y+=this._oText.lineHeight/2+(this._iFontSize*this._fLineHeightFactor-this._iFontSize)}},__createText:function(a){this._bDebug&&(this._oDebugShape=new createjs.Shape,this._oDebugShape.graphics.beginFill("rgba(255,0,0,0.5)").drawRect(this._x,this._y,this._iWidth,this._iHeight),this._oContainer.addChild(this._oDebugShape));this._oText=new createjs.Text(a,
this._iFontSize+"px "+this._szFont,this._szColor);this._oText.textBaseline="middle";this._oText.lineHeight=Math.round(this._iFontSize*this._fLineHeightFactor);this._oText.textAlign=this._szAlign;this._oText.lineWidth=this._bMultiline?this._iWidth-2*this._iPaddingH:null;switch(this._szAlign){case "center":this._oText.x=this._x+this._iWidth/2;break;case "left":this._oText.x=this._x+this._iPaddingH;break;case "right":this._oText.x=this._x+this._iWidth-this._iPaddingH}this._oContainer.addChild(this._oText);
this.refreshText(a)},unload:function(){this._oContainer.removeChild(this._oText);this._bDebug&&this._oContainer.removeChild(this._oDebugShape)},setVerticalAlign:function(a){this._bVerticalAlign=a},setRotation:function(a){this._oText.rotation=a},setOutline:function(a){null!==this._oText&&(this._oText.outline=a)},setShadow:function(a,h,b,e){null!==this._oText&&(this._oText.shadow=new createjs.Shadow(a,h,b,e))},setColor:function(a){this._oText.color=a},setAlpha:function(a){this._oText.alpha=a},removeTweens:function(){createjs.Tween.removeTweens(this._oText)},
getText:function(){return this._oText},getY:function(){return this._y},getFontSize:function(){return this._iFontSize},refreshText:function(a){""===a&&(a=" ");null===this._oText&&this.__createText(a);this._oText.text=a;this._oText.font=this._iFontSize+"px "+this._szFont;this._oText.lineHeight=Math.round(this._iFontSize*this._fLineHeightFactor);this.__autofit();this.__updateY();this.__verticalAlign()}};
function CTLText(a,h,b,e,d,k,l,r,f,p,q,t,g,v,z,w,E){this._oContainer=a;this._x=h;this._y=b;this._iWidth=e;this._iHeight=d;this._bMultiline=w;this._iFontSize=k;this._szAlign=l;this._szColor=r;this._szFont=f;this._iPaddingH=q;this._iPaddingV=t;this._bVerticalAlign=z;this._bFitText=v;this._bDebug=E;this._oDebugShape=null;this._fLineHeightFactor=p;this._oText=null;g&&this.__createText(g)};