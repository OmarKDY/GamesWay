/*
 Platform.js <https://mths.be/platform>
 Copyright 2014-2018 Benjamin Tan <https://bnjmnt4n.now.sh/>
 Copyright 2011-2013 John-David Dalton
 Available under MIT license <https://mths.be/mit>
*/
(function(){var a="undefined"!==typeof window&&"undefined"!==typeof window.document?window.document:{},d="undefined"!==typeof module&&module.exports,b=function(){for(var k,h=["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror".split(" "),"webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror".split(" "),"webkitRequestFullScreen webkitCancelFullScreen webkitCurrentFullScreenElement webkitCancelFullScreen webkitfullscreenchange webkitfullscreenerror".split(" "),
"mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror".split(" "),"msRequestFullscreen msExitFullscreen msFullscreenElement msFullscreenEnabled MSFullscreenChange MSFullscreenError".split(" ")],g=0,m=h.length,p={};g<m;g++)if((k=h[g])&&k[1]in a){for(g=0;g<k.length;g++)p[h[0][g]]=k[g];return p}return!1}(),e={change:b.fullscreenchange,error:b.fullscreenerror},f={request:function(k){return new Promise(function(h,g){var m=function(){this.off("change",
m);h()}.bind(this);this.on("change",m);k=k||a.documentElement;Promise.resolve(k[b.requestFullscreen]())["catch"](g)}.bind(this))},exit:function(){return new Promise(function(k,h){if(this.isFullscreen){var g=function(){this.off("change",g);k()}.bind(this);this.on("change",g);Promise.resolve(a[b.exitFullscreen]())["catch"](h)}else k()}.bind(this))},toggle:function(k){return this.isFullscreen?this.exit():this.request(k)},onchange:function(k){this.on("change",k)},onerror:function(k){this.on("error",k)},
on:function(k,h){var g=e[k];g&&a.addEventListener(g,h,!1)},off:function(k,h){var g=e[k];g&&a.removeEventListener(g,h,!1)},raw:b};b?(Object.defineProperties(f,{isFullscreen:{get:function(){return!!a[b.fullscreenElement]}},element:{enumerable:!0,get:function(){return a[b.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return!!a[b.fullscreenEnabled]}}}),d?module.exports=f:window.screenfull=f):d?module.exports={isEnabled:!1}:window.screenfull={isEnabled:!1}})();
(function(){function a(q){q=String(q);return q.charAt(0).toUpperCase()+q.slice(1)}function d(q,J){var I=-1,B=q?q.length:0;if("number"==typeof B&&-1<B&&B<=y)for(;++I<B;)J(q[I],I,q);else e(q,J)}function b(q){q=String(q).replace(/^ +| +$/g,"");return/^(?:webOS|i(?:OS|P))/.test(q)?q:a(q)}function e(q,J){for(var I in q)u.call(q,I)&&J(q[I],I,q)}function f(q){return null==q?a(q):z.call(q).slice(8,-1)}function k(q,J){var I=null!=q?typeof q[J]:"number";return!/^(?:boolean|number|string|undefined)$/.test(I)&&
("object"==I?!!q[J]:!0)}function h(q){return String(q).replace(/([ -])(?!$)/g,"$1?")}function g(q,J){var I=null;d(q,function(B,C){I=J(I,B,C,q)});return I}function m(q){function J(L){return g(L,function(K,v){var E=v.pattern||h(v);!K&&(K=RegExp("\\b"+E+" *\\d+[.\\w_]*","i").exec(q)||RegExp("\\b"+E+" *\\w+-[\\w]*","i").exec(q)||RegExp("\\b"+E+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(q))&&((K=String(v.label&&!RegExp(E,"i").test(v.label)?v.label:K).split("/"))[1]&&!/[\d.]+/.test(K[0])&&(K[0]+=
" "+K[1]),v=v.label||v,K=b(K[0].replace(RegExp(E,"i"),v).replace(RegExp("; *(?:"+v+"[_-])?","i")," ").replace(RegExp("("+v+")[-_.]?(\\w)","i"),"$1 $2")));return K})}function I(L){return g(L,function(K,v){return K||(RegExp(v+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(q)||0)[1]||null})}var B=r,C=q&&"object"==typeof q&&"String"!=f(q);C&&(B=q,q=null);var N=B.navigator||{},A=N.userAgent||"";q||(q=A);var Z=C?!!N.likeChrome:/\bChrome\b/.test(q)&&!/internal|\n/i.test(z.toString()),
U=C?"Object":"ScriptBridgingProxyObject",Q=C?"Object":"Environment",P=C&&B.java?"JavaPackage":f(B.java),V=C?"Object":"RuntimeObject";Q=(P=/\bJava/.test(P)&&B.java)&&f(B.environment)==Q;var M=P?"a":"\u03b1",ba=P?"b":"\u03b2",aa=B.document||{},S=B.operamini||B.opera,W=t.test(W=C&&S?S["[[Class]]"]:f(S))?W:S=null,n,R=q;C=[];var X=null,T=q==A;A=T&&S&&"function"==typeof S.version&&S.version();var F=function(L){return g(L,function(K,v){return K||RegExp("\\b"+(v.pattern||h(v))+"\\b","i").exec(q)&&(v.label||
v)})}([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),w=function(L){return g(L,function(K,v){return K||RegExp("\\b"+(v.pattern||h(v))+"\\b","i").exec(q)&&(v.label||v)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser",
"PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},
{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),G=J([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad",
"iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),O=function(L){return g(L,function(K,v,E){return K||(v[G]||v[/^[a-z]+(?: +[a-z]+\b)*/i.exec(G)]||RegExp("\\b"+h(E)+"(?:\\b|\\w*\\d)","i").exec(q))&&E})}({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},
"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}}),x=function(L){return g(L,function(K,v){var E=v.pattern||h(v);if(!K&&(K=RegExp("\\b"+E+"(?:/[\\d.]+|[ \\w.]*)","i").exec(q))){var H=K,ca=v.label||v,da={"10.0":"10","6.4":"10 Technical Preview",
"6.3":"8.1","6.2":"8","6.1":"Server 2008 R2 / 7","6.0":"Server 2008 / Vista","5.2":"Server 2003 / XP 64-bit","5.1":"XP","5.01":"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};E&&ca&&/^Win/i.test(H)&&!/^Windows Phone /i.test(H)&&(da=da[/[\d.]+$/.exec(H)])&&(H="Windows "+da);H=String(H);E&&ca&&(H=H.replace(RegExp(E,"i"),ca));K=H=b(H.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,
"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}return K})}(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X",
"Macintosh","Mac","Windows 98;","Windows "]);F&&(F=[F]);O&&!G&&(G=J([O]));if(n=/\bGoogle TV\b/.exec(G))G=n[0];/\bSimulator\b/i.test(q)&&(G=(G?G+" ":"")+"Simulator");"Opera Mini"==w&&/\bOPiOS\b/.test(q)&&C.push("running in Turbo/Uncompressed mode");"IE"==w&&/\blike iPhone OS\b/.test(q)?(n=m(q.replace(/like iPhone OS/,"")),O=n.manufacturer,G=n.product):/^iP/.test(G)?(w||(w="Safari"),x="iOS"+((n=/ OS ([\d_]+)/i.exec(q))?" "+n[1].replace(/_/g,"."):"")):"Konqueror"!=w||/buntu/i.test(x)?O&&"Google"!=O&&
(/Chrome/.test(w)&&!/\bMobile Safari\b/i.test(q)||/\bVita\b/.test(G))||/\bAndroid\b/.test(x)&&/^Chrome/.test(w)&&/\bVersion\//i.test(q)?(w="Android Browser",x=/\bAndroid\b/.test(x)?x:"Android"):"Silk"==w?(/\bMobi/i.test(q)||(x="Android",C.unshift("desktop mode")),/Accelerated *= *true/i.test(q)&&C.unshift("accelerated")):"PaleMoon"==w&&(n=/\bFirefox\/([\d.]+)\b/.exec(q))?C.push("identifying as Firefox "+n[1]):"Firefox"==w&&(n=/\b(Mobile|Tablet|TV)\b/i.exec(q))?(x||(x="Firefox OS"),G||(G=n[1])):!w||
(n=!/\bMinefield\b/i.test(q)&&/\b(?:Firefox|Safari)\b/.exec(w))?(w&&!G&&/[\/,]|^[^(]+?\)/.test(q.slice(q.indexOf(n+"/")+8))&&(w=null),(n=G||O||x)&&(G||O||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(x))&&(w=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(x)?x:n)+" Browser")):"Electron"==w&&(n=(/\bChrome\/([\d.]+)\b/.exec(q)||0)[1])&&C.push("Chromium "+n):x="Kubuntu";A||(A=I(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",h(w),
"(?:Firefox|Minefield|NetFront)"]));if(n="iCab"==F&&3<parseFloat(A)&&"WebKit"||/\bOpera\b/.test(w)&&(/\bOPR\b/.test(q)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(q)&&!/^(?:Trident|EdgeHTML)$/.test(F)&&"WebKit"||!F&&/\bMSIE\b/i.test(q)&&("Mac OS"==x?"Tasman":"Trident")||"WebKit"==F&&/\bPlayStation\b(?! Vita\b)/i.test(w)&&"NetFront")F=[n];"IE"==w&&(n=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(q)||0)[1])?(w+=" Mobile",x="Windows Phone "+(/\+$/.test(n)?n:n+".x"),C.unshift("desktop mode")):/\bWPDesktop\b/i.test(q)?
(w="IE Mobile",x="Windows Phone 8.x",C.unshift("desktop mode"),A||(A=(/\brv:([\d.]+)/.exec(q)||0)[1])):"IE"!=w&&"Trident"==F&&(n=/\brv:([\d.]+)/.exec(q))&&(w&&C.push("identifying as "+w+(A?" "+A:"")),w="IE",A=n[1]);if(T){if(k(B,"global"))if(P&&(n=P.lang.System,R=n.getProperty("os.arch"),x=x||n.getProperty("os.name")+" "+n.getProperty("os.version")),Q){try{A=B.require("ringo/engine").version.join("."),w="RingoJS"}catch(L){(n=B.system)&&n.global.system==B.system&&(w="Narwhal",x||(x=n[0].os||null))}w||
(w="Rhino")}else"object"==typeof B.process&&!B.process.browser&&(n=B.process)&&("object"==typeof n.versions&&("string"==typeof n.versions.electron?(C.push("Node "+n.versions.node),w="Electron",A=n.versions.electron):"string"==typeof n.versions.nw&&(C.push("Chromium "+A,"Node "+n.versions.node),w="NW.js",A=n.versions.nw)),w||(w="Node.js",R=n.arch,x=n.platform,A=(A=/[\d.]+/.exec(n.version))?A[0]:null));else f(n=B.runtime)==U?(w="Adobe AIR",x=n.flash.system.Capabilities.os):f(n=B.phantom)==V?(w="PhantomJS",
A=(n=n.version||null)&&n.major+"."+n.minor+"."+n.patch):"number"==typeof aa.documentMode&&(n=/\bTrident\/(\d+)/i.exec(q))?(A=[A,aa.documentMode],(n=+n[1]+4)!=A[1]&&(C.push("IE "+A[1]+" mode"),F&&(F[1]=""),A[1]=n),A="IE"==w?String(A[1].toFixed(1)):A[0]):"number"==typeof aa.documentMode&&/^(?:Chrome|Firefox)\b/.test(w)&&(C.push("masking as "+w+" "+A),w="IE",A="11.0",F=["Trident"],x="Windows");x=x&&b(x)}A&&(n=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(A)||/(?:alpha|beta)(?: ?\d)?/i.exec(q+";"+(T&&
N.appMinorVersion))||/\bMinefield\b/i.test(q)&&"a")&&(X=/b/i.test(n)?"beta":"alpha",A=A.replace(RegExp(n+"\\+?$"),"")+("beta"==X?ba:M)+(/\d+\+?/.exec(n)||""));if("Fennec"==w||"Firefox"==w&&/\b(?:Android|Firefox OS)\b/.test(x))w="Firefox Mobile";else if("Maxthon"==w&&A)A=A.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(G))"Xbox 360"==G&&(x=null),"Xbox 360"==G&&/\bIEMobile\b/.test(q)&&C.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(w)&&(!w||G||/Browser|Mobi/.test(w))||"Windows CE"!=
x&&!/Mobi/i.test(q))if("IE"==w&&T)try{null===B.external&&C.unshift("platform preview")}catch(L){C.unshift("embedded")}else(/\bBlackBerry\b/.test(G)||/\bBB10\b/.test(q))&&(n=(RegExp(G.replace(/ +/g," *")+"/([.\\d]+)","i").exec(q)||0)[1]||A)?(n=[n,/BB10/.test(q)],x=(n[1]?(G=null,O="BlackBerry"):"Device Software")+" "+n[0],A=null):this!=e&&"Wii"!=G&&(T&&S||/Opera/.test(w)&&/\b(?:MSIE|Firefox)\b/i.test(q)||"Firefox"==w&&/\bOS X (?:\d+\.){2,}/.test(x)||"IE"==w&&(x&&!/^Win/.test(x)&&5.5<A||/\bWindows XP\b/.test(x)&&
8<A||8==A&&!/\bTrident\b/.test(q)))&&!t.test(n=m.call(e,q.replace(t,"")+";"))&&n.name&&(n="ing as "+n.name+((n=n.version)?" "+n:""),t.test(w)?(/\bIE\b/.test(n)&&"Mac OS"==x&&(x=null),n="identify"+n):(n="mask"+n,w=W?b(W.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(n)&&(x=null),T||(A=null)),F=["Presto"],C.push(n));else w+=" Mobile";if(n=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(q)||0)[1]){n=[parseFloat(n.replace(/\.(\d)$/,".0$1")),n];if("Safari"==w&&"+"==n[1].slice(-1))w="WebKit Nightly",X="alpha",
A=n[1].slice(0,-1);else if(A==n[1]||A==(n[2]=(/\bSafari\/([\d.]+\+?)/i.exec(q)||0)[1]))A=null;n[1]=(/\bChrome\/([\d.]+)/i.exec(q)||0)[1];537.36==n[0]&&537.36==n[2]&&28<=parseFloat(n[1])&&"WebKit"==F&&(F=["Blink"]);T&&(Z||n[1])?(F&&(F[1]="like Chrome"),n=n[1]||(n=n[0],530>n?1:532>n?2:532.05>n?3:533>n?4:534.03>n?5:534.07>n?6:534.1>n?7:534.13>n?8:534.16>n?9:534.24>n?10:534.3>n?11:535.01>n?12:535.02>n?"13+":535.07>n?15:535.11>n?16:535.19>n?17:536.05>n?18:536.1>n?19:537.01>n?20:537.11>n?"21+":537.13>n?
23:537.18>n?24:537.24>n?25:537.36>n?26:"Blink"!=F?"27":"28")):(F&&(F[1]="like Safari"),n=(n=n[0],400>n?1:500>n?2:526>n?3:533>n?4:534>n?"4+":535>n?5:537>n?6:538>n?7:601>n?8:"8"));F&&(F[1]+=" "+(n+="number"==typeof n?".x":/[.+]/.test(n)?"":"+"));"Safari"==w&&(!A||45<parseInt(A))&&(A=n)}"Opera"==w&&(n=/\bzbov|zvav$/.exec(x))?(w+=" ",C.unshift("desktop mode"),"zvav"==n?(w+="Mini",A=null):w+="Mobile",x=x.replace(RegExp(" *"+n+"$"),"")):"Safari"==w&&/\bChrome\b/.exec(F&&F[1])&&(C.unshift("desktop mode"),
w="Chrome Mobile",A=null,/\bOS X\b/.test(x)?(O="Apple",x="iOS 4.3+"):x=null);A&&0==A.indexOf(n=/[\d.]+$/.exec(x))&&-1<q.indexOf("/"+n+"-")&&(x=String(x.replace(n,"")).replace(/^ +| +$/g,""));F&&!/\b(?:Avant|Nook)\b/.test(w)&&(/Browser|Lunascape|Maxthon/.test(w)||"Safari"!=w&&/^iOS/.test(x)&&/\bSafari\b/.test(F[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(w)&&F[1])&&(n=F[F.length-1])&&C.push(n);C.length&&(C=["("+C.join("; ")+")"]);O&&G&&0>G.indexOf(O)&&
C.push("on "+O);G&&C.push((/^on /.test(C[C.length-1])?"":"on ")+G);if(x){var Y=(n=/ ([\d.+]+)$/.exec(x))&&"/"==x.charAt(x.length-n[0].length-1);x={architecture:32,family:n&&!Y?x.replace(n[0],""):x,version:n?n[1]:null,toString:function(){var L=this.version;return this.family+(L&&!Y?" "+L:"")+(64==this.architecture?" 64-bit":"")}}}(n=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(R))&&!/\bi686\b/i.test(R)?(x&&(x.architecture=64,x.family=x.family.replace(RegExp(" *"+n),"")),w&&(/\bWOW64\b/i.test(q)||T&&/\w(?:86|32)$/.test(N.cpuClass||
N.platform)&&!/\bWin64; x64\b/i.test(q))&&C.unshift("32-bit")):x&&/^OS X/.test(x.family)&&"Chrome"==w&&39<=parseFloat(A)&&(x.architecture=64);q||(q=null);B={};B.description=q;B.layout=F&&F[0];B.manufacturer=O;B.name=w;B.prerelease=X;B.product=G;B.ua=q;B.version=w&&A;B.os=x||{architecture:null,family:null,version:null,toString:function(){return"null"}};B.parse=m;B.toString=function(){return this.description||""};B.version&&C.unshift(A);B.name&&C.unshift(w);x&&w&&(x!=String(x).split(" ")[0]||x!=w.split(" ")[0]&&
!G)&&C.push(G?"("+x+")":"on "+x);C.length&&(B.description=C.join(" "));return B}var p={"function":!0,object:!0},r=p[typeof window]&&window||this,c=p[typeof exports]&&exports;p=p[typeof module]&&module&&!module.nodeType&&module;var l=c&&p&&"object"==typeof global&&global;!l||l.global!==l&&l.window!==l&&l.self!==l||(r=l);var y=Math.pow(2,53)-1,t=/\bOpera/;l=Object.prototype;var u=l.hasOwnProperty,z=l.toString,D=m();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(r.platform=D,define(function(){return D})):
c&&p?e(D,function(q,J){c[J]=q}):r.platform=D}).call(this);
function CVector2(a,d){var b,e;this._init=function(f,k){b=f;e=k};this.add=function(f,k){b+=f;e+=k};this.addV=function(f){b+=f.getX();e+=f.getY()};this.scalarDivision=function(f){b/=f;e/=f};this.subV=function(f){b-=f.getX();e-=f.getY()};this.scalarProduct=function(f){b*=f;e*=f};this.invert=function(){b*=-1;e*=-1};this.dotProduct=function(f){return b*f.getX()+e*f.getY()};this.set=function(f,k){b=f;e=k};this.setV=function(f){b=f.getX();e=f.getY()};this.length=function(){return Math.sqrt(b*b+e*e)};this.length2=
function(){return b*b+e*e};this.normalize=function(){var f=this.length();0<f&&(b/=f,e/=f)};this.getNormalize=function(f){this.length();f.set(b,e);f.normalize()};this.rot90CCW=function(){var f=b;b=-e;e=f};this.rot90CW=function(){var f=b;b=e;e=-f};this.getRotCCW=function(f){f.set(b,e);f.rot90CCW()};this.getRotCW=function(f){f.set(b,e);f.rot90CW()};this.ceil=function(){b=Math.ceil(b);e=Math.ceil(e)};this.round=function(){b=Math.round(b);e=Math.round(e)};this.toString=function(){return"Vector2: "+b+", "+
e};this.print=function(){trace("Vector2: "+b+", "+e)};this.getX=function(){return b};this.getY=function(){return e};this._init(a,d)}function toRadian(a){return Math.PI/180*a}function toDegree(a){return 180/Math.PI*a}function randRange(a,d){return Math.floor(Math.random()*(d-a+1))+a}function angleBetweenVectors(a,d){var b=Math.acos(dotProductV2(a,d)/(a.length()*d.length()));return!0===isNaN(b)?0:b}
function rotateVector2D(a,d){var b=d.getX()*Math.cos(a)+d.getY()*Math.sin(a),e=d.getX()*-Math.sin(a)+d.getY()*Math.cos(a);d.set(b,e)}function reflectVectorV2(a,d){var b=new CVector2,e=dotProductV2(a,d);b.set(a.getX()-2*e*d.getX(),a.getY()-2*e*d.getY());return b}function dotProductV2(a,d){return a.getX()*d.getX()+a.getY()*d.getY()}function pointInRect(a,d){return a.getX()>d.x&&a.getX()<d.x+d.width&&a.getY()>d.y&&a.getY()<d.y+d.height}
function distance2(a,d){return(d.getX()-a.getX())*(d.getX()-a.getX())+(d.getY()-a.getY())*(d.getY()-a.getY())}
CTLText.prototype={constructor:CTLText,__autofit:function(){if(this._bFitText){for(var a=this._iFontSize;(this._oText.getBounds().height>this._iHeight-2*this._iPaddingV||this._oText.getBounds().width>this._iWidth-2*this._iPaddingH)&&!(a--,this._oText.font=a+"px "+this._szFont,this._oText.lineHeight=Math.round(a*this._fLineHeightFactor),this.__updateY(),this.__verticalAlign(),8>a););this._iFontSize=a}},__verticalAlign:function(){if(this._bVerticalAlign){var a=this._oText.getBounds().height;this._oText.y-=
(a-this._iHeight)/2+this._iPaddingV}},__updateY:function(){this._oText.y=this._y+this._iPaddingV;switch(this._oText.textBaseline){case "middle":this._oText.y+=this._oText.lineHeight/2+(this._iFontSize*this._fLineHeightFactor-this._iFontSize)}},__createText:function(a){this._bDebug&&(this._oDebugShape=new createjs.Shape,this._oDebugShape.graphics.beginFill("rgba(255,0,0,0.5)").drawRect(this._x,this._y,this._iWidth,this._iHeight),this._oContainer.addChild(this._oDebugShape));this._oText=new createjs.Text(a,
this._iFontSize+"px "+this._szFont,this._szColor);this._oText.textBaseline="middle";this._oText.lineHeight=Math.round(this._iFontSize*this._fLineHeightFactor);this._oText.textAlign=this._szAlign;this._oText.lineWidth=this._bMultiline?this._iWidth-2*this._iPaddingH:null;switch(this._szAlign){case "center":this._oText.x=this._x+this._iWidth/2;break;case "left":this._oText.x=this._x+this._iPaddingH;break;case "right":this._oText.x=this._x+this._iWidth-this._iPaddingH}this._oContainer.addChild(this._oText);
this.refreshText(a)},setVerticalAlign:function(a){this._bVerticalAlign=a},setOutline:function(a){null!==this._oText&&(this._oText.outline=a)},setShadow:function(a,d,b,e){null!==this._oText&&(this._oText.shadow=new createjs.Shadow(a,d,b,e))},setColor:function(a){this._oText.color=a},setAlpha:function(a){this._oText.alpha=a},removeTweens:function(){createjs.Tween.removeTweens(this._oText)},getText:function(){return this._oText},getY:function(){return this._y},getFontSize:function(){return this._iFontSize},
refreshText:function(a){""===a&&(a=" ");null===this._oText&&this.__createText(a);this._oText.text=a;this._oText.font=this._iFontSize+"px "+this._szFont;this._oText.lineHeight=Math.round(this._iFontSize*this._fLineHeightFactor);this.__autofit();this.__updateY();this.__verticalAlign()}};
function CTLText(a,d,b,e,f,k,h,g,m,p,r,c,l,y,t,u,z){this._oContainer=a;this._x=d;this._y=b;this._iWidth=e;this._iHeight=f;this._bMultiline=u;this._iFontSize=k;this._szAlign=h;this._szColor=g;this._szFont=m;this._iPaddingH=r;this._iPaddingV=c;this._bVerticalAlign=t;this._bFitText=y;this._bDebug=z;this._oDebugShape=null;this._fLineHeightFactor=p;this._oText=null;l&&this.__createText(l)}var s_iScaleFactor=1,s_bIsIphone=!1,s_iOffsetX,s_iOffsetY,s_bFocus=!0;
(function(a){(jQuery.browser=jQuery.browser||{}).mobile=/android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(ad|hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|tablet|treo|up\.(browser|link)|vodafone|wap|webos|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(a.substr(0,
4))})(navigator.userAgent||navigator.vendor||window.opera);function trace(a){console.log(a)}function isChrome(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}function isIOS(){var a="iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";");if(-1!==navigator.userAgent.toLowerCase().indexOf("iphone"))return s_bIsIphone=!0;for(;a.length;)if(navigator.platform===a.pop())return!0;return s_bIsIphone=!1}
function playSound(a,d,b){return!1===DISABLE_SOUND_MOBILE||!1===s_bMobile?(s_aSounds[a].play(),s_aSounds[a].volume(d),s_aSounds[a].loop(b),s_aSounds[a]):null}function stopSound(a){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].stop()}function setVolume(a,d){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].volume(d)}function setMute(a,d){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].mute(d)}$(window).resize(function(){sizeHandler()});
function getSize(a){var d=a.toLowerCase(),b=window.document,e=b.documentElement;if(void 0===window["inner"+a])a=e["client"+a];else if(window["inner"+a]!=e["client"+a]){var f=b.createElement("body");f.id="vpw-test-b";f.style.cssText="overflow:scroll";var k=b.createElement("div");k.id="vpw-test-d";k.style.cssText="position:absolute;top:-1000px";k.innerHTML="<style>@media("+d+":"+e["client"+a]+"px){body#vpw-test-b div#vpw-test-d{"+d+":7px!important}}</style>";f.appendChild(k);e.insertBefore(f,b.head);
a=7==k["offset"+a]?e["client"+a]:window["inner"+a];e.removeChild(f)}else a=window["inner"+a];return a}window.addEventListener("orientationchange",onOrientationChange);function onOrientationChange(){window.matchMedia("(orientation: portrait)").matches&&sizeHandler();window.matchMedia("(orientation: landscape)").matches&&sizeHandler()}function getIOSWindowHeight(){return document.documentElement.clientWidth/window.innerWidth*window.innerHeight}
function getHeightOfIOSToolbars(){var a=(0===window.orientation?screen.height:screen.width)-getIOSWindowHeight();return 1<a?a:0}function isIpad(){var a=-1!==navigator.userAgent.toLowerCase().indexOf("ipad");return!a&&navigator.userAgent.match(/Mac/)&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints?!0:a}function isMobile(){return isIpad()?!0:jQuery.browser.mobile}
function sizeHandler(){window.scrollTo(0,1);if($("#canvas")){var a=null!==platform.name&&"safari"===platform.name.toLowerCase()?getIOSWindowHeight():getSize("Height");var d=getSize("Width");s_bFocus&&_checkOrientation(d,a);var b=Math.min(a/CANVAS_HEIGHT,d/CANVAS_WIDTH),e=Math.round(CANVAS_WIDTH*b);b=Math.round(CANVAS_HEIGHT*b);if(b<a){var f=a-b;b+=f;e+=CANVAS_WIDTH/CANVAS_HEIGHT*f}else e<d&&(f=d-e,e+=f,b+=CANVAS_HEIGHT/CANVAS_WIDTH*f);f=a/2-b/2;var k=d/2-e/2,h=CANVAS_WIDTH/e;if(k*h<-EDGEBOARD_X||
f*h<-EDGEBOARD_Y)b=Math.min(a/(CANVAS_HEIGHT-2*EDGEBOARD_Y),d/(CANVAS_WIDTH-2*EDGEBOARD_X)),e=Math.round(CANVAS_WIDTH*b),b=Math.round(CANVAS_HEIGHT*b),f=(a-b)/2,k=(d-e)/2,h=CANVAS_WIDTH/e;s_iOffsetX=-1*k*h;s_iOffsetY=-1*f*h;0<=f&&(s_iOffsetY=0);0<=k&&(s_iOffsetX=0);null!==s_oInterface&&s_oInterface.refreshButtonPos(s_iOffsetX,s_iOffsetY);null!==s_oMenu&&s_oMenu.refreshButtonPos(s_iOffsetX,s_iOffsetY);s_bIsIphone&&s_oStage?(canvas=document.getElementById("canvas"),s_oStage.canvas.width=2*e,s_oStage.canvas.height=
2*b,canvas.style.width=e+"px",canvas.style.height=b+"px",s_iScaleFactor=2*Math.min(e/CANVAS_WIDTH,b/CANVAS_HEIGHT),s_oStage.scaleX=s_oStage.scaleY=s_iScaleFactor):s_bMobile||isChrome()?($("#canvas").css("width",e+"px"),$("#canvas").css("height",b+"px")):s_oStage&&(s_oStage.canvas.width=e,s_oStage.canvas.height=b,s_iScaleFactor=Math.min(e/CANVAS_WIDTH,b/CANVAS_HEIGHT),s_oStage.scaleX=s_oStage.scaleY=s_iScaleFactor);0>f||(f=(a-b)/2);$("#canvas").css("top",f+"px");$("#canvas").css("left",k+"px");fullscreenHandler()}}
function createBitmap(a,d,b){var e=new createjs.Bitmap(a),f=new createjs.Shape;d&&b?f.graphics.beginFill("#fff").drawRect(0,0,d,b):f.graphics.beginFill("#ff0").drawRect(0,0,a.width,a.height);e.hitArea=f;return e}function createSprite(a,d,b,e,f,k){a=null!==d?new createjs.Sprite(a,d):new createjs.Sprite(a);d=new createjs.Shape;d.graphics.beginFill("#000000").drawRect(-b,-e,f,k);a.hitArea=d;return a}
function _checkOrientation(a,d){s_bMobile&&ENABLE_CHECK_ORIENTATION&&(a>d?"landscape"===$(".orientation-msg-container").attr("data-orientation")?($(".orientation-msg-container").css("display","none"),s_oMain.startUpdate()):($(".orientation-msg-container").css("display","block"),s_oMain.stopUpdate()):"portrait"===$(".orientation-msg-container").attr("data-orientation")?($(".orientation-msg-container").css("display","none"),s_oMain.startUpdate()):($(".orientation-msg-container").css("display","block"),
s_oMain.stopUpdate()))}function randomFloatBetween(a,d,b){"undefined"===typeof b&&(b=2);return parseFloat(Math.min(a+Math.random()*(d-a),d).toFixed(b))}function rotateVector2D(a,d){var b=d.getX()*Math.cos(a)+d.getY()*Math.sin(a),e=d.getX()*-Math.sin(a)+d.getY()*Math.cos(a);d.set(b,e)}function tweenVectorsOnX(a,d,b){return a+b*(d-a)}function shuffle(a){for(var d=a.length,b,e;0!==d;)e=Math.floor(Math.random()*d),--d,b=a[d],a[d]=a[e],a[e]=b;return a}
function bubbleSort(a){do{var d=!1;for(var b=0;b<a.length-1;b++)a[b]>a[b+1]&&(d=a[b],a[b]=a[b+1],a[b+1]=d,d=!0)}while(d)}function compare(a,d){return a.index>d.index?-1:a.index<d.index?1:0}function easeLinear(a,d,b,e){return b*a/e+d}function easeInQuad(a,d,b,e){return b*(a/=e)*a+d}function easeInSine(a,d,b,e){return-b*Math.cos(a/e*(Math.PI/2))+b+d}function easeInCubic(a,d,b,e){return b*(a/=e)*a*a+d}
function getTrajectoryPoint(a,d){var b=new createjs.Point,e=(1-a)*(1-a),f=a*a;b.x=e*d.start.x+2*(1-a)*a*d.traj.x+f*d.end.x;b.y=e*d.start.y+2*(1-a)*a*d.traj.y+f*d.end.y;return b}function formatTime(a){a/=1E3;var d=Math.floor(a/60);a=Math.floor(a-60*d);var b="";b=10>d?b+("0"+d+":"):b+(d+":");return 10>a?b+("0"+a):b+a}function degreesToRadians(a){return a*Math.PI/180}function checkRectCollision(a,d){var b=getBounds(a,.9);var e=getBounds(d,.98);return calculateIntersection(b,e)}
function calculateIntersection(a,d){var b,e,f,k;var h=a.x+(b=a.width/2);var g=a.y+(e=a.height/2);var m=d.x+(f=d.width/2);var p=d.y+(k=d.height/2);h=Math.abs(h-m)-(b+f);g=Math.abs(g-p)-(e+k);return 0>h&&0>g?(h=Math.min(Math.min(a.width,d.width),-h),g=Math.min(Math.min(a.height,d.height),-g),{x:Math.max(a.x,d.x),y:Math.max(a.y,d.y),width:h,height:g,rect1:a,rect2:d}):null}
function getBounds(a,d){var b={x:Infinity,y:Infinity,width:0,height:0};if(a instanceof createjs.Container){b.x2=-Infinity;b.y2=-Infinity;var e=a.children,f=e.length,k;for(k=0;k<f;k++){var h=getBounds(e[k],1);h.x<b.x&&(b.x=h.x);h.y<b.y&&(b.y=h.y);h.x+h.width>b.x2&&(b.x2=h.x+h.width);h.y+h.height>b.y2&&(b.y2=h.y+h.height)}Infinity==b.x&&(b.x=0);Infinity==b.y&&(b.y=0);Infinity==b.x2&&(b.x2=0);Infinity==b.y2&&(b.y2=0);b.width=b.x2-b.x;b.height=b.y2-b.y;delete b.x2;delete b.y2}else{if(a instanceof createjs.Bitmap){f=
a.sourceRect||a.image;k=f.width*d;var g=f.height*d}else if(a instanceof createjs.Sprite)if(a.spriteSheet._frames&&a.spriteSheet._frames[a.currentFrame]&&a.spriteSheet._frames[a.currentFrame].image){f=a.spriteSheet.getFrame(a.currentFrame);k=f.rect.width;g=f.rect.height;e=f.regX;var m=f.regY}else b.x=a.x||0,b.y=a.y||0;else b.x=a.x||0,b.y=a.y||0;e=e||0;k=k||0;m=m||0;g=g||0;b.regX=e;b.regY=m;f=a.localToGlobal(0-e,0-m);h=a.localToGlobal(k-e,g-m);k=a.localToGlobal(k-e,0-m);e=a.localToGlobal(0-e,g-m);b.x=
Math.min(Math.min(Math.min(f.x,h.x),k.x),e.x);b.y=Math.min(Math.min(Math.min(f.y,h.y),k.y),e.y);b.width=Math.max(Math.max(Math.max(f.x,h.x),k.x),e.x)-b.x;b.height=Math.max(Math.max(Math.max(f.y,h.y),k.y),e.y)-b.y}return b}function NoClickDelay(a){this.element=a;window.Touch&&this.element.addEventListener("touchstart",this,!1)}function shuffle(a){for(var d=a.length,b,e;0<d;)e=Math.floor(Math.random()*d),d--,b=a[d],a[d]=a[e],a[e]=b;return a}
NoClickDelay.prototype={handleEvent:function(a){switch(a.type){case "touchstart":this.onTouchStart(a);break;case "touchmove":this.onTouchMove(a);break;case "touchend":this.onTouchEnd(a)}},onTouchStart:function(a){a.preventDefault();this.moved=!1;this.element.addEventListener("touchmove",this,!1);this.element.addEventListener("touchend",this,!1)},onTouchMove:function(a){this.moved=!0},onTouchEnd:function(a){this.element.removeEventListener("touchmove",this,!1);this.element.removeEventListener("touchend",
this,!1);if(!this.moved){a=document.elementFromPoint(a.changedTouches[0].clientX,a.changedTouches[0].clientY);3==a.nodeType&&(a=a.parentNode);var d=document.createEvent("MouseEvents");d.initEvent("click",!0,!0);a.dispatchEvent(d)}}};
(function(){function a(b){var e={focus:"visible",focusin:"visible",pageshow:"visible",blur:"hidden",focusout:"hidden",pagehide:"hidden"};b=b||window.event;b.type in e?document.body.className=e[b.type]:(document.body.className=this[d]?"hidden":"visible","hidden"===document.body.className?(s_oMain.stopUpdate(),s_bFocus=!1):(s_oMain.startUpdate(),s_bFocus=!0))}var d="hidden";d in document?document.addEventListener("visibilitychange",a):(d="mozHidden")in document?document.addEventListener("mozvisibilitychange",
a):(d="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",a):(d="msHidden")in document?document.addEventListener("msvisibilitychange",a):"onfocusin"in document?document.onfocusin=document.onfocusout=a:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=a})();function ctlArcadeResume(){null!==s_oMain&&s_oMain.startUpdate()}function ctlArcadePause(){null!==s_oMain&&s_oMain.stopUpdate()}
function getParamValue(a){for(var d=window.location.search.substring(1).split("&"),b=0;b<d.length;b++){var e=d[b].split("=");if(e[0]==a)return e[1]}}function fullscreenHandler(){ENABLE_FULLSCREEN&&!1!==screenfull.isEnabled&&(s_bFullscreen=screenfull.isFullscreen,null!==s_oInterface&&s_oInterface.resetFullscreenBut(),null!==s_oMenu&&s_oMenu.resetFullscreenBut())}
if(screenfull.isEnabled)screenfull.on("change",function(){s_bFullscreen=screenfull.isFullscreen;null!==s_oInterface&&s_oInterface.resetFullscreenBut();null!==s_oMenu&&s_oMenu.resetFullscreenBut()});
(function(){function a(b){var e={focus:"visible",focusin:"visible",pageshow:"visible",blur:"hidden",focusout:"hidden",pagehide:"hidden"};b=b||window.event;b.type in e?document.body.className=e[b.type]:(document.body.className=this[d]?"hidden":"visible","hidden"===document.body.className?s_oMain.stopUpdate():s_oMain.startUpdate())}var d="hidden";d in document?document.addEventListener("visibilitychange",a):(d="mozHidden")in document?document.addEventListener("mozvisibilitychange",a):(d="webkitHidden")in
document?document.addEventListener("webkitvisibilitychange",a):(d="msHidden")in document?document.addEventListener("msvisibilitychange",a):"onfocusin"in document?document.onfocusin=document.onfocusout=a:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=a})();
function CSpriteLibrary(){var a={},d,b,e,f,k,h;this.init=function(g,m,p){d={};e=b=0;f=g;k=m;h=p};this.addSprite=function(g,m){if(!a.hasOwnProperty(g)){var p=new Image;a[g]=d[g]={szPath:m,oSprite:p,bLoaded:!1};b++}};this.getSprite=function(g){return a.hasOwnProperty(g)?a[g].oSprite:null};this._onSpritesLoaded=function(){b=0;k.call(h)};this._onSpriteLoaded=function(){f.call(h);++e===b&&this._onSpritesLoaded()};this.loadSprites=function(){for(var g in d)d[g].oSprite.oSpriteLibrary=this,d[g].oSprite.szKey=
g,d[g].oSprite.onload=function(){this.oSpriteLibrary.setLoaded(this.szKey);this.oSpriteLibrary._onSpriteLoaded(this.szKey)},d[g].oSprite.onerror=function(m){var p=m.currentTarget;setTimeout(function(){d[p.szKey].oSprite.src=d[p.szKey].szPath},500)},d[g].oSprite.src=d[g].szPath};this.setLoaded=function(g){a[g].bLoaded=!0};this.isLoaded=function(g){return a[g].bLoaded};this.getNumSprites=function(){return b}}
var CANVAS_WIDTH=640,CANVAS_HALF_WIDTH=CANVAS_WIDTH/2,CANVAS_HEIGHT=960,FONT="diogenesregular",EDGEBOARD_X=20,EDGEBOARD_Y=95,FPS_TIME=1E3/24,DISABLE_SOUND_MOBILE=!1,SOUNDTRACK_VOLUME_IN_GAME=1,GAMMA_RANGE_ACCEPTED,CANVAS_WIDTH_RANGE_ACCEPTED,PLAYER_X_START=CANVAS_WIDTH/2,PLAYER_Y_START=CANVAS_HEIGHT-200,PLAYER_WIDTH=84,PLAYER_HEIGHT=107,PLAYER_GOD_WIDTH=282,PLAYER_GOD_HEIGHT=283,PLAYER_FALLING_WIDTH=78,PLAYER_FALLING_HEIGHT=102,PLAYER_STUNNED_WIDTH=102,PLAYER_STUNNED_HEIGHT=97,MAX_PLATFORM_FOR_TYPE=
26,PLATFORM_WIDTH=152,PLATFORM_HEIGHT=52,PLATFORM2_WIDTH=177,PLATFORM2_HEIGHT=127,PLATFORM3_WIDTH=117,PLATFORM3_HEIGHT=74,WINGS_WIDTH=120,WINGS_HEIGHT=106,NUM_ELEMENTS=5,NUM_PLATFORM_CREATED_FOR_SPRING,SPRING_WIDTH=45,SPRING_HEIGHT=33,COIN_WIDTH=31,COIN_HEIGHT=31,COIN_RECTANGLE_WIDTH=50,COIN_RECTANGLE_HEIGHT=50,PLATFORM=1,SPRING=2,COIN=3,WINGS=4,PLAYER_SPD_MAX,PLAYER_SPD_MIN,PLAYER_ACCELERATION_NO_GIROSCOPE,PLAYER_ACCELERATION_GIROSCOPE,PLAYER_DECELERATION,OBJECT_SPD,OBJECT_SPD_ORIZZONTAL,ACCELERATION,
DECELERATION,DECELERATION_BG_GAME_OVER,OBJECT_SPD_MAX,OBJECT_SPD_MIN,BONUS_OCCUR,COIN_OCCUR,HEIGHT_BETWEEN_OBJECT,BG_INDEX=1,GOING_RIGHT=0,GOING_LEFT=1,STATE_LOADING=0,STATE_MENU=1,STATE_HELP=1,STATE_GAME=3,ON_MOUSE_DOWN=0,ON_MOUSE_UP=1,ON_MOUSE_OVER=2,ON_MOUSE_OUT=3,ON_DRAG_START=4,ON_DRAG_END=5,ENABLE_FULLSCREEN,ENABLE_CHECK_ORIENTATION;
function CPreloader(){var a,d,b,e,f,k,h,g,m;this._init=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this);s_oSpriteLibrary.addSprite("progress_bar","./sprites/progress_bar.png");s_oSpriteLibrary.addSprite("200x200","./sprites/200x200.jpg");s_oSpriteLibrary.loadSprites();m=new createjs.Container;s_oStage.addChild(m)};this.unload=function(){m.removeAllChildren()};this._onImagesLoaded=function(){};this._onAllImagesLoaded=function(){this.attachSprites();s_oMain.preloaderReady()};
this.attachSprites=function(){var p=new createjs.Shape;p.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);m.addChild(p);p=s_oSpriteLibrary.getSprite("200x200");h=createBitmap(p);h.regX=.5*p.width;h.regY=.5*p.height;h.x=CANVAS_WIDTH/2;h.y=CANVAS_HEIGHT/2-180;m.addChild(h);g=new createjs.Shape;g.graphics.beginFill("rgba(0,0,0,0.01)").drawRoundRect(h.x-100,h.y-100,200,200,10);m.addChild(g);h.mask=g;p=s_oSpriteLibrary.getSprite("progress_bar");e=createBitmap(p);e.x=CANVAS_WIDTH/2-
p.width/2;e.y=CANVAS_HEIGHT/2+50;m.addChild(e);a=p.width;d=p.height;f=new createjs.Shape;f.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(e.x,e.y,1,d);m.addChild(f);e.mask=f;b=new createjs.Text("","40px "+FONT,"#fff");b.x=CANVAS_WIDTH/2;b.y=CANVAS_HEIGHT/2+110;b.textBaseline="alphabetic";b.textAlign="center";m.addChild(b);k=new createjs.Shape;k.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);m.addChild(k);createjs.Tween.get(k).to({alpha:0},500).call(function(){createjs.Tween.removeTweens(k);
m.removeChild(k)})};this.refreshLoader=function(p){b.text=p+"%";100===p&&(s_oMain._onRemovePreloader(),b.visible=!1,e.visible=!1);f.graphics.clear();p=Math.floor(p*a/100);f.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(e.x,e.y,p,d)};this._init()}
function CMain(a){var d,b=0,e=0,f=STATE_LOADING,k,h;this.initContainer=function(){s_oCanvas=document.getElementById("canvas");s_oStage=new createjs.Stage(s_oCanvas);createjs.Touch.enable(s_oStage,!0);s_bMobile=isMobile();!1===s_bMobile&&(s_oStage.enableMouseOver(20),$("body").on("contextmenu","#canvas",function(m){return!1}));s_iPrevTime=(new Date).getTime();createjs.Ticker.addEventListener("tick",this._update);createjs.Ticker.framerate=30;navigator.userAgent.match(/Windows Phone/i)&&(DISABLE_SOUND_MOBILE=
!0);s_oSpriteLibrary=new CSpriteLibrary;k=new CPreloader};this.preloaderReady=function(){this._loadImages();!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||this._initSounds();d=!0};this.soundLoaded=function(){b++;k.refreshLoader(Math.floor(b/e*100))};this._initSounds=function(){Howler.mute(!s_bAudioActive);s_aSoundsInfo=[];s_aSoundsInfo.push({path:"./sounds/",filename:"death",loop:!1,volume:1,ingamename:"death"});s_aSoundsInfo.push({path:"./sounds/",filename:"game_over",loop:!1,volume:1,ingamename:"game_over"});
s_aSoundsInfo.push({path:"./sounds/",filename:"money",loop:!1,volume:1,ingamename:"money"});s_aSoundsInfo.push({path:"./sounds/",filename:"game_over",loop:!1,volume:1,ingamename:"game_over"});s_aSoundsInfo.push({path:"./sounds/",filename:"platform_2_broken",loop:!1,volume:1,ingamename:"platform_2_broken"});s_aSoundsInfo.push({path:"./sounds/",filename:"platform_3_wind",loop:!1,volume:1,ingamename:"platform_3_wind"});s_aSoundsInfo.push({path:"./sounds/",filename:"power_up",loop:!1,volume:1,ingamename:"power_up"});
s_aSoundsInfo.push({path:"./sounds/",filename:"press_button",loop:!1,volume:1,ingamename:"press_button"});s_aSoundsInfo.push({path:"./sounds/",filename:"spring",loop:!1,volume:1,ingamename:"spring"});s_aSoundsInfo.push({path:"./sounds/",filename:"voice_falling",loop:!1,volume:1,ingamename:"voice_falling"});s_aSoundsInfo.push({path:"./sounds/",filename:"voice_jump_1",loop:!1,volume:1,ingamename:"voice_jump_1"});s_aSoundsInfo.push({path:"./sounds/",filename:"voice_jump_2",loop:!1,volume:1,ingamename:"voice_jump_2"});
s_aSoundsInfo.push({path:"./sounds/",filename:"wings",loop:!1,volume:1,ingamename:"wings"});s_aSoundsInfo.push({path:"./sounds/",filename:"soundtrack",loop:!0,volume:1,ingamename:"soundtrack"});e+=s_aSoundsInfo.length;s_aSounds=[];for(var m=0;m<s_aSoundsInfo.length;m++)this.tryToLoadSound(s_aSoundsInfo[m],!1)};this.tryToLoadSound=function(m,p){setTimeout(function(){s_aSounds[m.ingamename]=new Howl({src:[m.path+m.filename+".mp3"],autoplay:!1,preload:!0,loop:m.loop,volume:m.volume,onload:s_oMain.soundLoaded,
onloaderror:function(r,c){for(var l=0;l<s_aSoundsInfo.length;l++)if(r===s_aSounds[s_aSoundsInfo[l].ingamename]._sounds[0]._id){s_oMain.tryToLoadSound(s_aSoundsInfo[l],!0);break}},onplayerror:function(r){for(var c=0;c<s_aSoundsInfo.length;c++)if(r===s_aSounds[s_aSoundsInfo[c].ingamename]._sounds[0]._id){s_aSounds[s_aSoundsInfo[c].ingamename].once("unlock",function(){s_aSounds[s_aSoundsInfo[c].ingamename].play();"soundtrack"===s_aSoundsInfo[c].ingamename&&null!==s_oGame&&setVolume("soundtrack",SOUNDTRACK_VOLUME_IN_GAME)});
break}}})},p?200:0)};this._loadImages=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this);s_oSpriteLibrary.addSprite("but_play","./sprites/but_play.png");s_oSpriteLibrary.addSprite("but_restart","./sprites/but_restart.png");s_oSpriteLibrary.addSprite("but_home","./sprites/but_home.png");s_oSpriteLibrary.addSprite("msg_box","./sprites/msg_box.png");s_oSpriteLibrary.addSprite("bg_menu","./sprites/bg_menu.jpg");s_oSpriteLibrary.addSprite("bg_scroll_1","./sprites/bg_scroll_1.jpg");
s_oSpriteLibrary.addSprite("bg_scroll_2","./sprites/bg_scroll_2.jpg");s_oSpriteLibrary.addSprite("bg_scroll_3","./sprites/bg_scroll_3.jpg");s_oSpriteLibrary.addSprite("but_exit","./sprites/but_exit.png");s_oSpriteLibrary.addSprite("audio_icon","./sprites/audio_icon.png");s_oSpriteLibrary.addSprite("player","./sprites/player.png");s_oSpriteLibrary.addSprite("god","./sprites/player_god_power.png");s_oSpriteLibrary.addSprite("falling","./sprites/player_falling.png");s_oSpriteLibrary.addSprite("stunned",
"./sprites/player_stunned.png");s_oSpriteLibrary.addSprite("platform_0","./sprites/platform_0.png");s_oSpriteLibrary.addSprite("platform_1","./sprites/platform_1.png");s_oSpriteLibrary.addSprite("platform_2","./sprites/platform_2.png");s_oSpriteLibrary.addSprite("platform_3","./sprites/platform_3.png");s_oSpriteLibrary.addSprite("god_cloud_0","./sprites/cloud_cupido.png");s_oSpriteLibrary.addSprite("god_cloud_1","./sprites/cloud_mars.png");s_oSpriteLibrary.addSprite("god_cloud_2","./sprites/cloud_poseidon.png");
s_oSpriteLibrary.addSprite("clouds_in_overlay","./sprites/clouds.png");s_oSpriteLibrary.addSprite("spring","./sprites/spring.png");s_oSpriteLibrary.addSprite("wings","./sprites/wings.png");s_oSpriteLibrary.addSprite("coin","./sprites/coin.png");s_oSpriteLibrary.addSprite("help_monitor","./sprites/help_monitor.png");s_oSpriteLibrary.addSprite("help_mouse","./sprites/help_mouse.png");s_oSpriteLibrary.addSprite("help_smartphone","./sprites/help_smartphone.png");s_oSpriteLibrary.addSprite("help_touch",
"./sprites/help_touch.png");s_oSpriteLibrary.addSprite("smartphone_rotation","./sprites/smartphone_rotation.png");s_oSpriteLibrary.addSprite("dividing_line","./sprites/dividing_line.png");s_oSpriteLibrary.addSprite("but_skip","./sprites/but_skip.png");s_oSpriteLibrary.addSprite("but_next","./sprites/but_next.png");s_oSpriteLibrary.addSprite("but_credits","./sprites/but_credits.png");s_oSpriteLibrary.addSprite("but_fullscreen","./sprites/but_fullscreen.png");s_oSpriteLibrary.addSprite("ctl_logo","./sprites/ctl_logo.png");
e+=s_oSpriteLibrary.getNumSprites();s_oSpriteLibrary.loadSprites()};this._onImagesLoaded=function(){b++;k.refreshLoader(Math.floor(b/e*100))};this._onAllImagesLoaded=function(){};this._onRemovePreloader=function(){k.unload();s_oSoundTrack=playSound("soundtrack",1,!0);this.gotoMenu()};this.gotoMenu=function(){new CMenu;f=STATE_MENU};this.gotoGame=function(m){h=new CGame(g,m);f=STATE_GAME};this.gotoHelp=function(){new CHelp;f=STATE_HELP};this.stopUpdate=function(){d=!1;createjs.Ticker.paused=!0;$("#block_game").css("display",
"block");!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||Howler.mute(!0)};this.startUpdate=function(){s_iPrevTime=(new Date).getTime();d=!0;createjs.Ticker.paused=!1;$("#block_game").css("display","none");(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)&&s_bAudioActive&&Howler.mute(!1)};this._update=function(m){if(!1!==d){var p=(new Date).getTime();s_iTimeElaps=p-s_iPrevTime;s_iCntTime+=s_iTimeElaps;s_iCntFps++;s_iPrevTime=p;1E3<=s_iCntTime&&(s_iCurFps=s_iCntFps,s_iCntTime-=1E3,s_iCntFps=0);f===STATE_GAME&&
h.update();s_oStage.update(m)}};s_oMain=this;var g=a;ENABLE_FULLSCREEN=a.fullscreen;ENABLE_CHECK_ORIENTATION=a.check_orientation;s_bAudioActive=a.audio_enable_on_startup;this.initContainer()}var s_bMobile,s_bAudioActive=!1,s_iCntTime=0,s_iTimeElaps=0,s_iPrevTime=0,s_iCntFps=0,s_iCurFps=0,s_bCanOrientate=!1,s_oDrawLayer,s_oStage,s_oMain,s_oSpriteLibrary,s_oSoundTrack=null,s_oCanvas,s_bFullscreen=!1,s_aSounds,s_aSoundsInfo;
function CTextButton(a,d,b,e,f,k,h,g){var m,p,r,c,l,y,t,u,z,D;this._init=function(q,J,I,B,C,N,A){m=!1;p=1;r=[];c=[];D=createBitmap(I);u=new createjs.Container;u.x=q;u.y=J;u.regX=I.width/2;u.regY=I.height/2;s_bMobile||(u.cursor="pointer");u.addChild(D,z);g.addChild(u);z=new CTLText(u,40,0,I.width-80,I.height,A,"center",N,C,1,2,2,B,!0,!0,!1,!1);this._initListener()};this.unload=function(){u.off("mousedown",l);u.off("pressup",y);g.removeChild(u)};this.setVisible=function(q){u.visible=q};this.setAlign=
function(q){z.textAlign=q};this.setTextX=function(q){z.x=q};this.setScale=function(q){p=u.scaleX=u.scaleY=q};this.enable=function(){m=!1};this.disable=function(){m=!0};this._initListener=function(){l=u.on("mousedown",this.buttonDown);y=u.on("pressup",this.buttonRelease)};this.addEventListener=function(q,J,I){r[q]=J;c[q]=I};this.addEventListenerWithParams=function(q,J,I,B){r[q]=J;c[q]=I;t=B};this.buttonRelease=function(){m||(playSound("but_click",1,!1),u.scaleX=p,u.scaleY=p,r[ON_MOUSE_UP]&&r[ON_MOUSE_UP].call(c[ON_MOUSE_UP],
t))};this.buttonDown=function(){m||(u.scaleX=.9*p,u.scaleY=.9*p,r[ON_MOUSE_DOWN]&&r[ON_MOUSE_DOWN].call(c[ON_MOUSE_DOWN]))};this.setPosition=function(q,J){u.x=q;u.y=J};this.tweenPosition=function(q,J,I,B,C,N,A){createjs.Tween.get(u).wait(B).to({x:q,y:J},I,C).call(function(){void 0!==N&&N.call(A)})};this.changeText=function(q){z.refreshText(q)};this.setX=function(q){u.x=q};this.setY=function(q){u.y=q};this.getButtonImage=function(){return u};this.getX=function(){return u.x};this.getY=function(){return u.y};
this.getSprite=function(){return u};this.getScale=function(){return u.scaleX};this._init(a,d,b,e,f,k,h)}
function CToggle(a,d,b,e,f){var k,h,g,m=[],p,r,c;this._init=function(l,y,t,u){h=[];g=[];var z=new createjs.SpriteSheet({images:[t],frames:{width:t.width/2,height:t.height,regX:t.width/2/2,regY:t.height/2},animations:{state_true:[0],state_false:[1]}});k=u;c=createSprite(z,"state_"+k,t.width/2/2,t.height/2,t.width/2,t.height);c.x=l;c.y=y;c.stop();c.cursor="pointer";f.addChild(c);this._initListener()};this.unload=function(){c.off("mousedown",p);c.off("pressup",r);f.removeChild(c)};this._initListener=
function(){p=c.on("mousedown",this.buttonDown);r=c.on("pressup",this.buttonRelease)};this.addEventListener=function(l,y,t){h[l]=y;g[l]=t};this.addEventListenerWithParams=function(l,y,t,u){h[l]=y;g[l]=t;m=u};this.setActive=function(l){k=l;c.gotoAndStop("state_"+k)};this.buttonRelease=function(){c.scaleX=1;c.scaleY=1;playSound("press_button",1,!1);k=!k;c.gotoAndStop("state_"+k);h[ON_MOUSE_UP]&&h[ON_MOUSE_UP].call(g[ON_MOUSE_UP],m)};this.buttonDown=function(){c.scaleX=.9;c.scaleY=.9;h[ON_MOUSE_DOWN]&&
h[ON_MOUSE_DOWN].call(g[ON_MOUSE_DOWN],m)};this.setPosition=function(l,y){c.x=l;c.y=y};this.setVisible=function(l){c.visible=l};this._init(a,d,b,e)}
function CGfxButton(a,d,b,e){var f,k,h,g=[],m,p,r;this._init=function(c,l,y){f=1;k=[];h=[];r=createBitmap(y);r.x=c;r.y=l;r.regX=y.width/2;r.regY=y.height/2;r.cursor="pointer";e.addChild(r);this._initListener()};this.unload=function(){r.off("mousedown",m);r.off("pressup",p);e.removeChild(r)};this.setVisible=function(c){r.visible=c};this._initListener=function(){m=r.on("mousedown",this.buttonDown);p=r.on("pressup",this.buttonRelease)};this.addEventListener=function(c,l,y){k[c]=l;h[c]=y};this.addEventListenerWithParams=
function(c,l,y,t){k[c]=l;h[c]=y;g=t};this.buttonRelease=function(){r.scaleX=f;r.scaleY=f;k[ON_MOUSE_UP]&&k[ON_MOUSE_UP].call(h[ON_MOUSE_UP],g)};this.buttonDown=function(){r.scaleX=.9*f;r.scaleY=.9*f;playSound("press_button",1,!1);k[ON_MOUSE_DOWN]&&k[ON_MOUSE_DOWN].call(h[ON_MOUSE_DOWN],g)};this.setScale=function(c){f=c;r.scaleX=c;r.scaleY=c};this.setPosition=function(c,l){r.x=c;r.y=l};this.setX=function(c){r.x=c};this.setY=function(c){r.y=c};this.getButtonImage=function(){return r};this.getX=function(){return r.x};
this.getY=function(){return r.y};this._init(a,d,b);return this}
function CMenu(){var a,d,b,e,f,k,h,g,m,p,r,c,l=null,y=null;this._init=function(){setVolume("soundtrack",1);h=createBitmap(s_oSpriteLibrary.getSprite("bg_menu"));s_oStage.addChild(h);window.addEventListener("deviceorientation",function(z){null!==z.gamma&&(s_bCanOrientate=!0)},!1);var t=s_oSpriteLibrary.getSprite("but_play");g=new CGfxButton(CANVAS_WIDTH/2+20,CANVAS_HEIGHT-225,t,s_oStage);g.addEventListener(ON_MOUSE_UP,this._onButPlayRelease,this);if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)t=s_oSpriteLibrary.getSprite("audio_icon"),
f=CANVAS_WIDTH-t.height/2-10,k=t.height/2+10,p=new CToggle(f,k,t,s_bAudioActive,s_oStage),p.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this);t=s_oSpriteLibrary.getSprite("but_credits");b=t.height/2+10;e=t.height/2+10;r=new CGfxButton(b,e,t,s_oStage);r.addEventListener(ON_MOUSE_UP,this._onButCreditRelease,this);t=window.document;var u=t.documentElement;l=u.requestFullscreen||u.mozRequestFullScreen||u.webkitRequestFullScreen||u.msRequestFullscreen;y=t.exitFullscreen||t.mozCancelFullScreen||t.webkitExitFullscreen||
t.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(l=!1);l&&screenfull.isEnabled&&(t=s_oSpriteLibrary.getSprite("but_fullscreen"),a=b+t.width/2+10,d=e,c=new CToggle(a,d,t,s_bFullscreen,s_oStage),c.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this));m=new createjs.Shape;m.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);s_oStage.addChild(m);createjs.Tween.get(m).to({alpha:0},1E3).call(function(){m.visible=!1});this.refreshButtonPos(s_iOffsetX,s_iOffsetY)};this.unload=function(){g.unload();
g=null;m.visible=!1;r.unload();if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)p.unload(),p=null;l&&screenfull.isEnabled&&c.unload();s_oStage.removeChild(h);s_oMenu=h=null};this.refreshButtonPos=function(t,u){r.setPosition(b+s_iOffsetX,s_iOffsetY+e);!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||p.setPosition(f-t,u+k);l&&screenfull.isEnabled&&c.setPosition(a+s_iOffsetX,d+s_iOffsetY)};this._onAudioToggle=function(){Howler.mute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this._onButPlayRelease=function(){this.unload();
$(s_oMain).trigger("start_session");s_oMain.gotoHelp()};this.resetFullscreenBut=function(){l&&screenfull.isEnabled&&c.setActive(s_bFullscreen)};this._onFullscreenRelease=function(){s_bFullscreen?y.call(window.document):l.call(window.document.documentElement);sizeHandler()};this._onButCreditRelease=function(){new CCreditsPanel};s_oMenu=this;this._init()}var s_oMenu=null;
function CHelp(){var a=this,d,b,e,f,k,h,g,m,p,r;this._init=function(){d=createBitmap(s_oSpriteLibrary.getSprite("bg_scroll_1"));s_oStage.addChild(d);b=new createjs.Container;b.alpha=0;e=new createjs.Container;e.alpha=0;d=createBitmap(s_oSpriteLibrary.getSprite("msg_box"));s_oStage.addChild(d);var c=400,l=160;f=new CTLText(b,CANVAS_WIDTH/2-c/2+1,CANVAS_HEIGHT/2-l/2+131,c,l,25,"center","#410701",FONT,1,2,2,"",!0,!0,!0,!1);k=new CTLText(b,CANVAS_WIDTH/2-c/2,CANVAS_HEIGHT/2-l/2+130,c,l,25,"center","#ffb400",
FONT,1,2,2,"",!0,!0,!0,!1);s_bMobile?s_bCanOrientate?(f.refreshText(TEXT_ORIENTATION),k.refreshText(TEXT_ORIENTATION),c={images:[s_oSpriteLibrary.getSprite("smartphone_rotation")],framerate:15,frames:{width:166,height:166,regX:0,regY:0},animations:{idle:[0,19,"idle"]}},c=new createjs.SpriteSheet(c),h=createSprite(c,"idle",0,0,166,166),h.x=CANVAS_WIDTH/2-80,h.y=CANVAS_HEIGHT/2-130,b.addChild(h)):(f.refreshText(TEXT_MOBILE),k.refreshText(TEXT_MOBILE),h=createBitmap(s_oSpriteLibrary.getSprite("help_smartphone")),
h.x=CANVAS_WIDTH/2-50,h.y=CANVAS_HEIGHT/2-130,b.addChild(h),g=createBitmap(s_oSpriteLibrary.getSprite("help_touch")),g.x=CANVAS_WIDTH/2-30,g.y=CANVAS_HEIGHT/2-60,this.moveCursorRight(g),b.addChild(g)):(f.refreshText(TEXT_DESKTOP),k.refreshText(TEXT_DESKTOP),h=createBitmap(s_oSpriteLibrary.getSprite("help_monitor")),h.x=CANVAS_WIDTH/2-80,h.y=CANVAS_HEIGHT/2-130,b.addChild(h),g=createBitmap(s_oSpriteLibrary.getSprite("help_mouse")),g.x=CANVAS_WIDTH/2-10,g.y=CANVAS_HEIGHT/2-60,this.moveCursorRightDesktop(g),
b.addChild(g));s_oStage.addChild(b);c=200;l=40;new CTLText(e,CANVAS_WIDTH/2-c/2+51,CANVAS_HEIGHT/2-l/2-139,c,l,20,"center","#410701",FONT,1,2,2,TEXT_PLATFORM0,!0,!0,!0,!1);new CTLText(e,CANVAS_WIDTH/2-c/2+50,CANVAS_HEIGHT/2-l/2-140,c,l,20,"center","#ffb400",FONT,1,2,2,TEXT_PLATFORM0,!0,!0,!0,!1);c={images:[s_oSpriteLibrary.getSprite("platform_0")],framerate:28,frames:{width:PLATFORM_WIDTH,height:PLATFORM_HEIGHT,regX:0,regY:0},animations:{idle:[0,7,"idle"]}};c=new createjs.SpriteSheet(c);c=createSprite(c,
"idle",0,0,PLATFORM_WIDTH,PLATFORM_HEIGHT);c.x=CANVAS_WIDTH/2-200;c.y=CANVAS_HEIGHT/2-170;e.addChild(c);c=createBitmap(s_oSpriteLibrary.getSprite("dividing_line"));c.x=CANVAS_WIDTH/2-170;c.y=CANVAS_HEIGHT/2-115;e.addChild(c);c=200;l=40;new CTLText(e,CANVAS_WIDTH/2-c/2+51,CANVAS_HEIGHT/2-l/2-79,c,l,20,"center","#410701",FONT,1,2,2,TEXT_PLATFORM1,!0,!0,!0,!1);new CTLText(e,CANVAS_WIDTH/2-c/2+50,CANVAS_HEIGHT/2-l/2-80,c,l,20,"center","#ffb400",FONT,1,2,2,TEXT_PLATFORM1,!0,!0,!0,!1);c={images:[s_oSpriteLibrary.getSprite("platform_1")],
framerate:28,frames:{width:PLATFORM_WIDTH,height:PLATFORM_HEIGHT,regX:0,regY:0},animations:{idle:[0,7,"idle"]}};c=new createjs.SpriteSheet(c);c=createSprite(c,"idle",0,0,PLATFORM_WIDTH,PLATFORM_HEIGHT);c.x=CANVAS_WIDTH/2-200;c.y=CANVAS_HEIGHT/2-110;e.addChild(c);c=createBitmap(s_oSpriteLibrary.getSprite("dividing_line"));c.x=CANVAS_WIDTH/2-170;c.y=CANVAS_HEIGHT/2-55;e.addChild(c);c=200;l=40;new CTLText(e,CANVAS_WIDTH/2-c/2+51,CANVAS_HEIGHT/2-l/2-19,c,l,20,"center","#410701",FONT,1,2,2,TEXT_PLATFORM2,
!0,!0,!0,!1);new CTLText(e,CANVAS_WIDTH/2-c/2+50,CANVAS_HEIGHT/2-l/2-20,c,l,20,"center","#ffb400",FONT,1,2,2,TEXT_PLATFORM2,!0,!0,!0,!1);c={images:[s_oSpriteLibrary.getSprite("platform_2")],framerate:28,frames:{width:PLATFORM2_WIDTH,height:PLATFORM2_HEIGHT,regX:0,regY:0},animations:{idle:[0,8,"idle"]}};c=new createjs.SpriteSheet(c);c=createSprite(c,"idle",0,0,PLATFORM2_WIDTH,PLATFORM2_HEIGHT);c.x=CANVAS_WIDTH/2-213;c.y=CANVAS_HEIGHT/2-50;e.addChild(c);c=createBitmap(s_oSpriteLibrary.getSprite("dividing_line"));
c.x=CANVAS_WIDTH/2-170;c.y=CANVAS_HEIGHT/2+5;e.addChild(c);c=200;l=40;new CTLText(e,CANVAS_WIDTH/2-c/2+51,CANVAS_HEIGHT/2-l/2+41,c,l,20,"center","#410701",FONT,1,2,2,TEXT_PLATFORM3,!0,!0,!0,!1);new CTLText(e,CANVAS_WIDTH/2-c/2+50,CANVAS_HEIGHT/2-l/2+40,c,l,20,"center","#ffb400",FONT,1,2,2,TEXT_PLATFORM3,!0,!0,!0,!1);c={images:[s_oSpriteLibrary.getSprite("platform_3")],framerate:28,frames:{width:PLATFORM3_WIDTH,height:PLATFORM3_HEIGHT,regX:0,regY:0},animations:{idle:[0,10,"idle"]}};c=new createjs.SpriteSheet(c);
c=createSprite(c,"idle",0,0,PLATFORM3_WIDTH,PLATFORM3_HEIGHT);c.x=CANVAS_WIDTH/2-185;c.y=CANVAS_HEIGHT/2+20;e.addChild(c);c=createBitmap(s_oSpriteLibrary.getSprite("dividing_line"));c.x=CANVAS_WIDTH/2-170;c.y=CANVAS_HEIGHT/2+65;e.addChild(c);c=200;l=40;new CTLText(e,CANVAS_WIDTH/2-c/2+51,CANVAS_HEIGHT/2-l/2+100,c,l,20,"center","#410701",FONT,1,2,2,TEXT_SPRING,!0,!0,!0,!1);new CTLText(e,CANVAS_WIDTH/2-c/2+50,CANVAS_HEIGHT/2-l/2+99,c,l,20,"center","#ffb400",FONT,1,2,2,TEXT_SPRING,!0,!0,!0,!1);c={images:[s_oSpriteLibrary.getSprite("spring")],
framerate:10,frames:{width:SPRING_WIDTH,height:SPRING_HEIGHT,regX:0,regY:0},animations:{idle:[1,7,"idle"]}};c=new createjs.SpriteSheet(c);c=createSprite(c,"idle",0,0,SPRING_WIDTH,SPRING_HEIGHT);c.x=CANVAS_WIDTH/2-150;c.y=CANVAS_HEIGHT/2+83;e.addChild(c);c=createBitmap(s_oSpriteLibrary.getSprite("dividing_line"));c.x=CANVAS_WIDTH/2-170;c.y=CANVAS_HEIGHT/2+125;e.addChild(c);c=200;l=40;new CTLText(e,CANVAS_WIDTH/2-c/2+51,CANVAS_HEIGHT/2-l/2+158,c,l,20,"center","#410701",FONT,1,2,2,TEXT_COIN,!0,!0,!0,
!1);new CTLText(e,CANVAS_WIDTH/2-c/2+50,CANVAS_HEIGHT/2-l/2+157,c,l,20,"center","#ffb400",FONT,1,2,2,TEXT_COIN,!0,!0,!0,!1);c=s_oSpriteLibrary.getSprite("coin");c={images:[c],framerate:30,frames:{width:COIN_WIDTH,height:COIN_HEIGHT,regX:0,regY:0},animations:{idle:[0,19,"idle"]}};c=new createjs.SpriteSheet(c);c=createSprite(c,"idle",0,0,COIN_WIDTH,COIN_HEIGHT);c.x=CANVAS_WIDTH/2-145;c.y=CANVAS_HEIGHT/2+145;e.addChild(c);c=createBitmap(s_oSpriteLibrary.getSprite("dividing_line"));c.x=CANVAS_WIDTH/2-
170;c.y=CANVAS_HEIGHT/2+185;e.addChild(c);c=200;l=40;new CTLText(e,CANVAS_WIDTH/2-c/2+51,CANVAS_HEIGHT/2-l/2+221,c,l,20,"center","#410701",FONT,1,2,2,TEXT_WINGS,!0,!0,!0,!1);new CTLText(e,CANVAS_WIDTH/2-c/2+50,CANVAS_HEIGHT/2-l/2+220,c,l,20,"center","#ffb400",FONT,1,2,2,TEXT_WINGS,!0,!0,!0,!1);c=s_oSpriteLibrary.getSprite("wings");c={images:[c],framerate:28,frames:{width:WINGS_WIDTH,height:WINGS_HEIGHT,regX:0,regY:0},animations:{idle:[0,23,"idle"]}};c=new createjs.SpriteSheet(c);c=createSprite(c,
"idle",0,0,WINGS_WIDTH,WINGS_HEIGHT);c.x=CANVAS_WIDTH/2-195;c.y=CANVAS_HEIGHT/2+175;e.addChild(c);s_oStage.addChild(e);m=createBitmap(s_oSpriteLibrary.getSprite("but_skip"));m.x=CANVAS_WIDTH/2-200;m.y=CANVAS_HEIGHT/2+270;m.regX=30;m.regY=43;m.scaleX=-1;s_oStage.addChild(m);p=createBitmap(s_oSpriteLibrary.getSprite("but_skip"));p.x=CANVAS_WIDTH/2+200;p.y=CANVAS_HEIGHT/2+270;p.regX=30;p.regY=43;s_oStage.addChild(p);r=createBitmap(s_oSpriteLibrary.getSprite("but_next"));r.x=CANVAS_WIDTH/2-45;r.y=CANVAS_HEIGHT/
2+250;s_oStage.addChild(r);m.alpha=0;p.alpha=1;this.show()};this.moveCursorRightDesktop=function(c){var l=this;createjs.Tween.get(c).to({x:CANVAS_WIDTH/2+70},1E3).call(function(){l.moveCursorLeftDesktop(c)})};this.moveCursorLeftDesktop=function(c){var l=this;createjs.Tween.get(c).to({x:CANVAS_WIDTH/2-80},1E3).call(function(){l.moveCursorRightDesktop(c)})};this.moveCursorRight=function(c){var l=this;createjs.Tween.get(c).to({x:CANVAS_WIDTH/2},1E3).call(function(){l.moveCursorLeft(c)})};this.moveCursorLeft=
function(c){var l=this;createjs.Tween.get(c).to({x:CANVAS_WIDTH/2-55},1E3).call(function(){l.moveCursorRight(c)})};this._initListener=function(){m.addEventListener("click",this._previousPage);p.addEventListener("click",this._nextPage);r.addEventListener("click",this._onExit)};this._previousPage=function(){createjs.Tween.get(b).to({alpha:1},1E3).call(function(){});createjs.Tween.get(e).to({alpha:0},500).call(function(){});createjs.Tween.get(p).to({alpha:1},1E3).call(function(){});createjs.Tween.get(m).to({alpha:0},
500).call(function(){})};this._nextPage=function(){createjs.Tween.get(b).to({alpha:0},500).call(function(){});createjs.Tween.get(e).to({alpha:1},1E3).call(function(){});createjs.Tween.get(p).to({alpha:0},500).call(function(){});createjs.Tween.get(m).to({alpha:1},1E3).call(function(){})};this.show=function(){createjs.Tween.get(b).to({alpha:1},500).call(function(){a._initListener()})};this._onExit=function(){a.unload();s_oMain.gotoGame()};this.unload=function(){m.removeAllEventListeners("click");p.removeAllEventListeners("click");
createjs.Tween.removeAllTweens();s_oStage.removeAllChildren()};this._init();return this}
function CGame(a){var d=0,b=0,e=0,f,k=0,h,g=0,m=0,p,r=0,c=0,l=0,y=0,t=0,u=0,z,D=null,q=[],J,I,B,C,N,A=[[0],[0,0,0,0,1,1],[0,0,0,0,0,1,1,1,1,2,2,2,2],[1,1,1,2,2,2,2,2],[1,1,1,2,2,2,3,3,3,3],[1,2,2,2,3,3,3,3],[2,2,2,3,3,3]],Z,U=[],Q=[],P=[],V=[],M=[],ba=!1,aa=!1,S=!1,W=!0,n=!1,R=!1,X=!1,T=!1,F=!1,w,G=null,O=this,x,Y,L=null,K;this._init=function(){Z=HEIGHT_BETWEEN_OBJECT;h=CANVAS_HEIGHT-275;p=OBJECT_SPD;f=Z[0];$(s_oMain).trigger("start_level",1);m=Math.floor((CANVAS_HEIGHT+f)/f)+5;J=new createjs.Container;
s_oStage.addChild(J);x=new CScrollingBg(J);B=new createjs.Container;J.addChild(B);N=new createjs.Container;J.addChild(N);for(var v=0;v<MAX_PLATFORM_FOR_TYPE;v++)U.push(new CPlatform(-150,CANVAS_HEIGHT+150,0,N)),Q.push(new CPlatform(-150,CANVAS_HEIGHT+150,1,N)),P.push(new CPlatform(-150,CANVAS_HEIGHT+150,2,N)),V.push(new CPlatform(-150,CANVAS_HEIGHT+150,3,N)),q.push(new CBonus(-150,CANVAS_HEIGHT+150,COIN,N));this._controlIfAllReady();C=new createjs.Container;J.addChild(C);z=new CPlayer(C);w=new CInterface;
I=new createjs.Container;s_oStage.addChild(I);v=createBitmap(s_oSpriteLibrary.getSprite("help_touch"));v.x=CANVAS_WIDTH/2-30;v.y=CANVAS_HEIGHT/2-70;K=new createjs.Shape;K.graphics.beginFill("rgba(0,0,0,0.5)").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);var E=new createjs.Text(TEXT_START_GAME," 40px "+FONT,"#410701");E.x=CANVAS_WIDTH/2+2;E.y=CANVAS_HEIGHT/2-140;E.textAlign="center";E.textBaseline="alphabetic";E.lineWidth=500;var H=new createjs.Text(TEXT_START_GAME," 40px "+FONT,"#ffb400");H.x=CANVAS_WIDTH/
2;H.y=CANVAS_HEIGHT/2-142;H.textAlign="center";H.textBaseline="alphabetic";H.lineWidth=500;I.addChild(K,v,E,H);this.startSpeedIncrement();J.on("mousedown",this.setUpdateTrue);this._initMouseMove()};this._controlIfAllReady=function(){U.length===MAX_PLATFORM_FOR_TYPE&&(g+=U.length);Q.length===MAX_PLATFORM_FOR_TYPE&&(g+=Q.length);P.length===MAX_PLATFORM_FOR_TYPE&&(g+=P.length);V.length===MAX_PLATFORM_FOR_TYPE&&(g+=V.length);q.length===MAX_PLATFORM_FOR_TYPE&&(g+=q.length);if(g>=MAX_PLATFORM_FOR_TYPE*
(NUM_ELEMENTS-1))for(var v=0;v<m;v++)this._createRow();g=0};this._createRow=function(){if(7E3<=d){if(5===k)Y=new CCloud(h,2,B);else{var v=Math.floor(300*Math.random()+1);1===v&&(D=new CCloud(h,Math.floor(2*Math.random()),B))}k=6;f=Z[3]}else 5E3<=d&&7E3>d?(4===k&&(Y=new CCloud(h,1,B)),k=5):2500<=d&&5E3>d?(3===k&&(Y=new CCloud(h,0,B)),k=4,f=Z[2]):1500<=d&&2500>d?(k=3,f=Z[1]):k=1E3<=d&&1500>d?2:500<=d&&1E3>d?1:0;1500<=d&&null===L&&(v=Math.floor(300*Math.random()+1),1===v&&(L=new CCloud(h,3,B)));h-=f;
v=Math.random()*(CANVAS_WIDTH-PLATFORM_WIDTH);var E=h;var H=A[k][Math.floor(Math.random()*A[k].length)];2===H&&1>b?b++:2===H&&1<=b&&(H=1,b=0);M.push(this.getFirstAvailableObstacle(H));H=M.length-1;null!==M[H]?M[H].changeStatusOn(v,E):M.pop();c++;c>=NUM_PLATFORM_CREATED_FOR_SPRING&&(M[H].spawnSpring(),c=0);v=Math.floor(100*Math.random());v<=COIN_OCCUR&&y<q.length?(q[y].changeStatusOn(Math.random()*(CANVAS_WIDTH-COIN_WIDTH)+COIN_WIDTH,h-2*COIN_HEIGHT),y++):v<=BONUS_OCCUR&&!D&&!F&&(D=new CBonus(Math.random()*
(CANVAS_WIDTH-WINGS_WIDTH)+WINGS_WIDTH,h-WINGS_HEIGHT,WINGS,N))};this.getFirstAvailableObstacle=function(v){switch(v){case 0:return 0<U.length?(v=U.length-1,v=U[v],U.pop(),v):null;case 1:return 0<Q.length?(v=Q.length-1,v=Q[v],Q.pop(),v):null;case 2:return 0<P.length?(v=P.length-1,v=P[v],P.pop(),v):null;case 3:return 0<V.length?(v=V.length-1,v=V[v],V.pop(),v):null}};this._initMouseMove=function(){if(s_bCanOrientate)window.addEventListener("deviceorientation",function(v){v.gamma<GAMMA_RANGE_ACCEPTED&&
v.gamma>-GAMMA_RANGE_ACCEPTED?t=v.gamma/GAMMA_RANGE_ACCEPTED:(t=0>v.gamma?-1:1,u=PLAYER_ACCELERATION_GIROSCOPE)},!1);else s_oStage.on("stagemousemove",function(v){t=(v.stageX-CANVAS_HALF_WIDTH)/(CANVAS_HALF_WIDTH-CANVAS_WIDTH_RANGE_ACCEPTED);1<Math.abs(t)&&(t=1);v.stageX<CANVAS_HALF_WIDTH&&(t=-1*Math.abs(t));u=PLAYER_ACCELERATION_NO_GIROSCOPE})};this.setUpdateTrue=function(){ba||R||(createjs.Tween.get(I).to({alpha:0},500).call(function(){s_oStage.removeChild(I)}),J.off("mousedown",this.setUpdateTrue),
ba=X=!0,z.showJumpingAnimation(),z.moveUp())};this.moveObject=function(){var v=0;x.move(r,R);if(Y){var E=Y.move(r);E&&(Y=null)}L&&(E=L.move(r))&&(L=null);for(E=0;E<M.length;E++){M[E].move(p);W&&n&&(v=M[E].controlCollision(z.getRectangle()),0<v&&(W=!1,z.showReJumpAnimation(),X=!1));var H=this._controlIfPlatformOverCanvas(E);if(null!==H){switch(H.getType()){case 0:U.push(H);break;case 1:Q.push(H);break;case 2:P.push(H);break;case 3:V.push(H)}E--}}for(E=0;E<y;E++)if(q[E].move(p),q[E].controlCollision(z.getRectangle())||
this._controlIfCoinOverCanvas(E))H=q[E],this._controlIfCoinOverCanvas(E)&&q[E].changeStatusOff(),q.splice(E,1),y--,q.push(H),q[E].controlCollision(z.getRectangle())&&(d+=10);null!==D&&(D.move(p),D.controlCollision(z.getRectangle())&&(T=!0),this._controlIfBonusOverCanvas());0<v&&this.startSpeedIncrement(v)};this._controlIfPlatformOverCanvas=function(v){if(M[v].getY()>=CANVAS_HEIGHT&&v<M.length-1){M[v].changeStatusOff();var E=M[v];M.splice(v,1);e--;this._createRow();return E}return null};this._controlIfCoinOverCanvas=
function(v){if(q[v].getY()>=CANVAS_HEIGHT){if(v<q.length-1)return!0}else return!1};this._controlIfBonusOverCanvas=function(){D.getY()>=CANVAS_HEIGHT&&(D.unload(),D=null)};this.startSpeedIncrement=function(v){aa=!0;n=S=!1;p=OBJECT_SPD;switch(v){case PLATFORM:playSound("voice_jump_"+(Math.floor(2*Math.random())+1),1,!1);l=0;W=!1;break;case SPRING:l+=30;W=!1;break;case WINGS:l+=50,W=!1,F=!0,z.beGod()}};this.incrementSpeedObject=function(){p+=ACCELERATION;r=Math.round(p/7);!X&&0<=p&&z.showJumpingAnimation();
p>=OBJECT_SPD_MAX+l&&(l=0,aa=!1,S=!0,X=!1,n=!0)};this.decrementSpeedObject=function(){p-=DECELERATION;r=R?r-DECELERATION_BG_GAME_OVER:p/3;0>=p&&(F?(z.returnHero(),T=!1):(X||(z.showFallingAnimation(),X=!0),W=!0));this.controlIfGameOver()&&!R&&(z.playFallingAnimation(),z.moveDown(),playSound("voice_falling",1,!1),R=!0)};this.beGod=function(){D.unload();D=null;F||this.startSpeedIncrement(WINGS)};this.playerIsNoLongerGod=function(){F=!1};this.playerStunnedAnimation=function(){T||(!0!==R?(setTimeout(function(){playSound("death",
1,!1);z.playStunnedAnimation();createjs.Tween.get(s_oStage).to({x:Math.round(10*Math.random()),y:Math.round(30*Math.random())},50).call(function(){createjs.Tween.get(s_oStage).to({x:Math.round(8*Math.random()),y:-Math.round(24*Math.random())},50).call(function(){createjs.Tween.get(s_oStage).to({x:Math.round(6*Math.random()),y:Math.round(18*Math.random())},50).call(function(){createjs.Tween.get(s_oStage).to({x:Math.round(4*Math.random()),y:-Math.round(12*Math.random())},50).call(function(){createjs.Tween.get(s_oStage).to({x:Math.round(2*
Math.random()),y:Math.round(6*Math.random())},50).call(function(){createjs.Tween.get(s_oStage).to({x:Math.round(10*Math.random()),y:-Math.round(30*Math.random())},50).call(function(){createjs.Tween.get(s_oStage).to({y:0,x:0},50).call(function(){O.gameOver()})})})})})})})},400),z.moveDownWithoutAnimation()):(playSound("death",1,!1),z.playStunnedAnimation(),createjs.Tween.get(s_oStage).to({x:Math.round(10*Math.random()),y:Math.round(30*Math.random())},50).call(function(){createjs.Tween.get(s_oStage).to({x:Math.round(8*
Math.random()),y:-Math.round(24*Math.random())},50).call(function(){createjs.Tween.get(s_oStage).to({x:Math.round(6*Math.random()),y:Math.round(18*Math.random())},50).call(function(){createjs.Tween.get(s_oStage).to({x:Math.round(4*Math.random()),y:-Math.round(12*Math.random())},50).call(function(){createjs.Tween.get(s_oStage).to({x:Math.round(2*Math.random()),y:Math.round(6*Math.random())},50).call(function(){createjs.Tween.get(s_oStage).to({x:Math.round(10*Math.random()),y:-Math.round(30*Math.random())},
50).call(function(){createjs.Tween.get(s_oStage).to({y:0,x:0},50).call(function(){O.gameOver()})})})})})})})),ba=!1,R=!0)};this.controlIfGameOver=function(){return M[0].getY()+275<z.getY()?!0:!1};this.unload=function(){w.unload();null!==G&&G.unload();M=[];U=[];Q=[];P=[];V=[];q=[];createjs.Tween.removeAllTweens();s_oStage.removeAllChildren()};this.onExit=function(){this.unload();s_oMain.gotoMenu();$(s_oMain).trigger("end_level",1);$(s_oMain).trigger("show_interlevel_ad");$(s_oMain).trigger("end_session")};
this.onRestart=function(){this.unload();$(s_oMain).trigger("end_level",1);$(s_oMain).trigger("show_interlevel_ad");$(s_oMain).trigger("end_session");s_oMain.gotoGame()};this.gameOver=function(){G=CEndPanel(s_oSpriteLibrary.getSprite("msg_box"));G.show(d)};this.update=function(){ba&&(z._movePlayer(t,u),aa&&this.incrementSpeedObject(),S&&this.decrementSpeedObject(),this.moveObject(),h=M[M.length-1].getY(),!R&&0<d+r&&(d+=Math.floor(r),w.refreshScore(d)))};s_oGame=this;O=this;PLAYER_SPD_MAX=a.player_spd_max;
PLAYER_SPD_MIN=a.player_spd_min;PLAYER_ACCELERATION_NO_GIROSCOPE=a.player_acceleration_no_giroscope;PLAYER_ACCELERATION_GIROSCOPE=a.player_acceleration_giroscope;PLAYER_DECELERATION=a.player_deceleration;OBJECT_SPD=a.object_spd;OBJECT_SPD_ORIZZONTAL=a.object_spd_orizzontal;ACCELERATION=a.acceleration;DECELERATION=a.deceleration;DECELERATION_BG_GAME_OVER=a.deceleration_bg_game_over;OBJECT_SPD_MAX=a.object_spd_max;OBJECT_SPD_MIN=a.object_spd_min;HEIGHT_BETWEEN_OBJECT=a.height_between_object;GAMMA_RANGE_ACCEPTED=
a.gamma_range_accepted;CANVAS_WIDTH_RANGE_ACCEPTED=a.canvas_half_width_range_accepted;NUM_PLATFORM_CREATED_FOR_SPRING=a.num_platform_created_for_spring;BONUS_OCCUR=a.bonus_occurrence;COIN_OCCUR=a.coin_occurrence;this._init()}var s_oGame;
function CInterface(a){var d,b,e,f,k,h,g,m,p,r=null,c=null,l=null,y,t;this._init=function(u){u=s_oSpriteLibrary.getSprite("but_exit");k=CANVAS_WIDTH-u.height/2-10;h=u.height/2+10;m=new CGfxButton(k,h,u,s_oStage);m.addEventListener(ON_MOUSE_UP,this._onExit,this);e=k-u.width-10;f=u.height/2+10;!1===DISABLE_SOUND_MOBILE||!1===s_bMobile?(u=s_oSpriteLibrary.getSprite("audio_icon"),g=new CToggle(e,f,u,s_bAudioActive,s_oStage),g.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this),u=s_oSpriteLibrary.getSprite("but_fullscreen"),
d=e-u.width/2-10,b=f):(d=k-u.width-10,b=u.height/2+10);u=window.document;var z=u.documentElement;r=z.requestFullscreen||z.mozRequestFullScreen||z.webkitRequestFullScreen||z.msRequestFullscreen;c=u.exitFullscreen||u.mozCancelFullScreen||u.webkitExitFullscreen||u.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(r=!1);r&&screenfull.isEnabled&&(u=s_oSpriteLibrary.getSprite("but_fullscreen"),p=new CToggle(d,b,u,s_bFullscreen,s_oStage),p.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this));y=new createjs.Text("SCORE: 0",
" 40px "+FONT,"#410701");y.x=32;y.y=62;y.textAlign="left";y.textBaseline="alphabetic";y.lineWidth=400;s_oStage.addChild(y);t=new createjs.Text("SCORE: 0"," 40px "+FONT,"#ffb400");t.x=30;t.y=60;t.textAlign="left";t.textBaseline="alphabetic";t.lineWidth=400;s_oStage.addChild(t);this.refreshButtonPos(s_iOffsetX,s_iOffsetY)};this.refreshScore=function(u,z){y.text="SCORE: "+u;t.text="SCORE: "+u};this.unload=function(){if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)g.unload(),g=null;r&&screenfull.isEnabled&&
p.unload();m.unload();null!==l&&l.unload();s_oInterface=null};this.refreshButtonPos=function(u,z){m.setPosition(k-u,z+h);!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||g.setPosition(e-u,z+f);r&&screenfull.isEnabled&&p.setPosition(d-s_iOffsetX,b+s_iOffsetY);y.y=60+z;t.y=60+z};this._onButHelpRelease=function(){l=new CHelpPanel};this.onExitFromHelp=function(){l.unload()};this._onAudioToggle=function(){Howler.mute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this._onExit=function(){s_oGame.onExit()};this.resetFullscreenBut=
function(){r&&screenfull.isEnabled&&p.setActive(s_bFullscreen)};this._onFullscreenRelease=function(){s_bFullscreen?c.call(window.document):r.call(window.document.documentElement);sizeHandler()};s_oInterface=this;this._init(a);return this}var s_oInterface=null;
function CEndPanel(a){var d,b,e,f,k,h,g,m,p=this;this._init=function(r){d=createBitmap(r);d.x=0;d.y=0;r={images:[s_oSpriteLibrary.getSprite("stunned")],framerate:40,frames:{width:PLAYER_STUNNED_WIDTH,height:PLAYER_STUNNED_HEIGHT,regX:0,regY:0},animations:{falled:[0,2,"idle"],idle:[3,27,"idle"]}};r=new createjs.SpriteSheet(r);r=createSprite(r,"falled",0,0,PLAYER_STUNNED_WIDTH,PLAYER_STUNNED_HEIGHT);r.x=CANVAS_WIDTH/2;r.y=CANVAS_HEIGHT/2-10;r.regX=PLAYER_STUNNED_WIDTH/2;r.regY=PLAYER_STUNNED_HEIGHT/
2;r.scaleX=1.2;r.scaleY=1.2;b=new createjs.Container;b.alpha=0;b.visible=!1;var c=390,l=80;e=new CTLText(b,CANVAS_WIDTH/2-c/2+2,CANVAS_HEIGHT/2-l/2-52,c,l,70,"center","#410701",FONT,1,2,2,"",!0,!0,!0,!1);f=new CTLText(b,CANVAS_WIDTH/2-c/2,CANVAS_HEIGHT/2-l/2-52,c,l,70,"center","#ffb400",FONT,1,2,2,"",!0,!0,!0,!1);c=300;l=60;k=new CTLText(b,CANVAS_WIDTH/2-c/2+2,CANVAS_HEIGHT/2-l/2+112,c,l,40,"center","#410701",FONT,1,2,2,"",!0,!0,!0,!1);h=new CTLText(b,CANVAS_WIDTH/2-c/2,CANVAS_HEIGHT/2-l/2+112,c,
l,40,"center","#ffb400",FONT,1,2,2,"",!0,!0,!0,!1);g=createBitmap(s_oSpriteLibrary.getSprite("but_restart"));g.x=CANVAS_WIDTH/2+15;g.y=CANVAS_HEIGHT/2+160;m=createBitmap(s_oSpriteLibrary.getSprite("but_home"));m.x=CANVAS_WIDTH/2-105;m.y=CANVAS_HEIGHT/2+160;b.addChild(d,r,g,m);s_oStage.addChild(b)};this.unload=function(){m.off("mousedown",this._onExit);g.off("mousedown",this._onRestart)};this._initListener=function(){m.on("mousedown",this._onExit);g.on("mousedown",this._onRestart)};this.show=function(r){setVolume("soundtrack",
0);playSound("game_over",1,!1);e.refreshText(TEXT_GAMEOVER);f.refreshText(TEXT_GAMEOVER);k.refreshText(TEXT_SCORE+r);h.refreshText(TEXT_SCORE+r);b.visible=!0;createjs.Tween.get(b).to({alpha:1},500).call(function(){p._initListener()});$(s_oMain).trigger("share_event",[r]);$(s_oMain).trigger("save_score",[r])};this._onExit=function(){p.unload();s_oStage.removeChild(b);s_oGame.onExit();stopSound("game_over");stopSound("death")};this._onRestart=function(){p.unload();s_oStage.removeChild(b);s_oGame.onRestart();
stopSound("game_over");setVolume("soundtrack",1);stopSound("death")};this._init(a);return this}
function CPlayer(a){var d,b,e,f,k=0,h,g,m,p,r,c,l=!1,y=!1,t=!1;this._init=function(u){var z=s_oSpriteLibrary.getSprite("player");z.x=PLAYER_X_START;z.y=PLAYER_Y_START;z=new createjs.SpriteSheet({images:[z],framerate:40,frames:{width:PLAYER_WIDTH,height:PLAYER_HEIGHT,regX:0,regY:0},animations:{idle:[0],jumping:[1,3,"inTheAir"],inTheAir:[4,10,"inTheAir"],falling:[11,12,"falling_idle"],falling_idle:[13,19,"falling_idle"],rejumping:[20,23,"inTheAir"]}});h=createSprite(z,"idle",0,0,PLAYER_WIDTH,PLAYER_HEIGHT);
h.x=PLAYER_X_START;h.y=PLAYER_Y_START;h.regX=PLAYER_WIDTH/2;h.regY=PLAYER_HEIGHT/2;u.addChild(h);d=h.x-h.regX+20;b=h.y+20;e=PLAYER_WIDTH-45;f=PLAYER_HEIGHT-PLAYER_HEIGHT/2-30;r=new createjs.Rectangle(d,b,e,f)};this.flipSprite=function(u){u===GOING_LEFT?l?g.scaleX-=2:h.scaleX-=2:u===GOING_RIGHT&&(l?g.scaleX+=2:h.scaleX+=2)};this.showJumpingAnimation=function(){h.gotoAndPlay("jumping");c="jumping"};this.showReJumpAnimation=function(){h.gotoAndPlay("rejumping");c="rejumping"};this.showFallingAnimation=
function(){h.gotoAndPlay("falling");c="falling"};this.playStunnedAnimation=function(){y?m.visible=!1:h.visible=!1;var u={images:[s_oSpriteLibrary.getSprite("stunned")],framerate:40,frames:{width:PLAYER_STUNNED_WIDTH,height:PLAYER_STUNNED_HEIGHT,regX:0,regY:0},animations:{falled:[0,2,"idle"],idle:[3,27,"idle"]}};u=new createjs.SpriteSheet(u);p=createSprite(u,"falled",0,0,PLAYER_STUNNED_WIDTH,PLAYER_STUNNED_HEIGHT);y?(p.x=m.x,p.y=m.y):(p.x=h.x,p.y=h.y);p.regX=PLAYER_STUNNED_WIDTH/2;p.regY=PLAYER_STUNNED_HEIGHT/
2;a.addChild(p)};this.playFallingAnimation=function(){h.visible=!1;var u={images:[s_oSpriteLibrary.getSprite("falling")],framerate:20,frames:{width:PLAYER_FALLING_WIDTH,height:PLAYER_FALLING_HEIGHT,regX:0,regY:0},animations:{fear:[0,1,"idle"],idle:[1,4,"idle"]}};u=new createjs.SpriteSheet(u);m=createSprite(u,"fear",0,0,PLAYER_FALLING_WIDTH,PLAYER_FALLING_HEIGHT);m.x=h.x;m.y=h.y;m.regX=PLAYER_FALLING_WIDTH/2;m.regY=PLAYER_FALLING_HEIGHT/2;a.addChild(m);y=!0};this.refreshRectangle=function(){l||y?y?
(d=m.x-h.regX+20,b=m.y+20,e=PLAYER_WIDTH-45,f=PLAYER_HEIGHT-PLAYER_HEIGHT/2-30):l&&(d=g.x-h.regX+20,b=g.y+20,e=PLAYER_WIDTH-45,f=PLAYER_HEIGHT-PLAYER_HEIGHT/2-20):(d=h.x-h.regX+20,b=h.y+20,e=PLAYER_WIDTH-45,f=PLAYER_HEIGHT-PLAYER_HEIGHT/2-30);r.setValues(d,b,e,f)};this.beGod=function(){if(!l){playSound("wings",1,!1);h.visible=!1;var u={images:[s_oSpriteLibrary.getSprite("god")],framerate:40,frames:{width:PLAYER_GOD_WIDTH,height:PLAYER_GOD_HEIGHT,regX:0,regY:0},animations:{beingGod:[0,7,"idle"],idle:[8,
15,"idle"],returningHero:[7,6,5,4,3,2,1,0]}};u=new createjs.SpriteSheet(u);g=createSprite(u,"beingGod",0,0,PLAYER_GOD_WIDTH,PLAYER_GOD_HEIGHT);g.x=h.x;g.y=h.y;g.regX=PLAYER_GOD_WIDTH/2;g.regY=PLAYER_GOD_HEIGHT/2;a.addChild(g);g.scaleX=h.scaleX;d=h.x-h.regX+20;b=h.y+20;e=PLAYER_WIDTH-45;f=PLAYER_HEIGHT-PLAYER_HEIGHT/2-20;r=new createjs.Rectangle(d,b,e,f);l=!0}};this.returnHero=function(){g.gotoAndPlay("returningHero");createjs.Tween.get(g).to({alpha:0},300).call(function(){a.removeChild(g);g=null;
l=!1;s_oGame.playerIsNoLongerGod()});h.scaleX=g.scaleX;h.x=g.x;h.visible=!0};this._movePlayer=function(u,z){k+=z*u;0>k?(k<-PLAYER_SPD_MAX&&(k=-PLAYER_SPD_MAX),t||(t=!0,this.flipSprite(GOING_LEFT))):0<k&&(k>PLAYER_SPD_MAX&&(k=PLAYER_SPD_MAX),t&&(t=!1,this.flipSprite(GOING_RIGHT)));this.addSpeedToPlayer(k);0<k?(k-=PLAYER_DECELERATION,0>k&&(k=0)):0>k&&(k+=PLAYER_DECELERATION,0<k&&(k=0));this.getX()>CANVAS_WIDTH?this.setPos(0):0>this.getX()&&this.setPos(CANVAS_WIDTH)};this.addSpeedToPlayer=function(u){l?
y?m.x+=u:l&&null!==g&&(g.x+=u):h.x+=u;this.refreshRectangle()};this.setPos=function(u){l?null!==g&&(g.x=u):h.x=u;this.refreshRectangle()};this.moveUp=function(){createjs.Tween.get(h).to({y:PLAYER_Y_START-100},1E3).call(function(){})};this.moveDown=function(){createjs.Tween.get(m).to({y:PLAYER_Y_START},200).call(function(){})};this.moveDownWithoutAnimation=function(){createjs.Tween.get(h).to({y:PLAYER_Y_START},300).call(function(){})};this.returnState=function(){return c};this.getRectangle=function(){return r};
this.getSprite=function(){return h};this.getX=function(){if(!l)return h.x;if(null!==g)return g.x};this.getY=function(){return h.y};this._init(a)}
function CPlatform(a,d,b,e){var f,k,h,g,m,p,r=!0,c=!1,l=!1,y=!1,t,u,z;this._init=function(){m=a;p=d;var D=s_oSpriteLibrary.getSprite("platform_"+b),q=28+Math.floor(2*Math.random()+1);0===b||1===b?(D={images:[D],framerate:q,frames:{width:PLATFORM_WIDTH,height:PLATFORM_HEIGHT,regX:0,regY:0},animations:{idle:[0,7,"idle"]}},D=new createjs.SpriteSheet(D),t=createSprite(D,"idle",0,0,PLATFORM_WIDTH,PLATFORM_HEIGHT),t.x=m,t.y=p,f=t.x+30,k=t.y+10,h=PLATFORM_WIDTH-75,g=PLATFORM_HEIGHT-35):2===b?(D={images:[D],
framerate:q,frames:{width:PLATFORM2_WIDTH,height:PLATFORM2_HEIGHT,regX:0,regY:0},animations:{idle:[0,8,"idle"],breaking:[9,15,"disable"],disable:[16]}},D=new createjs.SpriteSheet(D),t=createSprite(D,"idle",0,0,PLATFORM2_WIDTH,PLATFORM2_HEIGHT),t.x=m,t.y=p,f=t.x+45,k=t.y+10,h=PLATFORM_WIDTH-75,g=PLATFORM_HEIGHT-35):3===b&&(D={images:[D],framerate:q,frames:{width:PLATFORM3_WIDTH,height:PLATFORM3_HEIGHT,regX:0,regY:0},animations:{idle:[0,10,"idle"],vanishing:[11,23]}},D=new createjs.SpriteSheet(D),t=
createSprite(D,"idle",0,0,PLATFORM3_WIDTH,PLATFORM3_HEIGHT),t.x=m,t.y=p,f=t.x+20,k=t.y,h=PLATFORM_WIDTH-75,g=PLATFORM_HEIGHT-35);e.addChild(t);t.stop();t.visible=!1;u=new createjs.Rectangle(f,k,h,g);2>b&&(z=new CSpring(a+PLATFORM_WIDTH/2,p,b,e,SPRING),z.setVisibleFalse())};this.controlCollision=function(D){if(l&&r){if(z.controlCollision(D))return createjs.Tween.get(t).wait(400).call(function(){r=!0}),SPRING;if(u.intersection(D))return createjs.Tween.get(t).wait(400).call(function(){r=!0}),PLATFORM}else{if(u.intersects(D)&&
2>b&&r)return r=!1,createjs.Tween.get(t).wait(400).call(function(){r=!0}),PLATFORM;if(u.intersects(D)&&2===b&&r)playSound("platform_2_broken",1,!1),t.gotoAndPlay("breaking"),r=!1;else if(u.intersects(D)&&3===b&&r)return playSound("platform_3_wind",1,!1),t.gotoAndPlay("vanishing"),createjs.Tween.get(t).to({alpha:0},400).call(function(){}),r=!1,PLATFORM}};this.setInvisible=function(){t.visible=!1};this.move=function(D){t.y+=D;1===b&&this.moveOrizzontal();l&&z.move(D);this.refreshRectangle()};this.moveOrizzontal=
function(){y&&(t.x<CANVAS_WIDTH-100-PLATFORM_WIDTH/2&&!c?(l&&z.moveOrizzontal(OBJECT_SPD_ORIZZONTAL),t.x+=OBJECT_SPD_ORIZZONTAL):t.x>=CANVAS_WIDTH-100-PLATFORM_WIDTH/2&&(c=!0),t.x>100-PLATFORM_WIDTH/2&&c?(l&&z.moveOrizzontal(-OBJECT_SPD_ORIZZONTAL),t.x-=OBJECT_SPD_ORIZZONTAL):t.x<=100-PLATFORM_WIDTH/2&&(c=!1))};this.refreshRectangle=function(){switch(b){case 0:case 1:f=t.x+33;k=t.y+10;h=PLATFORM_WIDTH-75;g=PLATFORM_HEIGHT-35;break;case 2:f=t.x+45;k=t.y+10;h=PLATFORM_WIDTH-75;g=PLATFORM_HEIGHT-35;
break;case 3:f=t.x+20,k=t.y,h=PLATFORM_WIDTH-75,g=PLATFORM_HEIGHT-35}u.setValues(f,k,h,g)};this.changeStatusOn=function(D,q){t.x=D;t.y=q;t.visible=!0;t.alpha=1;t.play();r=y=!0};this.changeStatusOff=function(){t.x=-150;t.y=CANVAS_HEIGHT+150;t.gotoAndPlay("idle");t.stop();r=y=t.visible=!1;l&&(z.setVisibleFalse(t.x+PLATFORM_WIDTH/2,t.y),l=!1)};this.spawnSpring=function(){2>b&&1===Math.round(2*Math.random())-1&&(z.setVisibleTrue(t.x+PLATFORM_WIDTH/2,t.y),l=!0)};this.getRectangle=function(){return u};
this.getType=function(){return b};this.getY=function(){return t.y};this.getX=function(){return t.x};this.unload=function(){e.removeChild(t);z=t=null};this._init()}
function CSpring(a,d,b,e,f){var k,h,g,m,p,r,c;this._init=function(){p=b;if(f===SPRING){var l={images:[s_oSpriteLibrary.getSprite("spring")],frames:{width:SPRING_WIDTH,height:SPRING_HEIGHT,regX:SPRING_WIDTH/2,regY:SPRING_HEIGHT/2},animations:{idle:[0],hitted:[1,7]}};l=new createjs.SpriteSheet(l);r=createSprite(l,"idle",0,0,SPRING_WIDTH,SPRING_HEIGHT);r.x=a;r.y=d;r.rotation=0;e.addChild(r);k=r.x-SPRING_WIDTH/2;h=r.y-SPRING_HEIGHT/2;g=SPRING_WIDTH;m=SPRING_HEIGHT;c=new createjs.Rectangle(k,h,g,m)}};
this.controlCollision=function(l){return null!==c.intersection(l)?(r.gotoAndPlay("hitted"),playSound("spring",1,!1),!0):!1};this.setVisibleFalse=function(){r.visible=!1;r.gotoAndStop(0)};this.setVisibleTrue=function(l,y){r.visible=!0;r.x=l;r.y=y};this.move=function(l){r.y+=l;this.refreshRectangle()};this.refreshRectangle=function(){k=r.x-SPRING_WIDTH/2;h=r.y-SPRING_HEIGHT/2;g=SPRING_WIDTH;m=SPRING_HEIGHT;c.setValues(k,h,g,m)};this.moveOrizzontal=function(l){r.x+=l};this.getRectangle=function(){return c};
this.getType=function(){return p};this.getY=function(){return r.y};this.getX=function(){return r.x};this.unload=function(){};this._init()}
function CBonus(a,d,b,e){var f,k,h,g,m,p,r=!0,c,l;this._init=function(y,t){m=y;p=t;if(b===COIN){var u={images:[s_oSpriteLibrary.getSprite("coin")],framerate:30,frames:{width:COIN_WIDTH,height:COIN_HEIGHT,regX:0,regY:0},animations:{idle:[0,19,"idle"]}};u=new createjs.SpriteSheet(u);c=createSprite(u,"idle",0,0,COIN_WIDTH,COIN_HEIGHT);c.x=m>=CANVAS_WIDTH/2?m-COIN_WIDTH:m+COIN_WIDTH;c.y=p;e.addChild(c);f=c.x;k=c.y;h=COIN_WIDTH;g=2*COIN_HEIGHT;l=new createjs.Rectangle(f,k,h,g)}else b===WINGS&&(u={images:[s_oSpriteLibrary.getSprite("wings")],
framerate:30,frames:{width:WINGS_WIDTH,height:WINGS_HEIGHT,regX:0,regY:0},animations:{idle:[0,23,"idle"]}},u=new createjs.SpriteSheet(u),c=createSprite(u,"idle",0,0,WINGS_WIDTH,WINGS_HEIGHT),c.x=m>=CANVAS_WIDTH/2?m-WINGS_WIDTH:m+WINGS_WIDTH,c.y=p,e.addChild(c),f=c.x,k=c.y,h=WINGS_WIDTH,g=WINGS_HEIGHT,l=new createjs.Rectangle(f,k,h,g))};this.controlCollision=function(y){var t=this;if(null!==l.intersection(y)&&r&&b===COIN)return createjs.Tween.get(c).to({x:CANVAS_WIDTH/2-200,y:100,alpha:0},3E3,createjs.Ease.elasticOut).call(function(){this.alpha=
0;t.changeStatusOff()}),playSound("money",1,!1),r=!1,!0;if(null!==l.intersection(y)&&r&&b===WINGS)return playSound("power_up",1,!1),createjs.Tween.get(c).to({x:y.x,y:y.y-50},400).call(function(){this.alpha=0;s_oGame.beGod()}),r=!1,!0};this.changeStatusOn=function(y,t){c.x=y;c.y=t;c.visible=!0;c.alpha=1;c.play();this.refreshRectangle();r=!0};this.changeStatusOff=function(){c.x=-150;c.y=CANVAS_HEIGHT+150;c.visible=!1;c.stop();this.refreshRectangle()};this.setInvisible=function(){c.visible=!1};this.move=
function(y){c.y+=y;this.refreshRectangle()};this.refreshRectangle=function(){switch(b){case COIN:f=c.x;k=c.y;h=COIN_WIDTH;g=2*COIN_HEIGHT;break;case WINGS:f=c.x,k=c.y,h=WINGS_WIDTH,g=WINGS_HEIGHT}l.setValues(f,k,h,g)};this.getRectangle=function(){return l};this.getY=function(){return c.y};this.getX=function(){return c.x};this.unload=function(){e.removeChild(c);c=null};this._init(a,d)}
function CScrollingBg(a){var d=null,b=null,e=null,f=null,k=1,h=!1;this._init=function(){var g=s_oSpriteLibrary.getSprite("bg_scroll_1");d=createBitmap(g);a.addChild(d);a.setChildIndex(d,BG_INDEX);g=s_oSpriteLibrary.getSprite("bg_scroll_2");b=createBitmap(g);b.y=-CANVAS_HEIGHT;a.addChild(b);a.setChildIndex(b,BG_INDEX);g=s_oSpriteLibrary.getSprite("bg_scroll_3");e=createBitmap(g);e.y=2*-CANVAS_HEIGHT;a.addChild(e);a.setChildIndex(e,BG_INDEX);g=s_oSpriteLibrary.getSprite("bg_scroll_3");f=createBitmap(g);
f.y=3*-CANVAS_HEIGHT;a.addChild(f);a.setChildIndex(f,BG_INDEX)};this.move=function(g,m){d.y>=CANVAS_HEIGHT&&(k=2);b.y>=CANVAS_HEIGHT&&(k=3);e.y<=-CANVAS_HEIGHT&&3<=k&&(k=3,e.y=f.y+CANVAS_HEIGHT);e.y>=CANVAS_HEIGHT&&3<=k&&(k=3,e.y=f.y-CANVAS_HEIGHT);f.y<=-CANVAS_HEIGHT&&3<=k&&(k=4,f.y=e.y+CANVAS_HEIGHT);f.y>=CANVAS_HEIGHT&&3<=k&&(k=4,f.y=e.y-CANVAS_HEIGHT);d.y+=g;b.y+=g;e.y+=g;f.y+=g;m&&!h&&4===k?(e.y=f.y+CANVAS_HEIGHT,b.y=e.y+CANVAS_HEIGHT,d.y=e.y+2*CANVAS_HEIGHT,h=!0):m&&!h&&3===k&&(f.y=e.y+CANVAS_HEIGHT,
b.y=f.y+CANVAS_HEIGHT,d.y=f.y+2*CANVAS_HEIGHT,h=!0);0>=d.y&&s_oGame.playerStunnedAnimation()};this._init()}
function CCloud(a,d,b){var e,f,k=0,h=0,g;this._init=function(){e=Math.random()*CANVAS_WIDTH;f=a-600;h=1*Math.random();3>d?(g=createBitmap(s_oSpriteLibrary.getSprite("god_cloud_"+d)),g.scaleX=h,g.scaleY=h,g.alpha=.7):(g=createBitmap(s_oSpriteLibrary.getSprite("clouds_in_overlay")),g.scaleX=1,g.scaleY=1,g.alpha=.9);g.x=e;g.y=f;b.addChild(g);g.x<=CANVAS_WIDTH/2?(k=GOING_LEFT,3>d&&(g.scaleX=-g.scaleX)):k=GOING_RIGHT};this.move=function(m){g.y+=m;this.moveOrizzontal();return g.y>=CANVAS_HEIGHT+50?(this.unload(),
!0):!1};this.moveOrizzontal=function(){g.x=k===GOING_LEFT?g.x+1*h:g.x-1*h};this.getType=function(){return d};this.getY=function(){return g.y};this.getX=function(){return g.x};this.unload=function(){b.removeChild(g);g=null};this._init()}
function CCreditsPanel(){var a,d,b,e,f,k,h,g;this._init=function(){e=new createjs.Container;s_oStage.addChild(e);b=new createjs.Shape;b.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);a=b.on("click",function(){});b.alpha=0;e.addChild(b);f=new createjs.Container;e.addChild(f);var m=s_oSpriteLibrary.getSprite("msg_box");g=createBitmap(m);d=g.on("click",this._onLogoButRelease);f.addChild(g);var p=new createjs.Text(TEXT_DEVELOPED," 50px "+FONT,"#410701");p.x=m.width/2+2;p.y=m.height/
2-8;p.textAlign="center";p.textBaseline="middle";p.lineWidth=600;f.addChild(p);p=new createjs.Text(TEXT_DEVELOPED," 50px "+FONT,"#ffb400");p.x=m.width/2;p.y=m.height/2-10;p.textAlign="center";p.textBaseline="middle";p.lineWidth=600;f.addChild(p);p=new createjs.Text("www.codethislab.com"," 40px "+FONT,"#410701");p.x=m.width/2;p.y=m.height/2+152;p.textAlign="center";p.textBaseline="middle";p.lineWidth=600;f.addChild(p);p=new createjs.Text("www.codethislab.com"," 40px "+FONT,"#ffb400");p.x=m.width/2;
p.y=m.height/2+150;p.textAlign="center";p.textBaseline="middle";p.lineWidth=600;f.addChild(p);p=s_oSpriteLibrary.getSprite("ctl_logo");h=createBitmap(p);h.x=m.width/2;h.y=m.height/2+70;h.regX=p.width/2;h.regY=p.height/2;f.addChild(h);p=s_oSpriteLibrary.getSprite("but_exit");k=new CGfxButton(470,350,p,f);k.addEventListener(ON_MOUSE_UP,this.unload,this);f.regX=m.width/2;f.regY=m.height/2;f.x=CANVAS_WIDTH/2;f.y=-m.height;createjs.Tween.get(b).to({alpha:.7},1E3,createjs.Ease.cubicOut);createjs.Tween.get(f).to({y:CANVAS_HEIGHT/
2},1E3,createjs.Ease.bounceOut)};this.unload=function(){s_oStage.removeChild(e);k.unload();b.off("click",a);g.off("click",d)};this._onLogoButRelease=function(){window.open("http://www.codethislab.com/index.php?&l=en")};this._init()};