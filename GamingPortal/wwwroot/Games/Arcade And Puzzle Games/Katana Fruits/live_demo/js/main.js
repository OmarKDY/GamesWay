/*
 TweenJS
 Visit http://createjs.com/ for documentation, updates and examples.

 Copyright (c) 2010 gskinner.com, inc.

 Permission is hereby granted, free of charge, to any person
 obtaining a copy of this software and associated documentation
 files (the "Software"), to deal in the Software without
 restriction, including without limitation the rights to use,
 copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the
 Software is furnished to do so, subject to the following
 conditions:

 The above copyright notice and this permission notice shall be
 included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.
 Platform.js <https://mths.be/platform>
 Copyright 2014-2018 Benjamin Tan <https://bnjmnt4n.now.sh/>
 Copyright 2011-2013 John-David Dalton
 Available under MIT license <https://mths.be/mit>
*/
this.createjs=this.createjs||{};createjs.extend=function(a,f){function b(){this.constructor=a}b.prototype=f.prototype;return a.prototype=new b};this.createjs=this.createjs||{};createjs.promote=function(a,f){var b=a.prototype,d=Object.getPrototypeOf&&Object.getPrototypeOf(b)||b.__proto__;if(d){b[(f+="_")+"constructor"]=d.constructor;for(var c in d)b.hasOwnProperty(c)&&"function"==typeof d[c]&&(b[f+c]=d[c])}return a};this.createjs=this.createjs||{};
createjs.deprecate=function(a,f){return function(){var b="Deprecated property or method '"+f+"'. See docs for info.";console&&(console.warn?console.warn(b):console.log(b));return a&&a.apply(this,arguments)}};this.createjs=this.createjs||{};
(function(){function a(b,d,c){this.type=b;this.currentTarget=this.target=null;this.eventPhase=0;this.bubbles=!!d;this.cancelable=!!c;this.timeStamp=(new Date).getTime();this.removed=this.immediatePropagationStopped=this.propagationStopped=this.defaultPrevented=!1}var f=a.prototype;f.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0};f.stopPropagation=function(){this.propagationStopped=!0};f.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=
!0};f.remove=function(){this.removed=!0};f.clone=function(){return new a(this.type,this.bubbles,this.cancelable)};f.set=function(b){for(var d in b)this[d]=b[d];return this};f.toString=function(){return"[Event (type="+this.type+")]"};createjs.Event=a})();this.createjs=this.createjs||{};
(function(){function a(){this._captureListeners=this._listeners=null}var f=a.prototype;a.initialize=function(b){b.addEventListener=f.addEventListener;b.on=f.on;b.removeEventListener=b.off=f.removeEventListener;b.removeAllEventListeners=f.removeAllEventListeners;b.hasEventListener=f.hasEventListener;b.dispatchEvent=f.dispatchEvent;b._dispatchEvent=f._dispatchEvent;b.willTrigger=f.willTrigger};f.addEventListener=function(b,d,c){var e=c?this._captureListeners=this._captureListeners||{}:this._listeners=
this._listeners||{};var g=e[b];g&&this.removeEventListener(b,d,c);(g=e[b])?g.push(d):e[b]=[d];return d};f.on=function(b,d,c,e,g,h){d.handleEvent&&(c=c||d,d=d.handleEvent);c=c||this;return this.addEventListener(b,function(m){d.call(c,m,g);e&&m.remove()},h)};f.removeEventListener=function(b,d,c){if(c=c?this._captureListeners:this._listeners){var e=c[b];if(e)for(var g=0,h=e.length;g<h;g++)if(e[g]==d){1==h?delete c[b]:e.splice(g,1);break}}};f.off=f.removeEventListener;f.removeAllEventListeners=function(b){b?
(this._listeners&&delete this._listeners[b],this._captureListeners&&delete this._captureListeners[b]):this._listeners=this._captureListeners=null};f.dispatchEvent=function(b,d,c){if("string"==typeof b){var e=this._listeners;if(!(d||e&&e[b]))return!0;b=new createjs.Event(b,d,c)}else b.target&&b.clone&&(b=b.clone());try{b.target=this}catch(g){}if(b.bubbles&&this.parent){c=this;for(d=[c];c.parent;)d.push(c=c.parent);e=d.length;for(c=e-1;0<=c&&!b.propagationStopped;c--)d[c]._dispatchEvent(b,1+(0==c));
for(c=1;c<e&&!b.propagationStopped;c++)d[c]._dispatchEvent(b,3)}else this._dispatchEvent(b,2);return!b.defaultPrevented};f.hasEventListener=function(b){var d=this._listeners,c=this._captureListeners;return!!(d&&d[b]||c&&c[b])};f.willTrigger=function(b){for(var d=this;d;){if(d.hasEventListener(b))return!0;d=d.parent}return!1};f.toString=function(){return"[EventDispatcher]"};f._dispatchEvent=function(b,d){var c,e,g=2>=d?this._captureListeners:this._listeners;if(b&&g&&(e=g[b.type])&&(c=e.length)){try{b.currentTarget=
this}catch(m){}try{b.eventPhase=d|0}catch(m){}b.removed=!1;e=e.slice();for(g=0;g<c&&!b.immediatePropagationStopped;g++){var h=e[g];h.handleEvent?h.handleEvent(b):h(b);b.removed&&(this.off(b.type,h,1==d),b.removed=!1)}}2===d&&this._dispatchEvent(b,2.1)};createjs.EventDispatcher=a})();this.createjs=this.createjs||{};
(function(){function a(){throw"Ticker cannot be instantiated.";}a.RAF_SYNCHED="synched";a.RAF="raf";a.TIMEOUT="timeout";a.timingMode=null;a.maxDelta=0;a.paused=!1;a.removeEventListener=null;a.removeAllEventListeners=null;a.dispatchEvent=null;a.hasEventListener=null;a._listeners=null;createjs.EventDispatcher.initialize(a);a._addEventListener=a.addEventListener;a.addEventListener=function(){!a._inited&&a.init();return a._addEventListener.apply(a,arguments)};a._inited=!1;a._startTime=0;a._pausedTime=
0;a._ticks=0;a._pausedTicks=0;a._interval=50;a._lastTime=0;a._times=null;a._tickTimes=null;a._timerId=null;a._raf=!0;a._setInterval=function(d){a._interval=d;a._inited&&a._setupTick()};a.setInterval=createjs.deprecate(a._setInterval,"Ticker.setInterval");a._getInterval=function(){return a._interval};a.getInterval=createjs.deprecate(a._getInterval,"Ticker.getInterval");a._setFPS=function(d){a._setInterval(1E3/d)};a.setFPS=createjs.deprecate(a._setFPS,"Ticker.setFPS");a._getFPS=function(){return 1E3/
a._interval};a.getFPS=createjs.deprecate(a._getFPS,"Ticker.getFPS");try{Object.defineProperties(a,{interval:{get:a._getInterval,set:a._setInterval},framerate:{get:a._getFPS,set:a._setFPS}})}catch(d){console.log(d)}a.init=function(){a._inited||(a._inited=!0,a._times=[],a._tickTimes=[],a._startTime=a._getTime(),a._times.push(a._lastTime=0),a.interval=a._interval)};a.reset=function(){if(a._raf){var d=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||
window.msCancelAnimationFrame;d&&d(a._timerId)}else clearTimeout(a._timerId);a.removeAllEventListeners("tick");a._timerId=a._times=a._tickTimes=null;a._startTime=a._lastTime=a._ticks=a._pausedTime=0;a._inited=!1};a.getMeasuredTickTime=function(d){var c=0,e=a._tickTimes;if(!e||1>e.length)return-1;d=Math.min(e.length,d||a._getFPS()|0);for(var g=0;g<d;g++)c+=e[g];return c/d};a.getMeasuredFPS=function(d){var c=a._times;if(!c||2>c.length)return-1;d=Math.min(c.length-1,d||a._getFPS()|0);return 1E3/((c[0]-
c[d])/d)};a.getTime=function(d){return a._startTime?a._getTime()-(d?a._pausedTime:0):-1};a.getEventTime=function(d){return a._startTime?(a._lastTime||a._startTime)-(d?a._pausedTime:0):-1};a.getTicks=function(d){return a._ticks-(d?a._pausedTicks:0)};a._handleSynch=function(){a._timerId=null;a._setupTick();a._getTime()-a._lastTime>=.97*(a._interval-1)&&a._tick()};a._handleRAF=function(){a._timerId=null;a._setupTick();a._tick()};a._handleTimeout=function(){a._timerId=null;a._setupTick();a._tick()};a._setupTick=
function(){if(null==a._timerId){var d=a.timingMode;if(d==a.RAF_SYNCHED||d==a.RAF){var c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(c){a._timerId=c(d==a.RAF?a._handleRAF:a._handleSynch);a._raf=!0;return}}a._raf=!1;a._timerId=setTimeout(a._handleTimeout,a._interval)}};a._tick=function(){var d=a.paused,c=a._getTime(),e=c-a._lastTime;a._lastTime=c;a._ticks++;d&&(a._pausedTicks++,a._pausedTime+=
e);if(a.hasEventListener("tick")){var g=new createjs.Event("tick"),h=a.maxDelta;g.delta=h&&e>h?h:e;g.paused=d;g.time=c;g.runTime=c-a._pausedTime;a.dispatchEvent(g)}for(a._tickTimes.unshift(a._getTime()-c);100<a._tickTimes.length;)a._tickTimes.pop();for(a._times.unshift(c);100<a._times.length;)a._times.pop()};var f=window,b=f.performance.now||f.performance.mozNow||f.performance.msNow||f.performance.oNow||f.performance.webkitNow;a._getTime=function(){return(b&&b.call(f.performance)||(new Date).getTime())-
a._startTime};createjs.Ticker=a})();this.createjs=this.createjs||{};
(function(){function a(b){this.EventDispatcher_constructor();this.ignoreGlobalPause=!1;this.loop=0;this.bounce=this.reversed=this.useTicks=!1;this.timeScale=1;this.position=this.duration=0;this.rawPosition=-1;this._paused=!0;this._labelList=this._labels=this._parent=this._prev=this._next=null;b&&(this.useTicks=!!b.useTicks,this.ignoreGlobalPause=!!b.ignoreGlobalPause,this.loop=!0===b.loop?-1:b.loop||0,this.reversed=!!b.reversed,this.bounce=!!b.bounce,this.timeScale=b.timeScale||1,b.onChange&&this.addEventListener("change",
b.onChange),b.onComplete&&this.addEventListener("complete",b.onComplete))}var f=createjs.extend(a,createjs.EventDispatcher);f._setPaused=function(b){createjs.Tween._register(this,b);return this};f.setPaused=createjs.deprecate(f._setPaused,"AbstractTween.setPaused");f._getPaused=function(){return this._paused};f.getPaused=createjs.deprecate(f._getPaused,"AbstactTween.getPaused");f._getCurrentLabel=function(b){var d=this.getLabels();null==b&&(b=this.position);for(var c=0,e=d.length;c<e&&!(b<d[c].position);c++);
return 0===c?null:d[c-1].label};f.getCurrentLabel=createjs.deprecate(f._getCurrentLabel,"AbstractTween.getCurrentLabel");try{Object.defineProperties(f,{paused:{set:f._setPaused,get:f._getPaused},currentLabel:{get:f._getCurrentLabel}})}catch(b){}f.advance=function(b,d){this.setPosition(this.rawPosition+b*this.timeScale,d)};f.setPosition=function(b,d,c,e){var g=this.duration,h=this.loop,m=this.rawPosition,l=0;0>b&&(b=0);if(0===g){var n=!0;if(-1!==m)return n}else{var t=b/g|0;l=b-t*g;(n=-1!==h&&b>=h*
g+g)&&(b=(l=g)*(t=h)+g);if(b===m)return n;!this.reversed!==!(this.bounce&&t%2)&&(l=g-l)}this.position=l;this.rawPosition=b;this._updatePosition(c,n);n&&(this.paused=!0);e&&e(this);d||this._runActions(m,b,c,!c&&-1===m);this.dispatchEvent("change");n&&this.dispatchEvent("complete")};f.calculatePosition=function(b){var d=this.duration,c=this.loop,e=0;if(0===d)return 0;-1!==c&&b>=c*d+d?(b=d,e=c):0>b?b=0:(e=b/d|0,b-=e*d);return!this.reversed!==!(this.bounce&&e%2)?d-b:b};f.getLabels=function(){var b=this._labelList;
if(!b){b=this._labelList=[];var d=this._labels,c;for(c in d)b.push({label:c,position:d[c]});b.sort(function(e,g){return e.position-g.position})}return b};f.setLabels=function(b){this._labels=b;this._labelList=null};f.addLabel=function(b,d){this._labels||(this._labels={});this._labels[b]=d;var c=this._labelList;if(c){for(var e=0,g=c.length;e<g&&!(d<c[e].position);e++);c.splice(e,0,{label:b,position:d})}};f.gotoAndPlay=function(b){this.paused=!1;this._goto(b)};f.gotoAndStop=function(b){this.paused=
!0;this._goto(b)};f.resolve=function(b){var d=Number(b);isNaN(d)&&(d=this._labels&&this._labels[b]);return d};f.toString=function(){return"[AbstractTween]"};f.clone=function(){throw"AbstractTween can not be cloned.";};f._init=function(b){b&&b.paused||(this.paused=!1);b&&null!=b.position&&this.setPosition(b.position)};f._updatePosition=function(b,d){};f._goto=function(b){b=this.resolve(b);null!=b&&this.setPosition(b,!1,!0)};f._runActions=function(b,d,c,e){if(this._actionHead||this.tweens){var g=this.duration,
h=this.reversed,m=this.bounce,l=this.loop,n,t,q;if(0===g){var v=n=t=q=0;h=m=!1}else v=b/g|0,n=d/g|0,t=b-v*g,q=d-n*g;-1!==l&&(n>l&&(q=g,n=l),v>l&&(t=g,v=l));if(c)return this._runActionsRange(q,q,c,e);if(v!==n||t!==q||c||e){-1===v&&(v=t=0);b=b<=d;d=v;do{l=d===v?t:b?0:g;var x=d===n?q:b?g:0;!h!==!(m&&d%2)&&(l=g-l,x=g-x);if((!m||d===v||l!==x)&&this._runActionsRange(l,x,c,e||d!==v&&!m))return!0;e=!1}while(b&&++d<=n||!b&&--d>=n)}}};f._runActionsRange=function(b,d,c,e){};createjs.AbstractTween=createjs.promote(a,
"EventDispatcher")})();this.createjs=this.createjs||{};
(function(){function a(c,e){this.AbstractTween_constructor(e);this.pluginData=null;this.target=c;this.passive=!1;this._stepTail=this._stepHead=new f(null,0,0,{},null,!0);this._stepPosition=0;this._injected=this._pluginIds=this._plugins=this._actionTail=this._actionHead=null;e&&(this.pluginData=e.pluginData,e.override&&a.removeTweens(c));this.pluginData||(this.pluginData={});this._init(e)}function f(c,e,g,h,m,l){this.next=null;this.prev=c;this.t=e;this.d=g;this.props=h;this.ease=m;this.passive=l;this.index=
c?c.index+1:0}function b(c,e,g,h,m){this.next=null;this.prev=c;this.t=e;this.d=0;this.scope=g;this.funct=h;this.params=m}var d=createjs.extend(a,createjs.AbstractTween);a.IGNORE={};a._tweens=[];a._plugins=null;a._tweenHead=null;a._tweenTail=null;a.get=function(c,e){return new a(c,e)};a.tick=function(c,e){for(var g=a._tweenHead;g;){var h=g._next;e&&!g.ignoreGlobalPause||g._paused||g.advance(g.useTicks?1:c);g=h}};a.handleEvent=function(c){"tick"===c.type&&this.tick(c.delta,c.paused)};a.removeTweens=
function(c){if(c.tweenjs_count){for(var e=a._tweenHead;e;){var g=e._next;e.target===c&&a._register(e,!0);e=g}c.tweenjs_count=0}};a.removeAllTweens=function(){for(var c=a._tweenHead;c;){var e=c._next;c._paused=!0;c.target&&(c.target.tweenjs_count=0);c._next=c._prev=null;c=e}a._tweenHead=a._tweenTail=null};a.hasActiveTweens=function(c){return c?!!c.tweenjs_count:!!a._tweenHead};a._installPlugin=function(c){for(var e=c.priority=c.priority||0,g=a._plugins=a._plugins||[],h=0,m=g.length;h<m&&!(e<g[h].priority);h++);
g.splice(h,0,c)};a._register=function(c,e){var g=c.target;if(!e&&c._paused)g&&(g.tweenjs_count=g.tweenjs_count?g.tweenjs_count+1:1),(g=a._tweenTail)?(a._tweenTail=g._next=c,c._prev=g):a._tweenHead=a._tweenTail=c,!a._inited&&createjs.Ticker&&(createjs.Ticker.addEventListener("tick",a),a._inited=!0);else if(e&&!c._paused){g&&g.tweenjs_count--;g=c._next;var h=c._prev;g?g._prev=h:a._tweenTail=h;h?h._next=g:a._tweenHead=g;c._next=c._prev=null}c._paused=e};d.wait=function(c,e){0<c&&this._addStep(+c,this._stepTail.props,
null,e);return this};d.to=function(c,e,g){if(null==e||0>e)e=0;e=this._addStep(+e,null,g);this._appendProps(c,e);return this};d.label=function(c){this.addLabel(c,this.duration);return this};d.call=function(c,e,g){return this._addAction(g||this.target,c,e||[this])};d.set=function(c,e){return this._addAction(e||this.target,this._set,[c])};d.play=function(c){return this._addAction(c||this,this._set,[{paused:!1}])};d.pause=function(c){return this._addAction(c||this,this._set,[{paused:!0}])};d.w=d.wait;
d.t=d.to;d.c=d.call;d.s=d.set;d.toString=function(){return"[Tween]"};d.clone=function(){throw"Tween can not be cloned.";};d._addPlugin=function(c){var e=this._pluginIds||(this._pluginIds={}),g=c.ID;if(g&&!e[g]){e[g]=!0;e=this._plugins||(this._plugins=[]);g=c.priority||0;for(var h=0,m=e.length;h<m;h++)if(g<e[h].priority){e.splice(h,0,c);return}e.push(c)}};d._updatePosition=function(c,e){var g=this._stepHead.next,h=this.position,m=this.duration;if(this.target&&g){for(var l=g.next;l&&l.t<=h;)g=g.next,
l=g.next;this._updateTargetProps(g,e?0===m?1:h/m:(h-g.t)/g.d,e)}this._stepPosition=g?h-g.t:0};d._updateTargetProps=function(c,e,g){if(!(this.passive=!!c.passive)){var h,m=c.prev.props,l=c.props;if(h=c.ease)e=h(e,0,1,1);h=this._plugins;var n;a:for(n in m){var t=m[n];var q=l[n];t=t!==q&&"number"===typeof t?t+(q-t)*e:1<=e?q:t;if(h){q=0;for(var v=h.length;q<v;q++){var x=h[q].change(this,c,n,t,e,g);if(x===a.IGNORE)continue a;void 0!==x&&(t=x)}}this.target[n]=t}}};d._runActionsRange=function(c,e,g,h){var m=
(g=c>e)?this._actionTail:this._actionHead,l=e,n=c;g&&(l=c,n=e);for(var t=this.position;m;){var q=m.t;if(q===e||q>n&&q<l||h&&q===c)if(m.funct.apply(m.scope,m.params),t!==this.position)return!0;m=g?m.prev:m.next}};d._appendProps=function(c,e,g){var h=this._stepHead.props,m=this.target,l=a._plugins,n,t,q=e.prev,v=q.props,x=e.props||(e.props=this._cloneProps(v)),C={};for(n in c)if(c.hasOwnProperty(n)&&(C[n]=x[n]=c[n],void 0===h[n])){var D=void 0;if(l)for(t=l.length-1;0<=t;t--){var A=l[t].init(this,n,
D);void 0!==A&&(D=A);if(D===a.IGNORE){delete x[n];delete C[n];break}}D!==a.IGNORE&&(void 0===D&&(D=m[n]),v[n]=void 0===D?null:D)}for(n in C){var r;for(c=q;(r=c)&&(c=r.prev);)if(c.props!==r.props){if(void 0!==c.props[n])break;c.props[n]=v[n]}}if(!1!==g&&(l=this._plugins))for(t=l.length-1;0<=t;t--)l[t].step(this,e,C);if(g=this._injected)this._injected=null,this._appendProps(g,e,!1)};d._injectProp=function(c,e){(this._injected||(this._injected={}))[c]=e};d._addStep=function(c,e,g,h){e=new f(this._stepTail,
this.duration,c,e,g,h||!1);this.duration+=c;return this._stepTail=this._stepTail.next=e};d._addAction=function(c,e,g){c=new b(this._actionTail,this.duration,c,e,g);this._actionTail?this._actionTail.next=c:this._actionHead=c;this._actionTail=c;return this};d._set=function(c){for(var e in c)this[e]=c[e]};d._cloneProps=function(c){var e={},g;for(g in c)e[g]=c[g];return e};createjs.Tween=createjs.promote(a,"AbstractTween")})();this.createjs=this.createjs||{};
(function(){function a(b){if(b instanceof Array||null==b&&1<arguments.length){var d=b;var c=arguments[1];b=arguments[2]}else b&&(d=b.tweens,c=b.labels);this.AbstractTween_constructor(b);this.tweens=[];d&&this.addTween.apply(this,d);this.setLabels(c);this._init(b)}var f=createjs.extend(a,createjs.AbstractTween);f.addTween=function(b){b._parent&&b._parent.removeTween(b);var d=arguments.length;if(1<d){for(var c=0;c<d;c++)this.addTween(arguments[c]);return arguments[d-1]}if(0===d)return null;this.tweens.push(b);
b._parent=this;b.paused=!0;d=b.duration;0<b.loop&&(d*=b.loop+1);d>this.duration&&(this.duration=d);0<=this.rawPosition&&b.setPosition(this.rawPosition);return b};f.removeTween=function(b){var d=arguments.length;if(1<d){for(var c=!0,e=0;e<d;e++)c=c&&this.removeTween(arguments[e]);return c}if(0===d)return!0;d=this.tweens;for(e=d.length;e--;)if(d[e]===b)return d.splice(e,1),b._parent=null,b.duration>=this.duration&&this.updateDuration(),!0;return!1};f.updateDuration=function(){for(var b=this.duration=
0,d=this.tweens.length;b<d;b++){var c=this.tweens[b],e=c.duration;0<c.loop&&(e*=c.loop+1);e>this.duration&&(this.duration=e)}};f.toString=function(){return"[Timeline]"};f.clone=function(){throw"Timeline can not be cloned.";};f._updatePosition=function(b,d){for(var c=this.position,e=0,g=this.tweens.length;e<g;e++)this.tweens[e].setPosition(c,!0,b)};f._runActionsRange=function(b,d,c,e){for(var g=this.position,h=0,m=this.tweens.length;h<m;h++)if(this.tweens[h]._runActions(b,d,c,e),g!==this.position)return!0};
createjs.Timeline=createjs.promote(a,"AbstractTween")})();this.createjs=this.createjs||{};
(function(){function a(){throw"Ease cannot be instantiated.";}a.linear=function(f){return f};a.none=a.linear;a.get=function(f){-1>f?f=-1:1<f&&(f=1);return function(b){return 0==f?b:0>f?b*(b*-f+1+f):b*((2-b)*f+(1-f))}};a.getPowIn=function(f){return function(b){return Math.pow(b,f)}};a.getPowOut=function(f){return function(b){return 1-Math.pow(1-b,f)}};a.getPowInOut=function(f){return function(b){return 1>(b*=2)?.5*Math.pow(b,f):1-.5*Math.abs(Math.pow(2-b,f))}};a.quadIn=a.getPowIn(2);a.quadOut=a.getPowOut(2);
a.quadInOut=a.getPowInOut(2);a.cubicIn=a.getPowIn(3);a.cubicOut=a.getPowOut(3);a.cubicInOut=a.getPowInOut(3);a.quartIn=a.getPowIn(4);a.quartOut=a.getPowOut(4);a.quartInOut=a.getPowInOut(4);a.quintIn=a.getPowIn(5);a.quintOut=a.getPowOut(5);a.quintInOut=a.getPowInOut(5);a.sineIn=function(f){return 1-Math.cos(f*Math.PI/2)};a.sineOut=function(f){return Math.sin(f*Math.PI/2)};a.sineInOut=function(f){return-.5*(Math.cos(Math.PI*f)-1)};a.getBackIn=function(f){return function(b){return b*b*((f+1)*b-f)}};
a.backIn=a.getBackIn(1.7);a.getBackOut=function(f){return function(b){return--b*b*((f+1)*b+f)+1}};a.backOut=a.getBackOut(1.7);a.getBackInOut=function(f){f*=1.525;return function(b){return 1>(b*=2)?.5*b*b*((f+1)*b-f):.5*((b-=2)*b*((f+1)*b+f)+2)}};a.backInOut=a.getBackInOut(1.7);a.circIn=function(f){return-(Math.sqrt(1-f*f)-1)};a.circOut=function(f){return Math.sqrt(1- --f*f)};a.circInOut=function(f){return 1>(f*=2)?-.5*(Math.sqrt(1-f*f)-1):.5*(Math.sqrt(1-(f-=2)*f)+1)};a.bounceIn=function(f){return 1-
a.bounceOut(1-f)};a.bounceOut=function(f){return f<1/2.75?7.5625*f*f:f<2/2.75?7.5625*(f-=1.5/2.75)*f+.75:f<2.5/2.75?7.5625*(f-=2.25/2.75)*f+.9375:7.5625*(f-=2.625/2.75)*f+.984375};a.bounceInOut=function(f){return.5>f?.5*a.bounceIn(2*f):.5*a.bounceOut(2*f-1)+.5};a.getElasticIn=function(f,b){var d=2*Math.PI;return function(c){if(0==c||1==c)return c;var e=b/d*Math.asin(1/f);return-(f*Math.pow(2,10*--c)*Math.sin((c-e)*d/b))}};a.elasticIn=a.getElasticIn(1,.3);a.getElasticOut=function(f,b){var d=2*Math.PI;
return function(c){return 0==c||1==c?c:f*Math.pow(2,-10*c)*Math.sin((c-b/d*Math.asin(1/f))*d/b)+1}};a.elasticOut=a.getElasticOut(1,.3);a.getElasticInOut=function(f,b){var d=2*Math.PI;return function(c){var e=b/d*Math.asin(1/f);return 1>(c*=2)?-.5*f*Math.pow(2,10*--c)*Math.sin((c-e)*d/b):f*Math.pow(2,-10*--c)*Math.sin((c-e)*d/b)*.5+1}};a.elasticInOut=a.getElasticInOut(1,.3*1.5);createjs.Ease=a})();this.createjs=this.createjs||{};
(function(){function a(){throw"MotionGuidePlugin cannot be instantiated.";}a.priority=0;a.ID="MotionGuide";a.install=function(){createjs.Tween._installPlugin(a);return createjs.Tween.IGNORE};a.init=function(f,b,d){"guide"==b&&f._addPlugin(a)};a.step=function(f,b,d){for(var c in d)if("guide"===c){var e=b.props.guide,g=a._solveGuideData(d.guide,e);e.valid=!g;var h=e.endData;f._injectProp("x",h.x);f._injectProp("y",h.y);if(g||!e.orient)break;e.startOffsetRot=(void 0===b.prev.props.rotation?f.target.rotation||
0:b.prev.props.rotation)-e.startData.rotation;if("fixed"==e.orient)e.endAbsRot=h.rotation+e.startOffsetRot,e.deltaRotation=0;else{g=void 0===d.rotation?f.target.rotation||0:d.rotation;h=g-e.endData.rotation-e.startOffsetRot;var m=h%360;e.endAbsRot=g;switch(e.orient){case "auto":e.deltaRotation=h;break;case "cw":e.deltaRotation=(m+360)%360+360*Math.abs(h/360|0);break;case "ccw":e.deltaRotation=(m-360)%360+-360*Math.abs(h/360|0)}}f._injectProp("rotation",e.endAbsRot)}};a.change=function(f,b,d,c,e,g){if((c=
b.props.guide)&&b.props!==b.prev.props&&c!==b.prev.props.guide){if("guide"===d&&!c.valid||"x"==d||"y"==d||"rotation"===d&&c.orient)return createjs.Tween.IGNORE;a._ratioToPositionData(e,c,f.target)}};a.debug=function(f,b,d){f=f.guide||f;var c=a._findPathProblems(f);c&&console.error("MotionGuidePlugin Error found: \n"+c);if(!b)return c;var e,g=f.path,h=g.length;b.save();b.lineCap="round";b.lineJoin="miter";b.beginPath();b.moveTo(g[0],g[1]);for(e=2;e<h;e+=4)b.quadraticCurveTo(g[e],g[e+1],g[e+2],g[e+
3]);b.strokeStyle="black";b.lineWidth=4.5;b.stroke();b.strokeStyle="white";b.lineWidth=3;b.stroke();b.closePath();g=d.length;if(d&&g){h={};var m={};a._solveGuideData(f,h);for(e=0;e<g;e++)h.orient="fixed",a._ratioToPositionData(d[e],h,m),b.beginPath(),b.moveTo(m.x,m.y),b.lineTo(m.x+9*Math.cos(.0174533*m.rotation),m.y+9*Math.sin(.0174533*m.rotation)),b.strokeStyle="black",b.lineWidth=4.5,b.stroke(),b.strokeStyle="red",b.lineWidth=3,b.stroke(),b.closePath()}b.restore();return c};a._solveGuideData=function(f,
b){var d;if(d=a.debug(f))return d;var c=b.path=f.path;b.orient=f.orient;b.subLines=[];b.totalLength=0;b.startOffsetRot=0;b.deltaRotation=0;b.startData={ratio:0};b.endData={ratio:1};b.animSpan=1;var e=c.length,g,h={};var m=c[0];var l=c[1];for(d=2;d<e;d+=4){var n=c[d];var t=c[d+1];var q=c[d+2];var v=c[d+3];var x={weightings:[],estLength:0,portion:0},C=m;var D=l;for(g=1;10>=g;g++)a._getParamsForCurve(m,l,n,t,q,v,g/10,!1,h),C=h.x-C,D=h.y-D,D=Math.sqrt(C*C+D*D),x.weightings.push(D),x.estLength+=D,C=h.x,
D=h.y;b.totalLength+=x.estLength;for(g=0;10>g;g++)D=x.estLength,x.weightings[g]/=D;b.subLines.push(x);m=q;l=v}D=b.totalLength;c=b.subLines.length;for(d=0;d<c;d++)b.subLines[d].portion=b.subLines[d].estLength/D;d=isNaN(f.start)?0:f.start;c=isNaN(f.end)?1:f.end;a._ratioToPositionData(d,b,b.startData);a._ratioToPositionData(c,b,b.endData);b.startData.ratio=d;b.endData.ratio=c;b.animSpan=b.endData.ratio-b.startData.ratio};a._ratioToPositionData=function(f,b,d){var c=b.subLines,e,g=0,h=f*b.animSpan+b.startData.ratio;
var m=c.length;for(e=0;e<m;e++){var l=c[e].portion;if(g+l>=h){var n=e;break}g+=l}void 0===n&&(n=m-1,g-=l);c=c[n].weightings;var t=l;m=c.length;for(e=0;e<m;e++){l=c[e]*t;if(g+l>=h)break;g+=l}n=4*n+2;m=b.path;a._getParamsForCurve(m[n-2],m[n-1],m[n],m[n+1],m[n+2],m[n+3],e/10+(h-g)/l*.1,b.orient,d);b.orient&&(d.rotation=.99999<=f&&1.00001>=f&&void 0!==b.endAbsRot?b.endAbsRot:d.rotation+(b.startOffsetRot+f*b.deltaRotation));return d};a._getParamsForCurve=function(f,b,d,c,e,g,h,m,l){var n=1-h;l.x=n*n*f+
2*n*h*d+h*h*e;l.y=n*n*b+2*n*h*c+h*h*g;m&&(l.rotation=57.2957795*Math.atan2((c-b)*n+(g-c)*h,(d-f)*n+(e-d)*h))};a._findPathProblems=function(f){var b=f.path,d=b&&b.length||0;if(6>d||(d-2)%4)return"\tCannot parse 'path' array due to invalid number of entries in path. There should be an odd number of points, at least 3 points, and 2 entries per point (x & y). See 'CanvasRenderingContext2D.quadraticCurveTo' for details as 'path' models a quadratic bezier.\n\nOnly [ "+(d+" ] values found. Expected: "+Math.max(4*
Math.ceil((d-2)/4)+2,6));for(var c=0;c<d;c++)if(isNaN(b[c]))return"All data in path array must be numeric";b=f.start;if(isNaN(b)&&void 0!==b)return"'start' out of bounds. Expected 0 to 1, got: "+b;b=f.end;if(isNaN(b)&&void 0!==b)return"'end' out of bounds. Expected 0 to 1, got: "+b;if((f=f.orient)&&"fixed"!=f&&"auto"!=f&&"cw"!=f&&"ccw"!=f)return'Invalid orientation value. Expected ["fixed", "auto", "cw", "ccw", undefined], got: '+f};createjs.MotionGuidePlugin=a})();this.createjs=this.createjs||{};
(function(){var a=createjs.TweenJS=createjs.TweenJS||{};a.version="1.0.0";a.buildDate="Thu, 14 Sep 2017 19:47:47 GMT"})();
(function(){function a(r){r=String(r);return r.charAt(0).toUpperCase()+r.slice(1)}function f(r,F){var J=-1,G=r?r.length:0;if("number"==typeof G&&-1<G&&G<=v)for(;++J<G;)F(r[J],J,r);else d(r,F)}function b(r){r=String(r).replace(/^ +| +$/g,"");return/^(?:webOS|i(?:OS|P))/.test(r)?r:a(r)}function d(r,F){for(var J in r)C.call(r,J)&&F(r[J],J,r)}function c(r){return null==r?a(r):D.call(r).slice(8,-1)}function e(r,F){var J=null!=r?typeof r[F]:"number";return!/^(?:boolean|number|string|undefined)$/.test(J)&&
("object"==J?!!r[F]:!0)}function g(r){return String(r).replace(/([ -])(?!$)/g,"$1?")}function h(r,F){var J=null;f(r,function(G,w){J=F(J,G,w,r)});return J}function m(r){function F(W){return h(W,function(R,N){var X=N.pattern||g(N);!R&&(R=RegExp("\\b"+X+" *\\d+[.\\w_]*","i").exec(r)||RegExp("\\b"+X+" *\\w+-[\\w]*","i").exec(r)||RegExp("\\b"+X+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(r))&&((R=String(N.label&&!RegExp(X,"i").test(N.label)?N.label:R).split("/"))[1]&&!/[\d.]+/.test(R[0])&&(R[0]+=
" "+R[1]),N=N.label||N,R=b(R[0].replace(RegExp(X,"i"),N).replace(RegExp("; *(?:"+N+"[_-])?","i")," ").replace(RegExp("("+N+")[-_.]?(\\w)","i"),"$1 $2")));return R})}function J(W){return h(W,function(R,N){return R||(RegExp(N+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(r)||0)[1]||null})}var G=n,w=r&&"object"==typeof r&&"String"!=c(r);w&&(G=r,r=null);var L=G.navigator||{},u=L.userAgent||"";r||(r=u);var I=w?!!L.likeChrome:/\bChrome\b/.test(r)&&!/internal|\n/i.test(D.toString()),
E=w?"Object":"ScriptBridgingProxyObject",S=w?"Object":"Environment",O=w&&G.java?"JavaPackage":c(G.java),P=w?"Object":"RuntimeObject";S=(O=/\bJava/.test(O)&&G.java)&&c(G.environment)==S;var U=O?"a":"\u03b1",Z=O?"b":"\u03b2",V=G.document||{},p=G.operamini||G.opera,y=x.test(y=w&&p?p["[[Class]]"]:c(p))?y:p=null,k,H=r;w=[];var T=null,Q=r==u;u=Q&&p&&"function"==typeof p.version&&p.version();var K=function(W){return h(W,function(R,N){return R||RegExp("\\b"+(N.pattern||g(N))+"\\b","i").exec(r)&&(N.label||
N)})}([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),z=function(W){return h(W,function(R,N){return R||RegExp("\\b"+(N.pattern||g(N))+"\\b","i").exec(r)&&(N.label||N)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser",
"PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},
{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),M=F([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad",
"iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),Y=function(W){return h(W,function(R,N,X){return R||(N[M]||N[/^[a-z]+(?: +[a-z]+\b)*/i.exec(M)]||RegExp("\\b"+g(X)+"(?:\\b|\\w*\\d)","i").exec(r))&&X})}({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},
"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}}),B=function(W){return h(W,function(R,N){var X=N.pattern||g(N);if(!R&&(R=RegExp("\\b"+X+"(?:/[\\d.]+|[ \\w.]*)","i").exec(r))){var aa=R,ba=N.label||N,ca={"10.0":"10","6.4":"10 Technical Preview",
"6.3":"8.1","6.2":"8","6.1":"Server 2008 R2 / 7","6.0":"Server 2008 / Vista","5.2":"Server 2003 / XP 64-bit","5.1":"XP","5.01":"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};X&&ba&&/^Win/i.test(aa)&&!/^Windows Phone /i.test(aa)&&(ca=ca[/[\d.]+$/.exec(aa)])&&(aa="Windows "+ca);aa=String(aa);X&&ba&&(aa=aa.replace(RegExp(X,"i"),ba));R=aa=b(aa.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,
"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}return R})}(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X",
"Macintosh","Mac","Windows 98;","Windows "]);K&&(K=[K]);Y&&!M&&(M=F([Y]));if(k=/\bGoogle TV\b/.exec(M))M=k[0];/\bSimulator\b/i.test(r)&&(M=(M?M+" ":"")+"Simulator");"Opera Mini"==z&&/\bOPiOS\b/.test(r)&&w.push("running in Turbo/Uncompressed mode");"IE"==z&&/\blike iPhone OS\b/.test(r)?(k=m(r.replace(/like iPhone OS/,"")),Y=k.manufacturer,M=k.product):/^iP/.test(M)?(z||(z="Safari"),B="iOS"+((k=/ OS ([\d_]+)/i.exec(r))?" "+k[1].replace(/_/g,"."):"")):"Konqueror"!=z||/buntu/i.test(B)?Y&&"Google"!=Y&&
(/Chrome/.test(z)&&!/\bMobile Safari\b/i.test(r)||/\bVita\b/.test(M))||/\bAndroid\b/.test(B)&&/^Chrome/.test(z)&&/\bVersion\//i.test(r)?(z="Android Browser",B=/\bAndroid\b/.test(B)?B:"Android"):"Silk"==z?(/\bMobi/i.test(r)||(B="Android",w.unshift("desktop mode")),/Accelerated *= *true/i.test(r)&&w.unshift("accelerated")):"PaleMoon"==z&&(k=/\bFirefox\/([\d.]+)\b/.exec(r))?w.push("identifying as Firefox "+k[1]):"Firefox"==z&&(k=/\b(Mobile|Tablet|TV)\b/i.exec(r))?(B||(B="Firefox OS"),M||(M=k[1])):!z||
(k=!/\bMinefield\b/i.test(r)&&/\b(?:Firefox|Safari)\b/.exec(z))?(z&&!M&&/[\/,]|^[^(]+?\)/.test(r.slice(r.indexOf(k+"/")+8))&&(z=null),(k=M||Y||B)&&(M||Y||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(B))&&(z=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(B)?B:k)+" Browser")):"Electron"==z&&(k=(/\bChrome\/([\d.]+)\b/.exec(r)||0)[1])&&w.push("Chromium "+k):B="Kubuntu";u||(u=J(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",g(z),
"(?:Firefox|Minefield|NetFront)"]));if(k="iCab"==K&&3<parseFloat(u)&&"WebKit"||/\bOpera\b/.test(z)&&(/\bOPR\b/.test(r)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(r)&&!/^(?:Trident|EdgeHTML)$/.test(K)&&"WebKit"||!K&&/\bMSIE\b/i.test(r)&&("Mac OS"==B?"Tasman":"Trident")||"WebKit"==K&&/\bPlayStation\b(?! Vita\b)/i.test(z)&&"NetFront")K=[k];"IE"==z&&(k=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(r)||0)[1])?(z+=" Mobile",B="Windows Phone "+(/\+$/.test(k)?k:k+".x"),w.unshift("desktop mode")):/\bWPDesktop\b/i.test(r)?
(z="IE Mobile",B="Windows Phone 8.x",w.unshift("desktop mode"),u||(u=(/\brv:([\d.]+)/.exec(r)||0)[1])):"IE"!=z&&"Trident"==K&&(k=/\brv:([\d.]+)/.exec(r))&&(z&&w.push("identifying as "+z+(u?" "+u:"")),z="IE",u=k[1]);if(Q){if(e(G,"global"))if(O&&(k=O.lang.System,H=k.getProperty("os.arch"),B=B||k.getProperty("os.name")+" "+k.getProperty("os.version")),S){try{u=G.require("ringo/engine").version.join("."),z="RingoJS"}catch(W){(k=G.system)&&k.global.system==G.system&&(z="Narwhal",B||(B=k[0].os||null))}z||
(z="Rhino")}else"object"==typeof G.process&&!G.process.browser&&(k=G.process)&&("object"==typeof k.versions&&("string"==typeof k.versions.electron?(w.push("Node "+k.versions.node),z="Electron",u=k.versions.electron):"string"==typeof k.versions.nw&&(w.push("Chromium "+u,"Node "+k.versions.node),z="NW.js",u=k.versions.nw)),z||(z="Node.js",H=k.arch,B=k.platform,u=(u=/[\d.]+/.exec(k.version))?u[0]:null));else c(k=G.runtime)==E?(z="Adobe AIR",B=k.flash.system.Capabilities.os):c(k=G.phantom)==P?(z="PhantomJS",
u=(k=k.version||null)&&k.major+"."+k.minor+"."+k.patch):"number"==typeof V.documentMode&&(k=/\bTrident\/(\d+)/i.exec(r))?(u=[u,V.documentMode],(k=+k[1]+4)!=u[1]&&(w.push("IE "+u[1]+" mode"),K&&(K[1]=""),u[1]=k),u="IE"==z?String(u[1].toFixed(1)):u[0]):"number"==typeof V.documentMode&&/^(?:Chrome|Firefox)\b/.test(z)&&(w.push("masking as "+z+" "+u),z="IE",u="11.0",K=["Trident"],B="Windows");B=B&&b(B)}u&&(k=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(u)||/(?:alpha|beta)(?: ?\d)?/i.exec(r+";"+(Q&&L.appMinorVersion))||
/\bMinefield\b/i.test(r)&&"a")&&(T=/b/i.test(k)?"beta":"alpha",u=u.replace(RegExp(k+"\\+?$"),"")+("beta"==T?Z:U)+(/\d+\+?/.exec(k)||""));if("Fennec"==z||"Firefox"==z&&/\b(?:Android|Firefox OS)\b/.test(B))z="Firefox Mobile";else if("Maxthon"==z&&u)u=u.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(M))"Xbox 360"==M&&(B=null),"Xbox 360"==M&&/\bIEMobile\b/.test(r)&&w.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(z)&&(!z||M||/Browser|Mobi/.test(z))||"Windows CE"!=B&&!/Mobi/i.test(r))if("IE"==
z&&Q)try{null===G.external&&w.unshift("platform preview")}catch(W){w.unshift("embedded")}else(/\bBlackBerry\b/.test(M)||/\bBB10\b/.test(r))&&(k=(RegExp(M.replace(/ +/g," *")+"/([.\\d]+)","i").exec(r)||0)[1]||u)?(k=[k,/BB10/.test(r)],B=(k[1]?(M=null,Y="BlackBerry"):"Device Software")+" "+k[0],u=null):this!=d&&"Wii"!=M&&(Q&&p||/Opera/.test(z)&&/\b(?:MSIE|Firefox)\b/i.test(r)||"Firefox"==z&&/\bOS X (?:\d+\.){2,}/.test(B)||"IE"==z&&(B&&!/^Win/.test(B)&&5.5<u||/\bWindows XP\b/.test(B)&&8<u||8==u&&!/\bTrident\b/.test(r)))&&
!x.test(k=m.call(d,r.replace(x,"")+";"))&&k.name&&(k="ing as "+k.name+((k=k.version)?" "+k:""),x.test(z)?(/\bIE\b/.test(k)&&"Mac OS"==B&&(B=null),k="identify"+k):(k="mask"+k,z=y?b(y.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(k)&&(B=null),Q||(u=null)),K=["Presto"],w.push(k));else z+=" Mobile";if(k=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(r)||0)[1]){k=[parseFloat(k.replace(/\.(\d)$/,".0$1")),k];if("Safari"==z&&"+"==k[1].slice(-1))z="WebKit Nightly",T="alpha",u=k[1].slice(0,-1);else if(u==
k[1]||u==(k[2]=(/\bSafari\/([\d.]+\+?)/i.exec(r)||0)[1]))u=null;k[1]=(/\bChrome\/([\d.]+)/i.exec(r)||0)[1];537.36==k[0]&&537.36==k[2]&&28<=parseFloat(k[1])&&"WebKit"==K&&(K=["Blink"]);Q&&(I||k[1])?(K&&(K[1]="like Chrome"),k=k[1]||(k=k[0],530>k?1:532>k?2:532.05>k?3:533>k?4:534.03>k?5:534.07>k?6:534.1>k?7:534.13>k?8:534.16>k?9:534.24>k?10:534.3>k?11:535.01>k?12:535.02>k?"13+":535.07>k?15:535.11>k?16:535.19>k?17:536.05>k?18:536.1>k?19:537.01>k?20:537.11>k?"21+":537.13>k?23:537.18>k?24:537.24>k?25:537.36>
k?26:"Blink"!=K?"27":"28")):(K&&(K[1]="like Safari"),k=(k=k[0],400>k?1:500>k?2:526>k?3:533>k?4:534>k?"4+":535>k?5:537>k?6:538>k?7:601>k?8:"8"));K&&(K[1]+=" "+(k+="number"==typeof k?".x":/[.+]/.test(k)?"":"+"));"Safari"==z&&(!u||45<parseInt(u))&&(u=k)}"Opera"==z&&(k=/\bzbov|zvav$/.exec(B))?(z+=" ",w.unshift("desktop mode"),"zvav"==k?(z+="Mini",u=null):z+="Mobile",B=B.replace(RegExp(" *"+k+"$"),"")):"Safari"==z&&/\bChrome\b/.exec(K&&K[1])&&(w.unshift("desktop mode"),z="Chrome Mobile",u=null,/\bOS X\b/.test(B)?
(Y="Apple",B="iOS 4.3+"):B=null);u&&0==u.indexOf(k=/[\d.]+$/.exec(B))&&-1<r.indexOf("/"+k+"-")&&(B=String(B.replace(k,"")).replace(/^ +| +$/g,""));K&&!/\b(?:Avant|Nook)\b/.test(z)&&(/Browser|Lunascape|Maxthon/.test(z)||"Safari"!=z&&/^iOS/.test(B)&&/\bSafari\b/.test(K[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(z)&&K[1])&&(k=K[K.length-1])&&w.push(k);w.length&&(w=["("+w.join("; ")+")"]);Y&&M&&0>M.indexOf(Y)&&w.push("on "+Y);M&&w.push((/^on /.test(w[w.length-
1])?"":"on ")+M);if(B){var da=(k=/ ([\d.+]+)$/.exec(B))&&"/"==B.charAt(B.length-k[0].length-1);B={architecture:32,family:k&&!da?B.replace(k[0],""):B,version:k?k[1]:null,toString:function(){var W=this.version;return this.family+(W&&!da?" "+W:"")+(64==this.architecture?" 64-bit":"")}}}(k=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(H))&&!/\bi686\b/i.test(H)?(B&&(B.architecture=64,B.family=B.family.replace(RegExp(" *"+k),"")),z&&(/\bWOW64\b/i.test(r)||Q&&/\w(?:86|32)$/.test(L.cpuClass||L.platform)&&!/\bWin64; x64\b/i.test(r))&&
w.unshift("32-bit")):B&&/^OS X/.test(B.family)&&"Chrome"==z&&39<=parseFloat(u)&&(B.architecture=64);r||(r=null);G={};G.description=r;G.layout=K&&K[0];G.manufacturer=Y;G.name=z;G.prerelease=T;G.product=M;G.ua=r;G.version=z&&u;G.os=B||{architecture:null,family:null,version:null,toString:function(){return"null"}};G.parse=m;G.toString=function(){return this.description||""};G.version&&w.unshift(u);G.name&&w.unshift(z);B&&z&&(B!=String(B).split(" ")[0]||B!=z.split(" ")[0]&&!M)&&w.push(M?"("+B+")":"on "+
B);w.length&&(G.description=w.join(" "));return G}var l={"function":!0,object:!0},n=l[typeof window]&&window||this,t=l[typeof exports]&&exports;l=l[typeof module]&&module&&!module.nodeType&&module;var q=t&&l&&"object"==typeof global&&global;!q||q.global!==q&&q.window!==q&&q.self!==q||(n=q);var v=Math.pow(2,53)-1,x=/\bOpera/;q=Object.prototype;var C=q.hasOwnProperty,D=q.toString,A=m();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(n.platform=A,define(function(){return A})):t&&
l?d(A,function(r,F){t[F]=r}):n.platform=A}).call(this);
function buildIOSMeta(){for(var a=[{name:"viewport",content:"width=device-width, height=device-height, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"},{name:"apple-mobile-web-app-capable",content:"yes"},{name:"apple-mobile-web-app-status-bar-style",content:"black"}],f=0;f<a.length;f++){var b=document.createElement("meta");b.name=a[f].name;b.content=a[f].content;var d=window.document.head.querySelector('meta[name="'+b.name+'"]');d&&d.parentNode.removeChild(d);window.document.head.appendChild(b)}}
function hideIOSFullscreenPanel(){jQuery(".xxx-ios-fullscreen-message").css("display","none");jQuery(".xxx-ios-fullscreen-scroll").css("display","none");jQuery(".xxx-game-iframe-full").removeClass("xxx-game-iframe-iphone-se")}function buildIOSFullscreenPanel(){jQuery("body").append('<div class="xxx-ios-fullscreen-message"><div class="xxx-ios-fullscreen-swipe"></div></div><div class="xxx-ios-fullscreen-scroll"></div>')}
function showIOSFullscreenPanel(){jQuery(".xxx-ios-fullscreen-message").css("display","block");jQuery(".xxx-ios-fullscreen-scroll").css("display","block")}
function __iosResize(){window.scrollTo(0,0);console.log(window.devicePixelRatio);console.log(window.innerWidth);console.log(window.innerHeight);if("iPhone"===platform.product)switch(window.devicePixelRatio){case 2:switch(window.innerWidth){case 568:320!==window.innerHeight&&jQuery(".xxx-game-iframe-full").addClass("xxx-game-iframe-iphone-se");break;case 667:375===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();break;case 808:414===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();
break;default:hideIOSFullscreenPanel()}break;case 3:switch(window.innerWidth){case 736:414===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();break;case 724:375===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();break;case 808:414===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();break;default:hideIOSFullscreenPanel()}break;default:hideIOSFullscreenPanel()}}function iosResize(){__iosResize();setTimeout(function(){__iosResize()},500)}
function iosInIframe(){try{return window.self!==window.top}catch(a){return!0}}function isIOSLessThen13(){var a=platform.os,f=a.family.toLowerCase();a=parseFloat(a.version);return"ios"===f&&13>a?!0:!1}$(document).ready(function(){platform&&"iPhone"===platform.product&&"safari"===platform.name.toLowerCase()&&isIOSLessThen13()&&!iosInIframe()&&(buildIOSFullscreenPanel(),buildIOSMeta())});
jQuery(window).resize(function(){platform&&"iPhone"===platform.product&&"safari"===platform.name.toLowerCase()&&isIOSLessThen13()&&!iosInIframe()&&iosResize()});
(function(){var a="undefined"!==typeof window&&"undefined"!==typeof window.document?window.document:{},f="undefined"!==typeof module&&module.exports,b=function(){for(var e,g=["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror".split(" "),"webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror".split(" "),"webkitRequestFullScreen webkitCancelFullScreen webkitCurrentFullScreenElement webkitCancelFullScreen webkitfullscreenchange webkitfullscreenerror".split(" "),
"mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror".split(" "),"msRequestFullscreen msExitFullscreen msFullscreenElement msFullscreenEnabled MSFullscreenChange MSFullscreenError".split(" ")],h=0,m=g.length,l={};h<m;h++)if((e=g[h])&&e[1]in a){for(h=0;h<e.length;h++)l[g[0][h]]=e[h];return l}return!1}(),d={change:b.fullscreenchange,error:b.fullscreenerror},c={request:function(e){return new Promise(function(g,h){var m=function(){this.off("change",
m);g()}.bind(this);this.on("change",m);e=e||a.documentElement;Promise.resolve(e[b.requestFullscreen]())["catch"](h)}.bind(this))},exit:function(){return new Promise(function(e,g){if(this.isFullscreen){var h=function(){this.off("change",h);e()}.bind(this);this.on("change",h);Promise.resolve(a[b.exitFullscreen]())["catch"](g)}else e()}.bind(this))},toggle:function(e){return this.isFullscreen?this.exit():this.request(e)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},
on:function(e,g){var h=d[e];h&&a.addEventListener(h,g,!1)},off:function(e,g){var h=d[e];h&&a.removeEventListener(h,g,!1)},raw:b};b?(Object.defineProperties(c,{isFullscreen:{get:function(){return!!a[b.fullscreenElement]}},element:{enumerable:!0,get:function(){return a[b.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return!!a[b.fullscreenEnabled]}}}),f?module.exports=c:window.screenfull=c):f?module.exports={isEnabled:!1}:window.screenfull={isEnabled:!1}})();
var s_iScaleFactor=1,s_bIsIphone=!1,s_oCanvasLeft,s_oCanvasTop,s_iOffsetX,s_iOffsetY,s_bFocus=!0;
(function(a){(jQuery.browser=jQuery.browser||{}).mobile=/android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(ad|hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|tablet|treo|up\.(browser|link)|vodafone|wap|webos|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))})(navigator.userAgent||
navigator.vendor||window.opera);$(window).resize(function(){sizeHandler()});function trace(a){console.log(a)}function isMobile(){return isIpad()?!0:jQuery.browser.mobile}function isIpad(){var a=-1!==navigator.userAgent.toLowerCase().indexOf("ipad");return!a&&navigator.userAgent.match(/Mac/)&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints?!0:a}
function isIOS(){var a="iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";");if(-1!==navigator.userAgent.toLowerCase().indexOf("iphone"))return s_bIsIphone=!0;for(;a.length;)if(navigator.platform===a.pop())return s_bIsIphone=!0;return s_bIsIphone=!1}window.addEventListener("orientationchange",onOrientationChange);function onOrientationChange(){sizeHandler()}
function getSize(a){var f=a.toLowerCase(),b=window.document,d=b.documentElement;if(void 0===window["inner"+a])a=d["client"+a];else if(window["inner"+a]!=d["client"+a]){var c=b.createElement("body");c.id="vpw-test-b";c.style.cssText="overflow:scroll";var e=b.createElement("div");e.id="vpw-test-d";e.style.cssText="position:absolute;top:-1000px";e.innerHTML="<style>@media("+f+":"+d["client"+a]+"px){body#vpw-test-b div#vpw-test-d{"+f+":7px!important}}</style>";c.appendChild(e);d.insertBefore(c,b.head);
a=7==e["offset"+a]?d["client"+a]:window["inner"+a];d.removeChild(c)}else a=window["inner"+a];return a}function getIOSWindowHeight(){return document.documentElement.clientWidth/window.innerWidth*window.innerHeight}function getHeightOfIOSToolbars(){var a=(0===window.orientation?screen.height:screen.width)-getIOSWindowHeight();return 1<a?a:0}
function sizeHandler(){window.scrollTo(0,1);if($("#canvas")){var a=null!==platform.name&&"safari"===platform.name.toLowerCase()?getIOSWindowHeight():getSize("Height");var f=getSize("Width");s_bFocus&&_checkOrientation(f,a);var b=s_iScaleFactor=Math.min(a/CANVAS_HEIGHT,f/CANVAS_WIDTH),d=Math.round(CANVAS_WIDTH*b);b=Math.round(CANVAS_HEIGHT*b);if(b<a){var c=a-b;b+=c;d+=CANVAS_WIDTH/CANVAS_HEIGHT*c}else d<f&&(c=f-d,d+=c,b+=CANVAS_HEIGHT/CANVAS_WIDTH*c);c=a/2-b/2;var e=f/2-d/2,g=CANVAS_WIDTH/d;if(e*g<
-EDGEBOARD_X||c*g<-EDGEBOARD_Y)b=s_iScaleFactor=Math.min(a/(CANVAS_HEIGHT-2*EDGEBOARD_Y),f/(CANVAS_WIDTH-2*EDGEBOARD_X)),d=Math.round(CANVAS_WIDTH*b),b=Math.round(CANVAS_HEIGHT*b),c=(a-b)/2,e=(f-d)/2,g=CANVAS_WIDTH/d;s_iOffsetX=-1*e*g;s_iOffsetY=-1*c*g;0<=c&&(s_iOffsetY=0);0<=e&&(s_iOffsetX=0);null!==s_oInterface&&s_oInterface.refreshButtonPos(s_iOffsetX,s_iOffsetY);null!==s_oMenu&&s_oMenu.refreshButtonPos(s_iOffsetX,s_iOffsetY);s_bIsIphone?(canvas=document.getElementById("canvas"),s_oStage.canvas.width=
2*d,s_oStage.canvas.height=2*b,canvas.style.width=d+"px",canvas.style.height=b+"px",s_iScaleFactor=2*Math.min(d/CANVAS_WIDTH,b/CANVAS_HEIGHT),s_oStage.scaleX=s_oStage.scaleY=s_iScaleFactor):s_bMobile&&!1===isIOS()?($("#canvas").css("width",d+"px"),$("#canvas").css("height",b+"px")):(s_oStage.canvas.width=d,s_oStage.canvas.height=b,s_iScaleFactor=Math.min(d/CANVAS_WIDTH,b/CANVAS_HEIGHT),s_oStage.scaleX=s_oStage.scaleY=s_iScaleFactor);0>c||(c=(a-b)/2);$("#canvas").css("top",c+"px");$("#canvas").css("left",
e+"px");s_oCanvasLeft=$("#canvas").offset().left;s_oCanvasTop=$("#canvas").offset().top;fullscreenHandler()}}
function _checkOrientation(a,f){s_bMobile&&ENABLE_CHECK_ORIENTATION&&(a>f?"landscape"===$(".orientation-msg-container").attr("data-orientation")?($(".orientation-msg-container").css("display","none"),s_oMain.startUpdate()):($(".orientation-msg-container").css("display","block"),s_oMain.stopUpdate()):"portrait"===$(".orientation-msg-container").attr("data-orientation")?($(".orientation-msg-container").css("display","none"),s_oMain.startUpdate()):($(".orientation-msg-container").css("display","block"),
s_oMain.stopUpdate()))}function createBitmap(a,f,b){var d=new createjs.Bitmap(a),c=new createjs.Shape;f&&b?c.graphics.beginFill("#fff").drawRect(0,0,f,b):c.graphics.beginFill("#ff0").drawRect(0,0,a.width,a.height);d.hitArea=c;return d}function createSprite(a,f,b,d,c,e){a=null!==f?new createjs.Sprite(a,f):new createjs.Sprite(a);f=new createjs.Shape;f.graphics.beginFill("#000000").drawRect(-b,-d,c,e);a.hitArea=f;return a}
function randomFloatBetween(a,f,b){"undefined"===typeof b&&(b=2);return parseFloat(Math.min(a+Math.random()*(f-a),f).toFixed(b))}function shuffle(a){for(var f=a.length,b,d;0!==f;)d=Math.floor(Math.random()*f),--f,b=a[f],a[f]=a[d],a[d]=b;return a}function dotProductV2(a,f){return a.x*f.x+a.y*f.y}function distanceV2(a,f){return Math.sqrt((f.x-a.x)*(f.x-a.x)+(f.y-a.y)*(f.y-a.y))}
function closestPointOnLine(a,f,b){var d={x:b.x,y:b.y};d.x-=a.x;d.y-=a.y;b={x:f.x,y:f.y};b.x-=a.x;b.y-=a.y;var c=Math.sqrt(b.x*b.x+b.y*b.y);0<c&&(b.x/=c,b.y/=c);d=dotProductV2(b,d);if(0>=d)return a;if(d>=distanceV2(a,f))return f;b.x*=d;b.y*=d;b.x+=a.x;b.y+=a.y;return b}function toRadian(a){return Math.PI/180*a}function toDegree(a){return 180/Math.PI*a}function collideEdgeWithCircle(a,f,b,d){a=closestPointOnLine(a,f,b);b=distanceV2(b,a);return d<b?!1:!0}
function rotateVector2D(a,f){var b=f.getX()*Math.cos(a)+f.getY()*Math.sin(a),d=f.getX()*-Math.sin(a)+f.getY()*Math.cos(a);return new CVector2(b,d)}
function getBounds(a,f){var b={x:Infinity,y:Infinity,width:0,height:0};if(a instanceof createjs.Container){b.x2=-Infinity;b.y2=-Infinity;var d=a.children,c=d.length,e;for(e=0;e<c;e++){var g=getBounds(d[e],1);g.x<b.x&&(b.x=g.x);g.y<b.y&&(b.y=g.y);g.x+g.width>b.x2&&(b.x2=g.x+g.width);g.y+g.height>b.y2&&(b.y2=g.y+g.height)}Infinity==b.x&&(b.x=0);Infinity==b.y&&(b.y=0);Infinity==b.x2&&(b.x2=0);Infinity==b.y2&&(b.y2=0);b.width=b.x2-b.x;b.height=b.y2-b.y;delete b.x2;delete b.y2}else{if(a instanceof createjs.Bitmap){c=
a.sourceRect||a.image;e=c.width*f;var h=c.height*f}else if(a instanceof createjs.Sprite)if(a.spriteSheet._frames&&a.spriteSheet._frames[a.currentFrame]&&a.spriteSheet._frames[a.currentFrame].image){c=a.spriteSheet.getFrame(a.currentFrame);e=c.rect.width;h=c.rect.height;d=c.regX;var m=c.regY}else b.x=a.x||0,b.y=a.y||0;else b.x=a.x||0,b.y=a.y||0;d=d||0;e=e||0;m=m||0;h=h||0;b.regX=d;b.regY=m;c=a.localToGlobal(0-d,0-m);g=a.localToGlobal(e-d,h-m);e=a.localToGlobal(e-d,0-m);d=a.localToGlobal(0-d,h-m);b.x=
Math.min(Math.min(Math.min(c.x,g.x),e.x),d.x);b.y=Math.min(Math.min(Math.min(c.y,g.y),e.y),d.y);b.width=Math.max(Math.max(Math.max(c.x,g.x),e.x),d.x)-b.x;b.height=Math.max(Math.max(Math.max(c.y,g.y),e.y),d.y)-b.y}return b}function binarySearch(a,f,b,d){if(b>d)return-1;var c=Math.floor((b+d)/2);return a[c].toLowerCase()===f.toLowerCase()?c:a[c].toLowerCase()>f.toLowerCase()?binarySearch(a,f,b,c-1):binarySearch(a,f,c+1,d)}
function between(a,f,b){var d=!1;a<b&&f>a&&f<b&&(d=!0);a>b&&f>b&&f<a&&(d=!0);if(f===a||f===b)d=!0;return d}function pointInRectangle(a,f,b){var d=!1,c=b.y,e=b.height;between(b.x,a,b.width)&&between(c,f,e)&&(d=!0);return d}function NoClickDelay(a){this.element=a;window.Touch&&this.element.addEventListener("touchstart",this,!1)}
NoClickDelay.prototype={handleEvent:function(a){switch(a.type){case "touchstart":this.onTouchStart(a);break;case "touchmove":this.onTouchMove(a);break;case "touchend":this.onTouchEnd(a)}},onTouchStart:function(a){a.preventDefault();this.moved=!1;this.element.addEventListener("touchmove",this,!1);this.element.addEventListener("touchend",this,!1)},onTouchMove:function(a){this.moved=!0},onTouchEnd:function(a){this.element.removeEventListener("touchmove",this,!1);this.element.removeEventListener("touchend",
this,!1);if(!this.moved){a=document.elementFromPoint(a.changedTouches[0].clientX,a.changedTouches[0].clientY);3==a.nodeType&&(a=a.parentNode);var f=document.createEvent("MouseEvents");f.initEvent("click",!0,!0);a.dispatchEvent(f)}}};
(function(){function a(b){var d={focus:"visible",focusin:"visible",pageshow:"visible",blur:"hidden",focusout:"hidden",pagehide:"hidden"};b=b||window.event;b.type in d?document.body.className=d[b.type]:(document.body.className=this[f]?"hidden":"visible","hidden"===document.body.className?(s_oMain.stopUpdate(),s_bFocus=!1):(s_oMain.startUpdate(),s_bFocus=!0))}var f="hidden";f in document?document.addEventListener("visibilitychange",a):(f="mozHidden")in document?document.addEventListener("mozvisibilitychange",
a):(f="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",a):(f="msHidden")in document?document.addEventListener("msvisibilitychange",a):"onfocusin"in document?document.onfocusin=document.onfocusout=a:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=a})();function playSound(a,f,b){return!1===DISABLE_SOUND_MOBILE||!1===s_bMobile?(s_aSounds[a].play(),s_aSounds[a].volume(f),s_aSounds[a].loop(b),s_aSounds[a]):null}
function stopSound(a){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].stop()}function setVolume(a,f){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].volume(f)}function setMute(a,f){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].mute(f)}function ctlArcadeResume(){null!==s_oMain&&s_oMain.startUpdate()}function ctlArcadePause(){null!==s_oMain&&s_oMain.stopUpdate()}
function getParamValue(a){for(var f=window.location.search.substring(1).split("&"),b=0;b<f.length;b++){var d=f[b].split("=");if(d[0]==a)return d[1]}}function fullscreenHandler(){ENABLE_FULLSCREEN&&screenfull.isEnabled&&(s_bFullscreen=screenfull.isFullscreen,null!==s_oInterface&&s_oInterface.resetFullscreenBut(),null!==s_oMenu&&s_oMenu.resetFullscreenBut())}
if(screenfull.isEnabled)screenfull.on("change",function(){s_bFullscreen=screenfull.isFullscreen;null!==s_oInterface&&s_oInterface.resetFullscreenBut();null!==s_oMenu&&s_oMenu.resetFullscreenBut()});
function CSpriteLibrary(){var a={},f,b,d,c,e,g;this.init=function(h,m,l){f={};d=b=0;c=h;e=m;g=l};this.addSprite=function(h,m){if(!a.hasOwnProperty(h)){var l=new Image;a[h]=f[h]={szPath:m,oSprite:l,bLoaded:!1};b++}};this.getSprite=function(h){return a.hasOwnProperty(h)?a[h].oSprite:null};this._onSpritesLoaded=function(){b=0;e.call(g)};this._onSpriteLoaded=function(){c.call(g);++d===b&&this._onSpritesLoaded()};this.loadSprites=function(){for(var h in f)f[h].oSprite.oSpriteLibrary=this,f[h].oSprite.szKey=
h,f[h].oSprite.onload=function(){this.oSpriteLibrary.setLoaded(this.szKey);this.oSpriteLibrary._onSpriteLoaded(this.szKey)},f[h].oSprite.onerror=function(m){var l=m.currentTarget;setTimeout(function(){f[l.szKey].oSprite.src=f[l.szKey].szPath},500)},f[h].oSprite.src=f[h].szPath};this.setLoaded=function(h){a[h].bLoaded=!0};this.isLoaded=function(h){return a[h].bLoaded};this.getNumSprites=function(){return b}}
var CANVAS_WIDTH=960,CANVAS_HEIGHT=1260,EDGEBOARD_X=96,EDGEBOARD_Y=40,DISABLE_SOUND_MOBILE=!1,FPS=35,FPS_TIME=1E3/FPS,FONT_GAME="katanaregular",FONT_COLOR="#FFCC00",SOUNDTRACK_VOLUME_IN_GAME=.5,STATE_LOADING=0,STATE_MENU=1,STATE_HELP=1,STATE_GAME=3,ON_MOUSE_DOWN=0,ON_MOUSE_UP=1,ON_MOUSE_OVER=2,ON_MOUSE_OUT=3,ON_DRAG_START=4,ON_DRAG_END=5,ON_PRESS_MOVE=6,NUM_FRUITS=6,Y_START_FRUIT=CANVAS_HEIGHT+200,OCCURENCE_FRUIT,MAX_FRUIT_ROT_SPEED,NUM_LIVES,STARTING_SIMULTANEOUS_FRUITS,MAX_SIMULTANEOUS_FRUITS,FRUIT_TO_CUT_FOR_LEVEL_UP,
TIME_FOR_COMBO,COMBO_TWO_FRUIT,LINE_DRAW_INTERVAL=100,BOMB_SYMBOL=6,ENABLE_FULLSCREEN,ENABLE_CHECK_ORIENTATION,TEXT_LOSE="GAME OVER",TEXT_WIN="CONGRATULATIONS!!!",TEXT_SCORE="SCORE %s",TEXT_MULTIPLIER_LIFE="X%s",TEXT_PLAY="PLAY",TEXT_RESTART="RESTART",TEXT_EXIT="EXIT",TEXT_GAMEOVER="GAME OVER",TEXT_COMBO="COMBO\n%s",TEXT_HELP="CUT THE FRUITS WITH THE MOUSE CURSOR AND AVOID THE BOMBS!",TEXT_HELP_MOBILE="CUT THE FRUITS WITH THE FINGER AND AVOID THE BOMBS!",TEXT_CREDITS_DEVELOPED="DEVELOPED BY",TEXT_PRELOADER_CONTINUE=
"START",TEXT_SHARE_IMAGE="200x200.jpg",TEXT_SHARE_TITLE="Congratulations!",TEXT_SHARE_MSG1="You collected <strong>",TEXT_SHARE_MSG2=" points</strong>!<br><br>Share your score with your friends!",TEXT_SHARE_SHARE1="My score is ",TEXT_SHARE_SHARE2=" points! Can you do better?";
function CPreloader(){var a,f,b,d,c,e,g,h,m,l;this._init=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this);s_oSpriteLibrary.addSprite("progress_bar","./sprites/progress_bar.png");s_oSpriteLibrary.addSprite("200x200","./sprites/200x200.jpg");s_oSpriteLibrary.addSprite("but_start","./sprites/but_start.png");s_oSpriteLibrary.loadSprites();l=new createjs.Container;s_oStage.addChild(l)};this.unload=function(){l.removeAllChildren();m.unload()};this._onImagesLoaded=function(){};
this._onAllImagesLoaded=function(){this.attachSprites();s_oMain.preloaderReady()};this.attachSprites=function(){var n=new createjs.Shape;n.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);l.addChild(n);n=s_oSpriteLibrary.getSprite("200x200");g=createBitmap(n);g.regX=.5*n.width;g.regY=.5*n.height;g.x=CANVAS_WIDTH/2;g.y=CANVAS_HEIGHT/2-180;l.addChild(g);h=new createjs.Shape;h.graphics.beginFill("rgba(0,0,0,0.01)").drawRoundRect(g.x-100,g.y-100,200,200,10);l.addChild(h);g.mask=h;
n=s_oSpriteLibrary.getSprite("progress_bar");d=createBitmap(n);d.x=CANVAS_WIDTH/2-n.width/2;d.y=CANVAS_HEIGHT/2+50;l.addChild(d);a=n.width;f=n.height;c=new createjs.Shape;c.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(d.x,d.y,1,f);l.addChild(c);d.mask=c;b=new createjs.Text("","30px "+FONT_GAME,"#fff");b.x=CANVAS_WIDTH/2;b.y=CANVAS_HEIGHT/2+100;b.textBaseline="alphabetic";b.textAlign="center";l.addChild(b);n=s_oSpriteLibrary.getSprite("but_start");m=new CTextButton(CANVAS_WIDTH/2,CANVAS_HEIGHT/
2,n,TEXT_PRELOADER_CONTINUE,"Arial","#000",40,l);m.addEventListener(ON_MOUSE_UP,this._onButStartRelease,this);m.setVisible(!1);e=new createjs.Shape;e.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);l.addChild(e);createjs.Tween.get(e).to({alpha:0},500).call(function(){createjs.Tween.removeTweens(e);l.removeChild(e)})};this._onButStartRelease=function(){s_oMain._onRemovePreloader()};this.refreshLoader=function(n){b.text=n+"%";100===n&&(m.setVisible(!1),b.visible=!1,d.visible=!1,
s_oMain._onRemovePreloader());c.graphics.clear();n=Math.floor(n*a/100);c.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(d.x,d.y,n,f)};this._init()}
function CMain(a){var f,b=0,d=0,c=STATE_LOADING,e,g;this.initContainer=function(){s_oCanvas=document.getElementById("canvas");s_oStage=new createjs.Stage(s_oCanvas);s_bMobile=isMobile();!1===s_bMobile&&(s_oStage.enableMouseOver(20),$("body").on("contextmenu","#canvas",function(m){return!1}));createjs.Touch.enable(s_oStage,!0);s_iPrevTime=(new Date).getTime();createjs.Ticker.addEventListener("tick",this._update);createjs.Ticker.framerate=FPS;navigator.userAgent.match(/Windows Phone/i)&&(DISABLE_SOUND_MOBILE=
!0);s_oSpriteLibrary=new CSpriteLibrary;e=new CPreloader};this.preloaderReady=function(){this._loadImages();!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||this._initSounds();f=!0};this.soundLoaded=function(){b++;e.refreshLoader(Math.floor(b/d*100))};this._initSounds=function(){Howler.mute(!s_bAudioActive);s_aSoundsInfo=[];s_aSoundsInfo.push({path:"./sounds/",filename:"explosion",loop:!1,volume:1,ingamename:"explosion"});s_aSoundsInfo.push({path:"./sounds/",filename:"click",loop:!1,volume:1,ingamename:"click"});
s_aSoundsInfo.push({path:"./sounds/",filename:"gameover",loop:!1,volume:1,ingamename:"gameover"});s_aSoundsInfo.push({path:"./sounds/",filename:"fruit_slice_1",loop:!1,volume:1,ingamename:"fruit_slice_1"});s_aSoundsInfo.push({path:"./sounds/",filename:"fruit_slice_2",loop:!1,volume:1,ingamename:"fruit_slice_2"});s_aSoundsInfo.push({path:"./sounds/",filename:"fruit_slice_3",loop:!1,volume:1,ingamename:"fruit_slice_3"});s_aSoundsInfo.push({path:"./sounds/",filename:"bomb_fuse",loop:!1,volume:1,ingamename:"bomb_fuse"});
s_aSoundsInfo.push({path:"./sounds/",filename:"boing_fruit",loop:!1,volume:1,ingamename:"boing_fruit"});s_aSoundsInfo.push({path:"./sounds/",filename:"combo",loop:!1,volume:1,ingamename:"combo"});s_aSoundsInfo.push({path:"./sounds/",filename:"soundtrack",loop:!0,volume:1,ingamename:"soundtrack"});d+=s_aSoundsInfo.length;s_aSounds=[];for(var m=0;m<s_aSoundsInfo.length;m++)this.tryToLoadSound(s_aSoundsInfo[m],!1)};this.tryToLoadSound=function(m,l){setTimeout(function(){s_aSounds[m.ingamename]=new Howl({src:[m.path+
m.filename+".mp3"],autoplay:!1,preload:!0,loop:m.loop,volume:m.volume,onload:s_oMain.soundLoaded,onloaderror:function(n,t){for(var q=0;q<s_aSoundsInfo.length;q++)if(n===s_aSounds[s_aSoundsInfo[q].ingamename]._sounds[0]._id){s_oMain.tryToLoadSound(s_aSoundsInfo[q],!0);break}},onplayerror:function(n){for(var t=0;t<s_aSoundsInfo.length;t++)if(n===s_aSounds[s_aSoundsInfo[t].ingamename]._sounds[0]._id){s_aSounds[s_aSoundsInfo[t].ingamename].once("unlock",function(){s_aSounds[s_aSoundsInfo[t].ingamename].play();
"soundtrack"===s_aSoundsInfo[t].ingamename&&null!==s_oGame&&setVolume("soundtrack",SOUNDTRACK_VOLUME_IN_GAME)});break}}})},l?200:0)};this._loadImages=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this);s_oSpriteLibrary.addSprite("but_play","./sprites/but_play.png");s_oSpriteLibrary.addSprite("but_exit","./sprites/but_exit.png");s_oSpriteLibrary.addSprite("bg_menu","./sprites/bg_menu.jpg");s_oSpriteLibrary.addSprite("bg_game","./sprites/bg_game.jpg");s_oSpriteLibrary.addSprite("gameover_bg",
"./sprites/gameover_bg.png");s_oSpriteLibrary.addSprite("audio_icon","./sprites/audio_icon.png");s_oSpriteLibrary.addSprite("help_bg","./sprites/help_bg.png");s_oSpriteLibrary.addSprite("hit_area","./sprites/hit_area.png");s_oSpriteLibrary.addSprite("bomb","./sprites/bomb.png");s_oSpriteLibrary.addSprite("bomb_ray","./sprites/bomb_ray.png");s_oSpriteLibrary.addSprite("life","./sprites/life.png");s_oSpriteLibrary.addSprite("miss","./sprites/miss.png");s_oSpriteLibrary.addSprite("but_credits","./sprites/but_credits.png");
s_oSpriteLibrary.addSprite("but_fullscreen","./sprites/but_fullscreen.png");s_oSpriteLibrary.addSprite("logo_ctl","./sprites/logo_ctl.png");for(var m=0;m<NUM_FRUITS;m++)s_oSpriteLibrary.addSprite("fruit_"+m,"./sprites/fruit_"+m+".png"),s_oSpriteLibrary.addSprite("stain_"+m,"./sprites/stain_"+m+".png");d+=s_oSpriteLibrary.getNumSprites();s_oSpriteLibrary.loadSprites()};this._onImagesLoaded=function(){b++;e.refreshLoader(Math.floor(b/d*100))};this._onAllImagesLoaded=function(){};this._onRemovePreloader=
function(){e.unload();s_oSoundTrack=playSound("soundtrack",SOUNDTRACK_VOLUME_IN_GAME,!0);this.gotoMenu()};this.gotoMenu=function(){new CMenu;c=STATE_MENU};this.gotoGame=function(){g=new CGame(h);c=STATE_GAME};this.gotoHelp=function(){new CHelpPanel;c=STATE_HELP};this.stopUpdate=function(){f=!1;createjs.Ticker.paused=!0;$("#block_game").css("display","block");!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||Howler.mute(!0)};this.startUpdate=function(){s_iPrevTime=(new Date).getTime();f=!0;createjs.Ticker.paused=
!1;$("#block_game").css("display","none");(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)&&s_bAudioActive&&Howler.mute(!1)};this._update=function(m){if(!1!==f){var l=(new Date).getTime();s_iTimeElaps=l-s_iPrevTime;s_iCntTime+=s_iTimeElaps;s_iCntFps++;s_iPrevTime=l;1E3<=s_iCntTime&&(s_iCurFps=s_iCntFps,s_iCntTime-=1E3,s_iCntFps=0);c===STATE_GAME&&g.update();s_oStage.update(m)}};s_oMain=this;var h=a;ENABLE_FULLSCREEN=a.fullscreen;ENABLE_CHECK_ORIENTATION=a.check_orientation;s_bAudioActive=a.audio_enable_on_startup;
this.initContainer()}var s_bMobile,s_bAudioActive=!1,s_bFullscreen=!1,s_iCntTime=0,s_iTimeElaps=0,s_iPrevTime=0,s_iCntFps=0,s_iCurFps=0,s_oDrawLayer,s_oStage,s_oMain,s_oCanvas,s_oSpriteLibrary,s_oSoundTrack=null,s_aSounds,s_aSoundsInfo;
function CMenu(){var a,f,b,d,c,e,g,h,m,l,n,t,q=null,v=null;this._init=function(){g=new createBitmap(s_oSpriteLibrary.getSprite("bg_menu"));s_oStage.addChild(g);var x=s_oSpriteLibrary.getSprite("but_play");h=new CTextButton(CANVAS_WIDTH/2,CANVAS_HEIGHT-180,x,TEXT_PLAY,FONT_GAME,"#ffc600",60,s_oStage);h.addEventListener(ON_MOUSE_UP,this._onButPlayRelease,this);x=s_oSpriteLibrary.getSprite("but_credits");b=20+x.width/2;d=x.height/2+20;n=new CGfxButton(b,d,x,s_oStage);n.addEventListener(ON_MOUSE_UP,this._onCredits,
this);if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)x=s_oSpriteLibrary.getSprite("audio_icon"),c=CANVAS_WIDTH-x.height/2-10,e=x.height/2+10,l=new CToggle(c,e,x,s_bAudioActive,s_oStage),l.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this);x=window.document;var C=x.documentElement;q=C.requestFullscreen||C.mozRequestFullScreen||C.webkitRequestFullScreen||C.msRequestFullscreen;v=x.exitFullscreen||x.mozCancelFullScreen||x.webkitExitFullscreen||x.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(q=!1);q&&screenfull.isEnabled&&
(x=s_oSpriteLibrary.getSprite("but_fullscreen"),a=b+x.width/2+10,f=d,t=new CToggle(a,f,x,s_bFullscreen,s_oStage),t.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this));m=new createjs.Shape;m.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);s_oStage.addChild(m);createjs.Tween.get(m).to({alpha:0},1E3).call(function(){m.visible=!1});this.refreshButtonPos(s_iOffsetX,s_iOffsetY)};this.refreshButtonPos=function(x,C){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||l.setPosition(c-
x,C+e);q&&screenfull.isEnabled&&t.setPosition(a+x,f+C);n.setPosition(b+x,d+C)};this.unload=function(){h.unload();h=null;if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)l.unload(),l=null;q&&screenfull.isEnabled&&t.unload();s_oStage.removeAllChildren();s_oMenu=null};this._onAudioToggle=function(){Howler.mute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this._onButPlayRelease=function(){s_oMenu.unload();$(s_oMain).trigger("start_session");s_oMain.gotoGame()};this._onCredits=function(){new CCreditsPanel};
this.resetFullscreenBut=function(){q&&screenfull.isEnabled&&t.setActive(s_bFullscreen)};this._onFullscreenRelease=function(){s_bFullscreen?v.call(window.document):q.call(window.document.documentElement);sizeHandler()};s_oMenu=this;this._init()}var s_oMenu=null;
function CTextButton(a,f,b,d,c,e,g,h){var m,l,n,t,q,v,x,C,D;this._init=function(A,r,F,J,G,w,L,u){m=!1;l=[];n=[];D=u;v=new createjs.Container;v.x=A;v.y=r;v.cursor="pointer";D.addChild(v);x=createBitmap(F);x.regX=F.width/2;x.regY=F.height/2;v.addChild(x);A=F.width-40;F=F.height-20;C=new CTLText(v,-6-A/2,-4-F/2,A,F,44,"center",FONT_COLOR,FONT_GAME,1,2,2,J,!0,!0,!1,!1);C.setShadow("#000",2,2,2);this._initListener()};this.unload=function(){v.off("mousedown",t);v.off("pressup",q);D.removeChild(v)};this.setVisible=
function(A){v.visible=A};this.enable=function(){m=!1;C.setColor("#fff")};this.disable=function(){m=!0;C.setColor("#a39b9d")};this._initListener=function(){t=v.on("mousedown",this.buttonDown);q=v.on("pressup",this.buttonRelease)};this.addEventListener=function(A,r,F){l[A]=r;n[A]=F};this.buttonRelease=function(){m||(playSound("click",1,!1),v.scaleX=1,v.scaleY=1,l[ON_MOUSE_UP]&&l[ON_MOUSE_UP].call(n[ON_MOUSE_UP]))};this.buttonDown=function(){m||(v.scaleX=.9,v.scaleY=.9,l[ON_MOUSE_DOWN]&&l[ON_MOUSE_DOWN].call(n[ON_MOUSE_DOWN]))};
this.setPosition=function(A,r){v.x=A;v.y=r};this.changeText=function(A){C.refreshText(A)};this.setX=function(A){v.x=A};this.setY=function(A){v.y=A};this.getButtonImage=function(){return v};this.getX=function(){return v.x};this.getY=function(){return v.y};this._init(a,f,b,d,c,e,g,h);return this}
function CToggle(a,f,b,d,c){var e,g,h,m,l,n,t;this._init=function(q,v,x,C,D){t=void 0!==D?D:s_oStage;g=[];h=[];D=new createjs.SpriteSheet({images:[x],frames:{width:x.width/2,height:x.height,regX:x.width/2/2,regY:x.height/2},animations:{state_true:[0],state_false:[1]}});e=C;m=createSprite(D,"state_"+e,x.width/2/2,x.height/2,x.width/2,x.height);m.x=q;m.y=v;m.stop();s_bMobile||(m.cursor="pointer");t.addChild(m);this._initListener()};this.unload=function(){m.off("mousedown",l);m.off("pressup",n);t.removeChild(m)};
this._initListener=function(){l=m.on("mousedown",this.buttonDown);n=m.on("pressup",this.buttonRelease)};this.addEventListener=function(q,v,x){g[q]=v;h[q]=x};this.setCursorType=function(q){m.cursor=q};this.setActive=function(q){e=q;m.gotoAndStop("state_"+e)};this.buttonRelease=function(){m.scaleX=1;m.scaleY=1;playSound("click",1,!1);e=!e;m.gotoAndStop("state_"+e);g[ON_MOUSE_UP]&&g[ON_MOUSE_UP].call(h[ON_MOUSE_UP],e)};this.buttonDown=function(){m.scaleX=.9;m.scaleY=.9;g[ON_MOUSE_DOWN]&&g[ON_MOUSE_DOWN].call(h[ON_MOUSE_DOWN])};
this.setPosition=function(q,v){m.x=q;m.y=v};this._init(a,f,b,d,c)}
function CGfxButton(a,f,b,d){var c,e,g,h,m,l,n,t;this._init=function(v,x,C){c=[];e=[];t=new createBitmap(C);t.x=v;t.y=x;t.regX=C.width/2;t.regY=C.height/2;t.cursor="pointer";q.addChild(t);this._initListener()};this.unload=function(){t.off("mousedown",g);t.off("pressup",h);t.off("pressmove",l);!1===s_bMobile&&(t.off("mouseover",m),t.off("mouseout",n));q.removeChild(t)};this.setVisible=function(v){t.visible=v};this._initListener=function(){g=t.on("mousedown",this.buttonDown);h=t.on("pressup",this.buttonRelease);
l=t.on("pressmove",this.onPressMove);!1===s_bMobile&&(m=t.on("mouseover",this.buttonOver),n=t.on("mouseout",this.buttonOut))};this.addEventListener=function(v,x,C){c[v]=x;e[v]=C};this.buttonRelease=function(v){playSound("click",1,!1);t.scaleX=1;t.scaleY=1;c[ON_MOUSE_UP]&&c[ON_MOUSE_UP].call(e[ON_MOUSE_UP],{event:v})};this.buttonDown=function(v){t.scaleX=.9;t.scaleY=.9;c[ON_MOUSE_DOWN]&&c[ON_MOUSE_DOWN].call(e[ON_MOUSE_DOWN],{event:v})};this.onPressMove=function(v){c[ON_PRESS_MOVE]&&c[ON_PRESS_MOVE].call(e[ON_PRESS_MOVE],
{event:v})};this.buttonOver=function(){c[ON_MOUSE_OVER]&&c[ON_MOUSE_OVER].call(e[ON_MOUSE_OVER])};this.buttonOut=function(){c[ON_MOUSE_OUT]&&c[ON_MOUSE_OUT].call(e[ON_MOUSE_OUT])};this.setPosition=function(v,x){t.x=v;t.y=x};this.setX=function(v){t.x=v};this.setY=function(v){t.y=v};this.getSprite=function(){return t};this.getX=function(){return t.x};this.getY=function(){return t.y};var q=d;this._init(a,f,b);return this}
function CHitArea(a,f,b){var d,c,e;this._init=function(g,h,m){d=[];c=[];e=new createBitmap(m);e.x=g;e.y=h;e.regX=m.width/2;e.regY=m.height/2;s_oStage.addChild(e);this._initListener()};this.unload=function(){e.off("mousedown",this.buttonDown);e.off("pressup",this.buttonRelease);e.off("pressmove",this.onPressMove);!1===s_bMobile&&(e.off("mouseover",this.buttonOver),e.off("mouseout",this.buttonOut));s_oStage.removeChild(e)};this.setVisible=function(g){e.visible=g};this._initListener=function(){e.on("mousedown",
this.buttonDown);e.on("pressup",this.buttonRelease);e.on("pressmove",this.onPressMove);!1===s_bMobile&&(e.on("mouseover",this.buttonOver),e.on("mouseout",this.buttonOut))};this.addEventListener=function(g,h,m){d[g]=h;c[g]=m};this.buttonRelease=function(g){e.scaleX=1;e.scaleY=1;d[ON_MOUSE_UP]&&d[ON_MOUSE_UP].call(c[ON_MOUSE_UP],{event:g})};this.buttonDown=function(g){e.scaleX=.9;e.scaleY=.9;d[ON_MOUSE_DOWN]&&d[ON_MOUSE_DOWN].call(c[ON_MOUSE_DOWN],{event:g})};this.onPressMove=function(g){d[ON_PRESS_MOVE]&&
d[ON_PRESS_MOVE].call(c[ON_PRESS_MOVE],{event:g})};this.buttonOver=function(){d[ON_MOUSE_OVER]&&d[ON_MOUSE_OVER].call(c[ON_MOUSE_OVER])};this.buttonOut=function(){d[ON_MOUSE_OUT]&&d[ON_MOUSE_OUT].call(c[ON_MOUSE_OUT])};this.setPosition=function(g,h){e.x=g;e.y=h};this.setX=function(g){e.x=g};this.setY=function(g){e.y=g};this.getSprite=function(){return e};this.getX=function(){return e.x};this.getY=function(){return e.y};this._init(a,f,b);return this}
function CGame(a){var f=!1,b=!1,d,c,e,g,h,m,l,n,t,q,v,x,C,D,A=[],r=[],F,J,G,w,L,u,I,E,S,O=null,P,U,Z,V=null;this._init=function(){n=D=C=e=0;m=NUM_LIVES;q=t=OCCURENCE_FRUIT;l=STARTING_SIMULTANEOUS_FRUITS;x=0;P=new createBitmap(s_oSpriteLibrary.getSprite("bg_game"));s_oStage.addChild(P);I=new createjs.Container;s_oStage.addChild(I);E=new createjs.Container;s_oStage.addChild(E);u=new createjs.Container;s_oStage.addChild(u);O=new createjs.Shape;u.addChild(O);U=new CHitArea(CANVAS_WIDTH/2,CANVAS_HEIGHT/
2,s_oSpriteLibrary.getSprite("hit_area"));U.addEventListener(ON_MOUSE_DOWN,this._onMouseDown,this);U.addEventListener(ON_MOUSE_UP,this._onMouseUp,this);U.addEventListener(ON_MOUSE_OUT,this._onMouseOut,this);U.addEventListener(ON_PRESS_MOVE,this._onMouseMoving,this);Z=new CInterface;V=CEndPanel();new CHelpPanel;J=[];for(var p=Math.floor(CANVAS_WIDTH/30),y=EDGEBOARD_X+20;y<CANVAS_WIDTH-EDGEBOARD_X-20;)J.push(y),y+=p;F=[];c=d=!1;$(s_oMain).trigger("start_level",1)};this.unload=function(){b=!0;if(!1===
DISABLE_SOUND_MOBILE||!1===s_bMobile)stopSound("bomb_fuse"),s_oSoundTrack=null;U.unload();V&&V.unload();Z.unload();s_oStage.removeAllChildren()};this.exitFromHelp=function(){f=!0};this.loseLife=function(p){var y=s_oSpriteLibrary.getSprite("miss"),k=createBitmap(y);k.alpha=0;p.getX()<s_iOffsetX?k.x=s_iOffsetX+y.width/2:p.getX()>CANVAS_WIDTH-s_iOffsetX?k.x=CANVAS_WIDTH-s_iOffsetX-y.width/2:k.x=p.getX();k.y=CANVAS_HEIGHT-y.height-s_iOffsetY;k.regX=y.width/2;u.addChild(k);0>k.x?k.x=y.width/2:k.x>CANVAS_WIDTH&&
(k.x=CANVAS_WIDTH-y.width/2);createjs.Tween.get(k).to({alpha:1},500).call(function(){createjs.Tween.get(k).wait(1500).to({alpha:0},500)});m--;Z.loseLife(m);0===m&&this.gameOver()};this.gameOver=function(){if(!b){f=!1;$(s_oMain).trigger("end_level",1);if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)S=playSound("gameover",1,!1),S.on("end",this.gameOVerSfxComplete),setVolume("soundtrack",0);this.removeAllLines();V.show(e)}};this.gameOVerSfxComplete=function(){setVolume("soundtrack",SOUNDTRACK_VOLUME_IN_GAME)};
this.showCombo=function(){playSound("combo",1,!1);var p=COMBO_TWO_FRUIT*D;e+=p;Z.refreshScore(e);var y=new createjs.Shape;y.alpha=0;y.graphics.beginFill("#fffC00").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);u.addChild(y);createjs.Tween.get(y).to({alpha:.8},200).call(function(){createjs.Tween.get(y).to({alpha:0},200).call(function(){u.removeChild(y)})});var k=new CTLText(E,L.x-100,L.y-65,200,130,60,"center",s_aFruitColors[Math.floor(Math.random()*s_aFruitColors.length)],FONT_GAME,1,2,2,sprintf(TEXT_COMBO,
p),!0,!0,!0,!1);k.setShadow("#000",2,2,2);createjs.Tween.get(k.getText()).to({alpha:1},500).wait(1500).to({alpha:0},500).call(function(){k.unload()})};this.launchFruit=function(){for(var p=Math.random()*(l-1)+1,y=0;y<p;y++){var k=Math.floor(Math.random()*J.length),H=Math.floor(Math.random()*s_aFruitSpriteSheet.length);if(H===BOMB_SYMBOL)if(6>n){do H=Math.floor(Math.random()*s_aFruitSpriteSheet.length);while(H===BOMB_SYMBOL);k=new CFruit(J[k],Y_START_FRUIT,s_aFruitSpriteSheet[H],s_aFruitSize[H],s_aFruitSpeed[H],
H,E)}else k=new CBomb(J[k],Y_START_FRUIT,s_aFruitSpriteSheet[H],s_aFruitSize[H],s_aFruitSpeed[H],H,E);else k=new CFruit(J[k],Y_START_FRUIT,s_aFruitSpriteSheet[H],s_aFruitSize[H],s_aFruitSpeed[H],H,E);A.push(k);n++}playSound("boing_fruit",1,!1)};this.onExit=function(){this.unload();$(s_oMain).trigger("share_event",e);$(s_oMain).trigger("end_level",1);$(s_oMain).trigger("end_session");s_oMain.gotoMenu()};this._onMouseDown=function(p){!0!==d&&(d=!0,v=0,p=p.event,p||(p=window.event),g=p.stageX,h=p.stageY,
s_bMobile&&!1===isIOS()?w=G={x:p.stageX,y:p.stageY}:(g/=s_iScaleFactor,h/=s_iScaleFactor,w=G={x:p.stageX/s_iScaleFactor,y:p.stageY/s_iScaleFactor}),O.uncache(),O.graphics.setStrokeStyle(10,"round",0,0,!0).beginStroke("#fff"),O.graphics.moveTo(w.x,w.y))};this._onMouseUp=function(){c=d=!1;O.graphics.clear();O.cache(0,0,CANVAS_WIDTH,CANVAS_HEIGHT)};this._onMouseMoving=function(p){p=p.event;p||(p=window.event);g=p.stageX;h=p.stageY;s_bMobile&&!1===isIOS()||(g/=s_iScaleFactor,h/=s_iScaleFactor)};this._onMouseOut=
function(){d&&this._onMouseUp()};this.showExplosion=function(){var p=new createjs.Shape;p.alpha=0;p.graphics.beginFill("#fff").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);u.addChild(p);createjs.Tween.get(p).to({alpha:1},1E3).call(function(){s_oGame.gameOver();E.removeAllChildren();createjs.Tween.get(p).to({alpha:0},1500).call(function(){u.removeChild(p)})})};this.bombExplosion=function(p){A[p].explode()};this.assignScore=function(p,y){new CStain(p.getX(),p.getY(),y,I);new CWinText(p.getX(),p.getY(),
s_aFruitScore[y],s_aFruitColors[y]);e+=s_aFruitScore[y];Z.refreshScore(e);C++;0===C%FRUIT_TO_CUT_FOR_LEVEL_UP&&(l++,l>MAX_SIMULTANEOUS_FRUITS&&(l=MAX_SIMULTANEOUS_FRUITS));D++;L={x:p.getX(),y:p.getY()}};this.removeSlices=function(p){for(var y=0;y<A.length;y++)A[y]===p&&r.push(p)};this.removeAllLines=function(){for(var p=0;p<F.length;p++)u.removeChild(F[p].line);F=[]};this.dotProductV2=function(p,y){return p.getX()*y.getX()+p.getY()*y.getY()};this.distanceV2=function(p,y){return Math.sqrt((y.getX()-
p.getX())*(y.getX()-p.getX())+(y.getY()-p.getY())*(y.getY()-p.getY()))};this.distance=function(p,y){return(y.getX()-p.getX())*(y.getX()-p.getX())+(y.getY()-p.getY())*(y.getY()-p.getY())};this.closestPointOnLine=function(p,y,k){var H=new CVector2;H.setV(k);H.subV(p);k=new CVector2;k.setV(y);k.subV(p);k.normalize();H=this.dotProductV2(k,H);if(0>=H)return p;if(H>=this.distanceV2(p,y))return y;k.scalarProduct(H);k.addV(p);return k};this.collideEdgeWithCircle=function(p,y,k,H){p=this.closestPointOnLine(p,
y,k);k=this.distanceV2(k,p);return H<k?!1:!0};this.getCircleLineIntersectionPoint=function(p,y,k,H){var T=y.getX()-p.getX();y=y.getY()-p.getY();var Q=k.getX()-p.getX(),K=k.getY()-p.getY(),z=T*T+y*y;k=(T*Q+y*K)/z;H=k*k-(Q*Q+K*K-H*H)/z;if(0>H)return null;K=Math.sqrt(H);Q=-k+K;k=-k-K;Q=new CVector2(p.getX()-T*Q,p.getY()-y*Q);if(0===H)return Array(Q);p=new CVector2(p.getX()-T*k,p.getY()-y*k);return[Q,p]};this.angleBetweenVectors=function(p,y){var k=Math.acos(this.dotProductV2(p,y)/(p.length()*y.length()));
return!0===isNaN(k)?0:k};this.checkCollisionWithFruit=function(){if(0!==F.length)for(var p=0;p<A.length;p++)if(!1===A[p].isSliced())for(var y=0;y<F.length;y++)if(this.collideEdgeWithCircle(F[y].start_point,F[y].end_point,A[p].getCenter(),A[p].getRadius())){var k=this.getCircleLineIntersectionPoint(F[y].start_point,F[y].end_point,A[p].getCenter(),A[p].getRadius()),H=!0;if(null!==k&&1<k.length)for(var T=k[0],Q=1;Q<k.length;Q++)if(this.distance(T,k[Q])>A[p].getSliceOffset()){if(A[p].getType()===BOMB_SYMBOL){f=
!1;this.bombExplosion(p);return}H=new CVector2(k[Q].getX(),k[Q].getY());H.subV(T);T=A[p].getVectorDir();T=this.angleBetweenVectors(H,T);T=toDegree(T);H=A[p].getCenter();30>T?A[p].sliceVertical():60>T?H.getX()>k[Q].getX()?A[p].sliceDiagonalLeft():A[p].sliceDiagonalRight():120>T?A[p].sliceHorizontal():150>T?H.getX()>k[Q].getX()?A[p].sliceDiagonalRight():A[p].sliceDiagonalLeft():A[p].sliceVertical();this.assignScore(A[p].getCenter(),A[p].getType());H=!1;break}if(!1===H)break}};this.update=function(){if(!1!==
f){q+=s_iTimeElaps;q>t&&(q=0,this.launchFruit());r=[];for(var p=0;p<A.length;p++)A[p].update(),!1===A[p].isSliced()&&A[p].getY()>Y_START_FRUIT&&(r.push(A[p]),A[p].getType()!==BOMB_SYMBOL&&this.loseLife(A[p]));for(p=0;p<r.length;p++)for(var y=0;y<A.length;y++)if(r[p]===A[y]){r[p].unload();A.splice(y,1);break}if(d){if(w.x!==g||w.y!==h)v+=s_iTimeElaps,v>LINE_DRAW_INTERVAL&&(v=0,F.push({line:O,start_point:new CVector2(G.x,G.y),end_point:new CVector2(w.x,w.y)}),O=new createjs.Shape,u.addChild(O),O.graphics.setStrokeStyle(10,
"round",0,0,!0).beginStroke("#fff"),O.graphics.moveTo(w.x,w.y),G={x:w.x,y:w.y});0<F.length&&!1===c&&(c=!0,createjs.Tween.get(F[0].line).to({alpha:0},LINE_DRAW_INTERVAL).call(function(){0<F.length&&(u.removeChild(F[0].line),F.splice(0,1));c=!1}));w={x:g,y:h};O.graphics.lineTo(w.x,w.y)}else if(0<F.length&&!1===c){c=!0;var k=this;for(p=0;p<F.length;p++)createjs.Tween.get(F[p].line).wait(120).to({alpha:0},200).call(function(){k.removeAllLines()})}this.checkCollisionWithFruit();x+=s_iTimeElaps;x>TIME_FOR_COMBO&&
(1<D&&this.showCombo(),x=D=0)}};s_oGame=this;OCCURENCE_FRUIT=a.occurence_fruit;MAX_FRUIT_ROT_SPEED=a.max_fruit_rot_speed;NUM_LIVES=a.num_lives;STARTING_SIMULTANEOUS_FRUITS=a.start_sim_fruit;MAX_SIMULTANEOUS_FRUITS=a.max_sim_fruits;FRUIT_TO_CUT_FOR_LEVEL_UP=a.fruits_for_level_up;TIME_FOR_COMBO=a.time_for_combo;COMBO_TWO_FRUIT=a.combo_points;new CFruitSettings;this._init()}var s_oGame;
function CInterface(){var a,f,b,d,c,e,g,h,m,l,n,t,q,v,x,C,D,A,r,F,J=null,G=null;this._init=function(){e=c=20;C=new createBitmap(s_oSpriteLibrary.getSprite("life"));C.x=20;C.y=20;s_oStage.addChild(C);g=150;h=45;D=new createjs.Container;D.x=g;D.y=h;s_oStage.addChild(D);var w=100,L=50;q=new CTLText(D,-(w/2),-(L/2),w,L,40,"left",FONT_COLOR,FONT_GAME,1,2,2,sprintf(TEXT_MULTIPLIER_LIFE,NUM_LIVES),!0,!0,!1,!1);q.setShadow("#000",2,2,2);b=CANVAS_WIDTH/2;d=45;A=new createjs.Container;A.x=b;A.y=d;s_oStage.addChild(A);
w=200;L=50;x=new CTLText(A,-(w/2),-(L/2),w,L,40,"center",FONT_COLOR,FONT_GAME,1,2,2,sprintf(TEXT_SCORE,0),!0,!0,!1,!1);x.setShadow("#000",2,2,2);w=s_oSpriteLibrary.getSprite("but_exit");n=CANVAS_WIDTH-w.height/2-10;t=w.height/2+10;v=new CGfxButton(n,t,w,s_oStage);v.addEventListener(ON_MOUSE_UP,this._onExit,this);!1===DISABLE_SOUND_MOBILE||!1===s_bMobile?(w=s_oSpriteLibrary.getSprite("audio_icon"),m=n-w.width/2-10,l=w.height/2+10,r=new CToggle(m,l,w,s_bAudioActive,s_oStage),r.addEventListener(ON_MOUSE_UP,
this._onAudioToggle,this),a=m-w.width/2-10,f=l):(a=n-w.width-10,f=w.height/2+10);w=window.document;L=w.documentElement;J=L.requestFullscreen||L.mozRequestFullScreen||L.webkitRequestFullScreen||L.msRequestFullscreen;G=w.exitFullscreen||w.mozCancelFullScreen||w.webkitExitFullscreen||w.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(J=!1);J&&screenfull.isEnabled&&(w=s_oSpriteLibrary.getSprite("but_fullscreen"),F=new CToggle(a,f,w,s_bFullscreen,s_oStage),F.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,
this));this.refreshButtonPos(s_iOffsetX,s_iOffsetY)};this.refreshButtonPos=function(w,L){v.setPosition(n-w,L+t);!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||r.setPosition(m-w,L+l);J&&screenfull.isEnabled&&F.setPosition(a-w,f+L);C.x=c+w;C.y=e+L;D.x=g+w;D.y=h+L;A.y=d+L};this.unload=function(){v.unload();v=null;if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)r.unload(),r=null;J&&screenfull.isEnabled&&F.unload();s_oInterface=null};this.loseLife=function(w){q.refreshText(sprintf(TEXT_MULTIPLIER_LIFE,w))};this.refreshScore=
function(w){x.refreshText(sprintf(TEXT_SCORE,w))};this._onAudioToggle=function(){Howler.mute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this.resetFullscreenBut=function(){J&&screenfull.isEnabled&&F.setActive(s_bFullscreen)};this._onFullscreenRelease=function(){s_bFullscreen?G.call(window.document):J.call(window.document.documentElement);sizeHandler()};this._onExit=function(){s_oGame.onExit()};s_oInterface=this;this._init();return this}var s_oInterface=null;
function CEndPanel(){var a,f,b,d,c;this._init=function(){c=new createjs.Container;c.visible=!1;s_oStage.addChild(c);a=createBitmap(s_oSpriteLibrary.getSprite("gameover_bg"));c.addChild(a);var e=550,g=90,h=CANVAS_WIDTH/2,m=CANVAS_HEIGHT/2-132;b=new CTLText(c,h-e/2,m-g/2,e,g,80,"center",FONT_COLOR,FONT_GAME,1,2,2," ",!0,!0,!1,!1);b.setShadow("#000",2,2,2);e=550;g=60;h=CANVAS_WIDTH/2;m=CANVAS_HEIGHT/2+52;f=new CTLText(c,h-e/2,m-g/2,e,g,50,"center",FONT_COLOR,FONT_GAME,1,2,2," ",!0,!0,!1,!1);f.setShadow("#000",
2,2,2);e=s_oSpriteLibrary.getSprite("but_play");d=new CTextButton(CANVAS_WIDTH/2,CANVAS_HEIGHT-280,e,TEXT_RESTART,FONT_GAME,"#ffc600",60,c);d.addEventListener(ON_MOUSE_UP,this._onButRestartRelease,this)};this.unload=function(){c.off("mousedown",this._onExit)};this._initListener=function(){c.on("mousedown",this._onExit)};this.show=function(e){b.refreshText(TEXT_GAMEOVER);f.refreshText(sprintf(TEXT_SCORE,e));c.visible=!0;$(s_oMain).trigger("save_score",e);$(s_oMain).trigger("show_interlevel_ad")};this._onExit=
function(){c.off("mousedown",this._onExit);s_oStage.removeChild(c);s_oGame.onExit()};this._onButRestartRelease=function(){s_oStage.removeAllChildren();$(s_oMain).trigger("restart_level",1);s_oMain.gotoGame()};this._init();return this}
function CHelpPanel(){var a,f,b,d;this._init=function(){d=new createjs.Container;s_oStage.addChild(d);f=new createBitmap(s_oSpriteLibrary.getSprite("help_bg"));d.addChild(f);a=new CTLText(d,CANVAS_WIDTH/2-275,445,550,350,70,"center",FONT_COLOR,FONT_GAME,1,2,2,s_bMobile?TEXT_HELP_MOBILE:TEXT_HELP,!0,!0,!0,!1);a.setShadow("#000",2,2,2);var c=s_oSpriteLibrary.getSprite("but_play");b=new CTextButton(CANVAS_WIDTH/2,CANVAS_HEIGHT-280,c,TEXT_PLAY,FONT_GAME,"#ffc600",60,d);b.addEventListener(ON_MOUSE_UP,
this._onExit,this)};this.unload=function(){b.unload();d.removeAllChildren()};this._onExit=function(){this.unload();s_oGame.exitFromHelp()};this._init()}
function CFruit(a,f,b,d,c,e,g){var h,m,l,n,t,q,v=0,x,C,D,A,r=0,F=0,J,G,w,L,u,I,E,S;this._init=function(P,U,Z,V,p,y,k){S=k;u=createSprite(Z,"idle",V.regX,V.regY,V.width,V.height);u.x=P;u.y=U;S.addChild(u);h=!1;w=V;m=w.width<w.height?Math.floor(w.width/2):Math.floor(w.height/2);J=Math.floor(1*m);J=Math.pow(J,2);q=p;x=q/9;l=P>CANVAS_WIDTH/2?randomFloatBetween(-.5,0,2):randomFloatBetween(0,.5,2);C=randomFloatBetween(-MAX_FRUIT_ROT_SPEED,MAX_FRUIT_ROT_SPEED,2);L=new CVector2(0,-1);G=y};this.unload=function(){S.removeChild(u)};
this.setInfoAfterSlice=function(){h=!0;90<u.rotation?(r=v+2*x,F=v-2*x,n=l+.1,t=l-.1,D=1.2*C,A=1.2*-C):(r=v-2*x,F=v+2*x,n=l-.1,t=l+.1,D=1.2*-C,A=1.2*C);!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||playSound(s_aFruitSpliceSound[G],1,!1)};this.sliceDiagonalRight=function(){this.setInfoAfterSlice();I=createSprite(b,"slice_1",d.regX,d.regY,d.width,d.height);I.x=u.x;I.y=u.y;I.rotation=u.rotation;S.addChild(I);E=createSprite(b,"slice_2",d.regX,d.regY,d.width,d.height);E.x=u.x;E.y=u.y;E.rotation=u.rotation;
S.addChild(E);O.unload()};this.sliceDiagonalLeft=function(){this.setInfoAfterSlice();I=createSprite(b,"slice_3",d.regX,d.regY,d.width,d.height);I.x=u.x;I.y=u.y;I.rotation=u.rotation;S.addChild(I);E=createSprite(b,"slice_4",d.regX,d.regY,d.width,d.height);E.x=u.x;E.y=u.y;E.rotation=u.rotation;S.addChild(E);O.unload()};this.sliceVertical=function(){this.setInfoAfterSlice();I=createSprite(b,"slice_5",d.regX,d.regY,d.width,d.height);I.x=u.x;I.y=u.y;I.rotation=u.rotation;S.addChild(I);E=createSprite(b,
"slice_6",d.regX,d.regY,d.width,d.height);E.x=u.x;E.y=u.y;E.rotation=u.rotation;S.addChild(E);O.unload()};this.sliceHorizontal=function(){this.setInfoAfterSlice();I=createSprite(b,"slice_7",d.regX,d.regY,d.width,d.height);I.x=u.x;I.y=u.y;I.rotation=u.rotation;S.addChild(I);E=createSprite(b,"slice_8",d.regX,d.regY,d.width,d.height);E.x=u.x;E.y=u.y;E.rotation=u.rotation;S.addChild(E);O.unload()};this.getCenter=function(){return new CVector2(u.x,u.y)};this.getRadius=function(){return m};this.getSliceOffset=
function(){return J};this.getX=function(){return u.x};this.getY=function(){return u.y};this.getSprite=function(){return u};this.getRotation=function(){return u.rotation};this.getVectorDir=function(){return rotateVector2D(toRadian(-u.rotation),L)};this.isSliced=function(){return h};this.getType=function(){return G};this.update=function(){v+=x;if(!1===h)u.y=u.y-q+v*v/1E3,u.x+=.1*v*l,u.rotation+=C;else{r+=x;I.y=I.y-q+r*r/1E3;I.x+=.1*v*n;I.rotation+=D;F+=x;E.y=E.y-q+F*F/1E3;E.x+=.1*v*t;E.rotation+=A;
var P=0;I.y>Y_START_FRUIT&&(S.removeChild(I),P++);E.y>Y_START_FRUIT&&(S.removeChild(I),P++);2===P&&s_oGame.removeSlices(this)}};var O=this;this._init(a,f,b,d,c,e,g)}
function CBomb(a,f,b,d,c,e,g){var h,m,l,n=0,t,q,v,x,C,D,A,r,F,J,G,w,L,u,I,E,S,O;this._init=function(P,U,Z,V,p,y,k){O=k;l=!1;I=V;S=new createjs.Container;O.addChild(S);E=createSprite(Z,"idle",V.regX,V.regY,V.width,V.height);E.x=P;E.y=U;E.regX=I.width/2;E.regY=I.height/2;O.addChild(E);A=I.width<I.height?Math.floor(I.width/2):Math.floor(I.height/2);D=Math.floor(1*A);D=Math.pow(D,2);q=p;t=q/9;v=P>CANVAS_WIDTH/2?randomFloatBetween(-.5,0,2):randomFloatBetween(0,.5,2);x=randomFloatBetween(-MAX_FRUIT_ROT_SPEED,
MAX_FRUIT_ROT_SPEED,2);L=new CVector2(0,-1);C=y;u=[{x:10,y:0},{x:-20,y:0},{x:10,y:-10},{x:0,y:20},{x:10,y:-10},{x:-10,y:0}];playSound("bomb_fuse",1,!1)};this.unload=function(){stopSound("bomb_fuse");O.removeChild(E)};this.explode=function(){stopSound("bomb_fuse");playSound(s_aFruitSpliceSound[C],1,!1);F=w=r=0;l=!0;h=E.x;m=E.y;var P=this;J=setInterval(function(){P.changeBrightness();P.tremble()},20);G=setInterval(function(){P.showRay()},150)};this.tremble=function(){var P=u[w];E.x+=P.x;E.y+=P.y;w++;
w===u.length&&(w=0)};this.showRay=function(){var P=s_oSpriteLibrary.getSprite("bomb_ray"),U=createBitmap(P);U.alpha=0;U.regY=P.height/2;U.x=h;U.y=m;U.scaleX=randomFloatBetween(.5,1,2);U.rotation=F;S.addChild(U);createjs.Tween.get(U).to({alpha:1},200);F+=randomFloatBetween(40,55,1);320<F&&(clearInterval(J),clearInterval(G),s_oGame.showExplosion())};this.changeBrightness=function(){if(201>r){var P=(new createjs.ColorMatrix).adjustBrightness(r);E.filters=[new createjs.ColorMatrixFilter(P)];E.cache(0,
0,I.width,I.height);r+=4}};this.getCenter=function(){return new CVector2(E.x,E.y)};this.getRadius=function(){return A};this.getSliceOffset=function(){return D};this.getY=function(){return E.y};this.getSprite=function(){return E};this.getRotation=function(){return E.rotation};this.getVectorDir=function(){return rotateVector2D(toRadian(-E.rotation),L)};this.isSliced=function(){return l};this.getType=function(){return C};this.update=function(){n+=t;!1===l&&(E.y=E.y-q+n*n/1E3,E.x+=.1*n*v,E.rotation+=
x)};this._init(a,f,b,d,c,e,g)}function CLineDrawing(a,f,b){var d,c;this._init=function(e,g,h){d=new createjs.Graphics;d.setStrokeStyle(5);d.beginStroke("rgba(0,0,0,1)");d.moveTo(e,g);c=new createjs.Shape(d);h.addChild(c)};this.hide=function(){createjs.Tween.get(c).to({alpha:0},1E3).call(function(){d.clear()})};this.updateDraw=function(e,g){d.lineTo(e,g)};this._init(a,f,b)}
function CFruitSettings(){this._init=function(){s_aFruitSpriteSheet=[];s_aFruitSize=[];s_aFruitSpeed=[];s_aFruitColors=[];s_aFruitScore=[];s_aFruitSpliceSound=[];var a=s_oSpriteLibrary.getSprite("fruit_0");a={framerate:8,images:[a],frames:{width:90,height:103,regX:45,regY:51},animations:{idle:[0],slice_1:[1],slice_2:[2],slice_3:[3],slice_4:[4],slice_5:[5],slice_6:[6],slice_7:[7],slice_8:[8]}};s_aFruitSpriteSheet[0]=new createjs.SpriteSheet(a);s_aFruitSize[0]={width:90,height:103,regX:45,regY:51};
s_aFruitSpeed[0]=20;s_aFruitColors[0]="#fdc06f";s_aFruitScore[0]=20;s_aFruitSpliceSound[0]="fruit_slice_2";a=s_oSpriteLibrary.getSprite("fruit_1");a={framerate:8,images:[a],frames:{width:90,height:103,regX:45,regY:51},animations:{idle:[0],slice_1:[1],slice_2:[2],slice_3:[3],slice_4:[4],slice_5:[5],slice_6:[6],slice_7:[7],slice_8:[8]}};s_aFruitSpriteSheet[1]=new createjs.SpriteSheet(a);s_aFruitSize[1]={width:90,height:103,regX:45,regY:51};s_aFruitSpeed[1]=24;s_aFruitColors[1]="#cc0001";s_aFruitScore[1]=
30;s_aFruitSpliceSound[1]="fruit_slice_1";a=s_oSpriteLibrary.getSprite("fruit_2");a={framerate:8,images:[a],frames:{width:100,height:122,regX:50,regY:61},animations:{idle:[0],slice_1:[1],slice_2:[2],slice_3:[3],slice_4:[4],slice_5:[5],slice_6:[6],slice_7:[7],slice_8:[8]}};s_aFruitSpriteSheet[2]=new createjs.SpriteSheet(a);s_aFruitSize[2]={width:100,height:122,regX:50,regY:61};s_aFruitSpeed[2]=24;s_aFruitColors[2]="#74542d";s_aFruitScore[2]=40;s_aFruitSpliceSound[2]="fruit_slice_1";a=s_oSpriteLibrary.getSprite("fruit_3");
a={framerate:8,images:[a],frames:{width:87,height:90,regX:43,regY:45},animations:{idle:[0],slice_1:[1],slice_2:[2],slice_3:[3],slice_4:[4],slice_5:[5],slice_6:[6],slice_7:[7],slice_8:[8]}};s_aFruitSpriteSheet[3]=new createjs.SpriteSheet(a);s_aFruitSize[3]={width:87,height:90,regX:43,regY:45};s_aFruitSpeed[3]=18;s_aFruitColors[3]="#fd6909";s_aFruitScore[3]=30;s_aFruitSpliceSound[3]="fruit_slice_3";a=s_oSpriteLibrary.getSprite("fruit_4");a={framerate:8,images:[a],frames:{width:83,height:105,regX:41,
regY:52},animations:{idle:[0],slice_1:[1],slice_2:[2],slice_3:[3],slice_4:[4],slice_5:[5],slice_6:[6],slice_7:[7],slice_8:[8]}};s_aFruitSpriteSheet[4]=new createjs.SpriteSheet(a);s_aFruitSize[4]={width:83,height:105,regX:41,regY:52};s_aFruitSpeed[4]=18;s_aFruitColors[4]="#e8e570";s_aFruitScore[4]=30;s_aFruitSpliceSound[4]="fruit_slice_1";a=s_oSpriteLibrary.getSprite("fruit_5");a={framerate:8,images:[a],frames:{width:200,height:200,regX:100,regY:100},animations:{idle:[0],slice_1:[1],slice_2:[2],slice_3:[3],
slice_4:[4],slice_5:[5],slice_6:[6],slice_7:[7],slice_8:[8]}};s_aFruitSpriteSheet[5]=new createjs.SpriteSheet(a);s_aFruitSize[5]={width:200,height:200,regX:100,regY:100};s_aFruitSpeed[5]=18;s_aFruitColors[5]="#6da818";s_aFruitScore[5]=10;s_aFruitSpliceSound[5]="fruit_slice_3";a=s_oSpriteLibrary.getSprite("bomb");a={framerate:10,images:[a],frames:{width:150,height:150},animations:{idle:[0,1,"idle"]}};s_aFruitSpriteSheet[6]=new createjs.SpriteSheet(a);s_aFruitSize[6]={width:150,height:150,regX:0,regY:0};
s_aFruitSpeed[6]=20;s_aFruitColors[6]="#fff";s_aFruitScore[6]=0;s_aFruitSpliceSound[6]="explosion"};this._init()}var s_aFruitSpriteSheet,s_aFruitSize,s_aFruitSpeed,s_aFruitColors,s_aFruitScore,s_aFruitSpliceSound;
function CVector2(a,f){var b,d;this._init=function(c,e){b=c;d=e};this.add=function(c,e){b+=c;d+=e};this.addV=function(c){b+=c.getX();d+=c.getY()};this.scalarDivision=function(c){b/=c;d/=c};this.subV=function(c){b-=c.getX();d-=c.getY()};this.scalarProduct=function(c){b*=c;d*=c};this.invert=function(){b*=-1;d*=-1};this.dotProduct=function(c){return b*c.getX()+d*c.getY()};this.set=function(c,e){b=c;d=e};this.setV=function(c){b=c.getX();d=c.getY()};this.length=function(){return Math.sqrt(b*b+d*d)};this.length2=
function(){return b*b+d*d};this.normalize=function(){var c=this.length();0<c&&(b/=c,d/=c)};this.getNormalize=function(c){this.length();c.set(b,d);c.normalize()};this.rot90CCW=function(){var c=b;b=-d;d=c};this.rot90CW=function(){var c=b;b=d;d=-c};this.getRotCCW=function(c){c.set(b,d);c.rot90CCW()};this.getRotCW=function(c){c.set(b,d);c.rot90CW()};this.ceil=function(){b=Math.ceil(b);d=Math.ceil(d)};this.round=function(){b=Math.round(b);d=Math.round(d)};this.toString=function(){return"Vector2: "+b+", "+
d};this.print=function(){trace("Vector2: "+b+", "+d)};this.getX=function(){return b};this.getY=function(){return d};this._init(a,f)}
function CWinText(a,f,b,d){var c;this._init=function(e,g,h,m){c=new createjs.Container;c.x=e;c.y=g;s_oStage.addChild(c);var l=new createjs.Text("+"+h,"70px "+FONT_GAME,m);l.textAlign="center";l.textBaseline="middle";l.shadow=new createjs.Shadow("#000000",2,2,3);c.addChild(l);e=Math.floor(1500*Math.random())+500;var n=this;createjs.Tween.get(l).to({y:l.y-100},e,createjs.Ease.sineOut).call(function(){createjs.Tween.get(l).to({alpha:0},500).call(function(){n.unload()})})};this.unload=function(){s_oStage.removeChild(c)};
this._init(a,f,b,d)}function CStain(a,f,b,d){var c,e;this._init=function(g,h,m,l){e=l;m=s_oSpriteLibrary.getSprite("stain_"+m);c=createBitmap(m);c.x=g;c.y=h;c.regX=m.width/2;c.regY=m.height/2;e.addChild(c);var n=this;createjs.Tween.get(c).wait(1E3).to({alpha:0},1E3).call(function(){n.unload()})};this.unload=function(){e.removeChild(c)};this._init(a,f,b,d)}
function CCreditsPanel(){var a,f,b,d,c,e,g;this._init=function(){d=new createjs.Shape;d.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);d.alpha=0;s_oStage.addChild(d);(new createjs.Tween.get(d)).to({alpha:.7},500);var h=s_oSpriteLibrary.getSprite("help_bg");g=new createjs.Container;s_oStage.addChild(g);a=createBitmap(h);g.addChild(a);c=new createjs.Shape;c.graphics.beginFill("#0f0f0f").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);c.alpha=.01;e=c.on("click",this._onLogoButRelease);
g.addChild(c);h=s_oSpriteLibrary.getSprite("but_exit");b=new CGfxButton(715,460,h,g);b.addEventListener(ON_MOUSE_UP,this.unload,this);h=550;var m=50,l=CANVAS_WIDTH/2,n=CANVAS_HEIGHT/2-76;(new CTLText(g,l-h/2,n-m/2,h,m,44,"center",FONT_COLOR,FONT_GAME,1,2,2,TEXT_CREDITS_DEVELOPED,!0,!0,!1,!1)).setShadow("#000",2,2,2);h=s_oSpriteLibrary.getSprite("logo_ctl");f=createBitmap(h);f.regX=h.width/2;f.regY=h.height/2;f.x=CANVAS_WIDTH/2;f.y=CANVAS_HEIGHT/2;g.addChild(f);h=550;m=50;l=CANVAS_WIDTH/2;n=CANVAS_HEIGHT/
2+70;(new CTLText(g,l-h/2,n-m/2,h,m,38,"center",FONT_COLOR,FONT_GAME,1,2,2,"www.codethislab.com",!0,!0,!1,!1)).setShadow("#000",2,2,2);g.alpha=0;(new createjs.Tween.get(g)).to({alpha:1},1E3,createjs.Ease.cubicOut)};this.unload=function(){c.off("click",e);b.unload();b=null;s_oStage.removeChild(d);s_oStage.removeChild(g)};this._onLogoButRelease=function(){window.open("http://www.codethislab.com/index.php?&l=en","_blank")};this._init()}
CTLText.prototype={constructor:CTLText,__autofit:function(){if(this._bFitText){for(var a=this._iFontSize;(this._oText.getBounds().height>this._iHeight-2*this._iPaddingV||this._oText.getBounds().width>this._iWidth-2*this._iPaddingH)&&!(a--,this._oText.font=a+"px "+this._szFont,this._oText.lineHeight=Math.round(a*this._fLineHeightFactor),this.__updateY(),this.__verticalAlign(),8>a););this._iFontSize=a}},__verticalAlign:function(){if(this._bVerticalAlign){var a=this._oText.getBounds().height;this._oText.y-=
(a-this._iHeight)/2+this._iPaddingV}},__updateY:function(){this._oText.y=this._y+this._iPaddingV;switch(this._oText.textBaseline){case "middle":this._oText.y+=this._oText.lineHeight/2+(this._iFontSize*this._fLineHeightFactor-this._iFontSize)}},__createText:function(a){this._bDebug&&(this._oDebugShape=new createjs.Shape,this._oDebugShape.graphics.beginFill("rgba(255,0,0,0.5)").drawRect(this._x,this._y,this._iWidth,this._iHeight),this._oContainer.addChild(this._oDebugShape));this._oText=new createjs.Text(a,
this._iFontSize+"px "+this._szFont,this._szColor);this._oText.textBaseline="middle";this._oText.lineHeight=Math.round(this._iFontSize*this._fLineHeightFactor);this._oText.textAlign=this._szAlign;this._oText.lineWidth=this._bMultiline?this._iWidth-2*this._iPaddingH:null;switch(this._szAlign){case "center":this._oText.x=this._x+this._iWidth/2;break;case "left":this._oText.x=this._x+this._iPaddingH;break;case "right":this._oText.x=this._x+this._iWidth-this._iPaddingH}this._oContainer.addChild(this._oText);
this.refreshText(a)},unload:function(){this._oContainer.removeChild(this._oText)},setVerticalAlign:function(a){this._bVerticalAlign=a},setOutline:function(a){null!==this._oText&&(this._oText.outline=a)},setShadow:function(a,f,b,d){null!==this._oText&&(this._oText.shadow=new createjs.Shadow(a,f,b,d))},setColor:function(a){this._oText.color=a},setAlpha:function(a){this._oText.alpha=a},setX:function(a){this._x=this._oText.x=a},setY:function(a){this._y=this._oText.y=a},removeTweens:function(){createjs.Tween.removeTweens(this._oText)},
getText:function(){return this._oText},getY:function(){return this._y},getFontSize:function(){return this._iFontSize},refreshText:function(a){""===a&&(a=" ");null===this._oText&&this.__createText(a);this._oText.text=a;this._oText.font=this._iFontSize+"px "+this._szFont;this._oText.lineHeight=Math.round(this._iFontSize*this._fLineHeightFactor);this.__autofit();this.__updateY();this.__verticalAlign()}};
function CTLText(a,f,b,d,c,e,g,h,m,l,n,t,q,v,x,C,D){this._oContainer=a;this._x=f;this._y=b;this._iWidth=d;this._iHeight=c;this._bMultiline=C;this._iFontSize=e;this._szAlign=g;this._szColor=h;this._szFont=m;this._iPaddingH=n;this._iPaddingV=t;this._bVerticalAlign=x;this._bFitText=v;this._bDebug=D;this._oDebugShape=null;this._fLineHeightFactor=l;this._oText=null;q&&this.__createText(q)}
!function(){function a(c){var e=c;if(d[e])e=d[e];else{for(var g=e,h,m=[],l=0;g;){if(null!==(h=b.text.exec(g)))m.push(h[0]);else if(null!==(h=b.modulo.exec(g)))m.push("%");else if(null!==(h=b.placeholder.exec(g))){if(h[2]){l|=1;var n=[],t=h[2],q;if(null!==(q=b.key.exec(t)))for(n.push(q[1]);""!==(t=t.substring(q[0].length));)if(null!==(q=b.key_access.exec(t)))n.push(q[1]);else if(null!==(q=b.index_access.exec(t)))n.push(q[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");
else throw new SyntaxError("[sprintf] failed to parse named argument key");h[2]=n}else l|=2;if(3===l)throw Error("[sprintf] mixing positional and named placeholders is not (yet) supported");m.push({placeholder:h[0],param_no:h[1],keys:h[2],sign:h[3],pad_char:h[4],align:h[5],width:h[6],precision:h[7],type:h[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");g=g.substring(h[0].length)}e=d[e]=m}g=arguments;h=1;m=e.length;n="";var v,x;for(t=0;t<m;t++)if("string"===typeof e[t])n+=e[t];
else if("object"===typeof e[t]){q=e[t];if(q.keys)for(l=g[h],v=0;v<q.keys.length;v++){if(void 0==l)throw Error(a('[sprintf] Cannot access property "%s" of undefined value "%s"',q.keys[v],q.keys[v-1]));l=l[q.keys[v]]}else l=q.param_no?g[q.param_no]:g[h++];b.not_type.test(q.type)&&b.not_primitive.test(q.type)&&l instanceof Function&&(l=l());if(b.numeric_arg.test(q.type)&&"number"!==typeof l&&isNaN(l))throw new TypeError(a("[sprintf] expecting number but found %T",l));b.number.test(q.type)&&(x=0<=l);
switch(q.type){case "b":l=parseInt(l,10).toString(2);break;case "c":l=String.fromCharCode(parseInt(l,10));break;case "d":case "i":l=parseInt(l,10);break;case "j":l=JSON.stringify(l,null,q.width?parseInt(q.width):0);break;case "e":l=q.precision?parseFloat(l).toExponential(q.precision):parseFloat(l).toExponential();break;case "f":l=q.precision?parseFloat(l).toFixed(q.precision):parseFloat(l);break;case "g":l=q.precision?String(Number(l.toPrecision(q.precision))):parseFloat(l);break;case "o":l=(parseInt(l,
10)>>>0).toString(8);break;case "s":l=String(l);l=q.precision?l.substring(0,q.precision):l;break;case "t":l=String(!!l);l=q.precision?l.substring(0,q.precision):l;break;case "T":l=Object.prototype.toString.call(l).slice(8,-1).toLowerCase();l=q.precision?l.substring(0,q.precision):l;break;case "u":l=parseInt(l,10)>>>0;break;case "v":l=l.valueOf();l=q.precision?l.substring(0,q.precision):l;break;case "x":l=(parseInt(l,10)>>>0).toString(16);break;case "X":l=(parseInt(l,10)>>>0).toString(16).toUpperCase()}if(b.json.test(q.type))n+=
l;else{if(!b.number.test(q.type)||x&&!q.sign)var C="";else C=x?"+":"-",l=l.toString().replace(b.sign,"");v=q.pad_char?"0"===q.pad_char?"0":q.pad_char.charAt(1):" ";var D=q.width-(C+l).length;D=q.width?0<D?v.repeat(D):"":"";n+=q.align?C+l+D:"0"===v?C+D+l:D+C+l}}return n}function f(c,e){return a.apply(null,[c].concat(e||[]))}var b={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,
placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/},d=Object.create(null);"undefined"!==typeof exports&&(exports.sprintf=a,exports.vsprintf=f);"undefined"!==typeof window&&(window.sprintf=a,window.vsprintf=f,"function"===typeof define&&define.amd&&define(function(){return{sprintf:a,vsprintf:f}}))}();