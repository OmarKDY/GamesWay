/*
 TweenJS
 Visit http://createjs.com/ for documentation, updates and examples.

 Copyright (c) 2010 gskinner.com, inc.

 Permission is hereby granted, free of charge, to any person
 obtaining a copy of this software and associated documentation
 files (the "Software"), to deal in the Software without
 restriction, including without limitation the rights to use,
 copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the
 Software is furnished to do so, subject to the following
 conditions:

 The above copyright notice and this permission notice shall be
 included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.
 Platform.js <https://mths.be/platform>
 Copyright 2014-2018 Benjamin Tan <https://bnjmnt4n.now.sh/>
 Copyright 2011-2013 John-David Dalton
 Available under MIT license <https://mths.be/mit>
*/
this.createjs=this.createjs||{};createjs.extend=function(a,e){function b(){this.constructor=a}b.prototype=e.prototype;return a.prototype=new b};this.createjs=this.createjs||{};createjs.promote=function(a,e){var b=a.prototype,d=Object.getPrototypeOf&&Object.getPrototypeOf(b)||b.__proto__;if(d){b[(e+="_")+"constructor"]=d.constructor;for(var c in d)b.hasOwnProperty(c)&&"function"==typeof d[c]&&(b[e+c]=d[c])}return a};this.createjs=this.createjs||{};
createjs.deprecate=function(a,e){return function(){var b="Deprecated property or method '"+e+"'. See docs for info.";console&&(console.warn?console.warn(b):console.log(b));return a&&a.apply(this,arguments)}};this.createjs=this.createjs||{};
(function(){function a(b,d,c){this.type=b;this.currentTarget=this.target=null;this.eventPhase=0;this.bubbles=!!d;this.cancelable=!!c;this.timeStamp=(new Date).getTime();this.removed=this.immediatePropagationStopped=this.propagationStopped=this.defaultPrevented=!1}var e=a.prototype;e.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0};e.stopPropagation=function(){this.propagationStopped=!0};e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=
!0};e.remove=function(){this.removed=!0};e.clone=function(){return new a(this.type,this.bubbles,this.cancelable)};e.set=function(b){for(var d in b)this[d]=b[d];return this};e.toString=function(){return"[Event (type="+this.type+")]"};createjs.Event=a})();this.createjs=this.createjs||{};
(function(){function a(){this._captureListeners=this._listeners=null}var e=a.prototype;a.initialize=function(b){b.addEventListener=e.addEventListener;b.on=e.on;b.removeEventListener=b.off=e.removeEventListener;b.removeAllEventListeners=e.removeAllEventListeners;b.hasEventListener=e.hasEventListener;b.dispatchEvent=e.dispatchEvent;b._dispatchEvent=e._dispatchEvent;b.willTrigger=e.willTrigger};e.addEventListener=function(b,d,c){var f=c?this._captureListeners=this._captureListeners||{}:this._listeners=
this._listeners||{};var g=f[b];g&&this.removeEventListener(b,d,c);(g=f[b])?g.push(d):f[b]=[d];return d};e.on=function(b,d,c,f,g,k){d.handleEvent&&(c=c||d,d=d.handleEvent);c=c||this;return this.addEventListener(b,function(m){d.call(c,m,g);f&&m.remove()},k)};e.removeEventListener=function(b,d,c){if(c=c?this._captureListeners:this._listeners){var f=c[b];if(f)for(var g=0,k=f.length;g<k;g++)if(f[g]==d){1==k?delete c[b]:f.splice(g,1);break}}};e.off=e.removeEventListener;e.removeAllEventListeners=function(b){b?
(this._listeners&&delete this._listeners[b],this._captureListeners&&delete this._captureListeners[b]):this._listeners=this._captureListeners=null};e.dispatchEvent=function(b,d,c){if("string"==typeof b){var f=this._listeners;if(!(d||f&&f[b]))return!0;b=new createjs.Event(b,d,c)}else b.target&&b.clone&&(b=b.clone());try{b.target=this}catch(g){}if(b.bubbles&&this.parent){c=this;for(d=[c];c.parent;)d.push(c=c.parent);f=d.length;for(c=f-1;0<=c&&!b.propagationStopped;c--)d[c]._dispatchEvent(b,1+(0==c));
for(c=1;c<f&&!b.propagationStopped;c++)d[c]._dispatchEvent(b,3)}else this._dispatchEvent(b,2);return!b.defaultPrevented};e.hasEventListener=function(b){var d=this._listeners,c=this._captureListeners;return!!(d&&d[b]||c&&c[b])};e.willTrigger=function(b){for(var d=this;d;){if(d.hasEventListener(b))return!0;d=d.parent}return!1};e.toString=function(){return"[EventDispatcher]"};e._dispatchEvent=function(b,d){var c,f,g=2>=d?this._captureListeners:this._listeners;if(b&&g&&(f=g[b.type])&&(c=f.length)){try{b.currentTarget=
this}catch(m){}try{b.eventPhase=d|0}catch(m){}b.removed=!1;f=f.slice();for(g=0;g<c&&!b.immediatePropagationStopped;g++){var k=f[g];k.handleEvent?k.handleEvent(b):k(b);b.removed&&(this.off(b.type,k,1==d),b.removed=!1)}}2===d&&this._dispatchEvent(b,2.1)};createjs.EventDispatcher=a})();this.createjs=this.createjs||{};
(function(){function a(){throw"Ticker cannot be instantiated.";}a.RAF_SYNCHED="synched";a.RAF="raf";a.TIMEOUT="timeout";a.timingMode=null;a.maxDelta=0;a.paused=!1;a.removeEventListener=null;a.removeAllEventListeners=null;a.dispatchEvent=null;a.hasEventListener=null;a._listeners=null;createjs.EventDispatcher.initialize(a);a._addEventListener=a.addEventListener;a.addEventListener=function(){!a._inited&&a.init();return a._addEventListener.apply(a,arguments)};a._inited=!1;a._startTime=0;a._pausedTime=
0;a._ticks=0;a._pausedTicks=0;a._interval=50;a._lastTime=0;a._times=null;a._tickTimes=null;a._timerId=null;a._raf=!0;a._setInterval=function(d){a._interval=d;a._inited&&a._setupTick()};a.setInterval=createjs.deprecate(a._setInterval,"Ticker.setInterval");a._getInterval=function(){return a._interval};a.getInterval=createjs.deprecate(a._getInterval,"Ticker.getInterval");a._setFPS=function(d){a._setInterval(1E3/d)};a.setFPS=createjs.deprecate(a._setFPS,"Ticker.setFPS");a._getFPS=function(){return 1E3/
a._interval};a.getFPS=createjs.deprecate(a._getFPS,"Ticker.getFPS");try{Object.defineProperties(a,{interval:{get:a._getInterval,set:a._setInterval},framerate:{get:a._getFPS,set:a._setFPS}})}catch(d){console.log(d)}a.init=function(){a._inited||(a._inited=!0,a._times=[],a._tickTimes=[],a._startTime=a._getTime(),a._times.push(a._lastTime=0),a.interval=a._interval)};a.reset=function(){if(a._raf){var d=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||
window.msCancelAnimationFrame;d&&d(a._timerId)}else clearTimeout(a._timerId);a.removeAllEventListeners("tick");a._timerId=a._times=a._tickTimes=null;a._startTime=a._lastTime=a._ticks=a._pausedTime=0;a._inited=!1};a.getMeasuredTickTime=function(d){var c=0,f=a._tickTimes;if(!f||1>f.length)return-1;d=Math.min(f.length,d||a._getFPS()|0);for(var g=0;g<d;g++)c+=f[g];return c/d};a.getMeasuredFPS=function(d){var c=a._times;if(!c||2>c.length)return-1;d=Math.min(c.length-1,d||a._getFPS()|0);return 1E3/((c[0]-
c[d])/d)};a.getTime=function(d){return a._startTime?a._getTime()-(d?a._pausedTime:0):-1};a.getEventTime=function(d){return a._startTime?(a._lastTime||a._startTime)-(d?a._pausedTime:0):-1};a.getTicks=function(d){return a._ticks-(d?a._pausedTicks:0)};a._handleSynch=function(){a._timerId=null;a._setupTick();a._getTime()-a._lastTime>=.97*(a._interval-1)&&a._tick()};a._handleRAF=function(){a._timerId=null;a._setupTick();a._tick()};a._handleTimeout=function(){a._timerId=null;a._setupTick();a._tick()};a._setupTick=
function(){if(null==a._timerId){var d=a.timingMode;if(d==a.RAF_SYNCHED||d==a.RAF){var c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(c){a._timerId=c(d==a.RAF?a._handleRAF:a._handleSynch);a._raf=!0;return}}a._raf=!1;a._timerId=setTimeout(a._handleTimeout,a._interval)}};a._tick=function(){var d=a.paused,c=a._getTime(),f=c-a._lastTime;a._lastTime=c;a._ticks++;d&&(a._pausedTicks++,a._pausedTime+=
f);if(a.hasEventListener("tick")){var g=new createjs.Event("tick"),k=a.maxDelta;g.delta=k&&f>k?k:f;g.paused=d;g.time=c;g.runTime=c-a._pausedTime;a.dispatchEvent(g)}for(a._tickTimes.unshift(a._getTime()-c);100<a._tickTimes.length;)a._tickTimes.pop();for(a._times.unshift(c);100<a._times.length;)a._times.pop()};var e=window,b=e.performance.now||e.performance.mozNow||e.performance.msNow||e.performance.oNow||e.performance.webkitNow;a._getTime=function(){return(b&&b.call(e.performance)||(new Date).getTime())-
a._startTime};createjs.Ticker=a})();this.createjs=this.createjs||{};
(function(){function a(b){this.EventDispatcher_constructor();this.ignoreGlobalPause=!1;this.loop=0;this.bounce=this.reversed=this.useTicks=!1;this.timeScale=1;this.position=this.duration=0;this.rawPosition=-1;this._paused=!0;this._labelList=this._labels=this._parent=this._prev=this._next=null;b&&(this.useTicks=!!b.useTicks,this.ignoreGlobalPause=!!b.ignoreGlobalPause,this.loop=!0===b.loop?-1:b.loop||0,this.reversed=!!b.reversed,this.bounce=!!b.bounce,this.timeScale=b.timeScale||1,b.onChange&&this.addEventListener("change",
b.onChange),b.onComplete&&this.addEventListener("complete",b.onComplete))}var e=createjs.extend(a,createjs.EventDispatcher);e._setPaused=function(b){createjs.Tween._register(this,b);return this};e.setPaused=createjs.deprecate(e._setPaused,"AbstractTween.setPaused");e._getPaused=function(){return this._paused};e.getPaused=createjs.deprecate(e._getPaused,"AbstactTween.getPaused");e._getCurrentLabel=function(b){var d=this.getLabels();null==b&&(b=this.position);for(var c=0,f=d.length;c<f&&!(b<d[c].position);c++);
return 0===c?null:d[c-1].label};e.getCurrentLabel=createjs.deprecate(e._getCurrentLabel,"AbstractTween.getCurrentLabel");try{Object.defineProperties(e,{paused:{set:e._setPaused,get:e._getPaused},currentLabel:{get:e._getCurrentLabel}})}catch(b){}e.advance=function(b,d){this.setPosition(this.rawPosition+b*this.timeScale,d)};e.setPosition=function(b,d,c,f){var g=this.duration,k=this.loop,m=this.rawPosition,l=0;0>b&&(b=0);if(0===g){var v=!0;if(-1!==m)return v}else{var w=b/g|0;l=b-w*g;(v=-1!==k&&b>=k*
g+g)&&(b=(l=g)*(w=k)+g);if(b===m)return v;!this.reversed!==!(this.bounce&&w%2)&&(l=g-l)}this.position=l;this.rawPosition=b;this._updatePosition(c,v);v&&(this.paused=!0);f&&f(this);d||this._runActions(m,b,c,!c&&-1===m);this.dispatchEvent("change");v&&this.dispatchEvent("complete")};e.calculatePosition=function(b){var d=this.duration,c=this.loop,f=0;if(0===d)return 0;-1!==c&&b>=c*d+d?(b=d,f=c):0>b?b=0:(f=b/d|0,b-=f*d);return!this.reversed!==!(this.bounce&&f%2)?d-b:b};e.getLabels=function(){var b=this._labelList;
if(!b){b=this._labelList=[];var d=this._labels,c;for(c in d)b.push({label:c,position:d[c]});b.sort(function(f,g){return f.position-g.position})}return b};e.setLabels=function(b){this._labels=b;this._labelList=null};e.addLabel=function(b,d){this._labels||(this._labels={});this._labels[b]=d;var c=this._labelList;if(c){for(var f=0,g=c.length;f<g&&!(d<c[f].position);f++);c.splice(f,0,{label:b,position:d})}};e.gotoAndPlay=function(b){this.paused=!1;this._goto(b)};e.gotoAndStop=function(b){this.paused=
!0;this._goto(b)};e.resolve=function(b){var d=Number(b);isNaN(d)&&(d=this._labels&&this._labels[b]);return d};e.toString=function(){return"[AbstractTween]"};e.clone=function(){throw"AbstractTween can not be cloned.";};e._init=function(b){b&&b.paused||(this.paused=!1);b&&null!=b.position&&this.setPosition(b.position)};e._updatePosition=function(b,d){};e._goto=function(b){b=this.resolve(b);null!=b&&this.setPosition(b,!1,!0)};e._runActions=function(b,d,c,f){if(this._actionHead||this.tweens){var g=this.duration,
k=this.reversed,m=this.bounce,l=this.loop,v,w,q;if(0===g){var z=v=w=q=0;k=m=!1}else z=b/g|0,v=d/g|0,w=b-z*g,q=d-v*g;-1!==l&&(v>l&&(q=g,v=l),z>l&&(w=g,z=l));if(c)return this._runActionsRange(q,q,c,f);if(z!==v||w!==q||c||f){-1===z&&(z=w=0);b=b<=d;d=z;do{l=d===z?w:b?0:g;var r=d===v?q:b?g:0;!k!==!(m&&d%2)&&(l=g-l,r=g-r);if((!m||d===z||l!==r)&&this._runActionsRange(l,r,c,f||d!==z&&!m))return!0;f=!1}while(b&&++d<=v||!b&&--d>=v)}}};e._runActionsRange=function(b,d,c,f){};createjs.AbstractTween=createjs.promote(a,
"EventDispatcher")})();this.createjs=this.createjs||{};
(function(){function a(c,f){this.AbstractTween_constructor(f);this.pluginData=null;this.target=c;this.passive=!1;this._stepTail=this._stepHead=new e(null,0,0,{},null,!0);this._stepPosition=0;this._injected=this._pluginIds=this._plugins=this._actionTail=this._actionHead=null;f&&(this.pluginData=f.pluginData,f.override&&a.removeTweens(c));this.pluginData||(this.pluginData={});this._init(f)}function e(c,f,g,k,m,l){this.next=null;this.prev=c;this.t=f;this.d=g;this.props=k;this.ease=m;this.passive=l;this.index=
c?c.index+1:0}function b(c,f,g,k,m){this.next=null;this.prev=c;this.t=f;this.d=0;this.scope=g;this.funct=k;this.params=m}var d=createjs.extend(a,createjs.AbstractTween);a.IGNORE={};a._tweens=[];a._plugins=null;a._tweenHead=null;a._tweenTail=null;a.get=function(c,f){return new a(c,f)};a.tick=function(c,f){for(var g=a._tweenHead;g;){var k=g._next;f&&!g.ignoreGlobalPause||g._paused||g.advance(g.useTicks?1:c);g=k}};a.handleEvent=function(c){"tick"===c.type&&this.tick(c.delta,c.paused)};a.removeTweens=
function(c){if(c.tweenjs_count){for(var f=a._tweenHead;f;){var g=f._next;f.target===c&&a._register(f,!0);f=g}c.tweenjs_count=0}};a.removeAllTweens=function(){for(var c=a._tweenHead;c;){var f=c._next;c._paused=!0;c.target&&(c.target.tweenjs_count=0);c._next=c._prev=null;c=f}a._tweenHead=a._tweenTail=null};a.hasActiveTweens=function(c){return c?!!c.tweenjs_count:!!a._tweenHead};a._installPlugin=function(c){for(var f=c.priority=c.priority||0,g=a._plugins=a._plugins||[],k=0,m=g.length;k<m&&!(f<g[k].priority);k++);
g.splice(k,0,c)};a._register=function(c,f){var g=c.target;if(!f&&c._paused)g&&(g.tweenjs_count=g.tweenjs_count?g.tweenjs_count+1:1),(g=a._tweenTail)?(a._tweenTail=g._next=c,c._prev=g):a._tweenHead=a._tweenTail=c,!a._inited&&createjs.Ticker&&(createjs.Ticker.addEventListener("tick",a),a._inited=!0);else if(f&&!c._paused){g&&g.tweenjs_count--;g=c._next;var k=c._prev;g?g._prev=k:a._tweenTail=k;k?k._next=g:a._tweenHead=g;c._next=c._prev=null}c._paused=f};d.wait=function(c,f){0<c&&this._addStep(+c,this._stepTail.props,
null,f);return this};d.to=function(c,f,g){if(null==f||0>f)f=0;f=this._addStep(+f,null,g);this._appendProps(c,f);return this};d.label=function(c){this.addLabel(c,this.duration);return this};d.call=function(c,f,g){return this._addAction(g||this.target,c,f||[this])};d.set=function(c,f){return this._addAction(f||this.target,this._set,[c])};d.play=function(c){return this._addAction(c||this,this._set,[{paused:!1}])};d.pause=function(c){return this._addAction(c||this,this._set,[{paused:!0}])};d.w=d.wait;
d.t=d.to;d.c=d.call;d.s=d.set;d.toString=function(){return"[Tween]"};d.clone=function(){throw"Tween can not be cloned.";};d._addPlugin=function(c){var f=this._pluginIds||(this._pluginIds={}),g=c.ID;if(g&&!f[g]){f[g]=!0;f=this._plugins||(this._plugins=[]);g=c.priority||0;for(var k=0,m=f.length;k<m;k++)if(g<f[k].priority){f.splice(k,0,c);return}f.push(c)}};d._updatePosition=function(c,f){var g=this._stepHead.next,k=this.position,m=this.duration;if(this.target&&g){for(var l=g.next;l&&l.t<=k;)g=g.next,
l=g.next;this._updateTargetProps(g,f?0===m?1:k/m:(k-g.t)/g.d,f)}this._stepPosition=g?k-g.t:0};d._updateTargetProps=function(c,f,g){if(!(this.passive=!!c.passive)){var k,m=c.prev.props,l=c.props;if(k=c.ease)f=k(f,0,1,1);k=this._plugins;var v;a:for(v in m){var w=m[v];var q=l[v];w=w!==q&&"number"===typeof w?w+(q-w)*f:1<=f?q:w;if(k){q=0;for(var z=k.length;q<z;q++){var r=k[q].change(this,c,v,w,f,g);if(r===a.IGNORE)continue a;void 0!==r&&(w=r)}}this.target[v]=w}}};d._runActionsRange=function(c,f,g,k){var m=
(g=c>f)?this._actionTail:this._actionHead,l=f,v=c;g&&(l=c,v=f);for(var w=this.position;m;){var q=m.t;if(q===f||q>v&&q<l||k&&q===c)if(m.funct.apply(m.scope,m.params),w!==this.position)return!0;m=g?m.prev:m.next}};d._appendProps=function(c,f,g){var k=this._stepHead.props,m=this.target,l=a._plugins,v,w,q=f.prev,z=q.props,r=f.props||(f.props=this._cloneProps(z)),x={};for(v in c)if(c.hasOwnProperty(v)&&(x[v]=r[v]=c[v],void 0===k[v])){var B=void 0;if(l)for(w=l.length-1;0<=w;w--){var F=l[w].init(this,v,
B);void 0!==F&&(B=F);if(B===a.IGNORE){delete r[v];delete x[v];break}}B!==a.IGNORE&&(void 0===B&&(B=m[v]),z[v]=void 0===B?null:B)}for(v in x){var p;for(c=q;(p=c)&&(c=p.prev);)if(c.props!==p.props){if(void 0!==c.props[v])break;c.props[v]=z[v]}}if(!1!==g&&(l=this._plugins))for(w=l.length-1;0<=w;w--)l[w].step(this,f,x);if(g=this._injected)this._injected=null,this._appendProps(g,f,!1)};d._injectProp=function(c,f){(this._injected||(this._injected={}))[c]=f};d._addStep=function(c,f,g,k){f=new e(this._stepTail,
this.duration,c,f,g,k||!1);this.duration+=c;return this._stepTail=this._stepTail.next=f};d._addAction=function(c,f,g){c=new b(this._actionTail,this.duration,c,f,g);this._actionTail?this._actionTail.next=c:this._actionHead=c;this._actionTail=c;return this};d._set=function(c){for(var f in c)this[f]=c[f]};d._cloneProps=function(c){var f={},g;for(g in c)f[g]=c[g];return f};createjs.Tween=createjs.promote(a,"AbstractTween")})();this.createjs=this.createjs||{};
(function(){function a(b){if(b instanceof Array||null==b&&1<arguments.length){var d=b;var c=arguments[1];b=arguments[2]}else b&&(d=b.tweens,c=b.labels);this.AbstractTween_constructor(b);this.tweens=[];d&&this.addTween.apply(this,d);this.setLabels(c);this._init(b)}var e=createjs.extend(a,createjs.AbstractTween);e.addTween=function(b){b._parent&&b._parent.removeTween(b);var d=arguments.length;if(1<d){for(var c=0;c<d;c++)this.addTween(arguments[c]);return arguments[d-1]}if(0===d)return null;this.tweens.push(b);
b._parent=this;b.paused=!0;d=b.duration;0<b.loop&&(d*=b.loop+1);d>this.duration&&(this.duration=d);0<=this.rawPosition&&b.setPosition(this.rawPosition);return b};e.removeTween=function(b){var d=arguments.length;if(1<d){for(var c=!0,f=0;f<d;f++)c=c&&this.removeTween(arguments[f]);return c}if(0===d)return!0;d=this.tweens;for(f=d.length;f--;)if(d[f]===b)return d.splice(f,1),b._parent=null,b.duration>=this.duration&&this.updateDuration(),!0;return!1};e.updateDuration=function(){for(var b=this.duration=
0,d=this.tweens.length;b<d;b++){var c=this.tweens[b],f=c.duration;0<c.loop&&(f*=c.loop+1);f>this.duration&&(this.duration=f)}};e.toString=function(){return"[Timeline]"};e.clone=function(){throw"Timeline can not be cloned.";};e._updatePosition=function(b,d){for(var c=this.position,f=0,g=this.tweens.length;f<g;f++)this.tweens[f].setPosition(c,!0,b)};e._runActionsRange=function(b,d,c,f){for(var g=this.position,k=0,m=this.tweens.length;k<m;k++)if(this.tweens[k]._runActions(b,d,c,f),g!==this.position)return!0};
createjs.Timeline=createjs.promote(a,"AbstractTween")})();this.createjs=this.createjs||{};
(function(){function a(){throw"Ease cannot be instantiated.";}a.linear=function(e){return e};a.none=a.linear;a.get=function(e){-1>e?e=-1:1<e&&(e=1);return function(b){return 0==e?b:0>e?b*(b*-e+1+e):b*((2-b)*e+(1-e))}};a.getPowIn=function(e){return function(b){return Math.pow(b,e)}};a.getPowOut=function(e){return function(b){return 1-Math.pow(1-b,e)}};a.getPowInOut=function(e){return function(b){return 1>(b*=2)?.5*Math.pow(b,e):1-.5*Math.abs(Math.pow(2-b,e))}};a.quadIn=a.getPowIn(2);a.quadOut=a.getPowOut(2);
a.quadInOut=a.getPowInOut(2);a.cubicIn=a.getPowIn(3);a.cubicOut=a.getPowOut(3);a.cubicInOut=a.getPowInOut(3);a.quartIn=a.getPowIn(4);a.quartOut=a.getPowOut(4);a.quartInOut=a.getPowInOut(4);a.quintIn=a.getPowIn(5);a.quintOut=a.getPowOut(5);a.quintInOut=a.getPowInOut(5);a.sineIn=function(e){return 1-Math.cos(e*Math.PI/2)};a.sineOut=function(e){return Math.sin(e*Math.PI/2)};a.sineInOut=function(e){return-.5*(Math.cos(Math.PI*e)-1)};a.getBackIn=function(e){return function(b){return b*b*((e+1)*b-e)}};
a.backIn=a.getBackIn(1.7);a.getBackOut=function(e){return function(b){return--b*b*((e+1)*b+e)+1}};a.backOut=a.getBackOut(1.7);a.getBackInOut=function(e){e*=1.525;return function(b){return 1>(b*=2)?.5*b*b*((e+1)*b-e):.5*((b-=2)*b*((e+1)*b+e)+2)}};a.backInOut=a.getBackInOut(1.7);a.circIn=function(e){return-(Math.sqrt(1-e*e)-1)};a.circOut=function(e){return Math.sqrt(1- --e*e)};a.circInOut=function(e){return 1>(e*=2)?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)};a.bounceIn=function(e){return 1-
a.bounceOut(1-e)};a.bounceOut=function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375};a.bounceInOut=function(e){return.5>e?.5*a.bounceIn(2*e):.5*a.bounceOut(2*e-1)+.5};a.getElasticIn=function(e,b){var d=2*Math.PI;return function(c){if(0==c||1==c)return c;var f=b/d*Math.asin(1/e);return-(e*Math.pow(2,10*--c)*Math.sin((c-f)*d/b))}};a.elasticIn=a.getElasticIn(1,.3);a.getElasticOut=function(e,b){var d=2*Math.PI;
return function(c){return 0==c||1==c?c:e*Math.pow(2,-10*c)*Math.sin((c-b/d*Math.asin(1/e))*d/b)+1}};a.elasticOut=a.getElasticOut(1,.3);a.getElasticInOut=function(e,b){var d=2*Math.PI;return function(c){var f=b/d*Math.asin(1/e);return 1>(c*=2)?-.5*e*Math.pow(2,10*--c)*Math.sin((c-f)*d/b):e*Math.pow(2,-10*--c)*Math.sin((c-f)*d/b)*.5+1}};a.elasticInOut=a.getElasticInOut(1,.3*1.5);createjs.Ease=a})();this.createjs=this.createjs||{};
(function(){function a(){throw"MotionGuidePlugin cannot be instantiated.";}a.priority=0;a.ID="MotionGuide";a.install=function(){createjs.Tween._installPlugin(a);return createjs.Tween.IGNORE};a.init=function(e,b,d){"guide"==b&&e._addPlugin(a)};a.step=function(e,b,d){for(var c in d)if("guide"===c){var f=b.props.guide,g=a._solveGuideData(d.guide,f);f.valid=!g;var k=f.endData;e._injectProp("x",k.x);e._injectProp("y",k.y);if(g||!f.orient)break;f.startOffsetRot=(void 0===b.prev.props.rotation?e.target.rotation||
0:b.prev.props.rotation)-f.startData.rotation;if("fixed"==f.orient)f.endAbsRot=k.rotation+f.startOffsetRot,f.deltaRotation=0;else{g=void 0===d.rotation?e.target.rotation||0:d.rotation;k=g-f.endData.rotation-f.startOffsetRot;var m=k%360;f.endAbsRot=g;switch(f.orient){case "auto":f.deltaRotation=k;break;case "cw":f.deltaRotation=(m+360)%360+360*Math.abs(k/360|0);break;case "ccw":f.deltaRotation=(m-360)%360+-360*Math.abs(k/360|0)}}e._injectProp("rotation",f.endAbsRot)}};a.change=function(e,b,d,c,f,g){if((c=
b.props.guide)&&b.props!==b.prev.props&&c!==b.prev.props.guide){if("guide"===d&&!c.valid||"x"==d||"y"==d||"rotation"===d&&c.orient)return createjs.Tween.IGNORE;a._ratioToPositionData(f,c,e.target)}};a.debug=function(e,b,d){e=e.guide||e;var c=a._findPathProblems(e);c&&console.error("MotionGuidePlugin Error found: \n"+c);if(!b)return c;var f,g=e.path,k=g.length;b.save();b.lineCap="round";b.lineJoin="miter";b.beginPath();b.moveTo(g[0],g[1]);for(f=2;f<k;f+=4)b.quadraticCurveTo(g[f],g[f+1],g[f+2],g[f+
3]);b.strokeStyle="black";b.lineWidth=4.5;b.stroke();b.strokeStyle="white";b.lineWidth=3;b.stroke();b.closePath();g=d.length;if(d&&g){k={};var m={};a._solveGuideData(e,k);for(f=0;f<g;f++)k.orient="fixed",a._ratioToPositionData(d[f],k,m),b.beginPath(),b.moveTo(m.x,m.y),b.lineTo(m.x+9*Math.cos(.0174533*m.rotation),m.y+9*Math.sin(.0174533*m.rotation)),b.strokeStyle="black",b.lineWidth=4.5,b.stroke(),b.strokeStyle="red",b.lineWidth=3,b.stroke(),b.closePath()}b.restore();return c};a._solveGuideData=function(e,
b){var d;if(d=a.debug(e))return d;var c=b.path=e.path;b.orient=e.orient;b.subLines=[];b.totalLength=0;b.startOffsetRot=0;b.deltaRotation=0;b.startData={ratio:0};b.endData={ratio:1};b.animSpan=1;var f=c.length,g,k={};var m=c[0];var l=c[1];for(d=2;d<f;d+=4){var v=c[d];var w=c[d+1];var q=c[d+2];var z=c[d+3];var r={weightings:[],estLength:0,portion:0},x=m;var B=l;for(g=1;10>=g;g++)a._getParamsForCurve(m,l,v,w,q,z,g/10,!1,k),x=k.x-x,B=k.y-B,B=Math.sqrt(x*x+B*B),r.weightings.push(B),r.estLength+=B,x=k.x,
B=k.y;b.totalLength+=r.estLength;for(g=0;10>g;g++)B=r.estLength,r.weightings[g]/=B;b.subLines.push(r);m=q;l=z}B=b.totalLength;c=b.subLines.length;for(d=0;d<c;d++)b.subLines[d].portion=b.subLines[d].estLength/B;d=isNaN(e.start)?0:e.start;c=isNaN(e.end)?1:e.end;a._ratioToPositionData(d,b,b.startData);a._ratioToPositionData(c,b,b.endData);b.startData.ratio=d;b.endData.ratio=c;b.animSpan=b.endData.ratio-b.startData.ratio};a._ratioToPositionData=function(e,b,d){var c=b.subLines,f,g=0,k=e*b.animSpan+b.startData.ratio;
var m=c.length;for(f=0;f<m;f++){var l=c[f].portion;if(g+l>=k){var v=f;break}g+=l}void 0===v&&(v=m-1,g-=l);c=c[v].weightings;var w=l;m=c.length;for(f=0;f<m;f++){l=c[f]*w;if(g+l>=k)break;g+=l}v=4*v+2;m=b.path;a._getParamsForCurve(m[v-2],m[v-1],m[v],m[v+1],m[v+2],m[v+3],f/10+(k-g)/l*.1,b.orient,d);b.orient&&(d.rotation=.99999<=e&&1.00001>=e&&void 0!==b.endAbsRot?b.endAbsRot:d.rotation+(b.startOffsetRot+e*b.deltaRotation));return d};a._getParamsForCurve=function(e,b,d,c,f,g,k,m,l){var v=1-k;l.x=v*v*e+
2*v*k*d+k*k*f;l.y=v*v*b+2*v*k*c+k*k*g;m&&(l.rotation=57.2957795*Math.atan2((c-b)*v+(g-c)*k,(d-e)*v+(f-d)*k))};a._findPathProblems=function(e){var b=e.path,d=b&&b.length||0;if(6>d||(d-2)%4)return"\tCannot parse 'path' array due to invalid number of entries in path. There should be an odd number of points, at least 3 points, and 2 entries per point (x & y). See 'CanvasRenderingContext2D.quadraticCurveTo' for details as 'path' models a quadratic bezier.\n\nOnly [ "+(d+" ] values found. Expected: "+Math.max(4*
Math.ceil((d-2)/4)+2,6));for(var c=0;c<d;c++)if(isNaN(b[c]))return"All data in path array must be numeric";b=e.start;if(isNaN(b)&&void 0!==b)return"'start' out of bounds. Expected 0 to 1, got: "+b;b=e.end;if(isNaN(b)&&void 0!==b)return"'end' out of bounds. Expected 0 to 1, got: "+b;if((e=e.orient)&&"fixed"!=e&&"auto"!=e&&"cw"!=e&&"ccw"!=e)return'Invalid orientation value. Expected ["fixed", "auto", "cw", "ccw", undefined], got: '+e};createjs.MotionGuidePlugin=a})();this.createjs=this.createjs||{};
(function(){var a=createjs.TweenJS=createjs.TweenJS||{};a.version="1.0.0";a.buildDate="Thu, 14 Sep 2017 19:47:47 GMT"})();
(function(){var a="undefined"!==typeof window&&"undefined"!==typeof window.document?window.document:{},e="undefined"!==typeof module&&module.exports,b=function(){for(var f,g=["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror".split(" "),"webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror".split(" "),"webkitRequestFullScreen webkitCancelFullScreen webkitCurrentFullScreenElement webkitCancelFullScreen webkitfullscreenchange webkitfullscreenerror".split(" "),
"mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror".split(" "),"msRequestFullscreen msExitFullscreen msFullscreenElement msFullscreenEnabled MSFullscreenChange MSFullscreenError".split(" ")],k=0,m=g.length,l={};k<m;k++)if((f=g[k])&&f[1]in a){for(k=0;k<f.length;k++)l[g[0][k]]=f[k];return l}return!1}(),d={change:b.fullscreenchange,error:b.fullscreenerror},c={request:function(f){return new Promise(function(g,k){var m=function(){this.off("change",
m);g()}.bind(this);this.on("change",m);f=f||a.documentElement;Promise.resolve(f[b.requestFullscreen]())["catch"](k)}.bind(this))},exit:function(){return new Promise(function(f,g){if(this.isFullscreen){var k=function(){this.off("change",k);f()}.bind(this);this.on("change",k);Promise.resolve(a[b.exitFullscreen]())["catch"](g)}else f()}.bind(this))},toggle:function(f){return this.isFullscreen?this.exit():this.request(f)},onchange:function(f){this.on("change",f)},onerror:function(f){this.on("error",f)},
on:function(f,g){var k=d[f];k&&a.addEventListener(k,g,!1)},off:function(f,g){var k=d[f];k&&a.removeEventListener(k,g,!1)},raw:b};b?(Object.defineProperties(c,{isFullscreen:{get:function(){return!!a[b.fullscreenElement]}},element:{enumerable:!0,get:function(){return a[b.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return!!a[b.fullscreenEnabled]}}}),e?module.exports=c:window.screenfull=c):e?module.exports={isEnabled:!1}:window.screenfull={isEnabled:!1}})();
(function(){function a(p){p=String(p);return p.charAt(0).toUpperCase()+p.slice(1)}function e(p,H){var I=-1,A=p?p.length:0;if("number"==typeof A&&-1<A&&A<=z)for(;++I<A;)H(p[I],I,p);else d(p,H)}function b(p){p=String(p).replace(/^ +| +$/g,"");return/^(?:webOS|i(?:OS|P))/.test(p)?p:a(p)}function d(p,H){for(var I in p)x.call(p,I)&&H(p[I],I,p)}function c(p){return null==p?a(p):B.call(p).slice(8,-1)}function f(p,H){var I=null!=p?typeof p[H]:"number";return!/^(?:boolean|number|string|undefined)$/.test(I)&&
("object"==I?!!p[H]:!0)}function g(p){return String(p).replace(/([ -])(?!$)/g,"$1?")}function k(p,H){var I=null;e(p,function(A,E){I=H(I,A,E,p)});return I}function m(p){function H(K){return k(K,function(L,J){var T=J.pattern||g(J);!L&&(L=RegExp("\\b"+T+" *\\d+[.\\w_]*","i").exec(p)||RegExp("\\b"+T+" *\\w+-[\\w]*","i").exec(p)||RegExp("\\b"+T+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(p))&&((L=String(J.label&&!RegExp(T,"i").test(J.label)?J.label:L).split("/"))[1]&&!/[\d.]+/.test(L[0])&&(L[0]+=
" "+L[1]),J=J.label||J,L=b(L[0].replace(RegExp(T,"i"),J).replace(RegExp("; *(?:"+J+"[_-])?","i")," ").replace(RegExp("("+J+")[-_.]?(\\w)","i"),"$1 $2")));return L})}function I(K){return k(K,function(L,J){return L||(RegExp(J+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(p)||0)[1]||null})}var A=v,E=p&&"object"==typeof p&&"String"!=c(p);E&&(A=p,p=null);var N=A.navigator||{},C=N.userAgent||"";p||(p=C);var Q=E?!!N.likeChrome:/\bChrome\b/.test(p)&&!/internal|\n/i.test(B.toString()),
P=E?"Object":"ScriptBridgingProxyObject",R=E?"Object":"Environment",O=E&&A.java?"JavaPackage":c(A.java),X=E?"Object":"RuntimeObject";R=(O=/\bJava/.test(O)&&A.java)&&c(A.environment)==R;var V=O?"a":"\u03b1",aa=O?"b":"\u03b2",ba=A.document||{},U=A.operamini||A.opera,Y=r.test(Y=E&&U?U["[[Class]]"]:c(U))?Y:U=null,u,D=p;E=[];var Z=null,M=p==C;C=M&&U&&"function"==typeof U.version&&U.version();var t=function(K){return k(K,function(L,J){return L||RegExp("\\b"+(J.pattern||g(J))+"\\b","i").exec(p)&&(J.label||
J)})}([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),n=function(K){return k(K,function(L,J){return L||RegExp("\\b"+(J.pattern||g(J))+"\\b","i").exec(p)&&(J.label||J)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser",
"PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},
{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),h=H([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad",
"iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),G=function(K){return k(K,function(L,J,T){return L||(J[h]||J[/^[a-z]+(?: +[a-z]+\b)*/i.exec(h)]||RegExp("\\b"+g(T)+"(?:\\b|\\w*\\d)","i").exec(p))&&T})}({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},
"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}}),y=function(K){return k(K,function(L,J){var T=J.pattern||g(J);if(!L&&(L=RegExp("\\b"+T+"(?:/[\\d.]+|[ \\w.]*)","i").exec(p))){var W=L,ca=J.label||J,da={"10.0":"10","6.4":"10 Technical Preview",
"6.3":"8.1","6.2":"8","6.1":"Server 2008 R2 / 7","6.0":"Server 2008 / Vista","5.2":"Server 2003 / XP 64-bit","5.1":"XP","5.01":"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};T&&ca&&/^Win/i.test(W)&&!/^Windows Phone /i.test(W)&&(da=da[/[\d.]+$/.exec(W)])&&(W="Windows "+da);W=String(W);T&&ca&&(W=W.replace(RegExp(T,"i"),ca));L=W=b(W.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,
"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}return L})}(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X",
"Macintosh","Mac","Windows 98;","Windows "]);t&&(t=[t]);G&&!h&&(h=H([G]));if(u=/\bGoogle TV\b/.exec(h))h=u[0];/\bSimulator\b/i.test(p)&&(h=(h?h+" ":"")+"Simulator");"Opera Mini"==n&&/\bOPiOS\b/.test(p)&&E.push("running in Turbo/Uncompressed mode");"IE"==n&&/\blike iPhone OS\b/.test(p)?(u=m(p.replace(/like iPhone OS/,"")),G=u.manufacturer,h=u.product):/^iP/.test(h)?(n||(n="Safari"),y="iOS"+((u=/ OS ([\d_]+)/i.exec(p))?" "+u[1].replace(/_/g,"."):"")):"Konqueror"!=n||/buntu/i.test(y)?G&&"Google"!=G&&
(/Chrome/.test(n)&&!/\bMobile Safari\b/i.test(p)||/\bVita\b/.test(h))||/\bAndroid\b/.test(y)&&/^Chrome/.test(n)&&/\bVersion\//i.test(p)?(n="Android Browser",y=/\bAndroid\b/.test(y)?y:"Android"):"Silk"==n?(/\bMobi/i.test(p)||(y="Android",E.unshift("desktop mode")),/Accelerated *= *true/i.test(p)&&E.unshift("accelerated")):"PaleMoon"==n&&(u=/\bFirefox\/([\d.]+)\b/.exec(p))?E.push("identifying as Firefox "+u[1]):"Firefox"==n&&(u=/\b(Mobile|Tablet|TV)\b/i.exec(p))?(y||(y="Firefox OS"),h||(h=u[1])):!n||
(u=!/\bMinefield\b/i.test(p)&&/\b(?:Firefox|Safari)\b/.exec(n))?(n&&!h&&/[\/,]|^[^(]+?\)/.test(p.slice(p.indexOf(u+"/")+8))&&(n=null),(u=h||G||y)&&(h||G||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(y))&&(n=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(y)?y:u)+" Browser")):"Electron"==n&&(u=(/\bChrome\/([\d.]+)\b/.exec(p)||0)[1])&&E.push("Chromium "+u):y="Kubuntu";C||(C=I(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",g(n),
"(?:Firefox|Minefield|NetFront)"]));if(u="iCab"==t&&3<parseFloat(C)&&"WebKit"||/\bOpera\b/.test(n)&&(/\bOPR\b/.test(p)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(p)&&!/^(?:Trident|EdgeHTML)$/.test(t)&&"WebKit"||!t&&/\bMSIE\b/i.test(p)&&("Mac OS"==y?"Tasman":"Trident")||"WebKit"==t&&/\bPlayStation\b(?! Vita\b)/i.test(n)&&"NetFront")t=[u];"IE"==n&&(u=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(p)||0)[1])?(n+=" Mobile",y="Windows Phone "+(/\+$/.test(u)?u:u+".x"),E.unshift("desktop mode")):/\bWPDesktop\b/i.test(p)?
(n="IE Mobile",y="Windows Phone 8.x",E.unshift("desktop mode"),C||(C=(/\brv:([\d.]+)/.exec(p)||0)[1])):"IE"!=n&&"Trident"==t&&(u=/\brv:([\d.]+)/.exec(p))&&(n&&E.push("identifying as "+n+(C?" "+C:"")),n="IE",C=u[1]);if(M){if(f(A,"global"))if(O&&(u=O.lang.System,D=u.getProperty("os.arch"),y=y||u.getProperty("os.name")+" "+u.getProperty("os.version")),R){try{C=A.require("ringo/engine").version.join("."),n="RingoJS"}catch(K){(u=A.system)&&u.global.system==A.system&&(n="Narwhal",y||(y=u[0].os||null))}n||
(n="Rhino")}else"object"==typeof A.process&&!A.process.browser&&(u=A.process)&&("object"==typeof u.versions&&("string"==typeof u.versions.electron?(E.push("Node "+u.versions.node),n="Electron",C=u.versions.electron):"string"==typeof u.versions.nw&&(E.push("Chromium "+C,"Node "+u.versions.node),n="NW.js",C=u.versions.nw)),n||(n="Node.js",D=u.arch,y=u.platform,C=(C=/[\d.]+/.exec(u.version))?C[0]:null));else c(u=A.runtime)==P?(n="Adobe AIR",y=u.flash.system.Capabilities.os):c(u=A.phantom)==X?(n="PhantomJS",
C=(u=u.version||null)&&u.major+"."+u.minor+"."+u.patch):"number"==typeof ba.documentMode&&(u=/\bTrident\/(\d+)/i.exec(p))?(C=[C,ba.documentMode],(u=+u[1]+4)!=C[1]&&(E.push("IE "+C[1]+" mode"),t&&(t[1]=""),C[1]=u),C="IE"==n?String(C[1].toFixed(1)):C[0]):"number"==typeof ba.documentMode&&/^(?:Chrome|Firefox)\b/.test(n)&&(E.push("masking as "+n+" "+C),n="IE",C="11.0",t=["Trident"],y="Windows");y=y&&b(y)}C&&(u=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(C)||/(?:alpha|beta)(?: ?\d)?/i.exec(p+";"+(M&&
N.appMinorVersion))||/\bMinefield\b/i.test(p)&&"a")&&(Z=/b/i.test(u)?"beta":"alpha",C=C.replace(RegExp(u+"\\+?$"),"")+("beta"==Z?aa:V)+(/\d+\+?/.exec(u)||""));if("Fennec"==n||"Firefox"==n&&/\b(?:Android|Firefox OS)\b/.test(y))n="Firefox Mobile";else if("Maxthon"==n&&C)C=C.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(h))"Xbox 360"==h&&(y=null),"Xbox 360"==h&&/\bIEMobile\b/.test(p)&&E.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(n)&&(!n||h||/Browser|Mobi/.test(n))||"Windows CE"!=
y&&!/Mobi/i.test(p))if("IE"==n&&M)try{null===A.external&&E.unshift("platform preview")}catch(K){E.unshift("embedded")}else(/\bBlackBerry\b/.test(h)||/\bBB10\b/.test(p))&&(u=(RegExp(h.replace(/ +/g," *")+"/([.\\d]+)","i").exec(p)||0)[1]||C)?(u=[u,/BB10/.test(p)],y=(u[1]?(h=null,G="BlackBerry"):"Device Software")+" "+u[0],C=null):this!=d&&"Wii"!=h&&(M&&U||/Opera/.test(n)&&/\b(?:MSIE|Firefox)\b/i.test(p)||"Firefox"==n&&/\bOS X (?:\d+\.){2,}/.test(y)||"IE"==n&&(y&&!/^Win/.test(y)&&5.5<C||/\bWindows XP\b/.test(y)&&
8<C||8==C&&!/\bTrident\b/.test(p)))&&!r.test(u=m.call(d,p.replace(r,"")+";"))&&u.name&&(u="ing as "+u.name+((u=u.version)?" "+u:""),r.test(n)?(/\bIE\b/.test(u)&&"Mac OS"==y&&(y=null),u="identify"+u):(u="mask"+u,n=Y?b(Y.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(u)&&(y=null),M||(C=null)),t=["Presto"],E.push(u));else n+=" Mobile";if(u=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(p)||0)[1]){u=[parseFloat(u.replace(/\.(\d)$/,".0$1")),u];if("Safari"==n&&"+"==u[1].slice(-1))n="WebKit Nightly",Z="alpha",
C=u[1].slice(0,-1);else if(C==u[1]||C==(u[2]=(/\bSafari\/([\d.]+\+?)/i.exec(p)||0)[1]))C=null;u[1]=(/\bChrome\/([\d.]+)/i.exec(p)||0)[1];537.36==u[0]&&537.36==u[2]&&28<=parseFloat(u[1])&&"WebKit"==t&&(t=["Blink"]);M&&(Q||u[1])?(t&&(t[1]="like Chrome"),u=u[1]||(u=u[0],530>u?1:532>u?2:532.05>u?3:533>u?4:534.03>u?5:534.07>u?6:534.1>u?7:534.13>u?8:534.16>u?9:534.24>u?10:534.3>u?11:535.01>u?12:535.02>u?"13+":535.07>u?15:535.11>u?16:535.19>u?17:536.05>u?18:536.1>u?19:537.01>u?20:537.11>u?"21+":537.13>u?
23:537.18>u?24:537.24>u?25:537.36>u?26:"Blink"!=t?"27":"28")):(t&&(t[1]="like Safari"),u=(u=u[0],400>u?1:500>u?2:526>u?3:533>u?4:534>u?"4+":535>u?5:537>u?6:538>u?7:601>u?8:"8"));t&&(t[1]+=" "+(u+="number"==typeof u?".x":/[.+]/.test(u)?"":"+"));"Safari"==n&&(!C||45<parseInt(C))&&(C=u)}"Opera"==n&&(u=/\bzbov|zvav$/.exec(y))?(n+=" ",E.unshift("desktop mode"),"zvav"==u?(n+="Mini",C=null):n+="Mobile",y=y.replace(RegExp(" *"+u+"$"),"")):"Safari"==n&&/\bChrome\b/.exec(t&&t[1])&&(E.unshift("desktop mode"),
n="Chrome Mobile",C=null,/\bOS X\b/.test(y)?(G="Apple",y="iOS 4.3+"):y=null);C&&0==C.indexOf(u=/[\d.]+$/.exec(y))&&-1<p.indexOf("/"+u+"-")&&(y=String(y.replace(u,"")).replace(/^ +| +$/g,""));t&&!/\b(?:Avant|Nook)\b/.test(n)&&(/Browser|Lunascape|Maxthon/.test(n)||"Safari"!=n&&/^iOS/.test(y)&&/\bSafari\b/.test(t[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(n)&&t[1])&&(u=t[t.length-1])&&E.push(u);E.length&&(E=["("+E.join("; ")+")"]);G&&h&&0>h.indexOf(G)&&
E.push("on "+G);h&&E.push((/^on /.test(E[E.length-1])?"":"on ")+h);if(y){var S=(u=/ ([\d.+]+)$/.exec(y))&&"/"==y.charAt(y.length-u[0].length-1);y={architecture:32,family:u&&!S?y.replace(u[0],""):y,version:u?u[1]:null,toString:function(){var K=this.version;return this.family+(K&&!S?" "+K:"")+(64==this.architecture?" 64-bit":"")}}}(u=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(D))&&!/\bi686\b/i.test(D)?(y&&(y.architecture=64,y.family=y.family.replace(RegExp(" *"+u),"")),n&&(/\bWOW64\b/i.test(p)||M&&/\w(?:86|32)$/.test(N.cpuClass||
N.platform)&&!/\bWin64; x64\b/i.test(p))&&E.unshift("32-bit")):y&&/^OS X/.test(y.family)&&"Chrome"==n&&39<=parseFloat(C)&&(y.architecture=64);p||(p=null);A={};A.description=p;A.layout=t&&t[0];A.manufacturer=G;A.name=n;A.prerelease=Z;A.product=h;A.ua=p;A.version=n&&C;A.os=y||{architecture:null,family:null,version:null,toString:function(){return"null"}};A.parse=m;A.toString=function(){return this.description||""};A.version&&E.unshift(C);A.name&&E.unshift(n);y&&n&&(y!=String(y).split(" ")[0]||y!=n.split(" ")[0]&&
!h)&&E.push(h?"("+y+")":"on "+y);E.length&&(A.description=E.join(" "));return A}var l={"function":!0,object:!0},v=l[typeof window]&&window||this,w=l[typeof exports]&&exports;l=l[typeof module]&&module&&!module.nodeType&&module;var q=w&&l&&"object"==typeof global&&global;!q||q.global!==q&&q.window!==q&&q.self!==q||(v=q);var z=Math.pow(2,53)-1,r=/\bOpera/;q=Object.prototype;var x=q.hasOwnProperty,B=q.toString,F=m();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(v.platform=F,define(function(){return F})):
w&&l?d(F,function(p,H){w[H]=p}):v.platform=F}).call(this);
function buildIOSMeta(){for(var a=[{name:"viewport",content:"width=device-width, height=device-height, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"},{name:"apple-mobile-web-app-capable",content:"yes"},{name:"apple-mobile-web-app-status-bar-style",content:"black"}],e=0;e<a.length;e++){var b=document.createElement("meta");b.name=a[e].name;b.content=a[e].content;var d=window.document.head.querySelector('meta[name="'+b.name+'"]');d&&d.parentNode.removeChild(d);window.document.head.appendChild(b)}}
function hideIOSFullscreenPanel(){jQuery(".xxx-ios-fullscreen-message").css("display","none");jQuery(".xxx-ios-fullscreen-scroll").css("display","none");jQuery(".xxx-game-iframe-full").removeClass("xxx-game-iframe-iphone-se")}function buildIOSFullscreenPanel(){jQuery("body").append('<div class="xxx-ios-fullscreen-message"><div class="xxx-ios-fullscreen-swipe"></div></div><div class="xxx-ios-fullscreen-scroll"></div>')}
function showIOSFullscreenPanel(){jQuery(".xxx-ios-fullscreen-message").css("display","block");jQuery(".xxx-ios-fullscreen-scroll").css("display","block")}
function __iosResize(){window.scrollTo(0,0);console.log(window.devicePixelRatio);console.log(window.innerWidth);console.log(window.innerHeight);if("iPhone"===platform.product)switch(window.devicePixelRatio){case 2:switch(window.innerWidth){case 568:320!==window.innerHeight&&jQuery(".xxx-game-iframe-full").addClass("xxx-game-iframe-iphone-se");break;case 667:375===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();break;case 808:414===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();
break;default:hideIOSFullscreenPanel()}break;case 3:switch(window.innerWidth){case 736:414===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();break;case 724:375===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();break;case 808:414===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();break;default:hideIOSFullscreenPanel()}break;default:hideIOSFullscreenPanel()}}function iosResize(){__iosResize();setTimeout(function(){__iosResize()},500)}
function iosInIframe(){try{return window.self!==window.top}catch(a){return!0}}function isIOSLessThen13(){var a=platform.os,e=a.family.toLowerCase();a=parseFloat(a.version);return"ios"===e&&13>a?!0:!1}$(document).ready(function(){platform&&"iPhone"===platform.product&&"safari"===platform.name.toLowerCase()&&isIOSLessThen13()&&!iosInIframe()&&(buildIOSFullscreenPanel(),buildIOSMeta())});
jQuery(window).resize(function(){platform&&"iPhone"===platform.product&&"safari"===platform.name.toLowerCase()&&isIOSLessThen13()&&!iosInIframe()&&iosResize()});var s_iScaleFactor=1,s_oCanvasLeft,s_oCanvasTop,s_bIsIphone=!1,s_bFocus=!0;
(function(a){(jQuery.browser=jQuery.browser||{}).mobile=/android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(ad|hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|tablet|treo|up\.(browser|link)|vodafone|wap|webos|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(a.substr(0,
4))})(navigator.userAgent||navigator.vendor||window.opera);$(window).resize(function(){sizeHandler()});function trace(a){console.log(a)}function isChrome(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}function isIpad(){var a=-1!==navigator.userAgent.toLowerCase().indexOf("ipad");return!a&&navigator.userAgent.match(/Mac/)&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints?!0:a}function isMobile(){return isIpad()?!0:jQuery.browser.mobile}
function isIOS(){for(var a="iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";");a.length;)if(navigator.platform===a.pop())return s_bIsIphone=!0;return s_bIsIphone=!1}
function getSize(a){var e=a.toLowerCase(),b=window.document,d=b.documentElement;if(void 0===window["inner"+a])a=d["client"+a];else if(window["inner"+a]!=d["client"+a]){var c=b.createElement("body");c.id="vpw-test-b";c.style.cssText="overflow:scroll";var f=b.createElement("div");f.id="vpw-test-d";f.style.cssText="position:absolute;top:-1000px";f.innerHTML="<style>@media("+e+":"+d["client"+a]+"px){body#vpw-test-b div#vpw-test-d{"+e+":7px!important}}</style>";c.appendChild(f);d.insertBefore(c,b.head);
a=7==f["offset"+a]?d["client"+a]:window["inner"+a];d.removeChild(c)}else a=window["inner"+a];return a}window.addEventListener("orientationchange",onOrientationChange);function onOrientationChange(){window.matchMedia("(orientation: portrait)").matches&&sizeHandler();window.matchMedia("(orientation: landscape)").matches&&sizeHandler()}function getIOSWindowHeight(){return document.documentElement.clientWidth/window.innerWidth*window.innerHeight}
function getHeightOfIOSToolbars(){var a=(0===window.orientation?screen.height:screen.width)-getIOSWindowHeight();return 1<a?a:0}
function sizeHandler(){window.scrollTo(0,1);if($("#canvas")){var a=null!==platform.name&&"safari"===platform.name.toLowerCase()?getIOSWindowHeight():getSize("Height");var e=getSize("Width");s_bFocus&&_checkOrientation(e,a);s_iScaleFactor=Math.min(a/CANVAS_HEIGHT,e/CANVAS_WIDTH);var b=Math.round(CANVAS_WIDTH*s_iScaleFactor),d=Math.round(CANVAS_HEIGHT*s_iScaleFactor);if(d<a){var c=a-d;d+=c;b+=CANVAS_WIDTH/CANVAS_HEIGHT*c}else b<e&&(c=e-b,b+=c,d+=CANVAS_HEIGHT/CANVAS_WIDTH*c);c=a/2-d/2;var f=e/2-b/2,
g=CANVAS_WIDTH/b;if(f*g<-EDGEBOARD_X||c*g<-EDGEBOARD_Y)s_iScaleFactor=Math.min(a/(CANVAS_HEIGHT-2*EDGEBOARD_Y),e/(CANVAS_WIDTH-2*EDGEBOARD_X)),b=Math.round(CANVAS_WIDTH*s_iScaleFactor),d=Math.round(CANVAS_HEIGHT*s_iScaleFactor),c=(a-d)/2,f=(e-b)/2,g=CANVAS_WIDTH/b;s_iOffsetX=-1*f*g;s_iOffsetY=-1*c*g;0<=c&&(s_iOffsetY=0);0<=f&&(s_iOffsetX=0);null!==s_oInterface&&s_oInterface.refreshButtonPos(s_iOffsetX,s_iOffsetY);null!==s_oMenu&&s_oMenu.refreshButtonPos(s_iOffsetX,s_iOffsetY);null!==s_oLevelMenu&&
s_oLevelMenu.refreshButtonPos(s_iOffsetX,s_iOffsetY);$("#canvas").css("width",b+"px");$("#canvas").css("height",d+"px");0>c||(c=(a-d)/2);$("#canvas").css("top",c+"px");$("#canvas").css("left",f+"px");s_oCanvasLeft=$("#canvas").offset().left;s_oCanvasTop=$("#canvas").offset().top}}
function _checkOrientation(a,e){s_bMobile&&ENABLE_CHECK_ORIENTATION&&(a>e?"landscape"===$(".orientation-msg-container").attr("data-orientation")?($(".orientation-msg-container").css("display","none"),s_oMain.startUpdate()):($(".orientation-msg-container").css("display","block"),s_oMain.stopUpdate()):"portrait"===$(".orientation-msg-container").attr("data-orientation")?($(".orientation-msg-container").css("display","none"),s_oMain.startUpdate()):($(".orientation-msg-container").css("display","block"),
s_oMain.stopUpdate()))}function playSound(a,e,b){return!1===DISABLE_SOUND_MOBILE||!1===s_bMobile?(s_aSounds[a].play(),s_aSounds[a].volume(e),s_aSounds[a].loop(b),s_aSounds[a]):null}function stopSound(a){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].stop()}function setVolume(a,e){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].volume(e)}function setMute(a,e){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].mute(e)}
function createBitmap(a,e,b){var d=new createjs.Bitmap(a),c=new createjs.Shape;e&&b?c.graphics.beginFill("#fff").drawRect(0,0,e,b):c.graphics.beginFill("#ff0").drawRect(0,0,a.width,a.height);d.hitArea=c;return d}function createSprite(a,e,b,d,c,f){a=null!==e?new createjs.Sprite(a,e):new createjs.Sprite(a);e=new createjs.Shape;e.graphics.beginFill("#000000").drawRect(-b,-d,c,f);a.hitArea=e;return a}
function randomFloatBetween(a,e,b){"undefined"===typeof b&&(b=2);return parseFloat(Math.min(a+Math.random()*(e-a),e).toFixed(b))}function rotateVector2D(a,e){var b=e.getX()*Math.cos(a)+e.getY()*Math.sin(a),d=e.getX()*-Math.sin(a)+e.getY()*Math.cos(a);e.set(b,d)}function tweenVectorsOnX(a,e,b){return a+b*(e-a)}function shuffle(a){for(var e=a.length,b,d;0!==e;)d=Math.floor(Math.random()*e),--e,b=a[e],a[e]=a[d],a[d]=b;return a}
function bubbleSort(a){do{var e=!1;for(var b=0;b<a.length-1;b++)a[b]>a[b+1]&&(e=a[b],a[b]=a[b+1],a[b+1]=e,e=!0)}while(e)}function compare(a,e){return a.index>e.index?-1:a.index<e.index?1:0}function easeLinear(a,e,b,d){return b*a/d+e}function easeInQuad(a,e,b,d){return b*(a/=d)*a+e}function easeInSine(a,e,b,d){return-b*Math.cos(a/d*(Math.PI/2))+b+e}function easeInCubic(a,e,b,d){return b*(a/=d)*a*a+e}
function getTrajectoryPoint(a,e){var b=new createjs.Point,d=(1-a)*(1-a),c=a*a;b.x=d*e.start.x+2*(1-a)*a*e.traj.x+c*e.end.x;b.y=d*e.start.y+2*(1-a)*a*e.traj.y+c*e.end.y;return b}function formatTime(a){a/=1E3;var e=Math.floor(a/60);a=Math.floor(a-60*e);var b="";b=10>e?b+("0"+e+":"):b+(e+":");return 10>a?b+("0"+a):b+a}function degreesToRadians(a){return a*Math.PI/180}function checkRectCollision(a,e){var b=getBounds(a,.9);var d=getBounds(e,.98);return calculateIntersection(b,d)}
function calculateIntersection(a,e){var b,d,c,f;var g=a.x+(b=a.width/2);var k=a.y+(d=a.height/2);var m=e.x+(c=e.width/2);var l=e.y+(f=e.height/2);g=Math.abs(g-m)-(b+c);k=Math.abs(k-l)-(d+f);return 0>g&&0>k?(g=Math.min(Math.min(a.width,e.width),-g),k=Math.min(Math.min(a.height,e.height),-k),{x:Math.max(a.x,e.x),y:Math.max(a.y,e.y),width:g,height:k,rect1:a,rect2:e}):null}
function getBounds(a,e){var b={x:Infinity,y:Infinity,width:0,height:0};if(a instanceof createjs.Container){b.x2=-Infinity;b.y2=-Infinity;var d=a.children,c=d.length,f;for(f=0;f<c;f++){var g=getBounds(d[f],1);g.x<b.x&&(b.x=g.x);g.y<b.y&&(b.y=g.y);g.x+g.width>b.x2&&(b.x2=g.x+g.width);g.y+g.height>b.y2&&(b.y2=g.y+g.height)}Infinity==b.x&&(b.x=0);Infinity==b.y&&(b.y=0);Infinity==b.x2&&(b.x2=0);Infinity==b.y2&&(b.y2=0);b.width=b.x2-b.x;b.height=b.y2-b.y;delete b.x2;delete b.y2}else{if(a instanceof createjs.Bitmap){c=
a.sourceRect||a.image;f=c.width*e;var k=c.height*e}else if(a instanceof createjs.Sprite)if(a.spriteSheet._frames&&a.spriteSheet._frames[a.currentFrame]&&a.spriteSheet._frames[a.currentFrame].image){c=a.spriteSheet.getFrame(a.currentFrame);f=c.rect.width;k=c.rect.height;d=c.regX;var m=c.regY}else b.x=a.x||0,b.y=a.y||0;else b.x=a.x||0,b.y=a.y||0;d=d||0;f=f||0;m=m||0;k=k||0;b.regX=d;b.regY=m;c=a.localToGlobal(0-d,0-m);g=a.localToGlobal(f-d,k-m);f=a.localToGlobal(f-d,0-m);d=a.localToGlobal(0-d,k-m);b.x=
Math.min(Math.min(Math.min(c.x,g.x),f.x),d.x);b.y=Math.min(Math.min(Math.min(c.y,g.y),f.y),d.y);b.width=Math.max(Math.max(Math.max(c.x,g.x),f.x),d.x)-b.x;b.height=Math.max(Math.max(Math.max(c.y,g.y),f.y),d.y)-b.y}return b}function NoClickDelay(a){this.element=a;window.Touch&&this.element.addEventListener("touchstart",this,!1)}function shuffle(a){for(var e=a.length,b,d;0<e;)d=Math.floor(Math.random()*e),e--,b=a[e],a[e]=a[d],a[d]=b;return a}
NoClickDelay.prototype={handleEvent:function(a){switch(a.type){case "touchstart":this.onTouchStart(a);break;case "touchmove":this.onTouchMove(a);break;case "touchend":this.onTouchEnd(a)}},onTouchStart:function(a){a.preventDefault();this.moved=!1;this.element.addEventListener("touchmove",this,!1);this.element.addEventListener("touchend",this,!1)},onTouchMove:function(a){this.moved=!0},onTouchEnd:function(a){this.element.removeEventListener("touchmove",this,!1);this.element.removeEventListener("touchend",
this,!1);if(!this.moved){a=document.elementFromPoint(a.changedTouches[0].clientX,a.changedTouches[0].clientY);3==a.nodeType&&(a=a.parentNode);var e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0);a.dispatchEvent(e)}}};
(function(){function a(b){var d={focus:"visible",focusin:"visible",pageshow:"visible",blur:"hidden",focusout:"hidden",pagehide:"hidden"};b=b||window.event;b.type in d?document.body.className=d[b.type]:(document.body.className=this[e]?"hidden":"visible","hidden"===document.body.className?(s_oMain.stopUpdate(),s_bFocus=!1):(s_oMain.startUpdate(),s_bFocus=!0))}var e="hidden";e in document?document.addEventListener("visibilitychange",a):(e="mozHidden")in document?document.addEventListener("mozvisibilitychange",
a):(e="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",a):(e="msHidden")in document?document.addEventListener("msvisibilitychange",a):"onfocusin"in document?document.onfocusin=document.onfocusout=a:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=a})();function ctlArcadeResume(){null!==s_oMain&&s_oMain.startUpdate()}function ctlArcadePause(){null!==s_oMain&&s_oMain.stopUpdate()}
function getParamValue(a){for(var e=window.location.search.substring(1).split("&"),b=0;b<e.length;b++){var d=e[b].split("=");if(d[0]==a)return d[1]}}function fullscreenHandler(){ENABLE_FULLSCREEN&&screenfull.isEnabled&&(s_bFullscreen=screenfull.isFullscreen,null!==s_oLevelMenu&&s_oLevelMenu.resetFullscreenBut(),null!==s_oMenu&&s_oMenu.resetFullscreenBut())}
if(screenfull.isEnabled)screenfull.on("change",function(){s_bFullscreen=screenfull.isFullscreen;null!==s_oLevelMenu&&s_oLevelMenu.resetFullscreenBut();null!==s_oMenu&&s_oMenu.resetFullscreenBut()});
function CSpriteLibrary(){var a={},e,b,d,c,f,g;this.init=function(k,m,l){e={};d=b=0;c=k;f=m;g=l};this.addSprite=function(k,m){if(!a.hasOwnProperty(k)){var l=new Image;a[k]=e[k]={szPath:m,oSprite:l,bLoaded:!1};b++}};this.getSprite=function(k){return a.hasOwnProperty(k)?a[k].oSprite:null};this._onSpritesLoaded=function(){b=0;f.call(g)};this._onSpriteLoaded=function(){c.call(g);++d===b&&this._onSpritesLoaded()};this.loadSprites=function(){for(var k in e)e[k].oSprite.oSpriteLibrary=this,e[k].oSprite.szKey=
k,e[k].oSprite.onload=function(){this.oSpriteLibrary.setLoaded(this.szKey);this.oSpriteLibrary._onSpriteLoaded(this.szKey)},e[k].oSprite.onerror=function(m){var l=m.currentTarget;setTimeout(function(){e[l.szKey].oSprite.src=e[l.szKey].szPath},500)},e[k].oSprite.src=e[k].szPath};this.setLoaded=function(k){a[k].bLoaded=!0};this.isLoaded=function(k){return a[k].bLoaded};this.getNumSprites=function(){return b}}
var CANVAS_WIDTH=640,CANVAS_HEIGHT=960,EDGEBOARD_X=80,EDGEBOARD_Y=85,GAME_NAME="flowers",FONT="boogaloo",SOUNDTRACK_VOLUME_IN_GAME=.6,SCROLLING_BG_WIDTH=640,SCROLLING_BG_HEIGHT=741,CELL_WIDTH=110,CELL_HEIGHT=110,PARTICLE_WIDTH=70,PARTICLE_HEIGHT=70,GRID_AREA_SIZE=600,START_X_GRID=parseInt((CANVAS_WIDTH-GRID_AREA_SIZE)/2),START_Y_GRID=parseInt((CANVAS_HEIGHT-GRID_AREA_SIZE)/2),FPS=30,FPS_TIME=1E3/FPS,DISABLE_SOUND_MOBILE=!1,STATE_LOADING=0,STATE_MENU=1,STATE_HELP=1,STATE_GAME=3,ON_MOUSE_DOWN=0,ON_MOUSE_UP=
1,ON_MOUSE_OVER=2,ON_MOUSE_OUT=3,ON_DRAG_START=4,ON_DRAG_END=5,ORANGE=0,GREEN=1,YELLOW=2,RED=3,BLUE=4,NONE=-1,DOWN=0,UP=1,LEFT=2,RIGHT=3,CHANGED=4,NUM_ROWS_PAGE_LEVEL=2,NUM_COLS_PAGE_LEVEL=5,DIFFICULTY_EASY=0,DIFFICULTY_MEDIUM=1,DIFFICULTY_HARD=2,NUM_LEVELS,ENABLE_FULLSCREEN,ENABLE_CHECK_ORIENTATION,SCORE_TO_ADD,SCORE_TO_SUBTRACT;
function CPreloader(){var a,e,b,d,c,f,g;this._init=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this);s_oSpriteLibrary.addSprite("bg_menu","./sprites/bg_menu.jpg");s_oSpriteLibrary.addSprite("progress_bar","./sprites/progress_bar.png");s_oSpriteLibrary.loadSprites();g=new createjs.Container;s_oStage.addChild(g)};this.unload=function(){g.removeAllChildren()};this.hide=function(){var k=this;setTimeout(function(){createjs.Tween.get(f).to({alpha:1},500).call(function(){k.unload();
s_oMain.gotoMenu()})},1E3)};this._onImagesLoaded=function(){};this._onAllImagesLoaded=function(){this.attachSprites();s_oMain.preloaderReady()};this.attachSprites=function(){var k=createBitmap(s_oSpriteLibrary.getSprite("bg_menu"));g.addChild(k);k=s_oSpriteLibrary.getSprite("progress_bar");d=createBitmap(k);d.x=CANVAS_WIDTH/2-k.width/2;d.y=CANVAS_HEIGHT-250;g.addChild(d);a=k.width;e=k.height;c=new createjs.Shape;c.graphics.beginFill("rgba(255,255,255,0.01)").drawRect(d.x,d.y,1,e);g.addChild(c);d.mask=
c;b=new createjs.Text("","30px "+FONT,"#fff");b.x=CANVAS_WIDTH/2;b.y=CANVAS_HEIGHT-250;b.shadow=new createjs.Shadow("#000",2,2,2);b.textBaseline="alphabetic";b.textAlign="center";g.addChild(b);f=new createjs.Shape;f.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);f.alpha=0;g.addChild(f)};this.refreshLoader=function(k){b.text=k+"%";c.graphics.clear();k=Math.floor(k*a/100);c.graphics.beginFill("rgba(255,255,255,0.01)").drawRect(d.x,d.y,k,e)};this._init()}
function CMain(a){var e,b=0,d=0,c=STATE_LOADING,f,g;this.initContainer=function(){s_oCanvas=document.getElementById("canvas");s_oStage=new createjs.Stage(s_oCanvas);createjs.Touch.enable(s_oStage,!0);s_bMobile=isMobile();!1===s_bMobile&&s_oStage.enableMouseOver(20);s_iPrevTime=(new Date).getTime();createjs.Ticker.addEventListener("tick",this._update);createjs.Ticker.framerate=FPS;navigator.userAgent.match(/Windows Phone/i)&&(DISABLE_SOUND_MOBILE=!0);s_oSpriteLibrary=new CSpriteLibrary;f=new CPreloader};
this.preloaderReady=function(){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||this._initSounds();this._loadImages();e=!0};this.soundLoaded=function(){b++;f.refreshLoader(Math.floor(b/d*100));b===d&&s_oMain._allResourcesLoaded()};this._initSounds=function(){Howler.mute(!s_bAudioActive);s_aSoundsInfo=[];s_aSoundsInfo.push({path:"./sounds/",filename:"flower_closed",loop:!1,volume:1,ingamename:"flower_closed"});s_aSoundsInfo.push({path:"./sounds/",filename:"but_press",loop:!1,volume:1,ingamename:"click"});
s_aSoundsInfo.push({path:"./sounds/",filename:"all_level_completed",loop:!1,volume:1,ingamename:"all_level_completed"});s_aSoundsInfo.push({path:"./sounds/",filename:"flower_open",loop:!1,volume:1,ingamename:"flower_open"});s_aSoundsInfo.push({path:"./sounds/",filename:"next_level",loop:!1,volume:1,ingamename:"next_level"});s_aSoundsInfo.push({path:"./sounds/",filename:"particle",loop:!1,volume:1,ingamename:"particle"});s_aSoundsInfo.push({path:"./sounds/",filename:"soundtrack",loop:!0,volume:1,ingamename:"soundtrack"});
d+=s_aSoundsInfo.length;s_aSounds=[];for(var m=0;m<s_aSoundsInfo.length;m++)this.tryToLoadSound(s_aSoundsInfo[m],!1)};this.tryToLoadSound=function(m,l){setTimeout(function(){s_aSounds[m.ingamename]=new Howl({src:[m.path+m.filename+".mp3"],autoplay:!1,preload:!0,loop:m.loop,volume:m.volume,onload:s_oMain.soundLoaded,onloaderror:function(v,w){for(var q=0;q<s_aSoundsInfo.length;q++)if(v===s_aSounds[s_aSoundsInfo[q].ingamename]._sounds[0]._id){s_oMain.tryToLoadSound(s_aSoundsInfo[q],!0);break}},onplayerror:function(v){for(var w=
0;w<s_aSoundsInfo.length;w++)if(v===s_aSounds[s_aSoundsInfo[w].ingamename]._sounds[0]._id){s_aSounds[s_aSoundsInfo[w].ingamename].once("unlock",function(){s_aSounds[s_aSoundsInfo[w].ingamename].play();"soundtrack"===s_aSoundsInfo[w].ingamename&&null!==s_oGame&&setVolume("soundtrack",SOUNDTRACK_VOLUME_IN_GAME)});break}}})},l?200:0)};this._loadImages=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this);s_oSpriteLibrary.addSprite("but_play","./sprites/but_play.png");s_oSpriteLibrary.addSprite("but_play_small",
"./sprites/but_play_small.png");s_oSpriteLibrary.addSprite("level_sprite","./sprites/LevelSprite.png");s_oSpriteLibrary.addSprite("bg_menu","./sprites/bg_menu.jpg");s_oSpriteLibrary.addSprite("bg_game","./sprites/bg_game.jpg");s_oSpriteLibrary.addSprite("bg_help","./sprites/bg_help.png");s_oSpriteLibrary.addSprite("msg_box","./sprites/msg_box.png");s_oSpriteLibrary.addSprite("bg_win","./sprites/bg_win.png");s_oSpriteLibrary.addSprite("clouds_back","./sprites/clouds_back.png");s_oSpriteLibrary.addSprite("but_exit",
"./sprites/but_exit.png");s_oSpriteLibrary.addSprite("but_restart","./sprites/but_restart.png");s_oSpriteLibrary.addSprite("audio_icon","./sprites/audio_icon.png");s_oSpriteLibrary.addSprite("but_next","./sprites/but_next.png");s_oSpriteLibrary.addSprite("but_restart_big","./sprites/but_restart_big.png");s_oSpriteLibrary.addSprite("grid_spritesheet","./sprites/grid_spritesheet.png");s_oSpriteLibrary.addSprite("particle","./sprites/particle_sprite.png");s_oSpriteLibrary.addSprite("background","./sprites/background.png");
s_oSpriteLibrary.addSprite("but_credits","./sprites/but_credits.png");s_oSpriteLibrary.addSprite("ctl_logo","./sprites/ctl_logo.png");s_oSpriteLibrary.addSprite("but_fullscreen","./sprites/but_fullscreen.png");s_oSpriteLibrary.addSprite("mode_easy_icon","./sprites/mode_easy_icon.png");s_oSpriteLibrary.addSprite("mode_medium_icon","./sprites/mode_medium_icon.png");s_oSpriteLibrary.addSprite("mode_hard_icon","./sprites/mode_hard_icon.png");s_oSpriteLibrary.addSprite("arrow_left","./sprites/arrow_left.png");
s_oSpriteLibrary.addSprite("arrow_right","./sprites/arrow_right.png");s_oSpriteLibrary.addSprite("but_delete_saving","./sprites/but_delete_saving.png");d+=s_oSpriteLibrary.getNumSprites();s_oSpriteLibrary.loadSprites()};this._onImagesLoaded=function(){b++;f.refreshLoader(Math.floor(b/d*100));b===d&&s_oMain._allResourcesLoaded()};this._onAllImagesLoaded=function(){};this.onAllPreloaderImagesLoaded=function(){this._loadImages()};this._allResourcesLoaded=function(){f.unload();new CLocalStorage(GAME_NAME);
s_oMain.setLevelInfo(LEVELS_INFO)};this.setLevelInfo=function(m){s_aLevelsData=[];for(var l=0;l<Object.keys(m).length;l++)s_aLevelsData[l]={dim:m[l].dim,maxMoves:m[l].maxMoves,diff:m[l].diff,index:l,points:m[l].points};NUM_LEVELS=s_aLevelsData.length;s_oMain._onRemovePreloader()};this._onRemovePreloader=function(){isIOS()||playSound("soundtrack",1,!0);s_oMain.gotoMenu()};this.gotoMenu=function(){new CMenu;c=STATE_MENU};this.gotoLevelMenu=function(){new CLevelMenu(s_aLevelsData);c=STATE_MENU};this.gotoGame=
function(m,l){g=new CGame(k,m,l);c=STATE_GAME};this.gotoHelp=function(m){new CHelp(m);c=STATE_HELP};this.stopUpdate=function(){e=!1;createjs.Ticker.paused=!0;$("#block_game").css("display","block");Howler.mute(!0)};this.startUpdate=function(){s_iPrevTime=(new Date).getTime();e=!0;createjs.Ticker.paused=!1;$("#block_game").css("display","none");s_bAudioActive&&Howler.mute(!1)};this._update=function(m){!1!==e&&(m=(new Date).getTime(),s_iTimeElaps=m-s_iPrevTime,s_iCntTime+=s_iTimeElaps,s_iCntFps++,s_iPrevTime=
m,1E3<=s_iCntTime&&(s_iCurFps=s_iCntFps,s_iCntTime-=1E3,s_iCntFps=0),!s_bMobile||s_bIsIphone?(c===STATE_GAME&&g.update(),s_oStage.update()):c===STATE_GAME?g.update():s_oStage.update())};s_oMain=this;var k=a;ENABLE_CHECK_ORIENTATION=a.check_orientation;ENABLE_FULLSCREEN=a.fullscreen;s_bAudioActive=a.audio_enable_on_startup;this.initContainer()}var s_bMobile,s_bAudioActive=!1,s_iCntTime=0,s_iTimeElaps=0,s_iPrevTime=0,s_iCntFps=0,s_iCurFps=0,s_iMode,s_szImage;s_bIsIphone=!1;
var s_oDrawLayer,s_oStage,s_oMain,s_oSpriteLibrary,s_oSoundtrack=null,s_oCanvas,s_aLevelsData,s_bFullscreen=!1,s_aSounds,s_aSoundsInfo;
function CTextButton(a,e,b,d,c,f,g){var k,m,l,v,w;this._init=function(q,z,r,x,B,F,p){k=[];m=[];var H=createBitmap(r),I=Math.ceil(p/20);w=new createjs.Text(x,p+"px "+B,"#000000");w.textAlign="center";w.textBaseline="alphabetic";var A=w.getBounds();w.x=r.width/2+I;w.y=Math.floor(r.height/2)+A.height/3+I;v=new createjs.Text(x,p+"px "+B,F);v.textAlign="center";v.textBaseline="alphabetic";A=v.getBounds();v.x=r.width/2;v.y=Math.floor(r.height/2)+A.height/3;l=new createjs.Container;l.x=q;l.y=z;l.regX=r.width/
2;l.regY=r.height/2;l.addChild(H,w,v);s_bMobile||(l.cursor="pointer");s_oStage.addChild(l);this._initListener()};this.unload=function(){l.removeAllEventListeners();s_oStage.removeChild(l)};this.setVisible=function(q){l.visible=q};this._initListener=function(){oParent=this;l.on("mousedown",this.buttonDown);l.on("pressup",this.buttonRelease)};this.addEventListener=function(q,z,r){k[q]=z;m[q]=r};this.buttonRelease=function(){l.scaleX=1;l.scaleY=1;k[ON_MOUSE_UP]&&k[ON_MOUSE_UP].call(m[ON_MOUSE_UP])};
this.buttonDown=function(){l.scaleX=.9;l.scaleY=.9;playSound("click",1,!1);k[ON_MOUSE_DOWN]&&k[ON_MOUSE_DOWN].call(m[ON_MOUSE_DOWN])};this.setTextPosition=function(q){v.y=q;w.y=q+2};this.setPosition=function(q,z){l.x=q;l.y=z};this.setX=function(q){l.x=q};this.setY=function(q){l.y=q};this.getButtonImage=function(){return l};this.getX=function(){return l.x};this.getY=function(){return l.y};this._init(a,e,b,d,c,f,g);return this}
function CToggle(a,e,b,d){var c,f,g,k=[],m;this._init=function(l,v,w,q){f=[];g=[];var z=new createjs.SpriteSheet({images:[w],frames:{width:w.width/2,height:w.height,regX:w.width/2/2,regY:w.height/2},animations:{state_true:[0],state_false:[1]}});c=q;m=createSprite(z,"state_"+c,w.width/2/2,w.height/2,w.width/2,w.height);m.x=l;m.y=v;m.stop();s_bMobile||(m.cursor="pointer");s_oStage.addChild(m);this._initListener()};this.unload=function(){m.removeAllEventListeners();s_oStage.removeChild(m)};this._initListener=
function(){m.on("mousedown",this.buttonDown);m.on("pressup",this.buttonRelease)};this.addEventListener=function(l,v,w){f[l]=v;g[l]=w};this.addEventListenerWithParams=function(l,v,w,q){f[l]=v;g[l]=w;k=q};this.setActive=function(l){c=l;m.gotoAndStop("state_"+c)};this.buttonRelease=function(){m.scaleX=1;m.scaleY=1;c=!c;m.gotoAndStop("state_"+c);f[ON_MOUSE_UP]&&f[ON_MOUSE_UP].call(g[ON_MOUSE_UP],k)};this.buttonDown=function(){m.scaleX=.9;m.scaleY=.9;playSound("click",1,!1);f[ON_MOUSE_DOWN]&&f[ON_MOUSE_DOWN].call(g[ON_MOUSE_DOWN],
k)};this.setPosition=function(l,v){m.x=l;m.y=v};this.setVisible=function(l){m.visible=l};this._init(a,e,b,d)}
function CGfxButton(a,e,b,d){var c,f,g,k=[],m;this._init=function(l,v,w){c=1;f=[];g=[];m=createBitmap(w);m.x=l;m.y=v;m.regX=w.width/2;m.regY=w.height/2;s_bMobile||(m.cursor="pointer");d.addChild(m);this._initListener()};this.unload=function(){m.removeAllEventListeners();d.removeChild(m)};this.setVisible=function(l){m.visible=l};this._initListener=function(){m.on("mousedown",this.buttonDown);m.on("pressup",this.buttonRelease)};this.addEventListener=function(l,v,w){f[l]=v;g[l]=w};this.addEventListenerWithParams=
function(l,v,w,q){f[l]=v;g[l]=w;k=q};this.buttonRelease=function(){m.scaleX=c;m.scaleY=c;f[ON_MOUSE_UP]&&f[ON_MOUSE_UP].call(g[ON_MOUSE_UP],k)};this.buttonDown=function(){m.scaleX=.9*c;m.scaleY=.9*c;playSound("click",1,!1);f[ON_MOUSE_DOWN]&&f[ON_MOUSE_DOWN].call(g[ON_MOUSE_DOWN],k)};this.setScale=function(l){c=l;m.scaleX=l;m.scaleY=l};this.setPosition=function(l,v){m.x=l;m.y=v};this.setX=function(l){m.x=l};this.setY=function(l){m.y=l};this.getButtonImage=function(){return m};this.getX=function(){return m.x};
this.getY=function(){return m.y};this._init(a,e,b,d);return this}
function CMenu(){var a,e,b,d,c,f,g,k,m,l,v,w,q,z,r,x,B=null,F=null;this._init=function(){m=createBitmap(s_oSpriteLibrary.getSprite("bg_menu"));s_oStage.addChild(m);var p=s_oSpriteLibrary.getSprite("but_play");l=new CGfxButton(CANVAS_WIDTH/2,CANVAS_HEIGHT-350,p,s_oStage);l.addEventListener(ON_MOUSE_UP,this._onButPlayRelease,this);if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)p=s_oSpriteLibrary.getSprite("audio_icon"),g=CANVAS_WIDTH-p.height/2-6,k=p.height/2+10,q=new CToggle(g,k,p,s_bAudioActive),q.addEventListener(ON_MOUSE_UP,
this._onAudioToggle,this);p=s_oSpriteLibrary.getSprite("but_delete_saving");c=g-p.width-6;f=k+1;v=new CGfxButton(CANVAS_WIDTH/2,CANVAS_HEIGHT-350,p,s_oStage);v.addEventListener(ON_MOUSE_UP,this._onButDelete,this);p=s_oSpriteLibrary.getSprite("but_credits");b=p.height/2+6;d=p.height/2+10;z=new CGfxButton(b,d,p,s_oStage);z.addEventListener(ON_MOUSE_UP,this._onButInfoRelease,this);p=window.document;var H=p.documentElement;B=H.requestFullscreen||H.mozRequestFullScreen||H.webkitRequestFullScreen||H.msRequestFullscreen;
F=p.exitFullscreen||p.mozCancelFullScreen||p.webkitExitFullscreen||p.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(B=!1);B&&screenfull.isEnabled&&(p=s_oSpriteLibrary.getSprite("but_fullscreen"),a=b+p.width/2+10,e=p.height/2+10,r=new CToggle(a,e,p,s_bFullscreen,s_oStage),r.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this));w=new createjs.Shape;w.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);s_oStage.addChild(w);createjs.Tween.get(w).to({alpha:0},1E3).call(function(){w.visible=
!1});s_oLocalStorage.isUsed()||(p=new CMsgBox,p.setMessage(TEXT_IOS_PRIVATE),p.disableConfirm());this.refreshButtonPos(s_iOffsetX,s_iOffsetY)};this.unload=function(){l.unload();l=null;w.visible=!1;z.unload();if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)q.unload(),q=null;B&&screenfull.isEnabled&&r.unload();s_oStage.removeAllChildren();s_oMenu=null};this.refreshButtonPos=function(p,H){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||q.setPosition(g-p,H+k);B&&screenfull.isEnabled&&r.setPosition(a+p,e+H);z.setPosition(b+
p,d+H);v.setPosition(c-p,f+H)};this._onAudioToggle=function(){Howler.mute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this._onButPlayRelease=function(){this.unload();$(s_oMain).trigger("start_session");isIOS()&&null===s_oSoundtrack&&playSound("soundtrack",1,!0);s_oMain.gotoLevelMenu()};this.resetFullscreenBut=function(){B&&screenfull.isEnabled&&r.setActive(s_bFullscreen)};this._onFullscreenRelease=function(){s_bFullscreen?F.call(window.document):B.call(window.document.documentElement);sizeHandler()};
this._onButDelete=function(){x=new CMsgBox;x.setConfirm(this._onConfirmDelete);x.setMessage(TEXT_DELETE)};this._onConfirmDelete=function(){s_oLocalStorage.deleteData();x.unload();x=null};this._onButInfoRelease=function(){new CCreditsPanel};s_oMenu=this;this._init()}var s_oMenu=null;
function CGame(a,e,b){var d=e,c=b,f,g,k,m,l=NONE,v=0,w,q=0,z,r,x,B,F,p,H=[],I=[],A=[],E=[],N=[],C=[],Q=[],P=[],R=[],O=[],X,V=null,aa=!1,ba=!1,U=!1,Y=!1,u=Array(2),D=[],Z;this._init=function(){setVolume("soundtrack",SOUNDTRACK_VOLUME_IN_GAME);$(s_oMain).trigger("start_level",[d]);var t=createBitmap(s_oSpriteLibrary.getSprite("bg_game"));s_oStage.addChild(t);u[0]=new CScrollingBg(s_oSpriteLibrary.getSprite("clouds_back"),0);u[1]=new CScrollingBg(s_oSpriteLibrary.getSprite("clouds_back"),-SCROLLING_BG_WIDTH);
w=M[d].dim;z=M[d].points.length;F=B=parseInt(GRID_AREA_SIZE/w);r=x=F/2;Z=new createjs.Container;s_oStage.addChild(Z);t={images:[s_oSpriteLibrary.getSprite("grid_spritesheet")],framerate:35,frames:{width:CELL_WIDTH,height:CELL_HEIGHT,regX:CELL_WIDTH/2,regY:CELL_HEIGHT/2},animations:{orange0:[0],orangeGrowing:[0,9,"orange1"],orangeDwarfing:{frames:[9,8,7,6,5,4,3,2,1,0],next:"orange0"},orange1:[9],orange2:[10],orange3:[11],orange4:[12],orange5:[9],green0:[13],greenGrowing:[13,22,"green1"],greenDwarfing:{frames:[22,
21,20,19,18,17,16,15,14,13],next:"green0"},green1:[22],green2:[23],green3:[24],green4:[25],green5:[22],yellow0:[26],yellowGrowing:[26,35,"yellow1"],yellowDwarfing:{frames:[35,34,33,32,31,30,29,28,27,26],next:"yellow0"},yellow1:[35],yellow2:[36],yellow3:[37],yellow4:[38],yellow5:[35],red0:[39],redGrowing:[39,48,"red1"],redDwarfing:{frames:[48,47,46,45,44,43,42,41,40,39],next:"red0"},red1:[48],red2:[49],red3:[50],red4:[51],red5:[48],blue0:[52],blueGrowing:[52,61,"blue1"],blueDwarfing:{frames:[61,60,
59,58,57,56,55,54,53,52],next:"blue0"},blue1:[61],blue2:[62],blue3:[63],blue4:[64],blue5:[61],heavenly0:[65],heavenlyGrowing:[65,74,"heavenly1"],heavenlyDwarfing:{frames:[74,73,72,71,70,69,68,67,66,65],next:"heavenly0"},heavenly1:[74],heavenly2:[75],heavenly3:[76],heavenly4:[77],heavenly5:[74],violet0:[78],violetGrowing:[78,87,"violet1"],violetDwarfing:{frames:[87,86,84,83,82,81,80,79,78],next:"violet0"},violet1:[87],violet2:[88],violet3:[89],violet4:[90],violet5:[87],pink0:[91],pinkGrowing:[91,100,
"pink1"],pinkDwarfing:{frames:[100,99,98,97,96,95,94,93,92,91],next:"pink0"},pink1:[100],pink2:[101],pink3:[102],pink4:[103],pink5:[100],orangeyellow0:[104],orangeyellowGrowing:[104,113,"orangeyellow1"],orangeyellowDwarfing:{frames:[113,112,111,110,109,108,107,106,105,104],next:"orangeyellow0"},orangeyellow1:[113],orangeyellow2:[114],orangeyellow3:[115],orangeyellow4:[116],orangeyellow5:[113],purple0:[117],purpleGrowing:[117,126,"purple1"],purpleDwarfing:{frames:[126,125,124,123,122,121,120,119,118,
117],next:"purple0"},purple1:[126],purple2:[127],purple3:[128],purple4:[129],purple5:[126],hide:[130]}};t=new createjs.SpriteSheet(t);for(var n=0;n<w;n++){D[n]=[];for(var h=0;h<w;h++)D[n][h]=new CCell(t,n,h,START_X_GRID+h*B+r,START_Y_GRID+n*F+x,Z,"hide",GRID_AREA_SIZE/w/CELL_WIDTH)}for(t=0;t<z;t++)D[M[d].points[t].start_r][M[d].points[t].start_c].changeCellState(M[d].points[t].color,0,0,l,NONE,!0),D[M[d].points[t].end_r][M[d].points[t].end_c].changeCellState(M[d].points[t].color,0,0,l,NONE,!0);U=
!0;s_oStage.on("stagemousemove",this.onMouseMove,this);s_bMobile&&!s_bIsIphone&&s_oStage.update();this.refreshGridScale();X=new CInterface(d,q,M[d].maxMoves)};this.refreshGridScale=function(){GRID_AREA_SIZE=CANVAS_WIDTH-2*s_iOffsetX;START_X_GRID=parseInt((CANVAS_WIDTH-GRID_AREA_SIZE)/2);START_Y_GRID=parseInt((CANVAS_HEIGHT-GRID_AREA_SIZE)/2);F=B=parseInt(GRID_AREA_SIZE/w);r=x=F/2;for(var t=0;t<w;t++)for(var n=0;n<w;n++)D[t][n].refreshScale(START_X_GRID+n*B+r,START_Y_GRID+t*F+x,GRID_AREA_SIZE/w/CELL_WIDTH);
s_bMobile&&!s_bIsIphone&&s_oStage.update()};this.onCellClick=function(t,n,h){if(U){f=n;g=h;D[n][h].getX();D[n][h].getY();p=D[n][h].getValue();if(0===D[n][h].getState()||1===D[n][h].getState()||5===D[n][h].getState()){this._cancelThisLineColor(p);switch(p){case "orange":H.push({r:n,c:h});break;case "green":I.push({r:n,c:h});break;case "yellow":A.push({r:n,c:h});break;case "red":E.push({r:n,c:h});break;case "blue":N.push({r:n,c:h});break;case "heavenly":C.push({r:n,c:h});break;case "violet":Q.push({r:n,
c:h});break;case "pink":P.push({r:n,c:h});break;case "orangeyellow":R.push({r:n,c:h});break;case "purple":O.push({r:n,c:h})}aa=!0}else if(2===D[n][h].getState()||3===D[n][h].getState()||4===D[n][h].getState()){var G=this.getCellPositionInArray(n,h,D[n][h].getValue());switch(p){case "orange":var y=H;break;case "green":y=I;break;case "yellow":y=A;break;case "red":y=E;break;case "blue":y=N;break;case "heavenly":y=C;break;case "violet":y=Q;break;case "pink":y=P;break;case "orangeyellow":y=R;break;case "purple":y=
O}G.arrayDim>G.index+1&&this._cancelNextLines(G.index+1,D[n][h].getValue(),y);t=y[G.index-1].r;y=y[G.index-1].c;if(1===D[t][y].getState())D[n][h].changeCellState(p,2,D[t][y].getRotation()-180,D[t][y].getDirection(),D[t][y].getDirection());else if(4===D[t][y].getState()){switch(D[t][y].getDirectionNoChange()){case UP:var S=90;break;case DOWN:S=-90;break;case LEFT:S=0;break;case RIGHT:S=180}D[n][h].changeCellState(p,2,S,D[t][y].getDirectionNoChange(),D[t][y].getDirectionNoChange())}else D[n][h].changeCellState(p,
2,D[t][y].getRotation(),D[t][y].getDirection(),D[t][y].getDirection());aa=!0}s_bMobile&&!s_bIsIphone&&s_oStage.update()}};this.onMouseMove=function(t){aa&&(k=s_oStage.mouseX,m=s_oStage.mouseY,Y=!0)};this.releaseForm=function(t){Y=ba=aa=!1;s_bMobile&&!s_bIsIphone&&s_oStage.update()};this.getCellPositionInArray=function(t,n,h){switch(h){case "orange":for(h=0;h<H.length;h++)if(H[h].r===t&&H[h].c===n)return{index:h,arrayDim:H.length};break;case "green":for(h=0;h<I.length;h++)if(I[h].r===t&&I[h].c===n)return{index:h,
arrayDim:I.length};break;case "yellow":for(h=0;h<A.length;h++)if(A[h].r===t&&A[h].c===n)return{index:h,arrayDim:A.length};break;case "red":for(h=0;h<E.length;h++)if(E[h].r===t&&E[h].c===n)return{index:h,arrayDim:E.length};break;case "blue":for(h=0;h<N.length;h++)if(N[h].r===t&&N[h].c===n)return{index:h,arrayDim:N.length};break;case "heavenly":for(h=0;h<C.length;h++)if(C[h].r===t&&C[h].c===n)return{index:h,arrayDim:C.length};break;case "violet":for(h=0;h<Q.length;h++)if(Q[h].r===t&&Q[h].c===n)return{index:h,
arrayDim:Q.length};break;case "pink":for(h=0;h<P.length;h++)if(P[h].r===t&&P[h].c===n)return{index:h,arrayDim:P.length};break;case "orangeyellow":for(h=0;h<R.length;h++)if(R[h].r===t&&R[h].c===n)return{index:h,arrayDim:R.length};break;case "purple":for(h=0;h<O.length;h++)if(O[h].r===t&&O[h].c===n)return{index:h,arrayDim:O.length}}};this.updateColorArray=function(t,n,h){switch(t){case "orange":H.push({r:n,c:h});break;case "green":I.push({r:n,c:h});break;case "yellow":A.push({r:n,c:h});break;case "red":E.push({r:n,
c:h});break;case "blue":N.push({r:n,c:h});break;case "heavenly":C.push({r:n,c:h});break;case "violet":Q.push({r:n,c:h});break;case "pink":P.push({r:n,c:h});break;case "orangeyellow":R.push({r:n,c:h});break;case "purple":O.push({r:n,c:h})}};this._cancelNextLines=function(t,n,h){h.length;for(var G=t;G<h.length;G++)5===D[h[G].r][h[G].c].getState()?(D[h[G].r][h[G].c].flowerDwarfing(0,0,NONE,NONE),v--):0<D[h[G].r][h[G].c].getState()&&D[h[G].r][h[G].c].changeCellState("hide",null,0,NONE,NONE,!0);t===h.length?
h.pop():h.splice(t,h.length-t);1===h.length&&this._cancelThisLineColor(n)};this.checkIfLevelCompleted=function(){for(var t=0;t<w;t++)for(var n=0;n<w;n++)if("hide"===D[t][n].getValue())return!1;return!0};this._cancelThisLineColor=function(t){switch(t){case "orange":H=[];break;case "green":I=[];break;case "yellow":A=[];break;case "red":E=[];break;case "blue":N=[];break;case "heavenly":C=[];break;case "violet":Q=[];break;case "pink":P=[];break;case "orangeyellow":R=[];break;case "purple":O=[]}for(var n=
0;n<w;n++)for(var h=0;h<w;h++)D[n][h].getValue()===t&&5===D[n][h].getState()?(D[n][h].flowerDwarfing(0,0,NONE,NONE),v--):D[n][h].getValue()===t&&1<D[n][h].getState()?D[n][h].changeCellState("hide",null,0,NONE,!1):D[n][h].getValue()===t&&1===D[n][h].getState()&&(playSound("flower_closed",1,!1),D[n][h].flowerDwarfing(0,0,NONE,NONE))};this.checkIfNextIsGoal=function(t,n){return!1===this._checkIfNotOccupied(t,n)&&D[f][g].getValue()===D[t][n].getValue()&&0===D[t][n].getState()?!0:!1};this._checkIfNear=
function(t,n,h,G){return t<h&&n===G?(l=DOWN,{r:1,c:0}):t>h&&n===G?(l=UP,{r:-1,c:0}):t===h&&n>G?(l=LEFT,{r:0,c:-1}):t===h&&n<G?(l=RIGHT,{r:0,c:1}):null};this.checkIfThereIsAnotherLineNear=function(t,n){return 0<n&&D[t][n-1].getValue()===p&&5!==D[t][n-1].getState()?LEFT:0<t&&D[t-1][n].getValue()===p&&5!==D[t-1][n].getState()?UP:t<w-1&&D[t+1][n].getValue()===p&&5!==D[t+1][n].getState()?DOWN:n<w-1&&D[t][n+1].getValue()===p&&5!==D[t][n+1].getState()?RIGHT:null};this._checkIfNotOccupied=function(t,n){return"hide"===
D[t][n].getValue()&&f>=t-1&&f<=t+1&&g>=n-1&&g<=n+1?!0:!1};this._getTypeSprite=function(t,n){var h={typeOld:NONE,typeNew:NONE,rotationOld:0,rotationNew:0,changeSprite:!1};switch(n){case DOWN:switch(t){case LEFT:h.rotationOld=90;h.typeOld=4;h.rotationNew=0;h.typeNew=2;break;case RIGHT:h.rotationOld=180;h.typeOld=4;h.rotationNew=180;h.typeNew=2;break;case DOWN:h.rotationOld=270;h.typeOld=3;h.rotationNew=-90;h.typeNew=2;break;case UP:h.rotationOld=90;h.typeOld=3;h.rotationNew=-90;h.typeNew=2;break;case NONE:h.rotationOld=
0,h.typeOld=1,h.rotationNew=180,h.typeNew=2}break;case UP:switch(t){case LEFT:h.rotationOld=0;h.typeOld=4;h.rotationNew=0;h.typeNew=2;break;case RIGHT:h.rotationOld=270;h.typeOld=4;h.rotationNew=180;h.typeNew=2;break;case UP:h.rotationOld=90;h.typeOld=3;h.rotationNew=90;h.typeNew=2;break;case DOWN:h.rotationOld=270;h.typeOld=3;h.rotationNew=-90;h.typeNew=2;break;case NONE:h.rotationOld=0,h.typeOld=1,h.rotationNew=180,h.typeNew=2}break;case LEFT:switch(t){case UP:h.rotationOld=180;h.typeOld=4;h.rotationNew=
90;h.typeNew=2;break;case DOWN:h.rotationOld=270;h.typeOld=4;h.rotationNew=-90;h.typeNew=2;break;case LEFT:h.rotationOld=0;h.typeOld=3;h.rotationNew=0;h.typeNew=2;break;case RIGHT:h.rotationOld=180;h.typeOld=3;h.rotationNew=0;h.typeNew=2;break;case NONE:h.rotationOld=90,h.typeOld=1,h.rotationNew=-90,h.typeNew=2}break;case RIGHT:switch(t){case DOWN:h.rotationOld=0;h.typeOld=4;h.rotationNew=-90;h.typeNew=2;break;case UP:h.rotationOld=90;h.typeOld=4;h.rotationNew=90;h.typeNew=2;break;case RIGHT:h.rotationOld=
180;h.typeOld=3;h.rotationNew=180;h.typeNew=2;break;case LEFT:h.rotationOld=0;h.typeOld=3;h.rotationNew=0;h.typeNew=2;break;case NONE:h.rotationOld=90,h.typeOld=1,h.rotationNew=-90,h.typeNew=2}break;case NONE:switch(t){case LEFT:h.rotationOld=180;h.typeOld=1;h.rotationNew=0;h.typeNew=2;break;case RIGHT:h.rotationOld=0;h.typeOld=1;h.rotationNew=180;h.typeNew=2;break;case DOWN:h.rotationOld=90;h.typeOld=1;h.rotationNew=-90;h.typeNew=2;break;case UP:h.rotationOld=-90,h.typeOld=1,h.rotationNew=90,h.typeNew=
2}}return h};this.unload=function(){X.unload();for(var t=0;t<w;t++)for(var n=0;n<w;n++)D[t][n].unload();D=[];H=[];I=[];A=[];E=[];N=[];C=[];Q=[];P=[];R=[];O=[];s_oStage.removeAllEventListeners();createjs.Tween.removeAllTweens();s_oStage.removeAllChildren()};this.onExit=function(){this.unload();s_oMain.gotoMenu();$(s_oMain).trigger("restart")};this.onRestart=function(){$(s_oMain).trigger("restart_level",d);$(s_oMain).trigger("show_interlevel_ad");this._cancelThisLineColor("orange");this._cancelThisLineColor("green");
this._cancelThisLineColor("yellow");this._cancelThisLineColor("red");this._cancelThisLineColor("blue");this._cancelThisLineColor("heavenly");this._cancelThisLineColor("violet");this._cancelThisLineColor("pink");this._cancelThisLineColor("orangeyellow");this._cancelThisLineColor("purple");q=c=0;X.refreshScore(q,M[d].maxMoves);U=!0;s_oStage.update()};this.endPanel=function(){var t=d+1;U=!1;c>s_aScore[s_iLastLevel-1]&&(s_aScore[s_iLastLevel-1]=c);t<M.length?s_bMobile&&!s_bIsIphone?setTimeout(function(){V=
new CEndPanel(s_oSpriteLibrary.getSprite("msg_box"),t-1,c);s_iLastLevel<t+1&&(s_iLastLevel=t+1);V.nextLevel()},500):(V=new CEndPanel(s_oSpriteLibrary.getSprite("msg_box"),t-1,c),s_iLastLevel<t+1&&(s_iLastLevel=t+1),V.nextLevel()):s_bMobile&&!s_bIsIphone?setTimeout(function(){V=new CEndPanel(s_oSpriteLibrary.getSprite("bg_win"),t-1,c);V.lastLevelCompleted()},500):(V=new CEndPanel(s_oSpriteLibrary.getSprite("bg_win"),t-1,c),V.lastLevelCompleted());s_oLocalStorage.saveData()};this.nextLevel=function(){d++;
this.unload();s_oMain.gotoGame(d,0)};this.update=function(){if(!s_bMobile||s_bIsIphone)u[0].move(),u[1].move();if(Y){var t=f,n=g,h=D[t][n].getDirectionNoChange();if(k>START_X_GRID&&k<=START_X_GRID+GRID_AREA_SIZE&&m>START_Y_GRID&&m<=START_Y_GRID+GRID_AREA_SIZE){var G=Math.floor((m-START_Y_GRID)/B),y=Math.floor((k-START_X_GRID)/F);if(!(G!==t&&0<=G||y!==n&&0<=y))return;var S=this._checkIfNear(t,n,G,y),K=D[G][y].getValue();if(null!==S)if(this._checkIfNotOccupied(G,y))null!==this.checkIfThereIsAnotherLineNear(G,
y)&&(h=this._getTypeSprite(l,h),ba||(s_bMobile&&!s_bIsIphone||playSound("particle",1,!1),ba=!0),1===h.typeOld?D[t][n].flowerGrow(h.typeOld,h.rotationOld,l,l):D[t][n].changeCellState(p,h.typeOld,h.rotationOld,l,l,!1),t+=S.r,n+=S.c,D[t][n].changeCellState(p,h.typeNew,h.rotationNew,l,l,!0),f+=S.r,g+=S.c,this.updateColorArray(p,t,n),c=q<M[d].maxMoves-z?c+SCORE_TO_ADD:c-SCORE_TO_SUBTRACT,q++,X.refreshScore(q,M[d].maxMoves));else if(this.checkIfNextIsGoal(G,y)){if(null!==this.checkIfThereIsAnotherLineNear(G,
y))if(h=this._getTypeSprite(l,h),D[t][n].changeCellState(p,h.typeOld,h.rotationOld,l,l,!1),t+=S.r,n+=S.c,D[t][n].flowerGrow(5,h.rotationNew,l,l),playSound("flower_open",1,!1),this.updateColorArray(p,t,n),aa=!1,v++,c=q<M[d].maxMoves-z?c+SCORE_TO_ADD:c-SCORE_TO_SUBTRACT,q++,X.refreshScore(q,M[d].maxMoves),v===z&&this.checkIfLevelCompleted())this.endPanel();else if(v===z&&!this.checkIfLevelCompleted()){t=CANVAS_WIDTH/2;var L=new CTLText(s_oStage,t-250,-160,500,120,50,"center","#730358",FONT,1.1,2,2,
TEXT_FILL_CELLS,!0,!0,!0,!1);L.setOutline(4);var J=new CTLText(s_oStage,t-250,-160,500,120,50,"center","#fff",FONT,1.1,2,2,TEXT_FILL_CELLS,!0,!0,!0,!1);createjs.Tween.get(L.getText()).to({y:CANVAS_HEIGHT/2},1E3,createjs.Ease.bounceOut).wait(500).call(function(){createjs.Tween.get(L.getText()).to({y:-100},1E3,createjs.Ease.backIn).wait(500).call(function(){s_oStage.removeChild(L.getText())})});createjs.Tween.get(J.getText()).to({y:CANVAS_HEIGHT/2},1E3,createjs.Ease.bounceOut).wait(500).call(function(){createjs.Tween.get(J.getText()).to({y:-100},
1E3,createjs.Ease.backIn).wait(500).call(function(){s_oStage.removeChild(J.getText())})})}}else if(1<D[G][y].getState()&&5>D[G][y].getState()&&K!==p&&null!==this.checkIfThereIsAnotherLineNear(G,y)){if(G=this.getCellPositionInArray(G,y,K)){switch(K){case "orange":this._cancelNextLines(G.index,K,H);break;case "green":this._cancelNextLines(G.index,K,I);break;case "yellow":this._cancelNextLines(G.index,K,A);break;case "red":this._cancelNextLines(G.index,K,E);break;case "blue":this._cancelNextLines(G.index,
K,N);break;case "heavenly":this._cancelNextLines(G.index,K,C);break;case "violet":this._cancelNextLines(G.index,K,Q);break;case "pink":this._cancelNextLines(G.index,K,P);break;case "orangeyellow":this._cancelNextLines(G.index,K,R);break;case "purple":this._cancelNextLines(G.index,K,O)}h=this._getTypeSprite(l,h);1===h.typeOld&&playSound("flower_open",1,!1);D[t][n].changeCellState(p,h.typeOld,h.rotationOld,l,l,!1);t+=S.r;n+=S.c;D[t][n].changeCellState(p,h.typeNew,h.rotationNew,l,l,!0);f+=S.r;g+=S.c;
this.updateColorArray(p,t,n)}c=q<M[d].maxMoves-z?c+SCORE_TO_ADD:c-SCORE_TO_SUBTRACT;q++;X.refreshScore(q,M[d].maxMoves)}}s_bMobile&&!s_bIsIphone&&s_oStage.update()}};s_oGame=this;var M=s_aLevelsData;SCORE_TO_ADD=a.score_to_add;SCORE_TO_SUBTRACT=a.score_to_subtract;this._init()}var s_oGame;
function CInterface(a,e,b){var d,c,f,g,k,m,l,v,w,q,z,r,x,B,F,p,H,I=null;this._init=function(A,E,N){var C=s_oSpriteLibrary.getSprite("but_exit");w=CANVAS_WIDTH-C.height/2-5;q=C.height/2+10;r=new CGfxButton(w,q,C,s_oStage);r.addEventListener(ON_MOUSE_UP,this._onExit,this);d=CANVAS_WIDTH-C.width/2-72;c=C.height/2+10;C=s_oSpriteLibrary.getSprite("but_restart");x=new CGfxButton(d,c,C,s_oStage);x.addEventListener(ON_MOUSE_UP,this._onRestart,this);l=d-65;v=C.height/2+10;if(!1===DISABLE_SOUND_MOBILE||!1===
s_bMobile)C=s_oSpriteLibrary.getSprite("audio_icon"),z=new CToggle(l,v,C,s_bAudioActive),z.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this);k=20;m=40;C=50;var Q=300,P=50,R=k,O=m;A=sprintf(TEXT_LEVEL,A+1);B=new CTLText(s_oStage,R,O-P/2,Q,P,C,"left","#730358",FONT,1.1,2,2,A,!0,!0,!1,!1);B.setOutline(4);F=new CTLText(s_oStage,R,O-P/2,Q,P,C,"left","#fff",FONT,1.1,2,2,A,!0,!0,!1,!1);f=CANVAS_WIDTH-20;g=CANVAS_HEIGHT-40;C=50;Q=300;P=50;R=f;O=g;A=sprintf(TEXT_MOVES,E,N);p=new CTLText(s_oStage,R-Q,
O-P/2,Q,P,C,"right","#730358",FONT,1.1,2,2,A,!0,!0,!1,!1);p.setOutline(4);H=new CTLText(s_oStage,R-Q,O-P/2,Q,P,C,"right","#fff",FONT,1.1,2,2,A,!0,!0,!1,!1);this.refreshButtonPos(s_iOffsetX,s_iOffsetY)};this.unload=function(){if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)z.unload(),z=null;r.unload();null!==I&&I.unload();s_oInterface=null};this.refreshButtonPos=function(A,E){r.setPosition(w-A,E+q);x.setPosition(d-A,E+c);!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||z.setPosition(l-A,E+v);F.setX(k+A);B.setX(k+
A);F.setY(m+E);B.setY(m+E);H.setX(f-A);p.setX(f-A);H.setY(g-E);p.setY(g-E);s_oGame.refreshGridScale()};this.refreshScore=function(A){A=sprintf(TEXT_MOVES,A,b);H.refreshText(A);p.refreshText(A);H.setX(f-s_iOffsetX);p.setX(f-s_iOffsetX);H.setY(g-s_iOffsetY);p.setY(g-s_iOffsetY)};this._onButHelpRelease=function(){I=new CHelpPanel};this._onButRestartRelease=function(){s_oGame.restartGame()};this.onExitFromHelp=function(){I.unload()};this._onAudioToggle=function(){Howler.mute(s_bAudioActive);s_bAudioActive=
!s_bAudioActive;s_bMobile&&!s_bIsIphone&&s_oStage.update()};this._onExit=function(){s_oGame.onExit();$(s_oMain).trigger("end_level");$(s_oMain).trigger("show_interlevel_ad");$(s_oMain).trigger("end_session")};this._onRestart=function(){s_oGame.onRestart()};s_oInterface=this;this._init(a,e,b);return this}var s_oInterface=null;
function CEndPanel(a,e,b){var d,c,f,g,k,m,l,v,w,q;this._init=function(z,r,x){c=new createjs.Container;if(!s_bMobile||s_bIsIphone)c.alpha=0,c.visible=!1;s_oStage.addChild(c);$(s_oMain).trigger("end_level",[r]);d=createBitmap(z);d.x=0;d.y=0;c.addChild(d);f=new createjs.Container;g=new createjs.Container;z=40;r=400;x=80;var B=CANVAS_WIDTH/2,F=CANVAS_HEIGHT/2-120;k=new CTLText(c,B-r/2,F-x/2,r,x,z,"center","#730358",FONT,1.1,2,2," ",!0,!0,!0,!1);k.setOutline(4);m=new CTLText(c,B-r/2,F-x/2,r,x,z,"center",
"#fff",FONT,1.1,2,2," ",!0,!0,!0,!1);z=40;r=300;x=50;B=CANVAS_WIDTH/2;F=CANVAS_HEIGHT/2-50;l=new CTLText(c,B-r/2,F-x/2,r,x,z,"center","#730358",FONT,1.1,2,2," ",!0,!0,!1,!1);l.setOutline(4);v=new CTLText(c,B-r/2,F-x/2,r,x,z,"center","#fff",FONT,1.1,2,2," ",!0,!0,!1,!1);w=createBitmap(s_oSpriteLibrary.getSprite("but_next"));w.x=CANVAS_WIDTH/2+30;w.y=CANVAS_HEIGHT/2;f.addChild(w);q=createBitmap(s_oSpriteLibrary.getSprite("but_restart_big"));q.x=CANVAS_WIDTH/2-140;q.y=CANVAS_HEIGHT/2;g.addChild(q);g.on("mousedown",
this._onExit,this);c.addChild(g)};this._onNextLevel=function(z){s_oStage.removeChild(c);$(s_oMain).trigger("show_interlevel_ad");f.removeAllEventListeners();s_oGame.nextLevel()};this.nextLevel=function(){playSound("next_level",1,!1);k.refreshText(TEXT_LEVEL_COMPLETED);m.refreshText(TEXT_LEVEL_COMPLETED);l.refreshText(sprintf(TEXT_SCORE,b));v.refreshText(sprintf(TEXT_SCORE,b));c.addChild(f);f.on("mousedown",this._onNextLevel,this);c.visible=!0;s_bMobile&&!s_bIsIphone||createjs.Tween.get(c).wait(400).to({alpha:1},
500).call(function(){});$(s_oMain).trigger("save_score",[b]);$(s_oMain).trigger("share_event",[b]);s_bMobile&&!s_bIsIphone&&s_oStage.update()};this.lastLevelCompleted=function(){playSound("all_level_completed",1,!1);k.refreshText(TEXT_WIN);m.refreshText(TEXT_WIN);l.refreshText(sprintf(TEXT_SCORE,b));v.refreshText(sprintf(TEXT_SCORE,b));q.x=CANVAS_WIDTH/2-50;q.y=CANVAS_HEIGHT/2+20;c.visible=!0;s_bMobile&&!s_bIsIphone||createjs.Tween.get(c).wait(400).to({alpha:1},500).call(function(){});$(s_oMain).trigger("save_score",
[b]);$(s_oMain).trigger("share_event",[b]);s_bMobile&&!s_bIsIphone&&s_oStage.update()};this._onExit=function(){c.removeAllEventListeners();s_oStage.removeChild(c);s_oGame.onRestart();$(s_oMain).trigger("end_level");$(s_oMain).trigger("show_interlevel_ad");$(s_oMain).trigger("end_session")};this._init(a,e,b);return this}
function CCell(a,e,b,d,c,f,g,k){var m=k,l,v=NONE,w=NONE,q,z,r,x;this._init=function(B,F,p,H,I,A,E,N){z=E;l=null;x=createBitmap(s_oSpriteLibrary.getSprite("background"));x.x=H;x.y=I;x.regX=CELL_WIDTH/2;x.regY=CELL_HEIGHT/2;x.scaleX=x.scaleY=m;A.addChild(x);r=createSprite(B,E,CELL_WIDTH/2*N,CELL_HEIGHT/2*N,CELL_WIDTH*N,CELL_HEIGHT*N);r.x=H;r.y=I;r.scaleX=r.scaleY=m;A.addChild(r);s_bMobile||(r.cursor="pointer");r.on("mousedown",this._onCellClick,this);r.on("pressup",this._releaseForm,this)};this.refreshScale=
function(B,F,p){m=p;x.x=B;x.y=F;x.regX=CELL_WIDTH/2;x.regY=CELL_HEIGHT/2;x.scaleX=x.scaleY=p;r.x=B;r.y=F;r.scaleX=r.scaleY=p};this.changeCellState=function(B,F,p,H,I,A){if("hide"===B)r.alpha=1,!s_bMobile||s_bIsIphone?createjs.Tween.get(r,{override:!0}).to({alpha:0},150).call(function(){r.gotoAndStop(B);z=B;l=F;v=I;w=H;r.rotation=p}):(r.gotoAndStop(B),z=B,l=F,v=I,w=H,r.rotation=p);else if(A&&5!==F&&0!==F){if(r.gotoAndStop(B+F),!s_bMobile||s_bIsIphone){r.alpha=0;createjs.Tween.get(r,{override:!0}).to({alpha:1},
500).call(function(){});q=s_oSpriteLibrary.getSprite("particle");A=new createjs.SpriteSheet({images:[q],framerate:35,frames:{width:PARTICLE_WIDTH,height:PARTICLE_HEIGHT,regX:PARTICLE_WIDTH/2,regY:PARTICLE_HEIGHT/2},animations:{idle:[0,15]}});A=createSprite(A,g,PARTICLE_WIDTH/2,PARTICLE_HEIGHT/2,PARTICLE_WIDTH,PARTICLE_HEIGHT);switch(H){case UP:A.x=d;A.y=c+CELL_HEIGHT/2;break;case DOWN:A.x=d;A.y=c-CELL_HEIGHT/2;break;case LEFT:A.x=d+CELL_WIDTH/2;A.y=c;break;case RIGHT:A.x=d-CELL_WIDTH/2,A.y=c}A.gotoAndPlay("idle");
A.scaleX=A.scaleY=m;s_oStage.addChild(A);createjs.Tween.get(A).to({alpha:0},500).call(function(){s_oStage.addChild(this)})}}else 1===F?this.flowerGrow(F,p,H,I):r.gotoAndStop(B+F);"hide"!==B&&(z=B,l=F,v=I,w=H,r.rotation=p)};this.flowerGrow=function(B,F,p,H){!s_bMobile||s_bIsIphone?r.gotoAndPlay(z+"Growing"):r.gotoAndStop(z+"5");l=B;v=H;w=p;r.rotation=F};this.flowerDwarfing=function(B,F,p,H){!s_bMobile||s_bIsIphone?(r.gotoAndPlay(z+"Dwarfing"),createjs.Tween.get(r,{override:!0}).to({rotation:F},150).call(function(){})):
(r.gotoAndStop(z+"0"),r.rotation=F);l=B;v=H;w=p};this._onCellClick=function(B){s_oGame.onCellClick(B,e,b)};this._releaseForm=function(B){s_oGame.releaseForm(B)};this.getX=function(){return d};this.getY=function(){return c};this.getValue=function(){return z};this.getState=function(){return l};this.getDirection=function(){return v};this.getDirectionNoChange=function(){return w};this.getRotation=function(){return r.rotation};this.unload=function(){r.removeAllEventListeners()};s_oCell=this;this._init(a,
e,b,d,c,f,g,k)}
function CLevelMenu(a){var e,b,d,c,f,g,k=[],m,l,v,w,q=null,z=null;this._init=function(){m=createBitmap(s_oSpriteLibrary.getSprite("bg_game"));m.x=0;m.y=0;s_oStage.addChild(m);var r=s_oSpriteLibrary.getSprite("msg_box");m=createBitmap(r);s_oStage.addChild(m);r=r.width-200;var x=CANVAS_WIDTH/2;(new CTLText(s_oStage,x-r/2,315,r,50,50,"center","#730358",FONT,1,2,2,TEXT_SELECT_LEVEL,!0,!0,!1,!1)).setOutline(4);new CTLText(s_oStage,x-r/2,315,r,50,50,"center","#fff",FONT,1,2,2,TEXT_SELECT_LEVEL,!0,!0,!1,
!1);r=CANVAS_WIDTH/2;x=0;for(var B=50,F=0;F<a.length;F++,x+=100)400<x&&(x=0,B+=100),F<s_iLastLevel?k.push(new CLevelBut(r-200+x,375+B,s_oSpriteLibrary.getSprite("level_sprite"),!0,F+1,s_oStage)):k.push(new CLevelBut(r-200+x,375+B,s_oSpriteLibrary.getSprite("level_sprite"),!1,F+1,s_oStage)),0===F?k[F].addEventListenerWithParams(ON_MOUSE_UP,this._onClickHelp,this,F):k[F].addEventListenerWithParams(ON_MOUSE_UP,this._onClick,this,F),s_bFirstTime=!0;r=s_oSpriteLibrary.getSprite("but_exit");f=CANVAS_WIDTH-
r.height/2-10;g=r.height/2+10;l=new CGfxButton(f,g,r,s_oStage);l.addEventListener(ON_MOUSE_UP,this._onExit,this);d=CANVAS_WIDTH-r.width/2-70;c=r.height/2+10;if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)r=s_oSpriteLibrary.getSprite("audio_icon"),v=new CToggle(d,c,r,s_bAudioActive),v.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this);r=window.document;x=r.documentElement;q=x.requestFullscreen||x.mozRequestFullScreen||x.webkitRequestFullScreen||x.msRequestFullscreen;z=r.exitFullscreen||r.mozCancelFullScreen||
r.webkitExitFullscreen||r.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(q=!1);q&&screenfull.isEnabled&&(r=s_oSpriteLibrary.getSprite("but_fullscreen"),e=r.width/4+10,b=r.height/2+10,w=new CToggle(e,b,r,s_bFullscreen,s_oStage),w.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this));this.refreshButtonPos(s_iOffsetX,s_iOffsetY)};this.unload=function(){for(var r=0;r<a.length;r++)k[r].unload();q&&screenfull.isEnabled&&w.unload();s_oLevelMenu=null;s_oStage.removeAllChildren()};this.refreshButtonPos=
function(r,x){l.setPosition(f-r,x+g);!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||v.setPosition(d-r,x+c);q&&screenfull.isEnabled&&w.setPosition(e+r,b+x)};this._onNumModeToggle=function(r){r===NUM_ACTIVE?((void 0).setActive(!1),(void 0).setActive(!0)):((void 0).setActive(!0),(void 0).setActive(!1))};this._onAudioToggle=function(){createjs.Sound.setMute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this._onClick=function(r){k[r].ifClickable()&&(s_oLevelMenu.unload(),s_oMain.gotoGame(r,0))};this._onClickHelp=
function(r){k[r].ifClickable()&&(s_oLevelMenu.unload(),s_oMain.gotoHelp(r))};this._onExit=function(){s_oLevelMenu.unload();s_oMain.gotoMenu();$(s_oMain).trigger("end_level");$(s_oMain).trigger("show_interlevel_ad");$(s_oMain).trigger("end_session")};this.resetFullscreenBut=function(){q&&screenfull.isEnabled&&w.setActive(s_bFullscreen)};this._onFullscreenRelease=function(){s_bFullscreen?z.call(window.document):q.call(window.document.documentElement);sizeHandler()};s_oLevelMenu=this;this._init()}
var s_oLevelMenu=null;
function CLevelBut(a,e,b,d,c,f){var g,k,m,l=[],v=[],w,q;this._init=function(z,r,x,B,F){k=[];m=[];q=new createjs.Container;q.x=z;q.y=r;F.addChild(q);z=new createjs.SpriteSheet({images:[x],frames:{width:x.width/2,height:x.height,regX:x.width/2/2,regY:x.height/2},animations:{state_true:[0],state_false:[1]}});g=B;w=createSprite(z,"state_"+g,x.width/2/2,x.height/2,x.width/2,x.height);q.mouseEnabled=B;w.stop();s_bMobile||(q.cursor="pointer");q.addChild(w);l.push(w);x=B?new createjs.Text(c,"42px "+FONT,
"#79035c"):new createjs.Text(c,"42px "+FONT,"#444444");x.x=0;x.y=10;x.textAlign="center";x.textBaseline="alphabetic";x.lineWidth=200;x.outline=4;q.addChild(x);x=new createjs.Text(c,"42px "+FONT,"#ffffff");x.x=0;x.y=10;x.textAlign="center";x.textBaseline="alphabetic";x.lineWidth=200;q.addChild(x);this._initListener()};this.unload=function(){q.removeAllEventListeners();f.removeChild(q)};this._initListener=function(){q.on("mousedown",this.buttonDown);q.on("pressup",this.buttonRelease)};this.viewBut=
function(z){f.addChild(z)};this.addEventListener=function(z,r,x){k[z]=r;m[z]=x};this.addEventListenerWithParams=function(z,r,x,B){k[z]=r;m[z]=x;v=B};this.ifClickable=function(){return!0===q.mouseEnabled?1:0};this.setActive=function(z,r){g=r;l[z].gotoAndStop("state_"+g);l[z].mouseEnabled=!0};this.buttonRelease=function(){q.scaleX=1;q.scaleY=1;g=!g;w.gotoAndStop("state_"+g);k[ON_MOUSE_UP]&&k[ON_MOUSE_UP].call(m[ON_MOUSE_UP],v)};this.buttonDown=function(){q.scaleX=.9;q.scaleY=.9;playSound("click",1,
!1);k[ON_MOUSE_DOWN]&&k[ON_MOUSE_DOWN].call(m[ON_MOUSE_DOWN],v)};this.setPosition=function(z,r){q.x=z;q.y=r};this.setVisible=function(z){q.visible=z};this._init(a,e,b,d,f)}
function CHelp(a){var e,b,d,c;this._init=function(f){b=new createjs.Container;e=createBitmap(s_oSpriteLibrary.getSprite("bg_game"));e.x=0;e.y=0;b.addChild(e);f=s_oSpriteLibrary.getSprite("bg_help");d=createBitmap(f);d.x=0;d.y=0;b.addChild(d);var g=f.width-200,k=50,m=CANVAS_WIDTH/2,l=CANVAS_HEIGHT/2-250;(new CTLText(b,m-g/2,l-k/2,g,k,50,"center","#730358",FONT,1,2,2,TEXT_HELP_TITLE,!0,!0,!1,!1)).setOutline(4);new CTLText(b,m-g/2,l-k/2,g,k,50,"center","#ffd800",FONT,1,2,2,TEXT_HELP_TITLE,!0,!0,!1,!1);
g=f.width-200;k=150;m=CANVAS_WIDTH/2;l=CANVAS_HEIGHT/2+110;(new CTLText(b,m-g/2,l-k/2,g,k,38,"center","#730358",FONT,1.1,2,2,TEXT_HELP,!0,!0,!0,!1)).setOutline(4);new CTLText(b,m-g/2,l-k/2,g,k,38,"center","#fff",FONT,1.1,2,2,TEXT_HELP,!0,!0,!0,!1);f=s_oSpriteLibrary.getSprite("but_play_small");c=new CGfxButton(CANVAS_WIDTH/2+195,CANVAS_HEIGHT-230,f,b);c.addEventListener(ON_MOUSE_UP,this._onExit,this);b.alpha=0;s_oStage.addChild(b);createjs.Tween.get(b).to({alpha:1},500).call(function(){})};this._onExit=
function(){c.unload();s_oStage.removeChild(b);s_oMain.gotoGame(a,0)};this._init(a);return this}function CScrollingBg(a,e){var b,d;this._init=function(c,f){b=c;d=createBitmap(b);s_oStage.addChild(d);d.x=f;d.y=175;d.regX=0};this.move=function(){d.x++;d.x>CANVAS_WIDTH&&(d.x=-SCROLLING_BG_WIDTH)};this._init(a,e)}
function CCreditsPanel(){var a,e,b,d,c,f;this._init=function(){f=new createjs.Container;s_oStage.addChild(f);var g=createBitmap(s_oSpriteLibrary.getSprite("bg_menu"));f.addChild(g);d=new createjs.Shape;d.graphics.beginFill("rgba(0,0,0,0.7)").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);f.addChild(d);g=s_oSpriteLibrary.getSprite("msg_box");e=createBitmap(g);e.x=CANVAS_WIDTH/2;e.y=CANVAS_HEIGHT/2;e.regX=g.width/2;e.regY=g.height/2;f.addChild(e);c=new createjs.Shape;c.graphics.beginFill("#0f0f0f").drawRect(0,
0,CANVAS_WIDTH,CANVAS_HEIGHT);c.alpha=.01;c.on("click",this._onLogoButRelease);f.addChild(c);g=s_oSpriteLibrary.getSprite("but_exit");a=CANVAS_WIDTH/2+220;b=new CGfxButton(a,334,g,f);b.addEventListener(ON_MOUSE_UP,this.unload,this);g=350;var k=34,m=CANVAS_WIDTH/2;new CTLText(f,m-g/2,420-k/2,g,k,34,"center","#fff",FONT,1,2,2,TEXT_DEVELOPED,!0,!0,!1,!1);g=s_oSpriteLibrary.getSprite("ctl_logo");k=createBitmap(g);k.regX=g.width/2;k.regY=g.height/2;k.x=CANVAS_WIDTH/2;k.y=CANVAS_HEIGHT/2;f.addChild(k);
g=350;k=34;m=CANVAS_WIDTH/2;new CTLText(f,m-g/2,540-k/2,g,k,34,"center","#fff",FONT,1,2,2,"www.codethislab.com",!0,!0,!1,!1)};this.unload=function(){c.removeAllEventListeners();b.unload();b=null;s_oStage.removeChild(f)};this._onLogoButRelease=function(){window.open("http://www.codethislab.com/index.php?&l=en")};this._init()}var LOCALSTORAGE_LAST_LEVEL="last_level",LOCALSTORAGE_SCORE="scores",s_iLastLevel=1,s_aScore=[];
function CLocalStorage(a){var e=!0;this._init=function(b){b=window.localStorage.getItem(b);this.resetAllData();null!==b&&void 0!==b&&this.loadData()};this.isDirty=function(){return 1<s_iLastLevel?!0:!1};this.isUsed=function(){try{window.localStorage.setItem("ls_available","ok")}catch(b){e=!1}return e};this.resetAllData=function(){s_iLastLevel=1;s_aScore=[];for(var b=0;b<NUM_LEVELS;b++)s_aScore[b]=0};this.deleteData=function(){window.localStorage.removeItem(a);s_oLocalStorage.resetAllData()};this.saveData=
function(){var b={};b[LOCALSTORAGE_LAST_LEVEL]=s_iLastLevel;b[LOCALSTORAGE_SCORE]=s_aScore;window.localStorage.setItem(a,JSON.stringify(b))};this.loadData=function(){var b=JSON.parse(window.localStorage.getItem(a));s_iLastLevel=parseInt(b[LOCALSTORAGE_LAST_LEVEL]);b=b[LOCALSTORAGE_SCORE];s_aScore=[];for(var d=0;d<b.length;d++)s_aScore[d]=parseInt(b[d])};this.getTotalScore=function(){for(var b=0,d=0;d<NUM_LEVELS;d++)b+=s_aScore[d];return b};this.getPartialScore=function(b){for(var d=0,c=0;c<b;c++)d+=
s_aScore[c];return d};this._init(a);s_oLocalStorage=this}var s_oLocalStorage;
function CMsgBox(){var a,e,b,d,c,f,g;this._init=function(){b=new createjs.Container;b.on("mousedown",function(){});s_oStage.addChild(b);var m=s_oSpriteLibrary.getSprite("msg_box");e=createBitmap(m);b.addChild(e);m=m.width-200;var l=CANVAS_WIDTH/2,v=CANVAS_HEIGHT/2-40;d=new CTLText(b,l-m/2,v-60,m,120,30,"center","#730358",FONT,1.1,2,2," ",!0,!0,!0,!1);d.setOutline(4);c=new CTLText(b,l-m/2,v-60,m,120,30,"center","#fff",FONT,1.1,2,2," ",!0,!0,!0,!1);m=s_oSpriteLibrary.getSprite("but_exit");g=new CGfxButton(CANVAS_WIDTH/
2+210,340,m,b);g.addEventListener(ON_MOUSE_UP,this._onExit,this);m=s_oSpriteLibrary.getSprite("but_next");f=new CGfxButton(CANVAS_WIDTH/2,570,m,b);f.addEventListener(ON_MOUSE_UP,this._onConfirm,this)};this.unload=function(){b.removeAllEventListeners();s_oStage.removeChild(b)};this.setMessage=function(m){d.refreshText(m);c.refreshText(m)};this.disableConfirm=function(){f.setVisible(!1)};this.setConfirm=function(m){a=m};this._onConfirm=function(){a&&a()};this._onExit=function(){k.unload()};this._init();
var k=this;return this}
LEVELS_INFO=[{dim:5,maxMoves:20,points:[{start_r:0,start_c:0,end_r:1,end_c:1,color:"orange"},{start_r:2,start_c:1,end_r:4,end_c:4,color:"green"},{start_r:0,start_c:4,end_r:2,end_c:3,color:"yellow"},{start_r:1,start_c:4,end_r:3,end_c:3,color:"red"},{start_r:0,start_c:1,end_r:3,end_c:1,color:"blue"}]},{dim:5,maxMoves:20,points:[{start_r:0,start_c:0,end_r:1,end_c:3,color:"orange"},{start_r:1,start_c:0,end_r:2,end_c:3,color:"green"},{start_r:2,start_c:0,end_r:4,end_c:4,color:"yellow"},{start_r:2,start_c:1,
end_r:3,end_c:2,color:"red"},{start_r:0,start_c:4,end_r:3,end_c:3,color:"blue"}]},{dim:6,maxMoves:30,points:[{start_r:0,start_c:1,end_r:3,end_c:5,color:"orange"},{start_r:1,start_c:4,end_r:3,end_c:3,color:"green"},{start_r:2,start_c:3,end_r:2,end_c:5,color:"yellow"},{start_r:2,start_c:1,end_r:3,end_c:2,color:"red"},{start_r:0,start_c:2,end_r:1,end_c:1,color:"blue"},{start_r:3,start_c:1,end_r:4,end_c:4,color:"heavenly"}]},{dim:6,maxMoves:30,points:[{start_r:0,start_c:0,end_r:2,end_c:3,color:"orange"},
{start_r:0,start_c:5,end_r:5,end_c:1,color:"green"},{start_r:5,start_c:0,end_r:3,end_c:1,color:"yellow"},{start_r:2,start_c:0,end_r:1,end_c:4,color:"red"},{start_r:0,start_c:1,end_r:0,end_c:4,color:"blue"},{start_r:5,start_c:5,end_r:5,end_c:2,color:"heavenly"}]},{dim:7,maxMoves:44,points:[{start_r:0,start_c:2,end_r:4,end_c:5,color:"orange"},{start_r:1,start_c:3,end_r:5,end_c:1,color:"green"},{start_r:1,start_c:0,end_r:5,end_c:2,color:"yellow"},{start_r:0,start_c:0,end_r:5,end_c:5,color:"red"},{start_r:0,
start_c:3,end_r:0,end_c:6,color:"blue"}]},{dim:7,maxMoves:43,points:[{start_r:1,start_c:5,end_r:4,end_c:1,color:"orange"},{start_r:0,start_c:3,end_r:6,end_c:3,color:"green"},{start_r:5,start_c:3,end_r:6,end_c:6,color:"yellow"},{start_r:2,start_c:2,end_r:5,end_c:1,color:"red"},{start_r:1,start_c:6,end_r:3,end_c:4,color:"blue"},{start_r:2,start_c:6,end_r:5,end_c:5,color:"heavenly"}]},{dim:8,maxMoves:56,points:[{start_r:1,start_c:1,end_r:6,end_c:5,color:"orange"},{start_r:0,start_c:0,end_r:1,end_c:5,
color:"green"},{start_r:1,start_c:6,end_r:2,end_c:4,color:"yellow"},{start_r:0,start_c:5,end_r:6,end_c:6,color:"red"},{start_r:1,start_c:0,end_r:2,end_c:2,color:"blue"},{start_r:4,start_c:7,end_r:5,end_c:3,color:"heavenly"},{start_r:6,start_c:1,end_r:6,end_c:4,color:"violet"},{start_r:7,start_c:0,end_r:4,end_c:1,color:"pink"}]},{dim:8,maxMoves:57,points:[{start_r:1,start_c:2,end_r:4,end_c:6,color:"orange"},{start_r:0,start_c:4,end_r:2,end_c:5,color:"green"},{start_r:6,start_c:1,end_r:6,end_c:7,color:"yellow"},
{start_r:4,start_c:4,end_r:6,end_c:6,color:"red"},{start_r:0,start_c:0,end_r:2,end_c:1,color:"blue"},{start_r:6,start_c:0,end_r:6,end_c:2,color:"heavenly"},{start_r:5,start_c:0,end_r:4,end_c:3,color:"violet"}]},{dim:9,maxMoves:71,points:[{start_r:0,start_c:2,end_r:3,end_c:1,color:"orange"},{start_r:3,start_c:4,end_r:7,end_c:1,color:"green"},{start_r:5,start_c:0,end_r:8,end_c:2,color:"yellow"},{start_r:0,start_c:0,end_r:3,end_c:2,color:"red"},{start_r:2,start_c:2,end_r:6,end_c:3,color:"blue"},{start_r:6,
start_c:2,end_r:6,end_c:7,color:"heavenly"},{start_r:5,start_c:5,end_r:7,end_c:4,color:"violet"},{start_r:1,start_c:2,end_r:8,end_c:7,color:"pink"},{start_r:1,start_c:4,end_r:4,end_c:6,color:"orangeyellow"},{start_r:1,start_c:7,end_r:6,end_c:6,color:"purple"}]},{dim:9,maxMoves:72,points:[{start_r:2,start_c:3,end_r:5,end_c:8,color:"orange"},{start_r:4,start_c:1,end_r:7,end_c:7,color:"green"},{start_r:0,start_c:2,end_r:5,end_c:4,color:"yellow"},{start_r:4,start_c:0,end_r:6,end_c:1,color:"red"},{start_r:8,
start_c:0,end_r:5,end_c:6,color:"blue"},{start_r:1,start_c:1,end_r:2,end_c:4,color:"heavenly"},{start_r:1,start_c:7,end_r:4,end_c:8,color:"violet"},{start_r:1,start_c:8,end_r:3,end_c:7,color:"pink"},{start_r:0,start_c:1,end_r:2,end_c:2,color:"purple"}]}];
CTLText.prototype={constructor:CTLText,__autofit:function(){if(this._bFitText){for(var a=this._iFontSize;(this._oText.getBounds().height>this._iHeight-2*this._iPaddingV||this._oText.getBounds().width>this._iWidth-2*this._iPaddingH)&&!(a--,this._oText.font=a+"px "+this._szFont,this._oText.lineHeight=Math.round(a*this._fLineHeightFactor),this.__updateY(),this.__verticalAlign(),8>a););this._iFontSize=a}},__verticalAlign:function(){if(this._bVerticalAlign){var a=this._oText.getBounds().height;this._oText.y-=
(a-this._iHeight)/2+this._iPaddingV}},__updateY:function(){this._oText.y=this._y+this._iPaddingV;switch(this._oText.textBaseline){case "middle":this._oText.y+=this._oText.lineHeight/2+(this._iFontSize*this._fLineHeightFactor-this._iFontSize)}},__createText:function(a){this._bDebug&&(this._oDebugShape=new createjs.Shape,this._oDebugShape.graphics.beginFill("rgba(255,0,0,0.5)").drawRect(this._x,this._y,this._iWidth,this._iHeight),this._oContainer.addChild(this._oDebugShape));this._oText=new createjs.Text(a,
this._iFontSize+"px "+this._szFont,this._szColor);this._oText.textBaseline="middle";this._oText.lineHeight=Math.round(this._iFontSize*this._fLineHeightFactor);this._oText.textAlign=this._szAlign;this._oText.lineWidth=this._bMultiline?this._iWidth-2*this._iPaddingH:null;switch(this._szAlign){case "center":this._oText.x=this._x+this._iWidth/2;break;case "left":this._oText.x=this._x+this._iPaddingH;break;case "right":this._oText.x=this._x+this._iWidth-this._iPaddingH}this._oContainer.addChild(this._oText);
this.refreshText(a)},setVerticalAlign:function(a){this._bVerticalAlign=a},setOutline:function(a){null!==this._oText&&(this._oText.outline=a)},setShadow:function(a,e,b,d){null!==this._oText&&(this._oText.shadow=new createjs.Shadow(a,e,b,d))},setColor:function(a){this._oText.color=a},setAlpha:function(a){this._oText.alpha=a},setVisible:function(a){this._oText.visible=a},setX:function(a){this._x=this._oText.x=a},setY:function(a){this._y=this._oText.y=a},removeTweens:function(){createjs.Tween.removeTweens(this._oText)},
getText:function(){return this._oText},getX:function(){return this._x},getY:function(){return this._y},getFontSize:function(){return this._iFontSize},refreshText:function(a){""===a&&(a=" ");null===this._oText&&this.__createText(a);this._oText.text=a;this._oText.font=this._iFontSize+"px "+this._szFont;this._oText.lineHeight=Math.round(this._iFontSize*this._fLineHeightFactor);this.__autofit();this.__updateY();this.__verticalAlign()}};
function CTLText(a,e,b,d,c,f,g,k,m,l,v,w,q,z,r,x,B){this._oContainer=a;this._x=e;this._y=b;this._iWidth=d;this._iHeight=c;this._bMultiline=x;this._iFontSize=f;this._szAlign=g;this._szColor=k;this._szFont=m;this._iPaddingH=v;this._iPaddingV=w;this._bVerticalAlign=r;this._bFitText=z;this._bDebug=B;this._oDebugShape=null;this._fLineHeightFactor=l;this._oText=null;q&&this.__createText(q)}
!function(){function a(c){var f=c;if(d[f])f=d[f];else{for(var g=f,k,m=[],l=0;g;){if(null!==(k=b.text.exec(g)))m.push(k[0]);else if(null!==(k=b.modulo.exec(g)))m.push("%");else if(null!==(k=b.placeholder.exec(g))){if(k[2]){l|=1;var v=[],w=k[2],q;if(null!==(q=b.key.exec(w)))for(v.push(q[1]);""!==(w=w.substring(q[0].length));)if(null!==(q=b.key_access.exec(w)))v.push(q[1]);else if(null!==(q=b.index_access.exec(w)))v.push(q[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");
else throw new SyntaxError("[sprintf] failed to parse named argument key");k[2]=v}else l|=2;if(3===l)throw Error("[sprintf] mixing positional and named placeholders is not (yet) supported");m.push({placeholder:k[0],param_no:k[1],keys:k[2],sign:k[3],pad_char:k[4],align:k[5],width:k[6],precision:k[7],type:k[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");g=g.substring(k[0].length)}f=d[f]=m}g=arguments;k=1;m=f.length;v="";var z,r;for(w=0;w<m;w++)if("string"===typeof f[w])v+=f[w];
else if("object"===typeof f[w]){q=f[w];if(q.keys)for(l=g[k],z=0;z<q.keys.length;z++){if(void 0==l)throw Error(a('[sprintf] Cannot access property "%s" of undefined value "%s"',q.keys[z],q.keys[z-1]));l=l[q.keys[z]]}else l=q.param_no?g[q.param_no]:g[k++];b.not_type.test(q.type)&&b.not_primitive.test(q.type)&&l instanceof Function&&(l=l());if(b.numeric_arg.test(q.type)&&"number"!==typeof l&&isNaN(l))throw new TypeError(a("[sprintf] expecting number but found %T",l));b.number.test(q.type)&&(r=0<=l);
switch(q.type){case "b":l=parseInt(l,10).toString(2);break;case "c":l=String.fromCharCode(parseInt(l,10));break;case "d":case "i":l=parseInt(l,10);break;case "j":l=JSON.stringify(l,null,q.width?parseInt(q.width):0);break;case "e":l=q.precision?parseFloat(l).toExponential(q.precision):parseFloat(l).toExponential();break;case "f":l=q.precision?parseFloat(l).toFixed(q.precision):parseFloat(l);break;case "g":l=q.precision?String(Number(l.toPrecision(q.precision))):parseFloat(l);break;case "o":l=(parseInt(l,
10)>>>0).toString(8);break;case "s":l=String(l);l=q.precision?l.substring(0,q.precision):l;break;case "t":l=String(!!l);l=q.precision?l.substring(0,q.precision):l;break;case "T":l=Object.prototype.toString.call(l).slice(8,-1).toLowerCase();l=q.precision?l.substring(0,q.precision):l;break;case "u":l=parseInt(l,10)>>>0;break;case "v":l=l.valueOf();l=q.precision?l.substring(0,q.precision):l;break;case "x":l=(parseInt(l,10)>>>0).toString(16);break;case "X":l=(parseInt(l,10)>>>0).toString(16).toUpperCase()}if(b.json.test(q.type))v+=
l;else{if(!b.number.test(q.type)||r&&!q.sign)var x="";else x=r?"+":"-",l=l.toString().replace(b.sign,"");z=q.pad_char?"0"===q.pad_char?"0":q.pad_char.charAt(1):" ";var B=q.width-(x+l).length;B=q.width?0<B?z.repeat(B):"":"";v+=q.align?x+l+B:"0"===z?x+B+l:B+x+l}}return v}function e(c,f){return a.apply(null,[c].concat(f||[]))}var b={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,
placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/},d=Object.create(null);"undefined"!==typeof exports&&(exports.sprintf=a,exports.vsprintf=e);"undefined"!==typeof window&&(window.sprintf=a,window.vsprintf=e,"function"===typeof define&&define.amd&&define(function(){return{sprintf:a,vsprintf:e}}))}();